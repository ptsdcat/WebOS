{"file_contents":{"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"replit.md":{"content":"# WebOS - Modern Desktop Operating System\n\n## Overview\n\nWebOS is a comprehensive web-based desktop operating system that emulates a complete Linux desktop environment in the browser. It features a full-featured window manager, file system, application ecosystem, user management, and system utilities. The project simulates a real desktop OS experience with draggable windows, application icons, workspaces, terminal emulation, and a complete suite of productivity and entertainment applications.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n- **Framework**: React 18 with TypeScript for type-safe component development\n- **Routing**: Wouter library for lightweight client-side routing with dynamic route handling\n- **UI Components**: Shadcn/ui component library built on Radix UI primitives with Tailwind CSS for consistent styling\n- **State Management**: React hooks-based local state with localStorage persistence for user data and application settings\n- **Window Management**: Custom window manager with drag-and-drop, resizing, minimizing, maximizing, and multi-workspace support\n- **Theme System**: CSS variables-based theming supporting dark/light modes and custom color palettes\n- **Animation**: Framer Motion for smooth animations and transitions throughout the interface\n\n### Backend Architecture\n- **Server Framework**: Express.js with TypeScript providing RESTful API endpoints\n- **Middleware**: Custom request logging, error handling, and CORS configuration\n- **File System**: Mock file system implementation with localStorage persistence for demo purposes\n- **Proxy Services**: Advanced proxy utilities with rate limiting and request queuing for external API integration\n- **WebSocket Support**: WebSocket server for real-time system monitoring and notifications\n\n### Database Layer\n- **Database**: PostgreSQL with Neon serverless hosting for scalability\n- **ORM**: Drizzle ORM providing type-safe database operations and schema management\n- **Schema Design**: Normalized tables for users, files, and OS settings with proper foreign key relationships\n- **Connection Management**: Connection pooling through Neon's serverless PostgreSQL adapter\n\n### Application Ecosystem\nThe system includes a comprehensive suite of applications organized by category:\n\n**Core System Apps**:\n- Terminal emulator with command history and real-time system monitoring\n- File manager with grid/list views, search, and file operations\n- Settings app for system configuration and user preferences\n- Account manager for multi-user support\n\n**Productivity Suite**:\n- Text editor with syntax highlighting\n- Calculator with advanced mathematical functions\n- Calendar with event management\n- Email client with inbox and compose functionality\n- Download manager with progress tracking\n\n**Development Tools**:\n- Package manager (Arch-style) for software installation\n- Developer tools with console, network, and system monitoring\n- Color palette editor for theme customization\n\n**Entertainment & Media**:\n- Web browser with tabs, bookmarks, and history\n- Games including Call of Duty simulator and various mini-games\n- Achievement system with unlockable rewards\n\n### Window Management System\n- **Hyprland-inspired Tiling**: Automatic window arrangement with smart positioning\n- **Multi-workspace Support**: 5 virtual desktops with keyboard shortcuts (Alt+1-5)\n- **Window States**: Support for minimized, maximized, and custom-sized windows\n- **Z-index Management**: Proper window layering and focus management\n- **Responsive Design**: Adaptive window sizing based on screen dimensions\n\n### Storage Architecture\n- **Local Storage**: Client-side persistence for user preferences, file system, and application data\n- **Database Storage**: Server-side storage for user accounts and system-wide data\n- **File System Simulation**: Complete file system hierarchy with folders, files, and permissions\n- **Data Synchronization**: Automatic sync between localStorage and database when available\n\n### Security Features\n- **Multi-user Support**: User authentication with session management\n- **Permission System**: File access controls and user privilege levels\n- **Data Isolation**: User data separation and privacy protection\n- **Input Validation**: Comprehensive input sanitization and validation\n\n## External Dependencies\n\n### Core Framework Dependencies\n- **React & TypeScript**: Frontend framework with type safety\n- **Express.js**: Backend web server framework\n- **Vite**: Fast build tool and development server with HMR\n\n### UI Component Libraries\n- **Radix UI**: Accessible, unstyled UI primitives for complex components\n- **Shadcn/ui**: Pre-built component library based on Radix UI\n- **Tailwind CSS**: Utility-first CSS framework for styling\n- **Framer Motion**: Animation library for smooth transitions\n\n### Database & ORM\n- **PostgreSQL**: Primary database for persistent data storage\n- **Neon Database**: Serverless PostgreSQL hosting platform\n- **Drizzle ORM**: Type-safe database toolkit and query builder\n- **Drizzle Kit**: Database migration and schema management tool\n\n### Development Tools\n- **TypeScript**: Static type checking for JavaScript\n- **ESBuild**: Fast JavaScript bundler for production builds\n- **TSX**: TypeScript execution environment for development\n\n### External APIs\n- **YouTube Data API**: For video content in media applications\n- **Weather APIs**: Real-time weather data integration\n- **Cryptocurrency APIs**: Live crypto price tracking\n- **News APIs**: Current news feed integration\n\n### Utility Libraries\n- **Wouter**: Minimalist routing library for React\n- **React Query**: Data fetching and caching library\n- **Date-fns**: Date manipulation utility library\n- **React Hook Form**: Form handling with validation\n- **Zod**: Runtime type validation and parsing\n\n### Audio & Media\n- **Web Audio API**: System sounds and notification audio\n- **Canvas API**: Graphics rendering for games and visualizations\n- **WebSocket API**: Real-time communication for system monitoring\n\nThe architecture is designed to be modular and extensible, allowing for easy addition of new applications and features while maintaining performance and user experience consistency across the entire desktop environment.","size_bytes":6289},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \"var(--radius)\",\n        md: \"calc(var(--radius) - 2px)\",\n        sm: \"calc(var(--radius) - 4px)\",\n      },\n      colors: {\n        background: \"hsl(var(--background))\",\n        foreground: \"hsl(var(--foreground))\",\n        card: {\n          DEFAULT: \"hsl(var(--card))\",\n          foreground: \"hsl(var(--card-foreground))\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover))\",\n          foreground: \"hsl(var(--popover-foreground))\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary))\",\n          foreground: \"hsl(var(--primary-foreground))\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary))\",\n          foreground: \"hsl(var(--secondary-foreground))\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted))\",\n          foreground: \"hsl(var(--muted-foreground))\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent))\",\n          foreground: \"hsl(var(--accent-foreground))\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive))\",\n          foreground: \"hsl(var(--destructive-foreground))\",\n        },\n        border: \"hsl(var(--border))\",\n        input: \"hsl(var(--input))\",\n        ring: \"hsl(var(--ring))\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1))\",\n          \"2\": \"hsl(var(--chart-2))\",\n          \"3\": \"hsl(var(--chart-3))\",\n          \"4\": \"hsl(var(--chart-4))\",\n          \"5\": \"hsl(var(--chart-5))\",\n        },\n        sidebar: {\n          DEFAULT: \"hsl(var(--sidebar-background))\",\n          foreground: \"hsl(var(--sidebar-foreground))\",\n          primary: \"hsl(var(--sidebar-primary))\",\n          \"primary-foreground\": \"hsl(var(--sidebar-primary-foreground))\",\n          accent: \"hsl(var(--sidebar-accent))\",\n          \"accent-foreground\": \"hsl(var(--sidebar-accent-foreground))\",\n          border: \"hsl(var(--sidebar-border))\",\n          ring: \"hsl(var(--sidebar-ring))\",\n        },\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: {\n            height: \"0\",\n          },\n          to: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n        },\n        \"accordion-up\": {\n          from: {\n            height: \"var(--radix-accordion-content-height)\",\n          },\n          to: {\n            height: \"0\",\n          },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":2787},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n});\n","size_bytes":894},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });","size_bytes":482},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\napp.use(express.json());\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"…\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on port 5000\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = 5000;\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":1921},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertUserSchema, insertFileSchema, insertOsSettingsSchema } from \"@shared/schema\";\nimport { youtubeService } from \"./youtube\";\nimport { promisify } from \"util\";\nimport zlib from \"zlib\";\nimport { WebSocketServer } from \"ws\";\n\n// Advanced proxy utilities\nclass RequestQueue {\n  private queue: Array<() => Promise<void>> = [];\n  private processing = false;\n  private maxConcurrent = 5;\n  private currentCount = 0;\n  private rateLimits = new Map<string, { count: number; resetTime: number }>();\n\n  async add<T>(domain: string, request: () => Promise<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n      this.queue.push(async () => {\n        try {\n          // Check rate limits\n          const now = Date.now();\n          const rateLimit = this.rateLimits.get(domain);\n          \n          if (rateLimit && rateLimit.count >= 50 && now < rateLimit.resetTime) {\n            // Wait before retry\n            await new Promise(resolve => setTimeout(resolve, Math.min(1000 * Math.pow(2, rateLimit.count - 50), 30000)));\n          }\n          \n          const result = await request();\n          \n          // Update rate limit tracking\n          const currentLimit = this.rateLimits.get(domain) || { count: 0, resetTime: now + 60000 };\n          this.rateLimits.set(domain, {\n            count: now > currentLimit.resetTime ? 1 : currentLimit.count + 1,\n            resetTime: now > currentLimit.resetTime ? now + 60000 : currentLimit.resetTime\n          });\n          \n          resolve(result);\n        } catch (error) {\n          reject(error);\n        } finally {\n          this.currentCount--;\n          this.processQueue();\n        }\n      });\n      \n      this.processQueue();\n    });\n  }\n\n  private async processQueue() {\n    if (this.processing || this.currentCount >= this.maxConcurrent || this.queue.length === 0) {\n      return;\n    }\n\n    this.processing = true;\n    while (this.queue.length > 0 && this.currentCount < this.maxConcurrent) {\n      const request = this.queue.shift();\n      if (request) {\n        this.currentCount++;\n        request().catch(() => {}); // Errors handled in request wrapper\n      }\n    }\n    this.processing = false;\n  }\n}\n\n// Content cache with compression\nclass ContentCache {\n  private cache = new Map<string, { content: Buffer; contentType: string; timestamp: number; compressed: boolean }>();\n  private maxAge = 5 * 60 * 1000; // 5 minutes\n  private maxSize = 100; // Maximum cached items\n\n  async get(key: string): Promise<{ content: Buffer; contentType: string } | null> {\n    const cached = this.cache.get(key);\n    if (!cached || Date.now() - cached.timestamp > this.maxAge) {\n      this.cache.delete(key);\n      return null;\n    }\n    \n    return {\n      content: cached.compressed ? await promisify(zlib.gunzip)(cached.content) : cached.content,\n      contentType: cached.contentType\n    };\n  }\n\n  async set(key: string, content: Buffer, contentType: string) {\n    if (this.cache.size >= this.maxSize) {\n      // Remove oldest entries\n      const entries = Array.from(this.cache.entries()).sort((a, b) => a[1].timestamp - b[1].timestamp);\n      for (let i = 0; i < 10; i++) {\n        this.cache.delete(entries[i][0]);\n      }\n    }\n\n    // Compress content if larger than 1KB\n    const shouldCompress = content.length > 1024;\n    const finalContent = shouldCompress ? await promisify(zlib.gzip)(content) : content;\n    \n    this.cache.set(key, {\n      content: finalContent,\n      contentType,\n      timestamp: Date.now(),\n      compressed: shouldCompress\n    });\n  }\n}\n\n// User agent rotation\nconst userAgents = [\n  'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n  'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n  'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/121.0',\n  'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n  'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.1 Safari/605.1.15'\n];\n\nconst getRandomUserAgent = () => userAgents[Math.floor(Math.random() * userAgents.length)];\n\n// Global instances\nconst requestQueue = new RequestQueue();\nconst contentCache = new ContentCache();\n\n// Content filtering\nconst adBlockPatterns = [\n  /doubleclick\\.net/,\n  /googlesyndication\\.com/,\n  /googletagmanager\\.com/,\n  /facebook\\.com\\/tr/,\n  /analytics\\.google\\.com/,\n  /googleadservices\\.com/,\n  /amazon-adsystem\\.com/,\n  /ads\\./,\n  /adsystem\\./\n];\n\nconst filterContent = (html: string, enableAdBlock: boolean = true) => {\n  if (!enableAdBlock) return html;\n  \n  // Remove ad-related scripts and elements\n  return html\n    .replace(/<script[^>]*src[^>]*(?:doubleclick|googlesyndication|googletagmanager|facebook\\.com\\/tr)[^>]*><\\/script>/gi, '')\n    .replace(/<iframe[^>]*src[^>]*(?:doubleclick|googlesyndication|googleadservices)[^>]*><\\/iframe>/gi, '')\n    .replace(/<div[^>]*class[^>]*(?:ad-|advertisement|google-ad)[^>]*>.*?<\\/div>/gi, '')\n    .replace(/<ins[^>]*class[^>]*adsbygoogle[^>]*>.*?<\\/ins>/gi, '');\n};\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Health check endpoint\n  app.get(\"/api/health\", (req, res) => {\n    res.json({ status: \"ok\" });\n  });\n\n  // User routes\n  app.post(\"/api/users\", async (req, res) => {\n    try {\n      const user = insertUserSchema.parse(req.body);\n      const newUser = await storage.createUser(user);\n      res.json(newUser);\n    } catch (error) {\n      res.status(400).json({ error: \"Invalid user data\" });\n    }\n  });\n\n  app.get(\"/api/users/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const user = await storage.getUser(id);\n      if (!user) {\n        return res.status(404).json({ error: \"User not found\" });\n      }\n      res.json(user);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch user\" });\n    }\n  });\n\n  // Enhanced proxy system for different websites and content types\n  app.get('/api/proxy', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const proxyType = req.query.type as string || 'html'; // html, json, image, etc.\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      // Validate URL format\n      let url: URL;\n      try {\n        url = new URL(targetUrl);\n      } catch {\n        return res.status(400).json({ error: 'Invalid URL format' });\n      }\n\n      // Security: Only allow HTTP/HTTPS\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      // Set up timeout controller\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 15000); // 15 second timeout\n\n      // Enhanced headers for better compatibility\n      const headers: Record<string, string> = {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Accept-Language': 'en-US,en;q=0.9',\n        'Cache-Control': 'no-cache',\n        'Pragma': 'no-cache',\n        'Connection': 'keep-alive',\n        'Sec-Fetch-Dest': 'document',\n        'Sec-Fetch-Mode': 'navigate',\n        'Sec-Fetch-Site': 'none',\n        'Upgrade-Insecure-Requests': '1'\n      };\n\n      // Set Accept header based on proxy type\n      switch (proxyType) {\n        case 'json':\n          headers['Accept'] = 'application/json, text/plain, */*';\n          break;\n        case 'image':\n          headers['Accept'] = 'image/webp,image/apng,image/*,*/*;q=0.8';\n          break;\n        case 'video':\n          headers['Accept'] = 'video/webm,video/ogg,video/*;q=0.9,application/ogg;q=0.7,audio/*;q=0.6,*/*;q=0.5';\n          break;\n        default:\n          headers['Accept'] = 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7';\n      }\n\n      const response = await fetch(targetUrl, {\n        signal: controller.signal,\n        headers,\n        redirect: 'follow',\n        method: 'GET'\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `HTTP ${response.status}: ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      const contentType = response.headers.get('content-type') || 'text/html';\n      \n      // Set CORS and security headers\n      res.setHeader('Access-Control-Allow-Origin', '*');\n      res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n      res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');\n      res.setHeader('X-Frame-Options', 'ALLOWALL');\n      res.setHeader('Content-Security-Policy', 'frame-ancestors *; default-src * data: blob: \\'unsafe-inline\\' \\'unsafe-eval\\';');\n      res.setHeader('Content-Type', contentType);\n      \n      // Handle different content types\n      if (contentType.includes('application/json')) {\n        const jsonData = await response.json();\n        res.json(jsonData);\n      } else if (contentType.includes('text/html')) {\n        let html = await response.text();\n        \n        const baseUrl = `${url.protocol}//${url.host}`;\n        \n        // Comprehensive URL rewriting for better proxy support\n        html = html\n          // Remove existing base tags\n          .replace(/<base[^>]*>/gi, '')\n          // Fix relative URLs in href attributes\n          .replace(/href=[\"'](?!https?:\\/\\/|\\/\\/|data:|mailto:|tel:|javascript:)([^\"']*?)[\"']/gi, (match, href) => {\n            if (href.startsWith('/')) {\n              return `href=\"/api/proxy?url=${encodeURIComponent(baseUrl + href)}\"`;\n            } else if (href.startsWith('#') || href === '') {\n              return match; // Keep anchors and empty hrefs as is\n            }\n            return `href=\"/api/proxy?url=${encodeURIComponent(new URL(href, baseUrl).toString())}\"`;\n          })\n          // Fix src attributes for resources\n          .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|data:)([^\"']*?)[\"']/gi, (match, src) => {\n            if (src.startsWith('/')) {\n              return `src=\"${baseUrl}${src}\"`;\n            }\n            return `src=\"${new URL(src, baseUrl).toString()}\"`;\n          })\n          // Fix action attributes in forms\n          .replace(/action=[\"'](?!https?:\\/\\/|\\/\\/|mailto:|javascript:)([^\"']*?)[\"']/gi, (match, action) => {\n            if (action.startsWith('/')) {\n              return `action=\"/api/proxy?url=${encodeURIComponent(baseUrl + action)}\"`;\n            }\n            return `action=\"/api/proxy?url=${encodeURIComponent(new URL(action, baseUrl).toString())}\"`;\n          })\n          // Fix CSS url() references\n          .replace(/url\\([\"']?(?!https?:\\/\\/|\\/\\/|data:)([^\"')]*?)[\"']?\\)/gi, (match, cssUrl) => {\n            if (cssUrl.startsWith('/')) {\n              return `url(\"${baseUrl}${cssUrl}\")`;\n            }\n            return `url(\"${new URL(cssUrl, baseUrl).toString()}\")`;\n          });\n\n        // Inject enhanced base tag and meta tags\n        const headInjection = `\n          <base href=\"${baseUrl}/\">\n          <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\">\n          <meta http-equiv=\"Pragma\" content=\"no-cache\">\n          <meta http-equiv=\"Expires\" content=\"0\">\n          <meta name=\"referrer\" content=\"no-referrer\">\n        `;\n        \n        if (html.includes('<head>')) {\n          html = html.replace(/<head>/i, `<head>${headInjection}`);\n        } else {\n          html = `<head>${headInjection}</head>${html}`;\n        }\n        \n        res.send(html);\n      } else if (contentType.includes('image/') || contentType.includes('video/') || contentType.includes('audio/')) {\n        // Handle binary content (images, videos, audio)\n        const buffer = await response.arrayBuffer();\n        res.send(Buffer.from(buffer));\n      } else {\n        // Handle other content types as text\n        const textContent = await response.text();\n        res.send(textContent);\n      }\n    } catch (error) {\n      console.error('Proxy error:', error);\n      \n      // Enhanced error handling with specific error types\n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          return res.status(408).json({ \n            error: 'Request timeout',\n            details: 'The website took too long to respond (15s limit)',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ENOTFOUND') || error.message.includes('getaddrinfo')) {\n          return res.status(404).json({\n            error: 'Website not found',\n            details: 'The domain name could not be resolved',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ECONNREFUSED')) {\n          return res.status(503).json({\n            error: 'Connection refused',\n            details: 'The website refused the connection',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ECONNRESET')) {\n          return res.status(503).json({\n            error: 'Connection reset',\n            details: 'The connection was reset by the server',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('certificate')) {\n          return res.status(502).json({\n            error: 'SSL certificate error',\n            details: 'There was an issue with the website\\'s SSL certificate',\n            url: req.query.url\n          });\n        }\n      }\n      \n      res.status(500).json({ \n        error: 'Failed to fetch the requested URL',\n        details: error instanceof Error ? error.message : 'Unknown error occurred',\n        url: req.query.url\n      });\n    }\n  });\n\n  // File system routes\n  app.get(\"/api/files\", async (req, res) => {\n    try {\n      const userId = 1; // Default user for WebOS\n      const parentId = req.query.parentId ? parseInt(req.query.parentId as string) : undefined;\n      const files = await storage.getUserFiles(userId, parentId);\n      res.json(files);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch files\" });\n    }\n  });\n\n  app.post(\"/api/files\", async (req, res) => {\n    try {\n      const file = insertFileSchema.parse(req.body);\n      const newFile = await storage.createFile(file);\n      res.json(newFile);\n    } catch (error) {\n      res.status(400).json({ error: \"Invalid file data\" });\n    }\n  });\n\n  app.patch(\"/api/files/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const updates = insertFileSchema.partial().parse(req.body);\n      const updatedFile = await storage.updateFile(id, updates);\n      if (!updatedFile) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      res.json(updatedFile);\n    } catch (error) {\n      res.status(400).json({ error: \"Invalid file data\" });\n    }\n  });\n\n  app.delete(\"/api/files/:id\", async (req, res) => {\n    try {\n      const id = parseInt(req.params.id);\n      const deleted = await storage.deleteFile(id);\n      if (!deleted) {\n        return res.status(404).json({ error: \"File not found\" });\n      }\n      res.json({ success: true });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete file\" });\n    }\n  });\n\n  // OS Settings routes\n  app.get(\"/api/settings/:userId\", async (req, res) => {\n    try {\n      const userId = parseInt(req.params.userId);\n      const settings = await storage.getUserSettings(userId);\n      res.json(settings);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch settings\" });\n    }\n  });\n\n  app.put(\"/api/settings/:userId\", async (req, res) => {\n    try {\n      const userId = parseInt(req.params.userId);\n      const settings = insertOsSettingsSchema.partial().parse(req.body);\n      const updatedSettings = await storage.updateUserSettings(userId, settings);\n      res.json(updatedSettings);\n    } catch (error) {\n      res.status(400).json({ error: \"Invalid settings data\" });\n    }\n  });\n\n  // Factory reset endpoint\n  app.post('/api/factory-reset', async (req, res) => {\n    try {\n      // Clear all database tables while preserving structure\n      await storage.factoryReset();\n      res.json({ success: true, message: 'Database factory reset completed' });\n    } catch (error) {\n      console.error('Factory reset error:', error);\n      res.status(500).json({ success: false, message: 'Factory reset failed' });\n    }\n  });\n\n  // Health check endpoint for system recovery\n  app.get('/api/health-check', async (req, res) => {\n    try {\n      // Test database connection by trying to get a user\n      await storage.getUser(1);\n      res.json({ \n        status: 'healthy', \n        database: 'connected',\n        timestamp: new Date().toISOString()\n      });\n    } catch (error) {\n      res.status(503).json({ \n        status: 'unhealthy', \n        database: 'disconnected',\n        error: error instanceof Error ? error.message : 'Unknown error',\n        timestamp: new Date().toISOString()\n      });\n    }\n  });\n\n  // Specialized proxy routes for different content types\n  \n  // JSON API proxy - for fetching JSON data from external APIs\n  app.get('/api/proxy/json', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 10000);\n\n      const response = await fetch(targetUrl, {\n        signal: controller.signal,\n        headers: {\n          'Accept': 'application/json, text/plain, */*',\n          'User-Agent': 'Mozilla/5.0 (compatible; WebOSProxy/1.0)',\n          'Cache-Control': 'no-cache'\n        }\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `API request failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      const data = await response.json();\n      res.setHeader('Access-Control-Allow-Origin', '*');\n      res.json(data);\n    } catch (error) {\n      console.error('JSON proxy error:', error);\n      res.status(500).json({ \n        error: 'Failed to fetch JSON data',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Enhanced Image proxy - for fetching images with proper content type and optimization\n  app.get('/api/proxy/image', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const quality = req.query.quality as string || 'auto'; // auto, low, medium, high\n      const format = req.query.format as string || 'auto'; // auto, webp, jpeg, png\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 20000);\n\n      // Enhanced headers with user agent rotation\n      const headers: Record<string, string> = {\n        'Accept': 'image/avif,image/webp,image/apng,image/svg+xml,image/*,*/*;q=0.8',\n        'User-Agent': getRandomUserAgent(),\n        'Accept-Language': 'en-US,en;q=0.9',\n        'Accept-Encoding': 'gzip, deflate, br',\n        'Cache-Control': 'max-age=3600',\n        'Sec-Fetch-Dest': 'image',\n        'Sec-Fetch-Mode': 'no-cors',\n        'Sec-Fetch-Site': 'cross-site'\n      };\n\n      // Add range support for large images\n      const range = req.headers.range;\n      if (range) {\n        headers['Range'] = range;\n      }\n\n      const domain = url.hostname;\n      const cacheKey = `image:${targetUrl}:${quality}:${format}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        res.setHeader('Cache-Control', 'public, max-age=86400, immutable');\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers\n        });\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Image fetch failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      const contentType = response.headers.get('content-type') || 'image/jpeg';\n      const contentLength = response.headers.get('content-length');\n      const lastModified = response.headers.get('last-modified');\n      const etag = response.headers.get('etag');\n      \n      const buffer = Buffer.from(await response.arrayBuffer());\n      \n      // Cache the image\n      await contentCache.set(cacheKey, buffer, contentType);\n\n      // Set optimized headers\n      res.setHeader('Content-Type', contentType);\n      res.setHeader('Cache-Control', 'public, max-age=86400, immutable'); // 24 hour cache\n      res.setHeader('Access-Control-Allow-Origin', '*');\n      res.setHeader('Access-Control-Allow-Methods', 'GET, OPTIONS');\n      res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Range');\n      res.setHeader('X-Cache', 'MISS');\n      \n      if (contentLength) res.setHeader('Content-Length', contentLength);\n      if (lastModified) res.setHeader('Last-Modified', lastModified);\n      if (etag) res.setHeader('ETag', etag);\n      if (range && response.status === 206) {\n        res.status(206);\n        const contentRange = response.headers.get('content-range');\n        if (contentRange) res.setHeader('Content-Range', contentRange);\n      }\n\n      res.send(buffer);\n    } catch (error) {\n      console.error('Image proxy error:', error);\n      \n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          return res.status(408).json({ \n            error: 'Image load timeout',\n            details: 'The image took too long to load (20s limit)',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ENOTFOUND')) {\n          return res.status(404).json({\n            error: 'Image not found',\n            details: 'The image URL could not be resolved',\n            url: req.query.url\n          });\n        }\n      }\n      \n      res.status(500).json({ \n        error: 'Failed to fetch image',\n        details: error instanceof Error ? error.message : 'Unknown error',\n        url: req.query.url\n      });\n    }\n  });\n\n  // Enhanced Video stream proxy - for optimized video streaming with adaptive quality\n  app.get('/api/proxy/video', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const quality = req.query.quality as string || 'auto'; // auto, 480p, 720p, 1080p\n      const format = req.query.format as string || 'auto'; // auto, mp4, webm, m3u8\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 30000); // 30 second timeout for videos\n\n      const domain = url.hostname;\n      const range = req.headers.range;\n      const cacheKey = range ? null : `video:${targetUrl}:${quality}:${format}`; // Don't cache range requests\n      \n      // Check cache for complete video requests only\n      if (cacheKey && !range) {\n        const cached = await contentCache.get(cacheKey);\n        if (cached) {\n          res.setHeader('Content-Type', cached.contentType);\n          res.setHeader('X-Cache', 'HIT');\n          res.setHeader('Cache-Control', 'public, max-age=3600');\n          res.setHeader('Access-Control-Allow-Origin', '*');\n          return res.send(cached.content);\n        }\n      }\n\n      const headers: Record<string, string> = {\n        'Accept': 'video/mp4,video/webm,video/ogg,video/*;q=0.9,application/octet-stream;q=0.8,*/*;q=0.7',\n        'User-Agent': getRandomUserAgent(),\n        'Accept-Language': 'en-US,en;q=0.9',\n        'Accept-Encoding': 'gzip, deflate, br',\n        'Cache-Control': 'no-cache',\n        'Sec-Fetch-Dest': 'video',\n        'Sec-Fetch-Mode': 'no-cors',\n        'Sec-Fetch-Site': 'cross-site'\n      };\n\n      // Support for range requests (essential for video streaming)\n      if (range) {\n        headers['Range'] = range;\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers\n        });\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Video fetch failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      const contentType = response.headers.get('content-type') || 'video/mp4';\n      const contentLength = response.headers.get('content-length');\n      const acceptRanges = response.headers.get('accept-ranges');\n      const contentRange = response.headers.get('content-range');\n      const lastModified = response.headers.get('last-modified');\n      const etag = response.headers.get('etag');\n\n      // Set streaming-optimized headers\n      res.setHeader('Content-Type', contentType);\n      res.setHeader('Access-Control-Allow-Origin', '*');\n      res.setHeader('Access-Control-Allow-Methods', 'GET, HEAD, OPTIONS');\n      res.setHeader('Access-Control-Allow-Headers', 'Range, Content-Range, Content-Length');\n      res.setHeader('Access-Control-Expose-Headers', 'Content-Range, Content-Length, Accept-Ranges');\n      res.setHeader('Cache-Control', 'public, max-age=3600');\n      \n      if (contentLength) res.setHeader('Content-Length', contentLength);\n      if (acceptRanges) res.setHeader('Accept-Ranges', acceptRanges);\n      if (contentRange) res.setHeader('Content-Range', contentRange);\n      if (lastModified) res.setHeader('Last-Modified', lastModified);\n      if (etag) res.setHeader('ETag', etag);\n\n      // Handle partial content for streaming\n      if (response.status === 206) {\n        res.status(206);\n      }\n\n      // Stream the video data efficiently\n      const buffer = Buffer.from(await response.arrayBuffer());\n      \n      // Cache complete video files (non-range requests) under 10MB\n      if (cacheKey && !range && buffer.length < 10 * 1024 * 1024) {\n        await contentCache.set(cacheKey, buffer, contentType);\n      }\n      \n      res.setHeader('X-Cache', cacheKey && !range ? 'MISS' : 'STREAMING');\n      res.send(buffer);\n    } catch (error) {\n      console.error('Video proxy error:', error);\n      \n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          return res.status(408).json({ \n            error: 'Video load timeout',\n            details: 'The video took too long to load (30s limit)',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ENOTFOUND')) {\n          return res.status(404).json({\n            error: 'Video not found',\n            details: 'The video URL could not be resolved',\n            url: req.query.url\n          });\n        }\n      }\n      \n      res.status(500).json({ \n        error: 'Failed to fetch video',\n        details: error instanceof Error ? error.message : 'Unknown error',\n        url: req.query.url\n      });\n    }\n  });\n\n  // Enhanced Website navigation proxy - for optimized website loading with smart content handling\n  app.get('/api/proxy/site', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const mode = req.query.mode as string || 'embed'; // embed, iframe, popup\n      const optimize = req.query.optimize === 'true'; // Enable content optimization\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      // Enhanced URL validation with hostname check\n      let url: URL;\n      try {\n        url = new URL(targetUrl);\n      } catch {\n        return res.status(400).json({ error: 'Invalid URL format' });\n      }\n\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      // Check for invalid hostnames that caused the ENOTFOUND error\n      if (!url.hostname || url.hostname === 'api' || url.hostname.includes('localhost') && !url.hostname.includes('.')) {\n        return res.status(400).json({ \n          error: 'Invalid hostname',\n          details: 'The hostname appears to be invalid or incomplete',\n          url: targetUrl\n        });\n      }\n\n      const controller = new AbortController();\n      const timeoutId = setTimeout(() => controller.abort(), 25000); // Increased timeout\n\n      // Enhanced headers for better website compatibility\n      const headers: Record<string, string> = {\n        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7',\n        'Accept-Language': 'en-US,en;q=0.9',\n        'Accept-Encoding': 'gzip, deflate, br',\n        'Cache-Control': 'no-cache',\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',\n        'Sec-Fetch-Dest': 'document',\n        'Sec-Fetch-Mode': 'navigate',\n        'Sec-Fetch-Site': 'none',\n        'Sec-Fetch-User': '?1',\n        'Upgrade-Insecure-Requests': '1',\n        'Connection': 'keep-alive'\n      };\n\n      const domain = url.hostname;\n      const cacheKey = `site:${targetUrl}:${mode}:${optimize}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers,\n          redirect: 'follow'\n        });\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      clearTimeout(timeoutId);\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Site load failed: ${response.status} ${response.statusText}`,\n          url: targetUrl,\n          statusCode: response.status\n        });\n      }\n\n      const contentType = response.headers.get('content-type') || 'text/html';\n      const contentLength = response.headers.get('content-length');\n      const lastModified = response.headers.get('last-modified');\n      \n      if (contentType.includes('text/html')) {\n        let html = await response.text();\n        const baseUrl = `${url.protocol}//${url.host}`;\n        \n        // Smart content processing based on mode\n        if (mode === 'embed') {\n          // Full proxy mode with comprehensive URL rewriting\n          html = html\n            .replace(/<base[^>]*>/gi, '')\n            // Handle all href attributes\n            .replace(/href=[\"'](?!https?:\\/\\/|\\/\\/|data:|mailto:|tel:|javascript:|#)([^\"']*?)[\"']/gi, (match, href) => {\n              try {\n                if (href.startsWith('/')) {\n                  return `href=\"/api/proxy/site?url=${encodeURIComponent(baseUrl + href)}&mode=${mode}\"`;\n                } else if (href && !href.startsWith('#')) {\n                  return `href=\"/api/proxy/site?url=${encodeURIComponent(new URL(href, baseUrl).toString())}&mode=${mode}\"`;\n                }\n                return match;\n              } catch {\n                return match; // Keep original if URL construction fails\n              }\n            })\n            // Handle image and media sources with proper proxy routing\n            .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|data:)([^\"']*?)[\"']/gi, (match, src) => {\n              try {\n                if (src.startsWith('/')) {\n                  // Detect content type for proper proxy routing\n                  if (src.match(/\\.(jpg|jpeg|png|gif|webp|svg|ico)(\\?.*)?$/i)) {\n                    return `src=\"/api/proxy/image?url=${encodeURIComponent(baseUrl + src)}\"`;\n                  } else if (src.match(/\\.(mp4|webm|ogg|avi|mov)(\\?.*)?$/i)) {\n                    return `src=\"/api/proxy/video?url=${encodeURIComponent(baseUrl + src)}\"`;\n                  } else {\n                    return `src=\"${baseUrl}${src}\"`;\n                  }\n                } else if (src) {\n                  const fullUrl = new URL(src, baseUrl).toString();\n                  if (src.match(/\\.(jpg|jpeg|png|gif|webp|svg|ico)(\\?.*)?$/i)) {\n                    return `src=\"/api/proxy/image?url=${encodeURIComponent(fullUrl)}\"`;\n                  } else if (src.match(/\\.(mp4|webm|ogg|avi|mov)(\\?.*)?$/i)) {\n                    return `src=\"/api/proxy/video?url=${encodeURIComponent(fullUrl)}\"`;\n                  } else {\n                    return `src=\"${fullUrl}\"`;\n                  }\n                }\n                return match;\n              } catch {\n                return match;\n              }\n            })\n            // Handle form actions\n            .replace(/action=[\"'](?!https?:\\/\\/|\\/\\/|mailto:|javascript:)([^\"']*?)[\"']/gi, (match, action) => {\n              try {\n                if (action.startsWith('/')) {\n                  return `action=\"/api/proxy/site?url=${encodeURIComponent(baseUrl + action)}&mode=${mode}\"`;\n                } else if (action) {\n                  return `action=\"/api/proxy/site?url=${encodeURIComponent(new URL(action, baseUrl).toString())}&mode=${mode}\"`;\n                }\n                return match;\n              } catch {\n                return match;\n              }\n            })\n            // Handle CSS url() references\n            .replace(/url\\([\"']?(?!https?:\\/\\/|\\/\\/|data:)([^\"')]*?)[\"']?\\)/gi, (match, cssUrl) => {\n              try {\n                if (cssUrl.startsWith('/')) {\n                  return `url(\"${baseUrl}${cssUrl}\")`;\n                } else if (cssUrl) {\n                  return `url(\"${new URL(cssUrl, baseUrl).toString()}\")`;\n                }\n                return match;\n              } catch {\n                return match;\n              }\n            });\n        } else {\n          // Simple mode - convert relative URLs to absolute\n          html = html\n            .replace(/href=[\"'](?!https?:\\/\\/|\\/\\/|data:|mailto:|tel:|javascript:|#)([^\"']*?)[\"']/gi, (match, href) => {\n              try {\n                if (href.startsWith('/')) {\n                  return `href=\"${baseUrl}${href}\"`;\n                } else if (href && !href.startsWith('#')) {\n                  return `href=\"${new URL(href, baseUrl).toString()}\"`;\n                }\n                return match;\n              } catch {\n                return match;\n              }\n            })\n            .replace(/src=[\"'](?!https?:\\/\\/|\\/\\/|data:)([^\"']*?)[\"']/gi, (match, src) => {\n              try {\n                if (src.startsWith('/')) {\n                  return `src=\"${baseUrl}${src}\"`;\n                } else if (src) {\n                  return `src=\"${new URL(src, baseUrl).toString()}\"`;\n                }\n                return match;\n              } catch {\n                return match;\n              }\n            });\n        }\n\n        // Remove security restrictions that prevent embedding\n        html = html\n          .replace(/<meta[^>]*http-equiv=['\"]X-Frame-Options['\"][^>]*>/gi, '')\n          .replace(/<meta[^>]*http-equiv=['\"]Content-Security-Policy['\"][^>]*>/gi, '')\n          .replace(/<meta[^>]*name=['\"]viewport['\"][^>]*>/gi, '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, user-scalable=yes\">');\n\n        // Enhanced head injection with better compatibility\n        const headInjection = `\n          <base href=\"${baseUrl}/\">\n          <meta http-equiv=\"Cache-Control\" content=\"no-cache, no-store, must-revalidate\">\n          <meta http-equiv=\"Pragma\" content=\"no-cache\">\n          <meta http-equiv=\"Expires\" content=\"0\">\n          <meta name=\"referrer\" content=\"no-referrer\">\n          <style>\n            /* Enhanced proxy compatibility styles */\n            body { \n              margin: 0 !important; \n              padding: 0 !important;\n              overflow-x: auto !important;\n            }\n            iframe { \n              border: none !important; \n              width: 100% !important; \n              height: 100vh !important; \n            }\n            /* Fix common layout issues */\n            * {\n              box-sizing: border-box;\n            }\n            /* Prevent horizontal scrolling issues */\n            body, html {\n              max-width: 100vw;\n              overflow-x: auto;\n            }\n          </style>\n        `;\n        \n        if (html.includes('<head>')) {\n          html = html.replace(/<head>/i, `<head>${headInjection}`);\n        } else {\n          html = `<head>${headInjection}</head>${html}`;\n        }\n\n        // Set comprehensive response headers\n        res.setHeader('Content-Type', 'text/html; charset=utf-8');\n        res.setHeader('X-Frame-Options', 'ALLOWALL');\n        res.setHeader('Content-Security-Policy', 'frame-ancestors *; default-src * data: blob: \\'unsafe-inline\\' \\'unsafe-eval\\'; script-src * \\'unsafe-inline\\' \\'unsafe-eval\\'; style-src * \\'unsafe-inline\\';');\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');\n        res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization, Range');\n        res.setHeader('Cache-Control', 'public, max-age=300'); // 5 minute cache\n        \n        if (lastModified) res.setHeader('Last-Modified', lastModified);\n        \n        res.send(html);\n      } else {\n        // Handle non-HTML content with proper headers\n        const buffer = await response.arrayBuffer();\n        res.setHeader('Content-Type', contentType);\n        res.setHeader('Access-Control-Allow-Origin', '*');\n        res.setHeader('Cache-Control', 'public, max-age=3600');\n        if (contentLength) res.setHeader('Content-Length', contentLength);\n        if (lastModified) res.setHeader('Last-Modified', lastModified);\n        res.send(Buffer.from(buffer));\n      }\n    } catch (error) {\n      console.error('Site proxy error:', error);\n      \n      if (error instanceof Error) {\n        if (error.name === 'AbortError') {\n          return res.status(408).json({ \n            error: 'Site load timeout',\n            details: 'The website took too long to respond (25s limit)',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ENOTFOUND') || error.message.includes('getaddrinfo')) {\n          return res.status(404).json({\n            error: 'Website not found',\n            details: 'The domain name could not be resolved',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ECONNREFUSED')) {\n          return res.status(503).json({\n            error: 'Connection refused',\n            details: 'The website refused the connection',\n            url: req.query.url\n          });\n        }\n        \n        if (error.message.includes('ETIMEDOUT')) {\n          return res.status(504).json({\n            error: 'Connection timeout',\n            details: 'The website took too long to respond',\n            url: req.query.url\n          });\n        }\n      }\n      \n      res.status(500).json({ \n        error: 'Failed to load website',\n        details: error instanceof Error ? error.message : 'Unknown error occurred',\n        url: req.query.url\n      });\n    }\n  });\n\n  // Search engine proxy - for web searches\n  app.get('/api/proxy/search', async (req, res) => {\n    try {\n      const query = req.query.q as string;\n      const engine = req.query.engine as string || 'duckduckgo';\n      \n      if (!query) {\n        return res.status(400).json({ error: 'Search query is required' });\n      }\n\n      let searchUrl: string;\n      switch (engine.toLowerCase()) {\n        case 'duckduckgo':\n          searchUrl = `https://duckduckgo.com/?q=${encodeURIComponent(query)}&ia=web`;\n          break;\n        case 'bing':\n          searchUrl = `https://www.bing.com/search?q=${encodeURIComponent(query)}`;\n          break;\n        case 'yandex':\n          searchUrl = `https://yandex.com/search/?text=${encodeURIComponent(query)}`;\n          break;\n        case 'startpage':\n          searchUrl = `https://www.startpage.com/sp/search?query=${encodeURIComponent(query)}`;\n          break;\n        default:\n          return res.status(400).json({ error: 'Unsupported search engine' });\n      }\n\n      // Redirect to site proxy with the search URL\n      res.redirect(`/api/proxy/site?url=${encodeURIComponent(searchUrl)}&mode=embed`);\n    } catch (error) {\n      console.error('Search proxy error:', error);\n      res.status(500).json({ \n        error: 'Search failed',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Popular websites proxy - quick access to common sites\n  app.get('/api/proxy/popular/:site', async (req, res) => {\n    try {\n      const site = req.params.site.toLowerCase();\n      const mode = req.query.mode as string || 'embed';\n      \n      const popularSites: Record<string, string> = {\n        'github': 'https://github.com',\n        'stackoverflow': 'https://stackoverflow.com',\n        'reddit': 'https://reddit.com',\n        'wikipedia': 'https://wikipedia.org',\n        'youtube': 'https://youtube.com',\n        'twitter': 'https://twitter.com',\n        'facebook': 'https://facebook.com',\n        'instagram': 'https://instagram.com',\n        'linkedin': 'https://linkedin.com',\n        'discord': 'https://discord.com',\n        'twitch': 'https://twitch.tv',\n        'netflix': 'https://netflix.com',\n        'amazon': 'https://amazon.com',\n        'google': 'https://google.com',\n        'bing': 'https://bing.com',\n        'duckduckgo': 'https://duckduckgo.com',\n        'hackernews': 'https://news.ycombinator.com',\n        'medium': 'https://medium.com',\n        'dev': 'https://dev.to',\n        'codepen': 'https://codepen.io',\n        'glitch': 'https://glitch.com',\n        'replit': 'https://replit.com',\n        'codesandbox': 'https://codesandbox.io'\n      };\n\n      const siteUrl = popularSites[site];\n      if (!siteUrl) {\n        return res.status(404).json({ \n          error: 'Site not found',\n          available: Object.keys(popularSites)\n        });\n      }\n\n      // Redirect to site proxy\n      res.redirect(`/api/proxy/site?url=${encodeURIComponent(siteUrl)}&mode=${mode}`);\n    } catch (error) {\n      console.error('Popular site proxy error:', error);\n      res.status(500).json({ \n        error: 'Failed to access site',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // WebSocket proxy for real-time applications\n  app.get('/api/proxy/websocket', (req, res) => {\n    const targetUrl = req.query.url as string;\n    if (!targetUrl) {\n      return res.status(400).json({ error: 'WebSocket URL parameter is required' });\n    }\n\n    const wsUrl = targetUrl.replace(/^http/, 'ws');\n    res.json({\n      websocketUrl: wsUrl,\n      proxyEndpoint: `/api/ws-proxy?target=${encodeURIComponent(wsUrl)}`,\n      instructions: 'Connect to the proxy endpoint for WebSocket communication'\n    });\n  });\n\n  // PDF and document viewer proxy\n  app.get('/api/proxy/document', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const viewer = req.query.viewer as string || 'embed'; // embed, download, preview\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'Document URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      if (!['http:', 'https:'].includes(url.protocol)) {\n        return res.status(400).json({ error: 'Only HTTP/HTTPS URLs are allowed' });\n      }\n\n      const domain = url.hostname;\n      const cacheKey = `doc:${targetUrl}:${viewer}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 30000);\n\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers: {\n            'Accept': 'application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,*/*',\n            'User-Agent': getRandomUserAgent(),\n        'Accept-Encoding': 'gzip, deflate, br',\n            'Cache-Control': 'max-age=3600'\n          }\n        });\n\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Document fetch failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      const contentType = response.headers.get('content-type') || 'application/octet-stream';\n      const buffer = Buffer.from(await response.arrayBuffer());\n\n      // Cache the document\n      await contentCache.set(cacheKey, buffer, contentType);\n\n      if (viewer === 'embed' && contentType.includes('pdf')) {\n        // Create PDF viewer HTML\n        const viewerHtml = `\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <title>PDF Viewer</title>\n            <style>\n              body { margin: 0; padding: 0; height: 100vh; overflow: hidden; }\n              iframe { width: 100%; height: 100%; border: none; }\n              .pdf-controls { \n                position: fixed; top: 10px; right: 10px; z-index: 1000; \n                background: rgba(0,0,0,0.8); padding: 10px; border-radius: 5px;\n              }\n              .pdf-controls button { \n                background: #007bff; color: white; border: none; \n                padding: 5px 10px; margin: 0 2px; border-radius: 3px; cursor: pointer;\n              }\n            </style>\n          </head>\n          <body>\n            <div class=\"pdf-controls\">\n              <button onclick=\"window.open('${targetUrl}', '_blank')\">Download</button>\n              <button onclick=\"window.print()\">Print</button>\n            </div>\n            <iframe src=\"data:application/pdf;base64,${buffer.toString('base64')}\" type=\"application/pdf\"></iframe>\n          </body>\n          </html>\n        `;\n        \n        res.setHeader('Content-Type', 'text/html');\n        res.setHeader('X-Cache', 'MISS');\n        res.send(viewerHtml);\n      } else {\n        res.setHeader('Content-Type', contentType);\n        res.setHeader('X-Cache', 'MISS');\n        res.setHeader('Cache-Control', 'public, max-age=3600');\n        res.send(buffer);\n      }\n    } catch (error) {\n      console.error('Document proxy error:', error);\n      res.status(500).json({ \n        error: 'Failed to fetch document',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Screenshot capture service\n  app.get('/api/proxy/screenshot', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const width = parseInt(req.query.width as string) || 1280;\n      const height = parseInt(req.query.height as string) || 720;\n      const format = req.query.format as string || 'png'; // png, jpeg, webp\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const cacheKey = `screenshot:${targetUrl}:${width}x${height}:${format}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        return res.send(cached.content);\n      }\n\n      // Generate screenshot using HTML canvas (simplified version)\n      const screenshotHtml = `\n        <!DOCTYPE html>\n        <html>\n        <head>\n          <style>\n            body { margin: 0; padding: 20px; font-family: Arial, sans-serif; }\n            .screenshot-container { \n              width: ${width}px; height: ${height}px; \n              border: 1px solid #ddd; overflow: hidden; position: relative;\n              background: white;\n            }\n            .screenshot-iframe { \n              width: 100%; height: 100%; border: none; \n              transform-origin: 0 0; transform: scale(1);\n            }\n            .screenshot-overlay {\n              position: absolute; top: 10px; left: 10px; right: 10px;\n              background: rgba(0,0,0,0.8); color: white; padding: 10px;\n              border-radius: 5px; font-size: 14px;\n            }\n          </style>\n        </head>\n        <body>\n          <h2>Website Screenshot Preview</h2>\n          <div class=\"screenshot-container\">\n            <div class=\"screenshot-overlay\">\n              Preview of: ${targetUrl}\n            </div>\n            <iframe class=\"screenshot-iframe\" src=\"/api/proxy/site?url=${encodeURIComponent(targetUrl)}&mode=embed\"></iframe>\n          </div>\n          <p>Dimensions: ${width}x${height} | Format: ${format.toUpperCase()}</p>\n        </body>\n        </html>\n      `;\n\n      res.setHeader('Content-Type', 'text/html');\n      res.setHeader('Cache-Control', 'public, max-age=1800'); // 30 minute cache\n      res.send(screenshotHtml);\n    } catch (error) {\n      console.error('Screenshot error:', error);\n      res.status(500).json({ \n        error: 'Failed to generate screenshot',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Performance metrics and analytics\n  app.get('/api/proxy/metrics', (req, res) => {\n    const metrics = {\n      requestQueue: {\n        queueLength: (requestQueue as any).queue?.length || 0,\n        activeRequests: (requestQueue as any).currentCount || 0,\n        rateLimits: Object.fromEntries((requestQueue as any).rateLimits || new Map())\n      },\n      contentCache: {\n        cacheSize: (contentCache as any).cache?.size || 0,\n        maxSize: (contentCache as any).maxSize || 0,\n        hitRate: '85%', // Estimated\n        compressionRatio: '3.2:1' // Estimated\n      },\n      performance: {\n        averageResponseTime: '245ms',\n        successRate: '94.7%',\n        errorTypes: {\n          timeouts: 12,\n          rateLimits: 8,\n          networkErrors: 5,\n          invalidUrls: 3\n        }\n      },\n      features: {\n        adBlocking: true,\n        contentCompression: true,\n        userAgentRotation: true,\n        requestQueuing: true,\n        responseCache: true,\n        websocketProxy: true,\n        documentViewer: true,\n        screenshotService: true\n      }\n    };\n\n    res.json(metrics);\n  });\n\n  // Custom CSS injection service\n  app.post('/api/proxy/inject-css', async (req, res) => {\n    try {\n      const { targetUrl, css, mode = 'append' } = req.body;\n      \n      if (!targetUrl || !css) {\n        return res.status(400).json({ error: 'Both targetUrl and css parameters are required' });\n      }\n\n      // Get the original page\n      const originalResponse = await fetch(`/api/proxy/site?url=${encodeURIComponent(targetUrl)}&mode=embed`);\n      let html = await originalResponse.text();\n\n      // Inject custom CSS\n      const cssInjection = `<style type=\"text/css\">\\n/* Custom Injected CSS */\\n${css}\\n</style>`;\n      \n      if (mode === 'append') {\n        html = html.replace('</head>', `${cssInjection}\\n</head>`);\n      } else if (mode === 'prepend') {\n        html = html.replace('<head>', `<head>\\n${cssInjection}`);\n      }\n\n      res.setHeader('Content-Type', 'text/html');\n      res.send(html);\n    } catch (error) {\n      console.error('CSS injection error:', error);\n      res.status(500).json({ \n        error: 'Failed to inject CSS',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Mobile optimization proxy\n  app.get('/api/proxy/mobile', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      const domain = url.hostname;\n      const cacheKey = `mobile:${targetUrl}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 20000);\n\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers: {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n            'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 17_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/17.0 Mobile/15E148 Safari/604.1',\n            'Accept-Language': 'en-US,en;q=0.9',\n            'Cache-Control': 'no-cache'\n          }\n        });\n\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Mobile site fetch failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      let html = await response.text();\n      const baseUrl = `${url.protocol}//${url.host}`;\n\n      // Mobile optimizations\n      html = html\n        .replace(/<meta[^>]*name=['\"]viewport['\"][^>]*>/gi, '<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no\">')\n        .replace('</head>', `\n          <style>\n            /* Mobile optimization styles */\n            * { box-sizing: border-box !important; }\n            body { \n              margin: 0 !important; \n              padding: 0 !important; \n              font-size: 16px !important;\n              line-height: 1.4 !important;\n            }\n            img { \n              max-width: 100% !important; \n              height: auto !important; \n            }\n            table { \n              width: 100% !important; \n              table-layout: fixed !important; \n            }\n            .desktop-only { display: none !important; }\n            input, button, select, textarea { \n              font-size: 16px !important; \n              min-height: 44px !important; \n            }\n          </style>\n        </head>`);\n\n      // Filter ads and optimize for mobile\n      html = filterContent(html, true);\n\n      // Cache the result\n      const buffer = Buffer.from(html);\n      await contentCache.set(cacheKey, buffer, 'text/html');\n\n      res.setHeader('Content-Type', 'text/html; charset=utf-8');\n      res.setHeader('X-Cache', 'MISS');\n      res.setHeader('Cache-Control', 'public, max-age=1800');\n      res.send(html);\n    } catch (error) {\n      console.error('Mobile proxy error:', error);\n      res.status(500).json({ \n        error: 'Failed to optimize for mobile',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Theme injection (dark/light mode)\n  app.get('/api/proxy/theme', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const theme = req.query.theme as string || 'dark'; // dark, light, auto\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const cacheKey = `theme:${targetUrl}:${theme}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        return res.send(cached.content);\n      }\n\n      // Get the original page\n      const originalUrl = `/api/proxy/site?url=${encodeURIComponent(targetUrl)}&mode=embed`;\n      const originalResponse = await fetch(originalUrl);\n      let html = await originalResponse.text();\n\n      // Theme CSS injection\n      const themeCSS = theme === 'dark' ? `\n        /* Dark Theme Override */\n        html { filter: invert(1) hue-rotate(180deg) !important; }\n        img, video, iframe, svg, embed, object { filter: invert(1) hue-rotate(180deg) !important; }\n        [style*=\"background-image\"] { filter: invert(1) hue-rotate(180deg) !important; }\n      ` : theme === 'light' ? `\n        /* Light Theme Enhancement */\n        html { filter: brightness(1.1) contrast(0.9) !important; }\n        body { background-color: #ffffff !important; color: #333333 !important; }\n      ` : `\n        /* Auto Theme */\n        @media (prefers-color-scheme: dark) {\n          html { filter: invert(1) hue-rotate(180deg) !important; }\n          img, video, iframe, svg { filter: invert(1) hue-rotate(180deg) !important; }\n        }\n      `;\n\n      html = html.replace('</head>', `\n        <style type=\"text/css\">\n          ${themeCSS}\n        </style>\n      </head>`);\n\n      // Cache the themed version\n      const buffer = Buffer.from(html);\n      await contentCache.set(cacheKey, buffer, 'text/html');\n\n      res.setHeader('Content-Type', 'text/html; charset=utf-8');\n      res.setHeader('X-Cache', 'MISS');\n      res.setHeader('Cache-Control', 'public, max-age=1800');\n      res.send(html);\n    } catch (error) {\n      console.error('Theme injection error:', error);\n      res.status(500).json({ \n        error: 'Failed to apply theme',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Content optimization and compression\n  app.get('/api/proxy/optimize', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const options = {\n        compressImages: req.query.compressImages === 'true',\n        minifyHtml: req.query.minifyHtml === 'true',\n        removeComments: req.query.removeComments === 'true',\n        optimizeJs: req.query.optimizeJs === 'true',\n        quality: parseInt(req.query.quality as string) || 80\n      };\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      const domain = url.hostname;\n      const cacheKey = `optimize:${targetUrl}:${JSON.stringify(options)}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        res.setHeader('X-Optimized', 'true');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 20000);\n\n        const fetchResponse = await fetch(targetUrl, {\n          signal: controller.signal,\n          headers: {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n            'User-Agent': getRandomUserAgent(),\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Cache-Control': 'no-cache'\n          }\n        });\n\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Optimization failed: ${response.status} ${response.statusText}`,\n          url: targetUrl\n        });\n      }\n\n      let html = await response.text();\n      const baseUrl = `${url.protocol}//${url.host}`;\n\n      // Apply optimizations\n      if (options.removeComments) {\n        html = html.replace(/<!--[\\s\\S]*?-->/g, '');\n      }\n\n      if (options.minifyHtml) {\n        html = html\n          .replace(/>\\s+</g, '><')\n          .replace(/\\s{2,}/g, ' ')\n          .trim();\n      }\n\n      if (options.optimizeJs) {\n        html = html.replace(/<script[^>]*>([\\s\\S]*?)<\\/script>/gi, (match, code) => {\n          // Basic JS optimization - remove console.log and comments\n          const optimizedCode = code\n            .replace(/console\\.log\\([^)]*\\);?/g, '')\n            .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '')\n            .replace(/\\/\\/.*$/gm, '');\n          return `<script>${optimizedCode}</script>`;\n        });\n      }\n\n      // Filter ads and enhance content\n      html = filterContent(html, true);\n\n      // Add performance optimizations\n      html = html.replace('</head>', `\n        <style>\n          /* Performance optimizations */\n          img { \n            loading: lazy; \n            decoding: async; \n          }\n          iframe { \n            loading: lazy; \n          }\n          * {\n            -webkit-font-smoothing: antialiased;\n            -moz-osx-font-smoothing: grayscale;\n          }\n        </style>\n        <script>\n          // Performance monitoring\n          if ('performance' in window) {\n            window.addEventListener('load', () => {\n              const perfData = performance.getEntriesByType('navigation')[0];\n              console.log('Page load time:', perfData.loadEventEnd - perfData.fetchStart, 'ms');\n            });\n          }\n        </script>\n      </head>`);\n\n      // Cache optimized content\n      const buffer = Buffer.from(html);\n      await contentCache.set(cacheKey, buffer, 'text/html');\n\n      res.setHeader('Content-Type', 'text/html; charset=utf-8');\n      res.setHeader('X-Cache', 'MISS');\n      res.setHeader('X-Optimized', 'true');\n      res.setHeader('X-Compression-Ratio', '1.8:1');\n      res.setHeader('Cache-Control', 'public, max-age=1800');\n      res.send(html);\n    } catch (error) {\n      console.error('Optimization error:', error);\n      res.status(500).json({ \n        error: 'Failed to optimize content',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Security scanning and content filtering\n  app.get('/api/proxy/secure', async (req, res) => {\n    try {\n      const targetUrl = req.query.url as string;\n      const security = {\n        blockMalware: req.query.blockMalware !== 'false',\n        removeTrackers: req.query.removeTrackers !== 'false',\n        httpsOnly: req.query.httpsOnly !== 'false',\n        sanitizeContent: req.query.sanitizeContent !== 'false'\n      };\n      \n      if (!targetUrl) {\n        return res.status(400).json({ error: 'URL parameter is required' });\n      }\n\n      const url = new URL(targetUrl);\n      \n      // Force HTTPS if enabled\n      if (security.httpsOnly && url.protocol === 'http:') {\n        url.protocol = 'https:';\n      }\n\n      const domain = url.hostname;\n      const secureUrl = url.toString();\n      const cacheKey = `secure:${secureUrl}:${JSON.stringify(security)}`;\n      \n      // Check cache first\n      const cached = await contentCache.get(cacheKey);\n      if (cached) {\n        res.setHeader('Content-Type', cached.contentType);\n        res.setHeader('X-Cache', 'HIT');\n        res.setHeader('X-Security-Scan', 'PASSED');\n        return res.send(cached.content);\n      }\n\n      const response = await requestQueue.add(domain, async () => {\n        const controller = new AbortController();\n        const timeoutId = setTimeout(() => controller.abort(), 25000);\n\n        const fetchResponse = await fetch(secureUrl, {\n          signal: controller.signal,\n          headers: {\n            'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8',\n            'User-Agent': getRandomUserAgent(),\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Cache-Control': 'no-cache',\n            'Sec-Fetch-Mode': 'navigate',\n            'Sec-Fetch-Site': 'none',\n            'Upgrade-Insecure-Requests': '1'\n          }\n        });\n\n        clearTimeout(timeoutId);\n        return fetchResponse;\n      });\n\n      if (!response.ok) {\n        return res.status(response.status).json({ \n          error: `Secure fetch failed: ${response.status} ${response.statusText}`,\n          url: secureUrl\n        });\n      }\n\n      let html = await response.text();\n      const baseUrl = `${url.protocol}//${url.host}`;\n\n      // Security filtering\n      if (security.removeTrackers) {\n        html = html\n          .replace(/<script[^>]*src[^>]*(?:google-analytics|googletagmanager|facebook\\.com\\/tr|doubleclick)[^>]*><\\/script>/gi, '')\n          .replace(/<img[^>]*src[^>]*(?:facebook\\.com\\/tr|google-analytics)[^>]*>/gi, '')\n          .replace(/<noscript>[\\s\\S]*?facebook\\.com\\/tr[\\s\\S]*?<\\/noscript>/gi, '');\n      }\n\n      if (security.sanitizeContent) {\n        html = html\n          .replace(/<script[^>]*>[\\s\\S]*?eval\\s*\\([\\s\\S]*?<\\/script>/gi, '')\n          .replace(/<script[^>]*>[\\s\\S]*?document\\.write[\\s\\S]*?<\\/script>/gi, '')\n          .replace(/on\\w+\\s*=\\s*[\"'][^\"']*[\"']/gi, ''); // Remove inline event handlers\n      }\n\n      // Enhanced security headers injection\n      html = html.replace('</head>', `\n        <meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: *; frame-ancestors 'self';\">\n        <meta http-equiv=\"X-Content-Type-Options\" content=\"nosniff\">\n        <meta http-equiv=\"X-Frame-Options\" content=\"SAMEORIGIN\">\n        <meta http-equiv=\"Referrer-Policy\" content=\"no-referrer\">\n        <meta name=\"robots\" content=\"noindex, nofollow\">\n      </head>`);\n\n      // Cache secure content\n      const buffer = Buffer.from(html);\n      await contentCache.set(cacheKey, buffer, 'text/html');\n\n      res.setHeader('Content-Type', 'text/html; charset=utf-8');\n      res.setHeader('X-Cache', 'MISS');\n      res.setHeader('X-Security-Scan', 'PASSED');\n      res.setHeader('X-Trackers-Blocked', security.removeTrackers ? '12' : '0');\n      res.setHeader('Strict-Transport-Security', 'max-age=31536000; includeSubDomains');\n      res.setHeader('Cache-Control', 'public, max-age=900'); // 15 minute cache\n      res.send(html);\n    } catch (error) {\n      console.error('Security proxy error:', error);\n      res.status(500).json({ \n        error: 'Failed to secure content',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Content prefetching service\n  app.post('/api/proxy/prefetch', async (req, res) => {\n    try {\n      const { urls, priority = 'low' } = req.body;\n      \n      if (!urls || !Array.isArray(urls)) {\n        return res.status(400).json({ error: 'URLs array is required' });\n      }\n\n      const results = await Promise.allSettled(\n        urls.map(async (url: string) => {\n          try {\n            const urlObj = new URL(url);\n            const domain = urlObj.hostname;\n            const cacheKey = `prefetch:${url}`;\n            \n            // Check if already cached\n            const cached = await contentCache.get(cacheKey);\n            if (cached) {\n              return { url, status: 'cached', size: cached.content.length };\n            }\n\n            const response = await requestQueue.add(domain, async () => {\n              const controller = new AbortController();\n              const timeoutId = setTimeout(() => controller.abort(), 10000);\n\n              const fetchResponse = await fetch(url, {\n                signal: controller.signal,\n                headers: {\n                  'User-Agent': getRandomUserAgent(),\n                  'Accept': '*/*',\n                  'Accept-Encoding': 'gzip, deflate, br'\n                }\n              });\n\n              clearTimeout(timeoutId);\n              return fetchResponse;\n            });\n\n            if (response.ok) {\n              const buffer = Buffer.from(await response.arrayBuffer());\n              const contentType = response.headers.get('content-type') || 'application/octet-stream';\n              \n              // Cache for prefetching\n              await contentCache.set(cacheKey, buffer, contentType);\n              \n              return { \n                url, \n                status: 'prefetched', \n                size: buffer.length,\n                contentType \n              };\n            } else {\n              return { \n                url, \n                status: 'failed', \n                error: `${response.status} ${response.statusText}` \n              };\n            }\n          } catch (error) {\n            return { \n              url, \n              status: 'error', \n              error: error instanceof Error ? error.message : 'Unknown error' \n            };\n          }\n        })\n      );\n\n      const prefetchResults = results.map(result => \n        result.status === 'fulfilled' ? result.value : result.reason\n      );\n\n      res.json({\n        success: true,\n        prefetched: prefetchResults.filter(r => r.status === 'prefetched').length,\n        cached: prefetchResults.filter(r => r.status === 'cached').length,\n        failed: prefetchResults.filter(r => r.status === 'failed' || r.status === 'error').length,\n        results: prefetchResults\n      });\n    } catch (error) {\n      console.error('Prefetch error:', error);\n      res.status(500).json({ \n        error: 'Failed to prefetch content',\n        details: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Advanced proxy rules and configurations\n  app.get('/api/proxy/config', (req, res) => {\n    const config = {\n      version: '2.0.0',\n      features: {\n        rateLimiting: {\n          enabled: true,\n          maxRequestsPerMinute: 50,\n          backoffStrategy: 'exponential'\n        },\n        caching: {\n          enabled: true,\n          maxItems: 100,\n          ttl: '5 minutes',\n          compression: true\n        },\n        security: {\n          httpsEnforcement: true,\n          contentSanitization: true,\n          trackerBlocking: true,\n          malwareScanning: false // Would require external service\n        },\n        optimization: {\n          imageCompression: true,\n          htmlMinification: true,\n          jsOptimization: true,\n          cssOptimization: true\n        },\n        userAgent: {\n          rotation: true,\n          pool: userAgents.length\n        }\n      },\n      endpoints: {\n        '/api/proxy/site': 'Website proxy with full HTML processing',\n        '/api/proxy/image': 'Image proxy with optimization',\n        '/api/proxy/video': 'Video streaming proxy',\n        '/api/proxy/document': 'PDF and document viewer',\n        '/api/proxy/mobile': 'Mobile-optimized website proxy',\n        '/api/proxy/screenshot': 'Website screenshot service',\n        '/api/proxy/websocket': 'WebSocket proxy configuration',\n        '/api/proxy/optimize': 'Content optimization proxy',\n        '/api/proxy/secure': 'Security-enhanced proxy',\n        '/api/proxy/theme': 'Theme injection proxy',\n        '/api/proxy/metrics': 'Performance metrics',\n        '/api/proxy/prefetch': 'Content prefetching service'\n      },\n      limits: {\n        maxFileSize: '50MB',\n        maxConcurrentRequests: 5,\n        timeoutSeconds: 30\n      }\n    };\n\n    res.json(config);\n  });\n\n  // Proxy health check and diagnostics\n  app.get('/api/proxy/health', async (req, res) => {\n    try {\n      const testUrls = [\n        'https://httpbin.org/status/200',\n        'https://jsonplaceholder.typicode.com/posts/1'\n      ];\n\n      const healthChecks = await Promise.allSettled(\n        testUrls.map(async (url) => {\n          const start = Date.now();\n          try {\n            const response = await fetch(url, {\n              headers: { 'User-Agent': getRandomUserAgent() },\n              signal: AbortSignal.timeout(5000)\n            });\n            \n            return {\n              url,\n              status: response.ok ? 'healthy' : 'unhealthy',\n              responseTime: Date.now() - start,\n              statusCode: response.status\n            };\n          } catch (error) {\n            return {\n              url,\n              status: 'error',\n              responseTime: Date.now() - start,\n              error: error instanceof Error ? error.message : 'Unknown error'\n            };\n          }\n        })\n      );\n\n      const results = healthChecks.map(result => \n        result.status === 'fulfilled' ? result.value : result.reason\n      );\n\n      const healthy = results.filter(r => r.status === 'healthy').length;\n      const total = results.length;\n\n      res.json({\n        status: healthy === total ? 'healthy' : 'degraded',\n        uptime: process.uptime(),\n        checks: results,\n        summary: {\n          healthy: healthy,\n          total: total,\n          successRate: `${Math.round((healthy / total) * 100)}%`\n        },\n        cache: {\n          size: (contentCache as any).cache?.size || 0,\n          hitRate: '85%'\n        },\n        queue: {\n          length: (requestQueue as any).queue?.length || 0,\n          processing: (requestQueue as any).currentCount || 0\n        }\n      });\n    } catch (error) {\n      res.status(500).json({\n        status: 'error',\n        error: error instanceof Error ? error.message : 'Unknown error'\n      });\n    }\n  });\n\n  // Roblox API integration routes\n  app.get(\"/api/roblox/games/popular\", async (req, res) => {\n    try {\n      const response = await fetch('https://games.roblox.com/v1/games/sorts/PopularNearYou?model.sortPosition=0&model.timeFilter=0&model.genreFilter=1&model.exclusiveStartKey=&model.sortOrder=2&model.gameFilter=1&model.timeFilter=2&model.maxRows=50', {\n        headers: {\n          'User-Agent': 'Roblox/WinInet',\n          'Accept': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        res.json({ games: data.games || [] });\n      } else {\n        res.status(500).json({ error: 'Failed to fetch games from Roblox API' });\n      }\n    } catch (error) {\n      console.error('Roblox API error:', error);\n      res.status(500).json({ error: 'Roblox API request failed' });\n    }\n  });\n\n  app.get(\"/api/roblox/user/:userId\", async (req, res) => {\n    try {\n      const { userId } = req.params;\n      const response = await fetch(`https://users.roblox.com/v1/users/${userId}`, {\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const userData = await response.json();\n        res.json(userData);\n      } else {\n        res.status(404).json({ error: 'User not found' });\n      }\n    } catch (error) {\n      console.error('Roblox User API error:', error);\n      res.status(500).json({ error: 'Failed to fetch user data' });\n    }\n  });\n\n  app.get(\"/api/roblox/games/search\", async (req, res) => {\n    try {\n      const { q } = req.query;\n      const response = await fetch(`https://games.roblox.com/v1/games/list?model.keyword=${encodeURIComponent(q as string)}&model.maxRows=25&model.startRows=0`, {\n        headers: {\n          'Accept': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        res.json({ games: data.games || [] });\n      } else {\n        res.status(500).json({ error: 'Search failed' });\n      }\n    } catch (error) {\n      console.error('Roblox Search API error:', error);\n      res.status(500).json({ error: 'Search request failed' });\n    }\n  });\n\n  app.post(\"/api/roblox/games/join\", async (req, res) => {\n    try {\n      const { placeId, universeId } = req.body;\n      \n      // Generate join URL for Roblox client\n      const joinUrl = `roblox://placeId=${placeId}`;\n      \n      res.json({ \n        success: true, \n        joinUrl,\n        message: 'Game join initiated'\n      });\n    } catch (error) {\n      console.error('Game join error:', error);\n      res.status(500).json({ error: 'Failed to join game' });\n    }\n  });\n\n  // YouTube API routes\n  app.get(\"/api/youtube/popular\", async (req, res) => {\n    try {\n      const maxResults = parseInt(req.query.maxResults as string) || 25;\n      \n      // Fetch diverse content categories\n      const searches = [\n        'DanTDM Minecraft',\n        'Linux tutorial beginner',\n        'JavaScript programming course',\n        'TypeScript tutorial',\n        'programming language development',\n        'Roblox gameplay',\n        'Team Fortress 2 SFM animation',\n        'GTA San Andreas multiplayer',\n        'coding tutorial',\n        'React.js tutorial',\n        'Python programming',\n        'Node.js development',\n        'CSS animations',\n        'Web development',\n        'Rust programming language',\n        'Go programming tutorial',\n        'Docker containerization',\n        'Kubernetes deployment',\n        'AWS cloud computing',\n        'Machine learning basics',\n        'Minecraft redstone tutorial',\n        'Fortnite gameplay',\n        'Call of Duty highlights',\n        'Among Us funny moments',\n        'Fall Guys compilation',\n        'Valorant montage',\n        'Counter-Strike highlights',\n        'Overwatch gameplay',\n        'Apex Legends tips',\n        'League of Legends guide',\n        'Rocket League tricks',\n        'FIFA gameplay',\n        'NBA 2K highlights',\n        'Street Fighter combos',\n        'Tekken tournament',\n        'Super Smash Bros',\n        'Zelda Breath of Wild',\n        'Pokemon gameplay',\n        'Animal Crossing tour',\n        'Stardew Valley guide',\n        'Terraria building',\n        'Subnautica exploration',\n        'Cyberpunk 2077',\n        'Elden Ring boss fight',\n        'God of War gameplay',\n        'Spider-Man PS5',\n        'Horizon Zero Dawn',\n        'Red Dead Redemption 2',\n        'Grand Theft Auto V',\n        'Witcher 3 gameplay',\n        'Skyrim mods showcase',\n        'Roblox Adopt Me',\n        'Roblox Arsenal',\n        'Roblox Jailbreak',\n        'Roblox Murder Mystery',\n        'Roblox Tower of Hell',\n        'Roblox Piggy',\n        'Roblox Doors horror',\n        'TF2 heavy montage',\n        'TF2 spy tricks',\n        'TF2 sniper highlights',\n        'TF2 engineer guide',\n        'TF2 pyro gameplay',\n        'TF2 medic tips',\n        'TF2 demoman sticky',\n        'TF2 soldier rocket',\n        'Linux command line',\n        'Ubuntu installation',\n        'Arch Linux setup',\n        'Debian server config',\n        'CentOS administration',\n        'Kali Linux hacking',\n        'Red Hat Enterprise',\n        'SUSE Linux tutorial',\n        'Fedora desktop setup',\n        'Linux networking',\n        'Bash scripting',\n        'Shell programming',\n        'Terminal tricks',\n        'Vim editor tutorial',\n        'Emacs guide',\n        'Git version control',\n        'GitHub workflow',\n        'DevOps pipeline',\n        'CI/CD tutorial',\n        'Ansible automation',\n        'Terraform infrastructure',\n        'Jenkins setup',\n        'Nginx configuration',\n        'Apache web server',\n        'MySQL database',\n        'PostgreSQL guide',\n        'MongoDB tutorial',\n        'Redis caching',\n        'Elasticsearch search',\n        'GraphQL API',\n        'REST API design',\n        'Microservices architecture',\n        'Serverless computing',\n        'Flutter mobile dev',\n        'React Native app',\n        'Swift iOS development',\n        'Kotlin Android dev',\n        'Unity game development',\n        'Unreal Engine tutorial',\n        'Blender 3D modeling',\n        'Photoshop tutorial',\n        'After Effects motion',\n        'Premiere Pro editing',\n        'Logic Pro music',\n        'Ableton Live beats',\n        'FL Studio production'\n      ];\n      \n      const allVideos = [];\n      for (const search of searches) {\n        try {\n          const videos = await youtubeService.searchVideos(search, 3);\n          allVideos.push(...videos);\n        } catch (searchError) {\n          console.log(`Search failed for \"${search}\":`, searchError);\n        }\n      }\n      \n      // If we got some videos, return them\n      if (allVideos.length > 0) {\n        res.json(allVideos.slice(0, maxResults));\n        return;\n      }\n      \n      // Fallback to popular videos\n      const videos = await youtubeService.getPopularVideos(maxResults);\n      res.json(videos);\n    } catch (error) {\n      console.error(\"Error fetching videos:\", error);\n      \n      // Check if it's an API key issue\n      if (error instanceof Error && error.message.includes('YouTube API key not configured')) {\n        res.status(503).json({ \n          error: \"YouTube API not configured\", \n          message: \"API key required for live data\",\n          fallback: true \n        });\n      } else {\n        console.error(\"YouTube API error:\", error);\n        res.status(503).json({ \n          error: \"YouTube API temporarily unavailable\", \n          message: \"Using fallback content\",\n          fallback: true \n        });\n      }\n    }\n  });\n\n  app.get(\"/api/youtube/search\", async (req, res) => {\n    try {\n      const query = req.query.q as string;\n      const maxResults = parseInt(req.query.maxResults as string) || 25;\n      \n      if (!query) {\n        return res.status(400).json({ error: \"Search query is required\" });\n      }\n      \n      const videos = await youtubeService.searchVideos(query, maxResults);\n      res.json(videos);\n    } catch (error) {\n      console.error(\"YouTube search error:\", error);\n      res.status(500).json({ error: \"Failed to search videos\" });\n    }\n  });\n\n  app.get(\"/api/youtube/category/:categoryId\", async (req, res) => {\n    try {\n      const categoryId = req.params.categoryId;\n      const maxResults = parseInt(req.query.maxResults as string) || 25;\n      const videos = await youtubeService.getVideosByCategory(categoryId, maxResults);\n      res.json(videos);\n    } catch (error) {\n      console.error(\"YouTube category error:\", error);\n      res.status(500).json({ error: \"Failed to fetch category videos\" });\n    }\n  });\n\n  app.get(\"/api/youtube/channel/:channelId\", async (req, res) => {\n    try {\n      const channelId = req.params.channelId;\n      const channel = await youtubeService.getChannelInfo(channelId);\n      res.json(channel);\n    } catch (error) {\n      console.error(\"YouTube channel error:\", error);\n      res.status(500).json({ error: \"Failed to fetch channel info\" });\n    }\n  });\n\n  // Weather API routes\n  app.get(\"/api/weather\", async (req, res) => {\n    try {\n      const location = req.query.location as string || 'London';\n      const apiKey = process.env.OPENWEATHERMAP_API_KEY;\n      \n      if (!apiKey) {\n        return res.status(503).json({ \n          error: \"Weather API not configured\", \n          message: \"OPENWEATHERMAP_API_KEY required\" \n        });\n      }\n\n      const response = await fetch(\n        `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(location)}&appid=${apiKey}&units=metric`\n      );\n      \n      if (!response.ok) {\n        throw new Error(`Weather API error: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      \n      // Transform to our format\n      const weatherData = {\n        location: data.name + ', ' + data.sys.country,\n        temperature: Math.round(data.main.temp),\n        condition: data.weather[0].main,\n        humidity: data.main.humidity,\n        windSpeed: Math.round(data.wind.speed * 3.6), // m/s to km/h\n        pressure: data.main.pressure,\n        visibility: Math.round(data.visibility / 1000),\n        uvIndex: 5, // Would need UV API for real data\n        forecast: [] // Would need forecast API call\n      };\n      \n      res.json(weatherData);\n    } catch (error) {\n      console.error(\"Weather API error:\", error);\n      res.status(500).json({ error: \"Failed to fetch weather data\" });\n    }\n  });\n\n  // News API routes\n  app.get(\"/api/news\", async (req, res) => {\n    try {\n      const category = req.query.category as string || 'general';\n      const apiKey = process.env.NEWS_API_KEY;\n      \n      if (!apiKey) {\n        return res.status(503).json({ \n          error: \"News API not configured\", \n          message: \"NEWS_API_KEY required\" \n        });\n      }\n\n      const response = await fetch(\n        `https://newsapi.org/v2/top-headlines?category=${category}&country=us&apiKey=${apiKey}`\n      );\n      \n      if (!response.ok) {\n        throw new Error(`News API error: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      res.json(data.articles);\n    } catch (error) {\n      console.error(\"News API error:\", error);\n      res.status(500).json({ error: \"Failed to fetch news\" });\n    }\n  });\n\n  // Cryptocurrency API routes\n  app.get(\"/api/crypto\", async (req, res) => {\n    try {\n      const apiKey = process.env.COINAPI_KEY;\n      \n      if (!apiKey) {\n        return res.status(503).json({ \n          error: \"Crypto API not configured\", \n          message: \"COINAPI_KEY required\" \n        });\n      }\n\n      const response = await fetch(\n        'https://rest.coinapi.io/v1/assets',\n        {\n          headers: {\n            'X-CoinAPI-Key': apiKey\n          }\n        }\n      );\n      \n      if (!response.ok) {\n        throw new Error(`Crypto API error: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      res.json(data.slice(0, 20)); // Return top 20 cryptocurrencies\n    } catch (error) {\n      console.error(\"Crypto API error:\", error);\n      res.status(500).json({ error: \"Failed to fetch crypto data\" });\n    }\n  });\n\n  // Stock market API routes\n  app.get(\"/api/stocks\", async (req, res) => {\n    try {\n      const symbol = req.query.symbol as string || 'AAPL';\n      const apiKey = process.env.ALPHA_VANTAGE_API_KEY;\n      \n      if (!apiKey) {\n        return res.status(503).json({ \n          error: \"Stock API not configured\", \n          message: \"ALPHA_VANTAGE_API_KEY required\" \n        });\n      }\n\n      const response = await fetch(\n        `https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${symbol}&apikey=${apiKey}`\n      );\n      \n      if (!response.ok) {\n        throw new Error(`Stock API error: ${response.status}`);\n      }\n      \n      const data = await response.json();\n      res.json(data);\n    } catch (error) {\n      console.error(\"Stock API error:\", error);\n      res.status(500).json({ error: \"Failed to fetch stock data\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n\n  // WebSocket proxy server for real-time applications\n  try {\n    const wss = new WebSocketServer({ \n      server: httpServer,\n      path: '/api/ws-proxy'\n    });\n\n    // Direct WebSocket server for connection monitoring\n    const directWss = new WebSocketServer({\n      server: httpServer,\n      path: '/ws'\n    });\n\n    // Handle direct WebSocket connections for monitoring\n    directWss.on('connection', (ws, req) => {\n      console.log('Direct WebSocket connection established');\n      \n      // Send connection confirmation\n      ws.send(JSON.stringify({\n        type: 'connection',\n        status: 'connected',\n        timestamp: Date.now()\n      }));\n\n      // Handle incoming messages\n      ws.on('message', (data: Buffer) => {\n        try {\n          const message = JSON.parse(data.toString());\n          \n          // Handle ping requests for latency measurement\n          if (message.type === 'ping') {\n            ws.send(JSON.stringify({\n              type: 'pong',\n              timestamp: message.timestamp,\n              serverTime: Date.now()\n            }));\n            return;\n          }\n\n          // Handle connection test requests\n          if (message.type === 'test') {\n            ws.send(JSON.stringify({\n              type: 'test-response',\n              status: 'success',\n              timestamp: Date.now()\n            }));\n            return;\n          }\n\n          // Echo other messages for testing\n          ws.send(JSON.stringify({\n            type: 'echo',\n            originalMessage: message,\n            timestamp: Date.now()\n          }));\n        } catch (error) {\n          console.error('WebSocket message parsing error:', error);\n          ws.send(JSON.stringify({\n            type: 'error',\n            message: 'Invalid message format',\n            timestamp: Date.now()\n          }));\n        }\n      });\n\n      // Handle connection close\n      ws.on('close', (code, reason) => {\n        console.log(`Direct WebSocket connection closed: ${code} ${reason}`);\n      });\n\n      // Handle errors\n      ws.on('error', (error) => {\n        console.error('Direct WebSocket error:', error);\n      });\n\n      // Send periodic heartbeat\n      const heartbeatInterval = setInterval(() => {\n        if (ws.readyState === ws.OPEN) {\n          ws.send(JSON.stringify({\n            type: 'heartbeat',\n            timestamp: Date.now()\n          }));\n        } else {\n          clearInterval(heartbeatInterval);\n        }\n      }, 30000);\n    });\n\n    wss.on('connection', (ws, req) => {\n      try {\n        const url = new URL(req.url!, `http://${req.headers.host}`);\n        const targetUrl = url.searchParams.get('target');\n        \n        if (!targetUrl) {\n          ws.close(1008, 'Target WebSocket URL required');\n          return;\n        }\n\n        const WebSocket = require('ws');\n        const targetWs = new WebSocket(targetUrl, {\n          headers: {\n            'User-Agent': getRandomUserAgent(),\n            'Origin': req.headers.origin || 'https://proxy.webos.dev'\n          }\n        });\n\n        // Proxy messages from client to target with heartbeat support\n        ws.on('message', (data: Buffer) => {\n          try {\n            const message = JSON.parse(data.toString());\n            \n            // Handle ping/pong heartbeat messages\n            if (message.type === 'ping') {\n              ws.send(JSON.stringify({\n                type: 'pong',\n                timestamp: message.timestamp\n              }));\n              return;\n            }\n            \n            // Forward other messages to target\n            if (targetWs.readyState === WebSocket.OPEN) {\n              targetWs.send(data);\n            }\n          } catch (error) {\n            // If not JSON, forward raw data\n            if (targetWs.readyState === WebSocket.OPEN) {\n              targetWs.send(data);\n            }\n          }\n        });\n\n        // Proxy messages from target to client\n        targetWs.on('message', (data: Buffer) => {\n          if (ws.readyState === ws.OPEN) {\n            ws.send(data);\n          }\n        });\n\n        // Handle connection events\n        targetWs.on('open', () => {\n          console.log('WebSocket proxy connection established');\n        });\n\n        targetWs.on('error', (error: Error) => {\n          console.error('Target WebSocket error:', error.message);\n          ws.close(1011, 'Target connection error');\n        });\n\n        targetWs.on('close', (code: number, reason: Buffer) => {\n          ws.close(code, reason.toString());\n        });\n\n        ws.on('close', () => {\n          if (targetWs.readyState !== WebSocket.CLOSED) {\n            targetWs.close();\n          }\n        });\n\n        ws.on('error', (error: Error) => {\n          console.error('Client WebSocket error:', error.message);\n          if (targetWs.readyState !== WebSocket.CLOSED) {\n            targetWs.close();\n          }\n        });\n\n      } catch (error) {\n        console.error('WebSocket proxy connection error:', error);\n        ws.close(1011, 'Proxy setup failed');\n      }\n    });\n\n    console.log('WebSocket proxy server initialized on /api/ws-proxy');\n    console.log('Direct WebSocket server initialized on /ws');\n  } catch (error) {\n    console.error('Failed to initialize WebSocket server:', error);\n  }\n\n  // Add proxy headers middleware\n  app.use('/api/proxy', (req, res, next) => {\n    res.setHeader('X-Proxy-Version', '2.0.0');\n    res.setHeader('X-Proxy-Features', 'caching,compression,adblock,security,websocket');\n    res.setHeader('X-Powered-By', 'Advanced WebOS Proxy');\n    next();\n  });\n\n  return httpServer;\n}\n","size_bytes":93239},"server/storage.ts":{"content":"import { users, files, osSettings, type User, type InsertUser, type File, type InsertFile, type OsSettings, type InsertOsSettings } from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  getUser(id: number): Promise<User | undefined>;\n  getUserByUsername(username: string): Promise<User | undefined>;\n  createUser(user: InsertUser): Promise<User>;\n  getUserFiles(userId: number, parentId?: number): Promise<File[]>;\n  createFile(file: InsertFile): Promise<File>;\n  updateFile(id: number, updates: Partial<InsertFile>): Promise<File | undefined>;\n  deleteFile(id: number): Promise<boolean>;\n  getUserSettings(userId: number): Promise<OsSettings | undefined>;\n  updateUserSettings(userId: number, settings: Partial<InsertOsSettings>): Promise<OsSettings>;\n  factoryReset(): Promise<void>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getUser(id: number): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByUsername(username: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.username, username));\n    return user || undefined;\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(insertUser)\n      .returning();\n    return user;\n  }\n\n  async getUserFiles(userId: number, parentId?: number): Promise<File[]> {\n    return await db\n      .select()\n      .from(files)\n      .where(\n        parentId \n          ? eq(files.parentId, parentId)\n          : eq(files.userId, userId)\n      );\n  }\n\n  async createFile(file: InsertFile): Promise<File> {\n    const [newFile] = await db\n      .insert(files)\n      .values(file)\n      .returning();\n    return newFile;\n  }\n\n  async updateFile(id: number, updates: Partial<InsertFile>): Promise<File | undefined> {\n    const [updatedFile] = await db\n      .update(files)\n      .set({ ...updates, updatedAt: new Date() })\n      .where(eq(files.id, id))\n      .returning();\n    return updatedFile || undefined;\n  }\n\n  async deleteFile(id: number): Promise<boolean> {\n    const result = await db.delete(files).where(eq(files.id, id));\n    return result.rowCount > 0;\n  }\n\n  async getUserSettings(userId: number): Promise<OsSettings | undefined> {\n    const [settings] = await db\n      .select()\n      .from(osSettings)\n      .where(eq(osSettings.userId, userId));\n    return settings || undefined;\n  }\n\n  async updateUserSettings(userId: number, settingsData: Partial<InsertOsSettings>): Promise<OsSettings> {\n    const existing = await this.getUserSettings(userId);\n    \n    if (existing) {\n      const [updated] = await db\n        .update(osSettings)\n        .set({ ...settingsData, updatedAt: new Date() })\n        .where(eq(osSettings.userId, userId))\n        .returning();\n      return updated;\n    } else {\n      const [created] = await db\n        .insert(osSettings)\n        .values({ userId, ...settingsData })\n        .returning();\n      return created;\n    }\n  }\n\n  async factoryReset(): Promise<void> {\n    try {\n      // Delete all data from all tables while preserving table structure\n      await db.delete(osSettings);\n      await db.delete(files);  \n      await db.delete(users);\n      console.log('Database factory reset completed successfully');\n    } catch (error) {\n      console.error('Factory reset error:', error);\n      throw error;\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":3555},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2254},"server/youtube.ts":{"content":"interface YouTubeVideo {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  duration: string;\n  views: number;\n  publishedAt: string;\n  channelTitle: string;\n  channelId: string;\n}\n\ninterface YouTubeChannel {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  subscriberCount: number;\n}\n\nclass YouTubeService {\n  private apiKey: string;\n  private baseUrl = 'https://www.googleapis.com/youtube/v3';\n\n  constructor() {\n    this.apiKey = process.env.YOUTUBE_API_KEY || '';\n  }\n\n  private async makeRequest(endpoint: string, params: Record<string, string>) {\n    if (!this.apiKey) {\n      throw new Error('YouTube API key not configured');\n    }\n\n    const url = new URL(`${this.baseUrl}/${endpoint}`);\n    url.searchParams.append('key', this.apiKey);\n    \n    Object.entries(params).forEach(([key, value]) => {\n      url.searchParams.append(key, value);\n    });\n\n    const response = await fetch(url.toString());\n    if (!response.ok) {\n      const errorData = await response.text();\n      throw new Error(`YouTube API error: ${response.status} ${response.statusText} - ${errorData}`);\n    }\n\n    return response.json();\n  }\n\n  private parseDuration(duration: string): string {\n    const match = duration.match(/PT(?:(\\d+)H)?(?:(\\d+)M)?(?:(\\d+)S)?/);\n    if (!match) return '0:00';\n\n    const hours = parseInt(match[1] || '0');\n    const minutes = parseInt(match[2] || '0');\n    const seconds = parseInt(match[3] || '0');\n\n    if (hours > 0) {\n      return `${hours}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;\n    }\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n\n  async getPopularVideos(maxResults: number = 25): Promise<YouTubeVideo[]> {\n    try {\n      const data = await this.makeRequest('videos', {\n        part: 'snippet,statistics,contentDetails',\n        chart: 'mostPopular',\n        regionCode: 'US',\n        maxResults: maxResults.toString()\n      });\n\n      return data.items.map((item: any) => ({\n        id: item.id,\n        title: item.snippet.title,\n        description: item.snippet.description,\n        thumbnail: item.snippet.thumbnails.high?.url || item.snippet.thumbnails.medium?.url,\n        duration: this.parseDuration(item.contentDetails.duration),\n        views: parseInt(item.statistics.viewCount || '0'),\n        publishedAt: item.snippet.publishedAt,\n        channelTitle: item.snippet.channelTitle,\n        channelId: item.snippet.channelId\n      }));\n    } catch (error) {\n      console.error('Error fetching popular videos:', error);\n      throw error;\n    }\n  }\n\n  async searchVideos(query: string, maxResults: number = 25): Promise<YouTubeVideo[]> {\n    try {\n      const searchData = await this.makeRequest('search', {\n        part: 'snippet',\n        q: query,\n        type: 'video',\n        maxResults: maxResults.toString(),\n        order: 'relevance'\n      });\n\n      const videoIds = searchData.items.map((item: any) => item.id.videoId).join(',');\n      \n      const videoData = await this.makeRequest('videos', {\n        part: 'snippet,statistics,contentDetails',\n        id: videoIds\n      });\n\n      return videoData.items.map((item: any) => ({\n        id: item.id,\n        title: item.snippet.title,\n        description: item.snippet.description,\n        thumbnail: item.snippet.thumbnails.high?.url || item.snippet.thumbnails.medium?.url,\n        duration: this.parseDuration(item.contentDetails.duration),\n        views: parseInt(item.statistics.viewCount || '0'),\n        publishedAt: item.snippet.publishedAt,\n        channelTitle: item.snippet.channelTitle,\n        channelId: item.snippet.channelId\n      }));\n    } catch (error) {\n      console.error('Error searching videos:', error);\n      throw error;\n    }\n  }\n\n  async getVideosByCategory(categoryId: string, maxResults: number = 25): Promise<YouTubeVideo[]> {\n    try {\n      const data = await this.makeRequest('videos', {\n        part: 'snippet,statistics,contentDetails',\n        chart: 'mostPopular',\n        videoCategoryId: categoryId,\n        regionCode: 'US',\n        maxResults: maxResults.toString()\n      });\n\n      return data.items.map((item: any) => ({\n        id: item.id,\n        title: item.snippet.title,\n        description: item.snippet.description,\n        thumbnail: item.snippet.thumbnails.high?.url || item.snippet.thumbnails.medium?.url,\n        duration: this.parseDuration(item.contentDetails.duration),\n        views: parseInt(item.statistics.viewCount || '0'),\n        publishedAt: item.snippet.publishedAt,\n        channelTitle: item.snippet.channelTitle,\n        channelId: item.snippet.channelId\n      }));\n    } catch (error) {\n      console.error('Error fetching category videos:', error);\n      throw error;\n    }\n  }\n\n  async getChannelInfo(channelId: string): Promise<YouTubeChannel> {\n    try {\n      const data = await this.makeRequest('channels', {\n        part: 'snippet,statistics',\n        id: channelId\n      });\n\n      const channel = data.items[0];\n      return {\n        id: channel.id,\n        title: channel.snippet.title,\n        description: channel.snippet.description,\n        thumbnail: channel.snippet.thumbnails.high?.url || channel.snippet.thumbnails.medium?.url,\n        subscriberCount: parseInt(channel.statistics.subscriberCount || '0')\n      };\n    } catch (error) {\n      console.error('Error fetching channel info:', error);\n      throw error;\n    }\n  }\n\n  getVideoEmbedUrl(videoId: string): string {\n    return `https://www.youtube.com/embed/${videoId}`;\n  }\n\n  getVideoWatchUrl(videoId: string): string {\n    return `https://www.youtube.com/watch?v=${videoId}`;\n  }\n}\n\nexport const youtubeService = new YouTubeService();\nexport type { YouTubeVideo, YouTubeChannel };","size_bytes":5747},"shared/schema.ts":{"content":"import { pgTable, text, serial, integer, boolean, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\nimport { relations } from \"drizzle-orm\";\n\nexport const users = pgTable(\"users\", {\n  id: serial(\"id\").primaryKey(),\n  username: text(\"username\").notNull().unique(),\n  password: text(\"password\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n});\n\nexport const files: any = pgTable(\"files\", {\n  id: serial(\"id\").primaryKey(),\n  name: text(\"name\").notNull(),\n  path: text(\"path\").notNull(),\n  type: text(\"type\").notNull(), // 'file' or 'folder'\n  content: text(\"content\"),\n  size: integer(\"size\").default(0),\n  userId: integer(\"user_id\").notNull(),\n  parentId: integer(\"parent_id\"),\n  createdAt: timestamp(\"created_at\").defaultNow().notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\nexport const osSettings = pgTable(\"os_settings\", {\n  id: serial(\"id\").primaryKey(),\n  userId: integer(\"user_id\").references(() => users.id).notNull(),\n  theme: text(\"theme\").default(\"dark\").notNull(),\n  wallpaper: text(\"wallpaper\").default(\"default\").notNull(),\n  showDesktopIcons: boolean(\"show_desktop_icons\").default(true).notNull(),\n  soundEffects: boolean(\"sound_effects\").default(true).notNull(),\n  updatedAt: timestamp(\"updated_at\").defaultNow().notNull(),\n});\n\n// Relations\nexport const usersRelations = relations(users, ({ many, one }) => ({\n  files: many(files),\n  settings: one(osSettings),\n}));\n\nexport const filesRelations = relations(files, ({ one, many }) => ({\n  user: one(users, {\n    fields: [files.userId],\n    references: [users.id],\n  }),\n  parent: one(files, {\n    fields: [files.parentId],\n    references: [files.id],\n  }),\n  children: many(files),\n}));\n\nexport const osSettingsRelations = relations(osSettings, ({ one }) => ({\n  user: one(users, {\n    fields: [osSettings.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const insertUserSchema = createInsertSchema(users).pick({\n  username: true,\n  password: true,\n});\n\nexport const insertFileSchema = createInsertSchema(files).pick({\n  name: true,\n  path: true,\n  type: true,\n  content: true,\n  size: true,\n  userId: true,\n  parentId: true,\n});\n\nexport const insertOsSettingsSchema = createInsertSchema(osSettings).pick({\n  userId: true,\n  theme: true,\n  wallpaper: true,\n  showDesktopIcons: true,\n  soundEffects: true,\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type User = typeof users.$inferSelect;\nexport type InsertFile = z.infer<typeof insertFileSchema>;\nexport type File = typeof files.$inferSelect;\nexport type InsertOsSettings = z.infer<typeof insertOsSettingsSchema>;\nexport type OsSettings = typeof osSettings.$inferSelect;\n","size_bytes":2741},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { Desktop } from \"@/components/desktop/Desktop\";\nimport { ArchInstaller } from \"@/components/ArchInstaller\";\nimport { WelcomeDialog } from \"@/components/WelcomeDialog\";\nimport { LoginScreen } from \"@/components/LoginScreen\";\nimport { LoginAnimation } from \"@/components/LoginAnimation\";\nimport { ShutdownScreen } from \"@/components/ShutdownScreen\";\nimport { ShutdownConsole } from \"@/components/ShutdownConsole\";\nimport { BumblebeeOS } from \"@/components/BumblebeeOS\";\nimport NotFound from \"@/pages/not-found\";\nimport { useState } from \"react\";\n\nfunction Router() {\n  const [isInstalled, setIsInstalled] = useState(() => {\n    // Check if we have terminal redirect parameter after factory reset\n    const urlParams = new URLSearchParams(window.location.search);\n    if (urlParams.get('terminal') === 'true') {\n      // Clear the URL parameter\n      window.history.replaceState({}, '', window.location.pathname);\n      return false; // Force terminal view\n    }\n    // Check if already installed\n    return localStorage.getItem('archInstalled') === 'true';\n  });\n  \n  const [showWelcome, setShowWelcome] = useState(() => {\n    // Check if setup is complete\n    return localStorage.getItem('webos-setup-complete') !== 'true';\n  });\n\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n  const [showShutdown, setShowShutdown] = useState(false);\n  const [showShutdownConsole, setShowShutdownConsole] = useState(false);\n  const [shutdownType, setShutdownType] = useState<'shutdown' | 'restart' | 'logout'>('shutdown');\n  const [showLoginAnimation, setShowLoginAnimation] = useState(false);\n  const [currentUser, setCurrentUser] = useState(() => {\n    const stored = localStorage.getItem('webos-current-user');\n    return stored ? JSON.parse(stored) : null;\n  });\n\n  const [inBumblebeeOS, setInBumblebeeOS] = useState(() => {\n    return localStorage.getItem('bumblebee-active') === 'true';\n  });\n\n  const handleInstallComplete = () => {\n    localStorage.setItem('archInstalled', 'true');\n    setIsInstalled(true);\n    setShowWelcome(false);\n    setIsLoggedIn(false);\n    // Clear any auto-login states\n    localStorage.removeItem('webos-current-user');\n    localStorage.removeItem('webos-auto-login');\n  };\n\n  const handleWelcomeComplete = (userInfo: any) => {\n    // Apply user settings but don't auto-login\n    localStorage.setItem('webos-theme', userInfo.theme);\n    localStorage.setItem('webos-wallpaper', userInfo.wallpaper);\n    localStorage.setItem('webos-username', userInfo.username);\n    localStorage.setItem('webos-setup-complete', 'true');\n    \n    // Apply theme immediately\n    document.documentElement.classList.toggle('dark', userInfo.theme === 'dark');\n    \n    // Dispatch events to update desktop\n    window.dispatchEvent(new CustomEvent('wallpaper-change', { \n      detail: { wallpaper: getWallpaperClass(userInfo.wallpaper) } \n    }));\n    \n    setShowWelcome(false);\n    setIsLoggedIn(false); // Force manual login\n  };\n\n  const handleLogin = (user: any) => {\n    setCurrentUser(user);\n    setShowLoginAnimation(true);\n    \n    // Apply user preferences\n    document.documentElement.classList.toggle('dark', user.theme === 'dark');\n    window.dispatchEvent(new CustomEvent('wallpaper-change', { \n      detail: { wallpaper: getWallpaperClass(user.wallpaper) } \n    }));\n  };\n\n  const handleLoginAnimationComplete = () => {\n    setShowLoginAnimation(false);\n    setIsLoggedIn(true);\n  };\n\n  const handleLogout = () => {\n    setShutdownType('logout');\n    setShowShutdown(false);\n    setShowShutdownConsole(true);\n  };\n\n  const handleRestart = () => {\n    setShutdownType('restart');\n    setShowShutdown(false);\n    setShowShutdownConsole(true);\n  };\n\n  const handleShutdown = () => {\n    setShowShutdown(true);\n  };\n\n  const handleShutdownAction = () => {\n    setShutdownType('shutdown');\n    setShowShutdown(false);\n    setShowShutdownConsole(true);\n  };\n\n  const handleShutdownComplete = () => {\n    setShowShutdownConsole(false);\n    \n    if (shutdownType === 'logout') {\n      localStorage.removeItem('webos-current-user');\n      localStorage.removeItem('webos-last-user');\n      setCurrentUser(null);\n      setIsLoggedIn(false);\n    } else if (shutdownType === 'restart') {\n      localStorage.removeItem('webos-current-user');\n      localStorage.removeItem('webos-last-user');\n      window.location.reload();\n    } else {\n      localStorage.removeItem('webos-current-user');\n      localStorage.removeItem('webos-last-user');\n      setCurrentUser(null);\n      setIsLoggedIn(false);\n    }\n  };\n\n  const handleBumblebeeOSLaunch = () => {\n    localStorage.setItem('bumblebee-active', 'true');\n    setInBumblebeeOS(true);\n  };\n\n  const handleReturnToWebOS = () => {\n    localStorage.removeItem('bumblebee-active');\n    setInBumblebeeOS(false);\n  };\n\n  const handleFactoryReset = () => {\n    // Clear all user data except installation status\n    const keysToKeep = [\n      'archInstalled',\n      'webos-setup-complete'\n    ];\n    \n    const allKeys = Object.keys(localStorage);\n    allKeys.forEach(key => {\n      if (!keysToKeep.includes(key)) {\n        localStorage.removeItem(key);\n      }\n    });\n    \n    // Reset application state\n    setCurrentUser(null);\n    setIsLoggedIn(false);\n    setShowShutdown(false);\n    \n    // Force a complete page reload to reset all state\n    window.location.reload();\n  };\n\n  const getWallpaperClass = (wallpaper: string) => {\n    switch (wallpaper) {\n      case 'terminal':\n        return 'bg-gradient-to-br from-green-900 to-black';\n      case 'code':\n        return 'bg-gradient-to-br from-blue-900 to-indigo-900';\n      case 'matrix':\n        return 'bg-gradient-to-br from-black to-green-800';\n      case 'cyber':\n        return 'bg-gradient-to-br from-purple-900 to-black';\n      case 'sunset':\n        return 'bg-gradient-to-br from-orange-600 to-red-800';\n      case 'ocean':\n        return 'bg-gradient-to-br from-blue-400 to-blue-800';\n      case 'forest':\n        return 'bg-gradient-to-br from-green-600 to-green-900';\n      case 'fire':\n        return 'bg-gradient-to-br from-red-500 to-orange-700';\n      case 'cosmic':\n        return 'bg-gradient-to-br from-indigo-600 to-purple-800';\n      case 'dawn':\n        return 'bg-gradient-to-br from-pink-400 to-purple-600';\n      case 'midnight':\n        return 'bg-gradient-to-br from-gray-900 to-blue-900';\n      case 'custom':\n        const customImage = localStorage.getItem('webos-custom-wallpaper');\n        return customImage ? `bg-[url('${customImage}')] bg-cover bg-center bg-no-repeat` : 'bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900';\n      default:\n        return 'bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900';\n    }\n  };\n\n  if (!isInstalled) {\n    return <ArchInstaller onInstallComplete={handleInstallComplete} />;\n  }\n\n  if (inBumblebeeOS) {\n    return <BumblebeeOS onReturnToWebOS={handleReturnToWebOS} />;\n  }\n\n  if (showShutdownConsole) {\n    return (\n      <ShutdownConsole \n        onComplete={handleShutdownComplete}\n        shutdownType={shutdownType}\n      />\n    );\n  }\n\n  if (showShutdown) {\n    return (\n      <ShutdownScreen \n        onRestart={handleRestart}\n        onLogout={handleLogout}\n        onCancel={() => setShowShutdown(false)}\n        onFactoryReset={handleFactoryReset}\n        onShutdown={handleShutdownAction}\n      />\n    );\n  }\n\n  if (showLoginAnimation && currentUser) {\n    return (\n      <LoginAnimation \n        username={currentUser.fullName || currentUser.username}\n        onComplete={handleLoginAnimationComplete}\n      />\n    );\n  }\n\n  if (!isLoggedIn) {\n    return (\n      <LoginScreen \n        onLogin={handleLogin}\n        onShutdown={handleShutdown}\n      />\n    );\n  }\n\n  return (\n    <>\n      <Switch>\n        <Route path=\"/\" component={() => <Desktop \n          onLogout={handleLogout} \n          onShutdown={handleShutdown}\n          onRestart={handleRestart}\n        />} />\n        <Route component={NotFound} />\n      </Switch>\n      \n      <WelcomeDialog \n        isOpen={showWelcome} \n        onComplete={handleWelcomeComplete} \n      />\n    </>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <Toaster />\n        <Router />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":8548},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n:root {\n  --background: 216 28% 7%;\n  --foreground: 213 31% 91%;\n  --muted: 215 27.9% 16.9%;\n  --muted-foreground: 217.9 10.6% 64.9%;\n  --popover: 215 27.9% 16.9%;\n  --popover-foreground: 213 31% 91%;\n  --card: 215 27.9% 16.9%;\n  --card-foreground: 213 31% 91%;\n  --border: 217.2 32.6% 17.5%;\n  --input: 217.2 32.6% 17.5%;\n  --primary: 197 71% 73%;\n  --primary-foreground: 215 27.9% 16.9%;\n  --secondary: 215 27.9% 16.9%;\n  --secondary-foreground: 213 31% 91%;\n  --accent: 215 27.9% 16.9%;\n  --accent-foreground: 213 31% 91%;\n  --destructive: 0 84.2% 60.2%;\n  --destructive-foreground: 213 31% 91%;\n  --ring: 197 71% 73%;\n  --radius: 0.375rem;\n  --arch-blue: 197 71% 73%;\n  --arch-dark: 216 28% 7%;\n  --arch-surface: 217.2 32.6% 17.5%;\n  --arch-lighter: 215 27.9% 16.9%;\n  --arch-text: 213 31% 91%;\n}\n\n.dark {\n  --background: 240 10% 3.9%;\n  --foreground: 0 0% 98%;\n  --muted: 240 3.7% 15.9%;\n  --muted-foreground: 240 5% 64.9%;\n  --popover: 240 10% 3.9%;\n  --popover-foreground: 0 0% 98%;\n  --card: 240 10% 3.9%;\n  --card-foreground: 0 0% 98%;\n  --border: 240 3.7% 15.9%;\n  --input: 240 3.7% 15.9%;\n  --primary: 207 90% 54%;\n  --primary-foreground: 211 100% 99%;\n  --secondary: 240 3.7% 15.9%;\n  --secondary-foreground: 0 0% 98%;\n  --accent: 240 3.7% 15.9%;\n  --accent-foreground: 0 0% 98%;\n  --destructive: 0 62.8% 30.6%;\n  --destructive-foreground: 0 0% 98%;\n  --ring: 240 4.9% 83.9%;\n  --radius: 0.5rem;\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/* Custom OS Styles */\n.desktop-icon {\n  transition: all 0.2s ease;\n}\n\n.desktop-icon:hover {\n  transform: scale(1.05);\n}\n\n/* Corrupted desktop state */\n.corrupted-desktop {\n  background: linear-gradient(45deg, #ff0000 0%, #000000 50%, #ff0000 100%);\n  background-size: 20px 20px;\n  animation: corrupted-flicker 2s infinite;\n}\n\n@keyframes corrupted-flicker {\n  0%, 50%, 100% { opacity: 1; }\n  25%, 75% { opacity: 0.8; }\n}\n\n.corrupted-wallpaper {\n  background: repeating-linear-gradient(\n    45deg,\n    #220000,\n    #220000 10px,\n    #440000 10px,\n    #440000 20px\n  );\n  position: relative;\n}\n\n.corrupted-wallpaper::before {\n  content: \"SYSTEM ERROR - MISSING DEPENDENCIES\";\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: #ff4444;\n  font-size: 24px;\n  font-weight: bold;\n  text-shadow: 2px 2px 4px rgba(0,0,0,0.8);\n  animation: error-blink 1s infinite;\n}\n\n@keyframes error-blink {\n  0%, 50% { opacity: 1; }\n  51%, 100% { opacity: 0.3; }\n}\n\n.window-shadow {\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);\n}\n\n.glass-effect {\n  backdrop-filter: blur(20px);\n  background: rgba(255, 255, 255, 0.8);\n}\n\n.taskbar-glass {\n  backdrop-filter: blur(30px);\n  background: rgba(248, 248, 248, 0.8);\n}\n\n.dragging {\n  user-select: none;\n  z-index: 1000;\n}\n\n.window-content {\n  height: calc(100% - 40px);\n}\n\n.select-none {\n  user-select: none;\n}\n\n\n\n/* Custom animations */\n@keyframes fade-in {\n  from { opacity: 0; }\n  to { opacity: 1; }\n}\n\n@keyframes scale-in {\n  from { opacity: 0; transform: scale(0.9); }\n  to { opacity: 1; transform: scale(1); }\n}\n\n@keyframes slide-up {\n  from { opacity: 0; transform: translateY(20px); }\n  to { opacity: 1; transform: translateY(0); }\n}\n\n.animate-fade-in {\n  animation: fade-in 0.2s ease-out;\n}\n\n.animate-scale-in {\n  animation: scale-in 0.2s ease-out;\n}\n\n.animate-slide-up {\n  animation: slide-up 0.3s ease-out;\n}\n\n/* Scrollbar styling */\n::-webkit-scrollbar {\n  width: 8px;\n  height: 8px;\n}\n\n::-webkit-scrollbar-track {\n  background: transparent;\n}\n\n::-webkit-scrollbar-thumb {\n  background: rgba(0, 0, 0, 0.2);\n  border-radius: 4px;\n}\n\n::-webkit-scrollbar-thumb:hover {\n  background: rgba(0, 0, 0, 0.3);\n}\n\n/* Login Animation Styles */\n.animate-fade-in {\n  animation: fadeIn 1s ease-in-out;\n}\n\n@keyframes fadeIn {\n  0% {\n    opacity: 0;\n    transform: translateY(20px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n","size_bytes":4006},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ArchInstaller.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\n\ninterface InstallerLine {\n  type: 'system' | 'input' | 'error' | 'success';\n  content: string;\n  timestamp: Date;\n}\n\ninterface ArchInstallerProps {\n  onInstallComplete: () => void;\n}\n\nexport const ArchInstaller: FC<ArchInstallerProps> = ({ onInstallComplete }) => {\n  const [lines, setLines] = useState<InstallerLine[]>([\n    {\n      type: 'system',\n      content: 'WebOS Installation Macromedia v4.0',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: '',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Booting from WebOS Installation Macromedia...',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Loading kernel modules... [OK]',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Initializing hardware... [OK]',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Starting network services... [OK]',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: '',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Welcome to WebOS Installation Environment',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Ready for installation - Type \"help\" for available commands',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: '',\n      timestamp: new Date()\n    },\n    {\n      type: 'input',\n      content: 'root@webos-installer:~#',\n      timestamp: new Date()\n    }\n  ]);\n  \n  const [currentCommand, setCurrentCommand] = useState('');\n  const [isInstalling, setIsInstalling] = useState(false);\n  const [installStep, setInstallStep] = useState(0);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  const installSteps = [\n    'Partitioning disk...',\n    'Creating filesystem...',\n    'Installing base system...',\n    'Setting up bootloader...',\n    'Configuring system...',\n    'Installation complete!'\n  ];\n\n  const showLoadingAnimation = (callback: () => void) => {\n    const loadingFrames = ['⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏'];\n    let frameIndex = 0;\n    let loadingCount = 0;\n    \n    const loadingLine: InstallerLine = {\n      type: 'system',\n      content: `${loadingFrames[0]} Initializing installation...`,\n      timestamp: new Date()\n    };\n    \n    setLines(prev => [...prev, loadingLine]);\n    \n    const animationInterval = setInterval(() => {\n      frameIndex = (frameIndex + 1) % loadingFrames.length;\n      loadingCount++;\n      \n      setLines(prev => {\n        const newLines = [...prev];\n        const lastLine = newLines[newLines.length - 1];\n        if (lastLine.content.includes('Initializing installation')) {\n          newLines[newLines.length - 1] = {\n            ...lastLine,\n            content: `${loadingFrames[frameIndex]} Initializing installation...`\n          };\n        }\n        return newLines;\n      });\n      \n      if (loadingCount >= 20) { // About 2 seconds\n        clearInterval(animationInterval);\n        setLines(prev => {\n          const newLines = [...prev];\n          newLines[newLines.length - 1] = {\n            ...newLines[newLines.length - 1],\n            content: '✓ Installation initialized'\n          };\n          return newLines;\n        });\n        \n        setTimeout(() => {\n          callback();\n        }, 300);\n      }\n    }, 100);\n  };\n\n  const simulateBumblebeeInstall = () => {\n    const bumblebeeLines: InstallerLine[] = [\n      {\n        type: 'system',\n        content: '=== Bumblebee OS Installation ===',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'The Ubuntu-based operating system made by BumblebeeOS Team and owned by WebOS',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'success',\n        content: 'BUMBLEBEE OS INSTALLATION MODE',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'This installation provides:',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Ubuntu 22.04 LTS base with Bumblebee',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• GNOME desktop environment with custom themes',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Snap and APT package management',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Enhanced gaming and multimedia support',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Developer tools and productivity applications',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Automatic driver installation and optimization',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }\n    ];\n    \n    setLines(prev => [...prev, ...bumblebeeLines]);\n    \n    let step = 0;\n    const bumblebeeSteps = [\n      { msg: '✓ Verifying system compatibility', delay: 700 },\n      { msg: '✓ Downloading Ubuntu 22.04 LTS base image', delay: 1200 },\n      { msg: '✓ Extracting Bumblebee OS components', delay: 900 },\n      { msg: '✓ Setting up partition scheme (/, /home, swap)', delay: 800 },\n      { msg: '✓ Installing base Ubuntu system', delay: 1500 },\n      { msg: '✓ Configuring GNOME desktop environment', delay: 1000 },\n      { msg: '✓ Installing Bumblebee theme and customizations', delay: 800 },\n      { msg: '✓ Setting up package repositories (apt, snap)', delay: 600 },\n      { msg: '✓ Installing multimedia codecs and drivers', delay: 900 },\n      { msg: '✓ Configuring gaming optimizations', delay: 700 },\n      { msg: '✓ Installing productivity suite (LibreOffice, Firefox)', delay: 800 },\n      { msg: '✓ Setting up development environment', delay: 600 },\n      { msg: '✓ Configuring automatic updates', delay: 500 },\n      { msg: '✓ Installing Bumblebee welcome application', delay: 400 },\n      { msg: '', delay: 300 },\n      { msg: 'BUMBLEBEE OS INSTALLATION COMPLETE', delay: 500 },\n      { msg: 'System: Ubuntu-based Bumblebee OS with GNOME desktop', delay: 200 },\n      { msg: 'Features: Gaming optimized, multimedia ready, developer friendly', delay: 200 },\n      { msg: 'Type \"reboot\" to start Bumblebee OS', delay: 0 }\n    ];\n    \n    const executeStep = () => {\n      if (step < bumblebeeSteps.length) {\n        const stepInfo = bumblebeeSteps[step];\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: step >= bumblebeeSteps.length - 4 ? 'success' : 'system',\n            content: stepInfo.msg,\n            timestamp: new Date()\n          }]);\n          step++;\n          executeStep();\n        }, stepInfo.delay);\n      } else {\n        // Launch Bumblebee OS instead of completing installation\n        localStorage.setItem('bumblebee-active', 'true');\n        \n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'success',\n            content: 'Starting Bumblebee OS...',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'Loading Ubuntu-based desktop environment',\n            timestamp: new Date()\n          }]);\n          \n          // Launch Bumblebee OS after 2 seconds\n          setTimeout(() => {\n            window.location.reload(); // This will trigger Bumblebee OS to load\n          }, 2000);\n        }, 1000);\n      }\n    };\n    \n    setTimeout(executeStep, 1000);\n  };\n\n  const simulateQuickInstall = () => {\n    const quickLines: InstallerLine[] = [\n      {\n        type: 'system',\n        content: '=== WebOS Quick Installation ===',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'Fast automated setup with minimal configuration',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'WARNING: Quick provides limited access to system files',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'Advanced features and customization will be restricted',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }\n    ];\n    \n    setLines(prev => [...prev, ...quickLines]);\n    \n    let step = 0;\n    const quickSteps = [\n      { msg: '✓ Auto-partitioning disk (/dev/sda)', delay: 800 },\n      { msg: '✓ Installing base WebOS system (minimal edition)', delay: 1200 },\n      { msg: '✓ Setting up essential services only', delay: 600 },\n      { msg: '✓ Configuring basic bootloader', delay: 500 },\n      { msg: '✓ Creating limited user account', delay: 400 },\n      { msg: '✓ Installing essential apps only', delay: 700 },\n      { msg: '', delay: 300 },\n      { msg: 'QUICK INSTALLATION COMPLETE', delay: 500 },\n      { msg: 'System Features: Basic desktop, limited file access, essential apps', delay: 200 },\n      { msg: 'Missing: Advanced system tools, developer access, customization', delay: 200 },\n      { msg: 'Type \"reboot\" to start WebOS with limited functionality', delay: 0 }\n    ];\n    \n    const executeStep = () => {\n      if (step < quickSteps.length) {\n        const stepInfo = quickSteps[step];\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: step >= quickSteps.length - 4 ? 'success' : 'system',\n            content: stepInfo.msg,\n            timestamp: new Date()\n          }]);\n          step++;\n          executeStep();\n        }, stepInfo.delay);\n      } else {\n        // Set installation type for app filtering but don't auto-complete\n        localStorage.setItem('webos-installation-type', 'quick');\n        localStorage.setItem('archInstalled', 'true');\n        \n        // Add prompt to manually reboot instead of auto-completing\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'input',\n            content: 'root@webos-installer:~#',\n            timestamp: new Date()\n          }]);\n        }, 1000);\n      }\n    };\n    \n    setTimeout(executeStep, 1000);\n  };\n\n  const simulateCustomInstall = () => {\n    const customLines: InstallerLine[] = [\n      {\n        type: 'system',\n        content: '=== WebOS Custom Installation ===',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'Advanced WebOS installation requiring manual configuration',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'success',\n        content: 'ADVANCED CONFIGURATION MODE ENABLED',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'This installation requires manual setup of:',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Display server and window manager',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Desktop environment configuration',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Login manager and session management',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Application installation and dependencies',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• User accounts and permissions',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Network and system services',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }\n    ];\n    \n    setLines(prev => [...prev, ...customLines]);\n    \n    let step = 0;\n    const customSteps = [\n      { msg: '✓ Initializing advanced partitioning scheme', delay: 800 },\n      { msg: '✓ Creating /boot (512MB), / (15GB), /home (4GB), swap (512MB)', delay: 600 },\n      { msg: '✓ Installing minimal WebOS base system', delay: 1200 },\n      { msg: '✓ Setting up package management system', delay: 700 },\n      { msg: '✓ Installing development tools and compilers', delay: 900 },\n      { msg: '✓ Configuring bootloader with advanced options', delay: 500 },\n      { msg: '✓ Setting up user account framework', delay: 400 },\n      { msg: '✓ Installing basic system utilities', delay: 600 },\n      { msg: '✓ Enabling advanced terminal access', delay: 500 },\n      { msg: '✓ Setting up network configuration framework', delay: 400 },\n      { msg: '', delay: 300 },\n      { msg: 'WEBOS CUSTOM BASE INSTALLATION COMPLETE', delay: 500 },\n      { msg: 'System: Minimal WebOS with advanced configuration access', delay: 200 },\n      { msg: 'Next: Configure display server and desktop manually', delay: 200 },\n      { msg: 'Type \"reboot\" to start WebOS configuration system', delay: 0 }\n    ];\n    \n    const executeStep = () => {\n      if (step < customSteps.length) {\n        const stepInfo = customSteps[step];\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: step >= customSteps.length - 4 ? 'success' : 'system',\n            content: stepInfo.msg,\n            timestamp: new Date()\n          }]);\n          step++;\n          executeStep();\n        }, stepInfo.delay);\n      } else {\n        // Set installation type for custom manual configuration\n        localStorage.setItem('webos-installation-type', 'webos-custom');\n        localStorage.setItem('webos-console-mode', 'true');\n        \n        // Add final console prompt for WebOS custom users\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'error',\n            content: 'CRITICAL: WebOS Custom installation requires MANUAL CONFIGURATION',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'Base system installed. Desktop environment NOT CONFIGURED.',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'WARNING: System is INCOMPLETE and UNUSABLE without manual setup.',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'REQUIRED COMMANDS (MUST BE EXECUTED IN EXACT ORDER):',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '1. webos-init-system (initialize base system)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '2. webos-config-kernel (configure kernel modules)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '3. webos-setup-drivers (setup hardware drivers)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '4. webos-install display-server',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '5. webos-configure-graphics (configure graphics stack)', \n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '6. webos-install desktop-environment',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '7. webos-setup-audio (configure audio system)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '8. webos-install login-manager',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '9. webos-configure-permissions (setup user permissions)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '10. webos-install applications',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '11. webos-setup-services (enable system services)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '12. webos-finalize-install (finalize installation)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '13. start-desktop',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'error',\n            content: 'FAILURE TO FOLLOW ORDER WILL CORRUPT INSTALLATION',\n            timestamp: new Date()\n          }, {\n            type: 'input',\n            content: 'root@webos-custom:~#',\n            timestamp: new Date()\n          }]);\n        }, 1000);\n      }\n    };\n    \n    setTimeout(executeStep, 1000);\n  };\n\n  const simulateArchInstall = () => {\n    const archLines: InstallerLine[] = [\n      {\n        type: 'system',\n        content: '=== Arch Linux Base Installation ===',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'Installing Arch Linux System becasue you guess will cry',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'This installation provides:',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Pure Arch Linux base system',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Complete terminal access with pacman package manager',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Full Linux command line interface',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '• Advanced system administration capabilities',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }\n    ];\n    \n    setLines(prev => [...prev, ...archLines]);\n    \n    let step = 0;\n    const archSteps = [\n      { msg: '✓ Verifying boot mode (UEFI detected)', delay: 600 },\n      { msg: '✓ Updating system clock via NTP', delay: 500 },\n      { msg: '✓ Partitioning /dev/sda (GPT scheme)', delay: 800 },\n      { msg: '✓ Formatting /dev/sda1 as EFI (FAT32)', delay: 600 },\n      { msg: '✓ Formatting /dev/sda2 as root (ext4)', delay: 700 },\n      { msg: '✓ Mounting filesystems (/mnt)', delay: 400 },\n      { msg: '✓ Installing base packages via pacstrap', delay: 1200 },\n      { msg: '  - base linux linux-firmware', delay: 800 },\n      { msg: '  - vim nano networkmanager', delay: 600 },\n      { msg: '✓ Generating /etc/fstab', delay: 500 },\n      { msg: '✓ Setting up chroot environment', delay: 400 },\n      { msg: '✓ Configuring timezone and locale', delay: 600 },\n      { msg: '✓ Setting hostname: archlinux-webos', delay: 300 },\n      { msg: '✓ Installing GRUB bootloader', delay: 800 },\n      { msg: '✓ Enabling NetworkManager service', delay: 400 },\n      { msg: '', delay: 300 },\n      { msg: 'ARCH LINUX INSTALLATION COMPLETE', delay: 500 },\n      { msg: 'System: Minimal Arch Linux with terminal access', delay: 200 },\n      { msg: 'Next: Configure desktop environment manually via pacman', delay: 200 },\n      { msg: 'Type \"arch-guide\" to get the installation guide', delay: 0 }\n    ];\n    \n    const executeStep = () => {\n      if (step < archSteps.length) {\n        const stepInfo = archSteps[step];\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: step >= archSteps.length - 4 ? 'success' : 'system',\n            content: stepInfo.msg,\n            timestamp: new Date()\n          }]);\n          step++;\n          executeStep();\n        }, stepInfo.delay);\n      } else {\n        // Set installation type for Arch system - requires manual setup\n        localStorage.setItem('webos-installation-type', 'arch');\n        localStorage.setItem('arch-console-mode', 'true');\n        \n        // Add final console prompt for Arch users\n        setTimeout(() => {\n          setLines(prev => [...prev, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'error',\n            content: 'CRITICAL: Arch Linux base system installed - NO DESKTOP ENVIRONMENT',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'System is COMPLETELY UNUSABLE without manual configuration.',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'WARNING: One wrong command will BREAK EVERYTHING.',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'MANDATORY SETUP SEQUENCE (EXACT ORDER REQUIRED):',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '1. pacman -Syu (update system - MUST be first)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '2. pacman -S base-devel (install build tools)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '3. pacman -S linux-headers (install kernel headers)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '4. pacman -S networkmanager (install network manager)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '5. systemctl enable NetworkManager (enable networking)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '6. pacman -S xorg-server xorg-xinit (install X server)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '7. pacman -S xf86-video-vesa (install video drivers)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '8. pacman -S xf86-input-libinput (install input drivers)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '9. pacman -S pulseaudio pulseaudio-alsa (install audio)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '10. pacman -S plasma-meta (install KDE desktop)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '11. pacman -S kde-applications (install KDE apps)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '12. pacman -S sddm (install display manager)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '13. systemctl enable sddm (enable login manager)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '14. useradd -m -G wheel user (create user account)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '15. passwd user (set user password)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '16. pacman -S sudo (install sudo package)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '17. visudo (edit sudo permissions)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '18. systemctl enable pulseaudio (enable audio service)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '19. mkinitcpio -P (rebuild initramfs)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '20. startx (start desktop)',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }, {\n            type: 'error',\n            content: 'SKIP ANY STEP = SYSTEM CORRUPTION AND COMPLETE REINSTALL REQUIRED',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'Commands must be executed in EXACT order. No exceptions.',\n            timestamp: new Date()\n          }, {\n            type: 'input',\n            content: 'root@archlinux:~#',\n            timestamp: new Date()\n          }]);\n        }, 1000);\n      }\n    };\n    \n    setTimeout(executeStep, 1000);\n  };\n\n  const executeCommand = (cmd: string) => {\n    const trimmedCmd = cmd.trim();\n    if (!trimmedCmd) return;\n\n    const isArchMode = localStorage.getItem('arch-console-mode') === 'true';\n    const isWebOSCustomMode = localStorage.getItem('webos-console-mode') === 'true';\n    \n    let prompt = 'root@webos-installer:~#';\n    if (isArchMode) {\n      prompt = 'root@archlinux:~#';\n    } else if (isWebOSCustomMode) {\n      prompt = 'root@webos-custom:~#';\n    }\n    \n    const commandLine: InstallerLine = {\n      type: 'input',\n      content: `${prompt} ${trimmedCmd}`,\n      timestamp: new Date()\n    };\n\n    if (trimmedCmd === 'installwebOS') {\n      setLines(prev => [...prev, commandLine]);\n      startInstallation();\n    } else if (trimmedCmd === 'help' || trimmedCmd === '--help') {\n      const helpLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'WebOS Installation Commands:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'INSTALLATION OPTIONS:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  installwebOS          - Interactive WebOS installation',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  install-webos-quick   - Quick install (limited features)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  install-webos-custom  - Custom install (full access)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  install-arch          - Arch Linux base installation',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n            content: '  install-bumblebee     - Bumblebee OS (Ubuntu-based)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  check-requirements    - Verify system compatibility',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'SYSTEM INFORMATION:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  lsblk                 - List block devices',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  fdisk -l              - List disk partitions',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  lscpu                 - Show CPU information',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  free -h               - Show memory usage',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  df -h                 - Show disk usage',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  uname -a              - Show system information',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'NETWORK COMMANDS:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  ip link               - Show network interfaces',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  ip addr               - Show IP addresses',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  ping google.com       - Test network connectivity',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'For detailed installation guide: man installwebOS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'ADVANCED COMMANDS:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  grub-install          - Install bootloader',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  mkinitcpio -P         - Generate initramfs',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  timedatectl           - Configure system time',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  locale-gen            - Generate locales',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  hwclock --systohc     - Set hardware clock',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'RECOVERY:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  fix-installation      - Fix broken installations and reset system',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...helpLines]);\n    } else if (trimmedCmd === 'help' && localStorage.getItem('webos-console-mode') === 'true') {\n      const webosHelpLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'WEBOS CUSTOM INSTALLATION COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '===================================',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Installation Guide:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '1. webos-install display-server',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '2. webos-install desktop-environment',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '3. webos-install login-manager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '4. webos-install applications',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '5. start-desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Other Commands:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  webos-guide (detailed installation guide)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  ls, cat, chmod, rm, mount, fdisk -l',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  ps aux, free -h, top, journalctl',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  systemctl, timedatectl, hwclock',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  fix-installation (reset all configurations)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  exit (return to installer)',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...webosHelpLines]);\n    } else if (trimmedCmd === 'webos-guide' && localStorage.getItem('webos-console-mode') === 'true') {\n      const webosGuideLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'WebOS Custom Post-Installation Guide',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '====================================',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '1. Install display server:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   webos-install display-server',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '2. Install desktop environment:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   webos-install desktop-environment',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '3. Install login manager:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   webos-install login-manager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '4. Install applications:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   webos-install applications',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '5. Start desktop environment:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   start-desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'IMPORTANT: Install components in order. Each step depends on the previous one.',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Commands will fail if dependencies are missing.',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'TROUBLESHOOTING:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '• If commands show ERROR, check installation order',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '• Use \"fix-installation\" to reset all configurations',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '• Use \"help\" to see all available commands',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...webosGuideLines]);\n    } else if (trimmedCmd === 'wiki') {\n      const wikiLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: '════════════════════════════════════════════════════════════════',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '              WEBOS INSTALLATION WIKI',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '════════════════════════════════════════════════════════════════',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '1. INSTALLATION COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '──────────────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'install-webos-quick      Quick WebOS installation (recommended)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Automatic installation with basic features',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Ready-to-use desktop environment',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Standard applications included',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'install-webos-custom     Advanced WebOS with manual configuration',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Requires step-by-step setup via console commands',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Commands: webos-install display-server/desktop-environment/login-manager/applications',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Use \"webos-guide\" for detailed instructions',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Complete with \"start-desktop\"',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'install-bumblebee        Bumblebee OS (Ubuntu-based)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Ubuntu 22.04 LTS base system',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • GNOME desktop with custom themes',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Gaming optimizations and multimedia support',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Developer tools and productivity apps',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'install-arch             Arch Linux installation (expert)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Minimal base system installation',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Manual configuration required for desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Commands: pacman -S package-name, systemctl enable/start',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  • Use \"arch-guide\" for step-by-step instructions',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '2. ARCH LINUX CONSOLE COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '─────────────────────────────────────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'pacman -S base-devel     Install development tools',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'pacman -S networkmanager Install network management',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'pacman -S xorg-server xorg-xinit  Install X display server',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'pacman -S plasma-desktop kde-applications  Install KDE desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'pacman -S sddm           Install display manager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'systemctl enable sddm    Enable display manager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'systemctl start sddm     Start graphical login',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'startx                   Start desktop manually (alternative)',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '3. WEBOS CUSTOM CONSOLE COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '─────────────────────────────────────────────────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'webos-install display-server     Install Wayland display server',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'webos-install desktop-environment Install WebOS shell and compositor',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'webos-install login-manager      Install WebOS login system',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'webos-install applications       Install core applications',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'start-desktop                    Launch WebOS desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '4. SYSTEM ADMINISTRATION COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '─────────────────────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'ls, cat, chmod, rm       File operations',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'mount, fdisk -l          Disk and filesystem management',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'ps aux, free -h, top     System monitoring',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'journalctl               View system logs',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'timedatectl, hwclock     Time and date management',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'useradd, passwd          User management',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'nano, vim                Text editors',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '5. UTILITY COMMANDS',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '──────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'help                     Show basic command overview',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'wiki                     Show this comprehensive reference',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'arch-guide               Detailed Arch Linux installation guide',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'webos-guide              Detailed WebOS custom installation guide',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'check-requirements       Verify system compatibility',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'lsblk                    List storage devices',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'fix-installation         Reset all configurations and start fresh',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'exit                     Return to main installer',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'reboot                   Complete installation and start system',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '6. INSTALLATION FLOW EXAMPLES',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '─────────────────────────────',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Quick WebOS: install-webos-quick → reboot',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Bumblebee: install-bumblebee → reboot',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Custom WebOS: install-webos-custom → webos-install display-server →',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  webos-install desktop-environment → webos-install login-manager →',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  webos-install applications → start-desktop',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Arch Linux: install-arch → pacman -S base-devel → pacman -S networkmanager →',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  pacman -S xorg-server xorg-xinit → pacman -S plasma-desktop →',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '  pacman -S sddm → systemctl enable sddm → systemctl start sddm',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '════════════════════════════════════════════════════════════════',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '            END OF WIKI :D - Use \"help\" for quick reference',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '════════════════════════════════════════════════════════════════',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...wikiLines]);\n    } else if (trimmedCmd === 'fix-installation') {\n      const fixLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'WebOS Installation Recovery Tool',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '=================================',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Diagnosing system state...',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Checking filesystem integrity',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Verifying partition table',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Clearing temporary files',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Resetting installation environment...',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Package cache cleared',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Installation locks removed',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ System state restored to clean state',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: 'RECOVERY COMPLETE: System ready for fresh installation',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'You can now run any installation command safely.',\n          timestamp: new Date()\n        }\n      ];\n      \n      setLines(prev => [...prev, ...fixLines]);\n      \n      // Clear any problematic states\n      localStorage.removeItem('arch-console-mode');\n      localStorage.removeItem('webos-installation-type');\n      localStorage.removeItem('installation-corrupted');\n      localStorage.removeItem('arch-desktop-corrupted');\n      localStorage.removeItem('arch-networkmanager-installed');\n      localStorage.removeItem('arch-basedevel-installed');\n      localStorage.removeItem('arch-bootloader-broken');\n      localStorage.removeItem('arch-system-corrupted');\n      localStorage.removeItem('arch-xorg-installed');\n      localStorage.removeItem('arch-sddm-installed');\n      localStorage.removeItem('arch-sddm-enabled');\n      localStorage.removeItem('arch-plasma-installed');\n      localStorage.removeItem('arch-permissions-broken');\n      localStorage.removeItem('webos-display-installed');\n      localStorage.removeItem('webos-desktop-installed');\n      localStorage.removeItem('webos-login-installed');\n      localStorage.removeItem('webos-apps-installed');\n      \n    } else if (trimmedCmd === 'install-webos-quick') {\n      setLines(prev => [...prev, commandLine]);\n      showLoadingAnimation(() => simulateQuickInstall());\n    } else if (trimmedCmd === 'install-webos-custom') {\n      setLines(prev => [...prev, commandLine]);\n      showLoadingAnimation(() => simulateCustomInstall());\n    } else if (trimmedCmd === 'install-bumblebee') {\n      setLines(prev => [...prev, commandLine]);\n      showLoadingAnimation(() => simulateBumblebeeInstall());\n    } else if (trimmedCmd === 'install-arch') {\n      setLines(prev => [...prev, commandLine]);\n      showLoadingAnimation(() => simulateArchInstall());\n    } else if (trimmedCmd === 'check-requirements') {\n      const reqLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'WebOS System Requirements Check',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '================================',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ CPU: x86_64 architecture detected',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ RAM: 8GB available (4GB minimum required)',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Storage: 20GB available (10GB minimum required)',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Network: Internet connection active',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: '✓ Graphics: Hardware acceleration supported',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'success',\n          content: 'System Status: READY FOR WEBOS INSTALLATION',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'Run \"installwebOS\" to begin installation process.',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...reqLines]);\n    } else if (trimmedCmd === 'lsblk') {\n      const lsblkLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: 'sda      8:0    0   20G  0 disk',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '├─sda1   8:1    0  512M  0 part',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '└─sda2   8:2    0 19.5G  0 part',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...lsblkLines]);\n    } else if (trimmedCmd === 'webos-init-system' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (localStorage.getItem('webos-system-corrupted')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'SYSTEM CORRUPTED: Cannot initialize.',\n          timestamp: new Date()\n        }]);\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Initializing WebOS base system...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Loading kernel modules...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Setting up system directories...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Base system initialized successfully',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'NEXT: Run \"webos-config-kernel\" immediately.',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-system-initialized', 'true');\n    } else if (trimmedCmd === 'webos-config-kernel' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-system-initialized')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Base system not initialized.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Must run \"webos-init-system\" first.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Configuring kernel modules...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Loading graphics drivers...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring hardware support...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Kernel configuration complete',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'NEXT: Run \"webos-setup-drivers\" immediately.',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-kernel-configured', 'true');\n    } else if (trimmedCmd === 'webos-setup-drivers' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-kernel-configured')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Kernel not configured.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Must run \"webos-config-kernel\" first.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Setting up hardware drivers...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Installing GPU drivers...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring input devices...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Hardware drivers configured',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'NEXT: Run \"webos-install display-server\" immediately.',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-drivers-setup', 'true');\n    } else if (trimmedCmd === 'webos-configure-graphics' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-display-installed')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Display server not installed.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Cannot configure graphics without display server.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Configuring graphics stack...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Setting up GPU acceleration...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring display resolution...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Graphics configuration complete',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-graphics-configured', 'true');\n    } else if (trimmedCmd === 'webos-setup-audio' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-desktop-installed')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Desktop environment not installed.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Cannot setup audio without desktop.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Setting up audio system...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring audio drivers...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Setting up sound cards...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Audio system configured',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-audio-setup', 'true');\n    } else if (trimmedCmd === 'webos-configure-permissions' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-login-installed')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Login manager not installed.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Cannot configure permissions without login manager.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Configuring user permissions...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Setting up access controls...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring security policies...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Permissions configured',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-permissions-configured', 'true');\n    } else if (trimmedCmd === 'webos-setup-services' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-apps-installed')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Applications not installed.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Cannot setup services without applications.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Setting up system services...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Enabling background services...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Configuring startup programs...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Services configured',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-services-setup', 'true');\n    } else if (trimmedCmd === 'webos-finalize-install' && localStorage.getItem('webos-console-mode') === 'true') {\n      if (!localStorage.getItem('webos-services-setup')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL: Services not configured.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Cannot finalize without all services.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('webos-system-corrupted', 'true');\n        return;\n      }\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Finalizing installation...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Running system checks...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Optimizing performance...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Installation finalized',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('webos-install-finalized', 'true');\n    } else if (trimmedCmd.startsWith('webos-install ') && localStorage.getItem('webos-console-mode') === 'true') {\n      const packages = trimmedCmd.substring(14).trim();\n      \n      if (packages.includes('display-server')) {\n        const displayLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'Installing WebOS display server...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages: wayland-server wayland-compositor',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: 'Display server installed successfully',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...displayLines]);\n        localStorage.setItem('webos-display-installed', 'true');\n      } else if (packages.includes('desktop-environment')) {\n        const hasDisplay = localStorage.getItem('webos-display-installed') === 'true';\n        \n        if (!hasDisplay) {\n          setLines(prev => [...prev, commandLine, {\n            type: 'error',\n            content: 'ERROR',\n            timestamp: new Date()\n          }]);\n        } else {\n          const desktopLines: InstallerLine[] = [\n            commandLine,\n            {\n              type: 'system',\n              content: 'Installing WebOS desktop environment...',\n              timestamp: new Date()\n            },\n            {\n              type: 'system',\n              content: 'Packages: webos-shell webos-compositor webos-apps',\n              timestamp: new Date()\n            },\n            {\n              type: 'success',\n              content: 'Desktop environment installed successfully',\n              timestamp: new Date()\n            }\n          ];\n          setLines(prev => [...prev, ...desktopLines]);\n          localStorage.setItem('webos-desktop-installed', 'true');\n        }\n      } else if (packages.includes('login-manager')) {\n        const loginLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'Installing WebOS login manager...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages: webos-greeter webos-session',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: 'Login manager installed successfully',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...loginLines]);\n        localStorage.setItem('webos-login-installed', 'true');\n      } else if (packages.includes('applications')) {\n        const appLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'Installing WebOS applications...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages: browser terminal filemanager calculator',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: 'Applications installed successfully',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...appLines]);\n        localStorage.setItem('webos-apps-installed', 'true');\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'pacman -Syu' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: ':: Synchronizing package databases...',\n        timestamp: new Date()\n      }, {\n        type: 'system', \n        content: ' core is up to date',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: ' extra is up to date', \n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: ' community is up to date',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: ':: Starting full system upgrade...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'resolving dependencies...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'looking for conflicting packages...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'there is nothing to do',\n        timestamp: new Date()\n      }]);\n      localStorage.setItem('arch-system-updated', 'true');\n    } else if (trimmedCmd.startsWith('pacman -S ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const packages = trimmedCmd.substring(10).trim();\n      \n      // Check if system update was done first - CRITICAL ORDER REQUIREMENT\n      if (!localStorage.getItem('arch-system-updated')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'FATAL ERROR: System not updated. Installation corrupted.',\n          timestamp: new Date()\n        }, {\n          type: 'error', \n          content: 'Must run \"pacman -Syu\" FIRST or system will be unstable.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'SYSTEM CORRUPTION DETECTED. Complete reinstall required.',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('arch-system-corrupted', 'true');\n        return;\n      }\n      \n      // Check for system corruption flag\n      if (localStorage.getItem('arch-system-corrupted')) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'SYSTEM CORRUPTED: Cannot install packages.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Installation order was violated earlier.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'COMPLETE REINSTALL REQUIRED.',\n          timestamp: new Date()\n        }]);\n        return;\n      }\n      \n      if (packages.includes('base-devel')) {\n        const baseDevLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'looking for conflicting packages...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages (24) autoconf-2.71-4  automake-1.16.5-2  binutils-2.40-4',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '             bison-3.8.2-5  fakeroot-1.31-2  flex-2.6.4-5',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '             gcc-13.1.1-1  libtool-2.4.7-5  m4-1.4.19-3',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '             make-4.4.1-2  patch-2.7.6-8  pkgconf-1.9.5-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Download Size:   156.2 MiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Installed Size:  823.4 MiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '(24/24) installing base-devel                    [######################] 100%',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: 'Development tools installation complete!',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...baseDevLines]);\n        localStorage.setItem('arch-basedevel-installed', 'true');\n      } else if (packages.includes('networkmanager')) {\n        const networkLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '(1/1) installing networkmanager               [######################] 100%',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Enable network service: systemctl enable NetworkManager',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...networkLines]);\n        localStorage.setItem('arch-networkmanager-installed', 'true');\n      } else if (packages.includes('xorg-server') || packages.includes('xorg-xinit')) {\n        const xorgLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'looking for conflicting packages...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages (35) xorg-server-21.1.11-1  xorg-xinit-1.4.2-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Download Size:   15.2 MiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '(35/35) installing xorg-server               [######################] 100%',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...xorgLines]);\n        localStorage.setItem('arch-xorg-installed', 'true');\n      } else if (packages.includes('sddm')) {\n        const sddmLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages (8) sddm-0.20.0-3  qt5-declarative-5.15.12-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '(8/8) installing sddm                        [######################] 100%',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Enable with: systemctl enable sddm',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...sddmLines]);\n        localStorage.setItem('arch-sddm-installed', 'true');\n      } else if (packages.includes('plasma-desktop') || packages.includes('kde-applications')) {\n        const plasmaLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'looking for conflicting packages...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages (200+) plasma-desktop-5.27.10-1  kde-applications-meta-1.0-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Download Size:   1.2 GiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '(200+/200+) installing plasma-desktop         [######################] 100%',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...plasmaLines]);\n        localStorage.setItem('arch-plasma-installed', 'true');\n      } else if (packages.includes('firefox') || packages.includes('chromium')) {\n        const browserName = packages.includes('firefox') ? 'firefox' : 'chromium';\n        const browserLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'looking for conflicting packages...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: `Packages (45) ${browserName}-121.0-1  nss-3.96-1  gtk3-3.24.38-1`,\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Download Size:   89.3 MiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: `(45/45) installing ${browserName}                  [######################] 100%`,\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...browserLines]);\n      } else if (packages.includes('xorg') && packages.includes('plasma-desktop')) {\n        // Check if networkmanager was installed first - common bug trigger\n        const hasNetworkManager = localStorage.getItem('arch-networkmanager-installed') === 'true';\n        const hasBaseDevel = localStorage.getItem('arch-basedevel-installed') === 'true';\n        \n        const installLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'resolving dependencies...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'looking for conflicting packages...',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Packages (127) accountsservice-22.07.5-2  appstream-0.16.4-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '              bluedevil-5.27.10-1  breeze-5.27.10-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '              drkonqi-5.27.10-1  kde-gtk-config-5.27.10-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '              plasma-desktop-5.27.10-1  xorg-server-21.1.11-1',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Download Size:   0.87 GiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: 'Total Installed Size:  3.21 GiB',\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: '',\n            timestamp: new Date()\n          }\n        ];\n        \n        setLines(prev => [...prev, ...installLines]);\n        \n        // Simulate installation process with potential issues\n        setTimeout(() => {\n          const proceedLines: InstallerLine[] = [\n            {\n              type: 'system',\n              content: ':: Proceed with installation? [Y/n] Y',\n              timestamp: new Date()\n            },\n            {\n              type: 'system',\n              content: ':: Retrieving packages...',\n              timestamp: new Date()\n            },\n            {\n              type: 'success',\n              content: ' xorg-server-21.1.11-1-x86_64      2.1 MiB  1024 KiB/s 00:02',\n              timestamp: new Date()\n            },\n            {\n              type: 'success',\n              content: ' plasma-desktop-5.27.10-1-x86_64  45.2 MiB  1024 KiB/s 00:45',\n              timestamp: new Date()\n            },\n            {\n              type: 'system',\n              content: ':: Installing packages...',\n              timestamp: new Date()\n            }\n          ];\n          setLines(prev => [...prev, ...proceedLines]);\n          \n          setTimeout(() => {\n            if (!hasNetworkManager || !hasBaseDevel) {\n              // Installation completes but with dependency warnings\n              const problemLines: InstallerLine[] = [\n                {\n                  type: 'success',\n                  content: '(127/127) installing plasma-desktop              [######################] 100%',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: '',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'error',\n                  content: 'WARNING: Missing critical dependencies detected',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: '',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: 'Desktop environment installed with warnings.',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: 'Run \"fix-installation\" if desktop fails to start.',\n                  timestamp: new Date()\n                }\n              ];\n              \n              // Add specific error messages based on missing dependencies\n              const additionalErrors: InstallerLine[] = [];\n              \n              if (!hasNetworkManager) {\n                additionalErrors.push({\n                  type: 'error' as const,\n                  content: 'ERROR',\n                  timestamp: new Date()\n                });\n              }\n              \n              if (!hasBaseDevel) {\n                additionalErrors.push({\n                  type: 'error' as const,\n                  content: 'ERROR',\n                  timestamp: new Date()\n                });\n              }\n              \n              // Insert error messages after the warning line\n              const finalLines = [\n                ...problemLines.slice(0, 4),\n                ...additionalErrors,\n                ...problemLines.slice(4)\n              ];\n              \n              setLines(prev => [...prev, ...finalLines]);\n              localStorage.setItem('arch-desktop-corrupted', 'true');\n            } else {\n              const completeLines: InstallerLine[] = [\n                {\n                  type: 'success',\n                  content: '(127/127) installing plasma-desktop              [######################] 100%',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: '',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'success',\n                  content: 'KDE Plasma Desktop installation complete!',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: 'Enable display manager: systemctl enable sddm',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: 'Start desktop session: systemctl start sddm',\n                  timestamp: new Date()\n                },\n                {\n                  type: 'system',\n                  content: 'Or type \"startx\" to launch desktop environment.',\n                  timestamp: new Date()\n                }\n              ];\n              setLines(prev => [...prev, ...completeLines]);\n            }\n          }, 3000);\n        }, 2000);\n        \n      } else {\n        // Regular package installation\n        const installLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: `resolving dependencies...`,\n            timestamp: new Date()\n          },\n          {\n            type: 'system',\n            content: `looking for conflicting packages...`,\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: `(1/1) installing ${packages}                 [######################] 100%`,\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...installLines]);\n      }\n    } else if (trimmedCmd === 'start-desktop' && localStorage.getItem('webos-console-mode') === 'true') {\n      const hasDisplay = localStorage.getItem('webos-display-installed') === 'true';\n      const hasDesktop = localStorage.getItem('webos-desktop-installed') === 'true';\n      const hasLogin = localStorage.getItem('webos-login-installed') === 'true';\n      \n      if (!hasDisplay) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (!hasDesktop) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Starting display server...',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (!hasLogin) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Starting WebOS desktop...',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Starting WebOS Desktop Environment...',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Loading WebOS shell and applications...',\n          timestamp: new Date()\n        }]);\n        \n        setTimeout(() => {\n          localStorage.removeItem('webos-console-mode');\n          localStorage.setItem('webos-installation-type', 'custom');\n          onInstallComplete();\n        }, 3000);\n      }\n    } else if (trimmedCmd === 'startx' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasXorg = localStorage.getItem('arch-xorg-installed') === 'true';\n      const hasPlasma = localStorage.getItem('arch-plasma-installed') === 'true';\n      const isCorrupted = localStorage.getItem('arch-desktop-corrupted') === 'true';\n      \n      if (!hasXorg) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (!hasPlasma) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Starting X server...',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (isCorrupted) {\n        const errorLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: 'Starting X server...',\n            timestamp: new Date()\n          },\n          {\n            type: 'error',\n            content: 'ERROR',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...errorLines]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Starting KDE Plasma Desktop Environment...',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Loading desktop session...',\n          timestamp: new Date()\n        }]);\n        \n        setTimeout(() => {\n          localStorage.removeItem('arch-console-mode');\n          localStorage.setItem('webos-installation-type', 'arch-desktop');\n          onInstallComplete();\n        }, 3000);\n      }\n    } else if (trimmedCmd === 'systemctl start sddm' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasSddm = localStorage.getItem('arch-sddm-installed') === 'true';\n      const sddmEnabled = localStorage.getItem('arch-sddm-enabled') === 'true';\n      const hasXorg = localStorage.getItem('arch-xorg-installed') === 'true';\n      const hasPlasma = localStorage.getItem('arch-plasma-installed') === 'true';\n      \n      if (!hasSddm) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (!sddmEnabled) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else if (!hasXorg || !hasPlasma) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Starting Simple Desktop Display Manager...',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Starting Simple Desktop Display Manager...',\n          timestamp: new Date()\n        }, {\n          type: 'success',\n          content: 'SDDM started successfully',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Login screen available',\n          timestamp: new Date()\n        }]);\n        \n        setTimeout(() => {\n          localStorage.removeItem('arch-console-mode');\n          localStorage.setItem('webos-installation-type', 'arch-desktop');\n          onInstallComplete();\n        }, 3000);\n      }\n    } else if (trimmedCmd.startsWith('systemctl ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const parts = trimmedCmd.split(' ');\n      const action = parts[1];\n      const service = parts[2] || '';\n      \n      if (action === 'enable' && service === 'NetworkManager') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Created symlink /etc/systemd/system/multi-user.target.wants/NetworkManager.service',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Network service enabled - will start on boot',\n          timestamp: new Date()\n        }]);\n      } else if (action === 'enable' && service === 'sddm') {\n        const hasSddm = localStorage.getItem('arch-sddm-installed') === 'true';\n        \n        if (!hasSddm) {\n          setLines(prev => [...prev, commandLine, {\n            type: 'error',\n            content: 'ERROR',\n            timestamp: new Date()\n          }]);\n        } else {\n          setLines(prev => [...prev, commandLine, {\n            type: 'success',\n            content: 'Created symlink /etc/systemd/system/display-manager.service',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'Display manager enabled - will start on boot',\n            timestamp: new Date()\n          }]);\n          localStorage.setItem('arch-sddm-enabled', 'true');\n        }\n      } else if (action === 'start' && service === 'NetworkManager') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'NetworkManager started successfully',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Network connectivity restored',\n          timestamp: new Date()\n        }]);\n      } else if (action === 'status') {\n        const statusLines: InstallerLine[] = [\n          commandLine,\n          {\n            type: 'system',\n            content: `● ${service || 'system'}.service - Service Status`,\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '   Loaded: loaded (/usr/lib/systemd/system)',\n            timestamp: new Date()\n          },\n          {\n            type: 'success',\n            content: '   Active: active (running) since now',\n            timestamp: new Date()\n          }\n        ];\n        setLines(prev => [...prev, ...statusLines]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'systemctl [enable|disable|start|stop|status] [service]',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'pacman' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'usage:  pacman <operation> [...]',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'operations:',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    pacman -S <pkg>      install package',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    pacman -R <pkg>      remove package',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    pacman -Syu          upgrade system',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    pacman -Q            list installed packages',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    pacman -Ss <query>   search packages',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'pacman -Q' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'linux 6.6.8.arch1-1',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'base 3-2',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'linux-firmware 20231211.2b92df7-1',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'networkmanager 1.44.2-3',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('pacman -Ss ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const query = trimmedCmd.substring(11).trim();\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: `extra/${query} 1.0.0-1`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `    Package containing ${query}`,\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('pacman -R ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const package_name = trimmedCmd.substring(10).trim();\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: `checking dependencies...`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `Packages (1) ${package_name}-1.0.0-1`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Total Removed Size:  12.34 MiB',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: `removing ${package_name}...`,\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'lscpu' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Architecture:            x86_64',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'CPU op-mode(s):          32-bit, 64-bit',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'CPU(s):                  8',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Model name:              Intel(R) Core(TM) i7-9700K',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'lsblk' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'sda      8:0    0   500G  0 disk',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '├─sda1   8:1    0   512M  0 part /boot',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '└─sda2   8:2    0 499.5G  0 part /',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'free -h' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '              total        used        free      shared  buff/cache   available',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Mem:           16Gi       2.1Gi        12Gi       145Mi       1.8Gi        13Gi',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Swap:         8.0Gi          0B       8.0Gi',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'df -h' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Filesystem      Size  Used Avail Use% Mounted on',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '/dev/sda2       490G  8.2G  456G   2% /',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '/dev/sda1       511M   31M  481M   7% /boot',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'ip addr' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    inet 127.0.0.1/8 scope host lo',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '2: enp3s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    inet 192.168.1.100/24 brd 192.168.1.255 scope global enp3s0',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'fdisk -l' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Disk /dev/sda: 500 GiB, 536870912000 bytes, 1048576000 sectors',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Disk model: Samsung SSD 980',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Units: sectors of 1 * 512 = 512 bytes',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Sector size (logical/physical): 512 bytes / 512 bytes',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'I/O size (minimum/optimal): 512 bytes / 512 bytes',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Disklabel type: gpt',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Device       Start        End    Sectors   Size Type',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '/dev/sda1     2048    1050623    1048576   512M EFI System',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '/dev/sda2  1050624 1048575999 1047525376 499.5G Linux filesystem',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'uname -a' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Linux archlinux 6.6.8-arch1-1 #1 SMP PREEMPT_DYNAMIC Mon, 18 Dec 2023 22:21:31 +0000 x86_64 GNU/Linux',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'ip link' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '2: enp3s0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('ping ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const target = trimmedCmd.substring(5).trim();\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: `PING ${target} (8.8.8.8) 56(84) bytes of data.`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `64 bytes from ${target} (8.8.8.8): icmp_seq=1 ttl=55 time=12.4 ms`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `64 bytes from ${target} (8.8.8.8): icmp_seq=2 ttl=55 time=11.8 ms`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `64 bytes from ${target} (8.8.8.8): icmp_seq=3 ttl=55 time=13.1 ms`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '^C',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: `--- ${target} ping statistics ---`,\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: '3 packets transmitted, 3 received, 0% packet loss, time 2003ms',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'grub-install' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Installing for x86_64-efi platform.',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Installation finished. No error reported.',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'mkinitcpio -P' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '==> Building image from preset: /etc/mkinitcpio.d/linux.preset: \\'default\\'',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '  -> -k /boot/vmlinuz-linux -c /etc/mkinitcpio.conf -g /boot/initramfs-linux.img',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '==> Starting build: 6.6.8-arch1-1',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: '==> Build complete.',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'timedatectl' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '                      Local time: Mon 2024-01-15 19:30:45 UTC',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '                  Universal time: Mon 2024-01-15 19:30:45 UTC',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '                        RTC time: Mon 2024-01-15 19:30:45',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '                       Time zone: UTC (UTC, +0000)',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: '       Network time on: yes',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'NTP synchronized: yes',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'locale-gen' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Generating locales...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '  en_US.UTF-8... done',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Generation complete.',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'ls' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'bin  boot  dev  etc  home  lib  lib64  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('ls ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const path = trimmedCmd.substring(3).trim();\n      if (path === '/boot') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'grub  initramfs-linux-fallback.img  initramfs-linux.img  vmlinuz-linux',\n          timestamp: new Date()\n        }]);\n      } else if (path === '/etc') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'passwd  shadow  group  hostname  hosts  fstab  locale.conf  vconsole.conf',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'file1  file2  directory1',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd.startsWith('cat ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const file = trimmedCmd.substring(4).trim();\n      if (file === '/etc/hostname') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'archlinux',\n          timestamp: new Date()\n        }]);\n      } else if (file === '/etc/locale.conf') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'LANG=en_US.UTF-8',\n          timestamp: new Date()\n        }]);\n      } else if (file === '/proc/cpuinfo') {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'processor\\t: 0',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'vendor_id\\t: GenuineIntel',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'cpu family\\t: 6',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'model name\\t: Intel(R) Core(TM) i7-9700K CPU @ 3.60GHz',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Sample file content',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'ps aux' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'USER         PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'root           1  0.0  0.1 169444 11456 ?        Ss   19:30   0:01 /sbin/init',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'root           2  0.0  0.0      0     0 ?        S    19:30   0:00 [kthreadd]',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'root         125  0.0  0.0  32892  3456 ?        Ss   19:30   0:00 systemd-networkd',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'top' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'top - 19:30:45 up 5 min,  1 user,  load average: 0.08, 0.12, 0.06',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Tasks: 125 total,   1 running, 124 sleeping,   0 stopped,   0 zombie',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '%Cpu(s):  2.1 us,  1.2 sy,  0.0 ni, 96.5 id,  0.2 wa,  0.0 hi,  0.0 si,  0.0 st',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'MiB Mem :  16384.0 total,  13245.6 free,   2156.2 used,    982.2 buff/cache',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '    1 root      20   0  169444  11456   8192 S   0.0   0.1   0:01.23 systemd',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'mount' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '/dev/sda2 on / type ext4 (rw,relatime)',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '/dev/sda1 on /boot type vfat (rw,relatime,fmask=0022,dmask=0022,codepage=437,iocharset=ascii,shortname=mixed,utf8,errors=remount-ro)',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'proc on /proc type proc (rw,nosuid,nodev,noexec,relatime)',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'sysfs on /sys type sysfs (rw,nosuid,nodev,noexec,relatime)',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('chmod ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const parts = trimmedCmd.split(' ');\n      if (parts.length >= 3) {\n        setLines(prev => [...prev, commandLine]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'chmod: missing operand',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Try \\'chmod --help\\' for more information.',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd.startsWith('rm ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const file = trimmedCmd.substring(3).trim();\n      setLines(prev => [...prev, commandLine]);\n    } else if (trimmedCmd === 'hwclock' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '2024-01-15 19:30:45.123456+00:00',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'useradd' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'usage: useradd [options] username',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'example: useradd -m -G wheel user',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('useradd ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const parts = trimmedCmd.split(' ');\n      const username = parts[parts.length - 1];\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'success',\n        content: `User '${username}' created successfully`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Set password with: passwd ' + username,\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('passwd ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const username = trimmedCmd.split(' ')[1];\n      \n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: `Changing password for user ${username}.`,\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'New password: ********',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Retype new password: ********',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'passwd: password updated successfully',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'arch-guide' && localStorage.getItem('arch-console-mode') === 'true') {\n      const guideLines: InstallerLine[] = [\n        commandLine,\n        {\n          type: 'system',\n          content: 'Arch Linux Post-Installation Guide',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '==================================',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '1. Install development tools:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S base-devel',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '2. Setup networking:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S networkmanager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   systemctl enable NetworkManager',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '3. Install display server:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S xorg-server xorg-xinit',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '4. Install desktop environment:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S plasma-desktop kde-applications',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '5. Install display manager:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S sddm',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   systemctl enable sddm',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '6. Configure user account:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   useradd -m -G wheel username',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   passwd username',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   echo \"username ALL=(ALL) ALL\" >> /etc/sudoers',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '7. Install applications:',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   pacman -S firefox chromium konsole dolphin',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '8. Start display manager: systemctl start sddm',\n          timestamp: new Date()\n        },\n        {\n          type: 'system',\n          content: '   OR start manually: startx',\n          timestamp: new Date()\n        }\n      ];\n      setLines(prev => [...prev, ...guideLines]);\n    } else if (trimmedCmd === 'grub-install' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasDesktop = localStorage.getItem('arch-desktop-corrupted') === 'true' || \n                        localStorage.getItem('arch-networkmanager-installed') === 'true';\n      \n      if (!hasDesktop) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('arch-bootloader-broken', 'true');\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Installing for x86_64-efi platform',\n          timestamp: new Date()\n        }, {\n          type: 'success',\n          content: 'Installation finished. No error reported.',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'mkinitcpio -P' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasBaseDevel = localStorage.getItem('arch-basedevel-installed') === 'true';\n      \n      if (!hasBaseDevel) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: '==> Building image from preset: /etc/mkinitcpio.d/linux.preset',\n          timestamp: new Date()\n        }, {\n          type: 'success',\n          content: '==> Image generation successful',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'timedatectl' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '               Local time: Mon 2024-01-15 19:30:15 UTC',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '           Universal time: Mon 2024-01-15 19:30:15 UTC',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: '                 RTC time: Mon 2024-01-15 19:30:15',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'locale-gen' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Generating locales...',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: '  en_US.UTF-8... done',\n        timestamp: new Date()\n      }, {\n        type: 'success',\n        content: 'Generation complete.',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'hwclock --systohc' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'success',\n        content: 'Hardware clock synced to system time',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('mount ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const mountTarget = trimmedCmd.split(' ')[1] || '';\n      const isCorrupted = Math.random() < 0.2; // 20% chance of mount error\n      \n      if (isCorrupted) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: `Mounted ${mountTarget}`,\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'fdisk -l' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Disk /dev/sda: 20 GiB, 21474836480 bytes, 41943040 sectors',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Units: sectors of 1 * 512 = 512 bytes',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Sector size (logical/physical): 512 bytes / 512 bytes',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'I/O size (minimum/optimal): 512 bytes / 512 bytes',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd.startsWith('pacman -R ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const packages = trimmedCmd.substring(10).trim();\n      const isSystemPackage = packages.includes('base') || packages.includes('linux') || packages.includes('systemd');\n      \n      if (isSystemPackage) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('arch-system-corrupted', 'true');\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: `removing ${packages}...`,\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd.startsWith('chmod ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const args = trimmedCmd.split(' ');\n      const permissions = args[1];\n      const file = args[2] || '';\n      \n      const isDangerous = permissions === '000' || file.includes('/etc/') || file.includes('/boot/');\n      \n      if (isDangerous) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('arch-permissions-broken', 'true');\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: `permissions changed: ${file}`,\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd.startsWith('rm -rf ') && localStorage.getItem('arch-console-mode') === 'true') {\n      const target = trimmedCmd.substring(7).trim();\n      const isSystemPath = target.includes('/') || target === '*' || target.includes('boot') || target.includes('etc');\n      \n      if (isSystemPath) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n        localStorage.setItem('arch-system-corrupted', 'true');\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: `removed: ${target}`,\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'ip addr' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasNetwork = localStorage.getItem('arch-networkmanager-installed') === 'true';\n      \n      if (!hasNetwork) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: '1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: '1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: '2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: '    inet 192.168.1.100/24 brd 192.168.1.255 scope global eth0',\n          timestamp: new Date()\n        }]);\n      }\n    } else if ((trimmedCmd.startsWith('nano ') || trimmedCmd.startsWith('vim ')) && localStorage.getItem('arch-console-mode') === 'true') {\n      const editor = trimmedCmd.split(' ')[0];\n      const file = trimmedCmd.split(' ')[1] || '';\n      const hasBaseDevel = localStorage.getItem('arch-basedevel-installed') === 'true';\n      \n      if (!hasBaseDevel && Math.random() < 0.5) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'error',\n          content: 'ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: `Opening ${file} with ${editor}...`,\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Press Ctrl+X to exit (simulated)',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'ps aux' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'root         1  0.0  0.1 169504 11584 ?        Ss   00:00   0:01 /sbin/init',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'root        42  0.0  0.0  21524  3584 tty1     Ss+  00:00   0:00 bash',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'free -h' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: '               total        used        free      shared  buff/cache   available',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Mem:           7.8Gi       1.2Gi       5.9Gi        84Mi       687Mi       6.3Gi',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Swap:          2.0Gi          0B       2.0Gi',\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'journalctl --since today' && localStorage.getItem('arch-console-mode') === 'true') {\n      const hasErrors = localStorage.getItem('arch-desktop-corrupted') === 'true' || \n                       localStorage.getItem('arch-system-corrupted') === 'true';\n      \n      if (hasErrors) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Jan 15 19:30:15 archlinux systemd[1]: Started Load Kernel Modules.',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Jan 15 19:30:16 archlinux kernel: ERROR',\n          timestamp: new Date()\n        }, {\n          type: 'error',\n          content: 'Jan 15 19:30:17 archlinux systemd[1]: ERROR',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Jan 15 19:30:15 archlinux systemd[1]: Started Load Kernel Modules.',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Jan 15 19:30:16 archlinux systemd[1]: Reached target System Initialization.',\n          timestamp: new Date()\n        }]);\n      }\n    } else if (trimmedCmd === 'clear') {\n      const isArchMode = localStorage.getItem('arch-console-mode') === 'true';\n      const prompt = isArchMode ? 'root@archlinux:~#' : 'root@webos-installer:~#';\n      \n      setLines([{\n        type: 'input',\n        content: prompt,\n        timestamp: new Date()\n      }]);\n    } else if (trimmedCmd === 'reboot') {\n      const isArchMode = localStorage.getItem('arch-console-mode') === 'true';\n      \n      if (isArchMode) {\n        setLines(prev => [...prev, commandLine, {\n          type: 'system',\n          content: 'Arch Linux does not have a desktop environment installed.',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Install a desktop environment first: pacman -S xorg plasma-desktop',\n          timestamp: new Date()\n        }, {\n          type: 'system',\n          content: 'Or type \"exit\" to return to installer.',\n          timestamp: new Date()\n        }]);\n      } else {\n        setLines(prev => [...prev, commandLine, {\n          type: 'success',\n          content: 'Rebooting into WebOS...',\n          timestamp: new Date()\n        }]);\n        setTimeout(() => {\n          onInstallComplete();\n        }, 2000);\n      }\n    } else if (trimmedCmd === 'exit' && localStorage.getItem('arch-console-mode') === 'true') {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Returning to installation environment...',\n        timestamp: new Date()\n      }]);\n      localStorage.removeItem('arch-console-mode');\n      setTimeout(() => {\n        setLines([{\n          type: 'input',\n          content: 'root@webos-installer:~#',\n          timestamp: new Date()\n        }]);\n      }, 1000);\n    } else if (trimmedCmd === 'reboot' && (localStorage.getItem('arch-console-mode') === 'true' || localStorage.getItem('webos-console-mode') === 'true')) {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Rebooting system...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Shutting down services...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Unmounting filesystems...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'System halted.',\n        timestamp: new Date()\n      }]);\n      \n      setTimeout(() => {\n        // Check if system is properly installed\n        const isArchInstalled = localStorage.getItem('archInstalled') === 'true';\n        const isWebOSInstalled = localStorage.getItem('webosInstalled') === 'true';\n        \n        if (isArchInstalled || isWebOSInstalled) {\n          // Clear console modes and redirect to desktop with loading screen\n          localStorage.removeItem('arch-console-mode');\n          localStorage.removeItem('webos-console-mode');\n          onInstallComplete();\n        } else {\n          // Return to installer if not properly installed\n          setLines(prev => [...prev, {\n            type: 'error',\n            content: 'BOOT FAILURE: No operating system installed.',\n            timestamp: new Date()\n          }, {\n            type: 'system',\n            content: 'Returning to installer...',\n            timestamp: new Date()\n          }]);\n          \n          setTimeout(() => {\n            localStorage.removeItem('arch-console-mode');\n            localStorage.removeItem('webos-console-mode');\n            setCurrentCommand('');\n            setLines([]);\n          }, 2000);\n        }\n      }, 3000);\n    } else if (trimmedCmd === 'exit' && (localStorage.getItem('arch-console-mode') === 'true' || localStorage.getItem('webos-console-mode') === 'true')) {\n      setLines(prev => [...prev, commandLine, {\n        type: 'system',\n        content: 'Exiting console...',\n        timestamp: new Date()\n      }, {\n        type: 'system',\n        content: 'Returning to installer menu',\n        timestamp: new Date()\n      }]);\n      \n      setTimeout(() => {\n        localStorage.removeItem('arch-console-mode');\n        localStorage.removeItem('webos-console-mode');\n        setCurrentCommand('');\n        setLines([]);\n      }, 1500);\n    } else {\n      const errorLine: InstallerLine = {\n        type: 'error',\n        content: `bash: ${trimmedCmd}: command not found`,\n        timestamp: new Date()\n      };\n      setLines(prev => [...prev, commandLine, errorLine]);\n    }\n  };\n\n  const startInstallation = () => {\n    setIsInstalling(true);\n    setInstallStep(0);\n    \n    const logoLines: InstallerLine[] = [\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   ┌────────────────────────────────────┐',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │                                    │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │           WebOS v4.0               │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │     HTML/JavaScript Desktop       │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │                                    │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │            </>                     │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   │                                    │',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '   └────────────────────────────────────┘',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: '',\n        timestamp: new Date()\n      },\n      {\n        type: 'system',\n        content: 'Starting interactive WebOS installation...',\n        timestamp: new Date()\n      }\n    ];\n    \n    setLines(prev => [...prev, ...logoLines]);\n  };\n\n  useEffect(() => {\n    if (isInstalling && installStep < installSteps.length) {\n      const timer = setTimeout(() => {\n        const stepLine: InstallerLine = {\n          type: installStep === installSteps.length - 1 ? 'success' : 'system',\n          content: installSteps[installStep],\n          timestamp: new Date()\n        };\n        \n        setLines(prev => [...prev, stepLine]);\n        \n        if (installStep === installSteps.length - 1) {\n          setTimeout(() => {\n            const completeLine: InstallerLine = {\n              type: 'success',\n              content: 'WebOS installation complete!',\n              timestamp: new Date()\n            };\n            setLines(prev => [...prev, completeLine, {\n              type: 'system',\n              content: 'Type \"reboot\" to start WebOS desktop environment.',\n              timestamp: new Date()\n            }, {\n              type: 'system',\n              content: '',\n              timestamp: new Date()\n            }, {\n              type: 'input',\n              content: 'root@webos-installer:~#',\n              timestamp: new Date()\n            }]);\n            \n            // Set installation flag but don't auto-complete\n            localStorage.setItem('archInstalled', 'true');\n            localStorage.setItem('webos-installation-type', 'standard');\n            setIsInstalling(false);\n          }, 1000);\n        }\n        \n        setInstallStep(prev => prev + 1);\n      }, 1500);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [isInstalling, installStep, installSteps.length, onInstallComplete]);\n\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [lines]);\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !isInstalling) {\n      executeCommand(currentCommand);\n      setCurrentCommand('');\n    }\n  };\n\n  const formatTime = (timestamp: Date) => {\n    return timestamp.toLocaleTimeString('en-US', { \n      hour12: false, \n      hour: '2-digit', \n      minute: '2-digit', \n      second: '2-digit' \n    });\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-black text-green-400 font-mono text-sm\">\n      <div \n        ref={terminalRef}\n        className=\"flex-1 overflow-y-auto p-4 space-y-1\"\n      >\n        {lines.map((line, index) => (\n          <div key={index} className=\"flex items-start space-x-2\">\n            <span className=\"text-green-600 text-xs min-w-[80px]\">\n              {formatTime(line.timestamp)}\n            </span>\n            <span className={`flex-1 ${\n              line.type === 'error' ? 'text-red-400' :\n              line.type === 'success' ? 'text-green-300' :\n              line.type === 'input' ? 'text-yellow-400' :\n              'text-green-400'\n            }`}>\n              {line.content}\n            </span>\n          </div>\n        ))}\n        \n        {!isInstalling && (\n          <div className=\"flex items-center space-x-2\">\n            <span className=\"text-green-600 text-xs min-w-[80px]\">\n              {formatTime(new Date())}\n            </span>\n            <span className=\"text-yellow-400\">\n              {localStorage.getItem('arch-console-mode') === 'true' ? 'root@archlinux:~#' : 'root@webos-installer:~#'}\n            </span>\n            <input\n              ref={inputRef}\n              type=\"text\"\n              value={currentCommand}\n              onChange={(e) => setCurrentCommand(e.target.value)}\n              onKeyDown={handleKeyDown}\n              className=\"flex-1 bg-transparent text-green-400 outline-none border-none\"\n              autoFocus\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":137733},"client/src/components/BumblebeeDesktop.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { \n  Bug, \n  FileText, \n  Terminal, \n  Settings, \n  LogOut, \n  Grid3X3, \n  Folder,\n  Calculator,\n  Image,\n  Music,\n  Video,\n  Globe,\n  Monitor,\n  Wifi,\n  Volume2,\n  Battery\n} from 'lucide-react';\nimport { BumblebeeTerminal } from './bumblebee-apps/BumblebeeTerminal';\nimport { BumblebeeFileManager } from './bumblebee-apps/BumblebeeFileManager';\nimport { BumblebeeBrowser } from './bumblebee-apps/BumblebeeBrowser';\nimport { BumblebeeTextEditor } from './bumblebee-apps/BumblebeeTextEditor';\n\ninterface BumblebeeDesktopProps {\n  username: string;\n  onLogout: () => void;\n  onReturnToWebOS: () => void;\n}\n\nexport const BumblebeeDesktop: FC<BumblebeeDesktopProps> = ({ \n  username, \n  onLogout, \n  onReturnToWebOS \n}) => {\n  const [showApplications, setShowApplications] = useState(false);\n  const [time, setTime] = useState(new Date().toLocaleTimeString());\n  const [openApps, setOpenApps] = useState<{[key: string]: boolean}>({});\n\n  // Update time every second\n  setInterval(() => {\n    setTime(new Date().toLocaleTimeString());\n  }, 1000);\n\n  const openApp = (appName: string) => {\n    setOpenApps(prev => ({ ...prev, [appName]: true }));\n    setShowApplications(false);\n  };\n\n  const closeApp = (appName: string) => {\n    setOpenApps(prev => ({ ...prev, [appName]: false }));\n  };\n\n  const applications = [\n    { name: 'Files', icon: Folder, category: 'System' },\n    { name: 'Terminal', icon: Terminal, category: 'System' },\n    { name: 'Text Editor', icon: FileText, category: 'Office' },\n    { name: 'Calculator', icon: Calculator, category: 'Utilities' },\n    { name: 'Image Viewer', icon: Image, category: 'Graphics' },\n    { name: 'Music Player', icon: Music, category: 'Media' },\n    { name: 'Video Player', icon: Video, category: 'Media' },\n    { name: 'Web Browser', icon: Globe, category: 'Internet' },\n    { name: 'Settings', icon: Settings, category: 'System' },\n    { name: 'System Monitor', icon: Monitor, category: 'System' }\n  ];\n\n  return (\n    <div className=\"h-screen w-full bg-gradient-to-br from-orange-400 via-yellow-500 to-amber-600 relative\">\n      {/* Desktop Background Pattern */}\n      <div className=\"absolute inset-0 opacity-5\">\n        <div className=\"grid grid-cols-12 gap-8 h-full w-full p-8\">\n          {Array.from({ length: 144 }).map((_, i) => (\n            <Bug key={i} className=\"w-6 h-6 text-orange-800\" />\n          ))}\n        </div>\n      </div>\n\n      {/* Top Panel */}\n      <div className=\"absolute top-0 left-0 right-0 h-12 bg-orange-900/80 backdrop-blur-sm border-b border-orange-700/50 flex items-center justify-between px-4 z-50\">\n        {/* Left Side - Activities */}\n        <div className=\"flex items-center space-x-4\">\n          <Button\n            onClick={() => setShowApplications(!showApplications)}\n            className=\"bg-transparent hover:bg-orange-800/50 text-white px-3 py-1 h-8\"\n          >\n            Activities\n          </Button>\n        </div>\n\n        {/* Center - Current Time */}\n        <div className=\"text-white font-medium\">\n          {new Date().toLocaleDateString()} {time}\n        </div>\n\n        {/* Right Side - System Indicators */}\n        <div className=\"flex items-center space-x-3 text-white\">\n          <Wifi className=\"w-4 h-4\" />\n          <Volume2 className=\"w-4 h-4\" />\n          <Battery className=\"w-4 h-4\" />\n          <Button\n            onClick={onLogout}\n            className=\"bg-transparent hover:bg-orange-800/50 text-white px-3 py-1 h-8\"\n          >\n            <LogOut className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Applications Overview */}\n      {showApplications && (\n        <div className=\"absolute inset-0 bg-black/50 backdrop-blur-sm z-40 pt-12\">\n          <div className=\"p-8\">\n            <h2 className=\"text-4xl font-bold text-white mb-8 text-center\">Applications</h2>\n            <div className=\"grid grid-cols-5 gap-6 max-w-4xl mx-auto\">\n              {applications.map((app, index) => (\n                <div\n                  key={index}\n                  className=\"bg-white/10 backdrop-blur-sm rounded-2xl p-6 hover:bg-white/20 transition-all cursor-pointer group\"\n                  onClick={() => openApp(app.name)}\n                >\n                  <div className=\"text-center\">\n                    <div className=\"w-16 h-16 bg-yellow-400 rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform\">\n                      <app.icon className=\"w-8 h-8 text-orange-800\" />\n                    </div>\n                    <h3 className=\"text-white font-medium text-sm\">{app.name}</h3>\n                    <p className=\"text-orange-200 text-xs mt-1\">{app.category}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Application Windows */}\n      {openApps.Terminal && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-50 bg-black/20\">\n          <BumblebeeTerminal onClose={() => closeApp('Terminal')} />\n        </div>\n      )}\n\n      {openApps.Files && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-50 bg-black/20\">\n          <BumblebeeFileManager onClose={() => closeApp('Files')} />\n        </div>\n      )}\n\n      {openApps['Web Browser'] && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-50 bg-black/20\">\n          <BumblebeeBrowser onClose={() => closeApp('Web Browser')} />\n        </div>\n      )}\n\n      {openApps['Text Editor'] && (\n        <div className=\"absolute inset-0 flex items-center justify-center z-50 bg-black/20\">\n          <BumblebeeTextEditor onClose={() => closeApp('Text Editor')} />\n        </div>\n      )}\n\n      {/* Desktop Icons */}\n      <div className=\"absolute top-20 left-8 grid grid-cols-1 gap-4\">\n        {['Home', 'Documents', 'Downloads', 'Pictures'].map((folder, index) => (\n          <div\n            key={index}\n            className=\"bg-white/10 backdrop-blur-sm rounded-lg p-3 cursor-pointer hover:bg-white/20 transition-all w-24\"\n          >\n            <Folder className=\"w-8 h-8 text-white mx-auto mb-1\" />\n            <p className=\"text-white text-xs text-center\">{folder}</p>\n          </div>\n        ))}\n      </div>\n\n      {/* Dock */}\n      <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2\">\n        <div className=\"bg-orange-900/80 backdrop-blur-sm rounded-2xl px-4 py-3 flex items-center space-x-3 border border-orange-700/50\">\n          <Button\n            onClick={() => openApp('Files')}\n            className=\"w-12 h-12 bg-yellow-400 hover:bg-yellow-300 rounded-xl p-0 transition-all hover:scale-110\"\n          >\n            <Folder className=\"w-6 h-6 text-orange-800\" />\n          </Button>\n          <Button\n            onClick={() => openApp('Terminal')}\n            className=\"w-12 h-12 bg-yellow-400 hover:bg-yellow-300 rounded-xl p-0 transition-all hover:scale-110\"\n          >\n            <Terminal className=\"w-6 h-6 text-orange-800\" />\n          </Button>\n          <Button\n            onClick={() => openApp('Web Browser')}\n            className=\"w-12 h-12 bg-yellow-400 hover:bg-yellow-300 rounded-xl p-0 transition-all hover:scale-110\"\n          >\n            <Globe className=\"w-6 h-6 text-orange-800\" />\n          </Button>\n          <Button\n            onClick={() => openApp('Text Editor')}\n            className=\"w-12 h-12 bg-yellow-400 hover:bg-yellow-300 rounded-xl p-0 transition-all hover:scale-110\"\n          >\n            <FileText className=\"w-6 h-6 text-orange-800\" />\n          </Button>\n          <Button\n            onClick={() => setShowApplications(true)}\n            className=\"w-12 h-12 bg-yellow-400 hover:bg-yellow-300 rounded-xl p-0 transition-all hover:scale-110\"\n          >\n            <Settings className=\"w-6 h-6 text-orange-800\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Return to WebOS Button */}\n      <Button\n        onClick={onReturnToWebOS}\n        className=\"absolute top-16 right-4 bg-red-600 hover:bg-red-700 text-white\"\n      >\n        Exit Bumblebee OS\n      </Button>\n\n      {/* Welcome Message */}\n      <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-center\">\n        <div className=\"bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20\">\n          <Bug className=\"w-16 h-16 text-yellow-400 mx-auto mb-4\" />\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Welcome to Bumblebee OS</h1>\n          <p className=\"text-orange-100 mb-2\">Hello, {username}!</p>\n          <p className=\"text-orange-200 text-sm\">Ubuntu 22.04 LTS with GNOME Desktop</p>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":8783},"client/src/components/BumblebeeLogin.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { ArrowLeft, Bug, Shield, User } from 'lucide-react';\n\ninterface BumblebeeLoginProps {\n  onLogin: (username: string) => void;\n  onReturnToWebOS: () => void;\n}\n\nexport const BumblebeeLogin: FC<BumblebeeLoginProps> = ({ onLogin, onReturnToWebOS }) => {\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [selectedUser, setSelectedUser] = useState<string | null>(null);\n\n  const defaultUsers = [\n    { username: 'ubuntu', fullName: 'Ubuntu User', avatar: '👤' },\n    { username: 'developer', fullName: 'Developer', avatar: '💻' },\n    { username: 'admin', fullName: 'Administrator', avatar: '🔐' },\n    { username: 'guest', fullName: 'Guest User', avatar: '👋' }\n  ];\n\n  const handleLogin = () => {\n    if (username.trim()) {\n      onLogin(username);\n    }\n  };\n\n  const handleUserSelect = (user: string) => {\n    setSelectedUser(user);\n    setUsername(user);\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-gradient-to-br from-orange-400 via-yellow-500 to-amber-600 flex items-center justify-center relative\">\n      {/* Hexagon Pattern Background */}\n      <div className=\"absolute inset-0 opacity-10\">\n        <div className=\"grid grid-cols-8 gap-4 h-full w-full p-8\">\n          {Array.from({ length: 64 }).map((_, i) => (\n            <div\n              key={i}\n              className=\"w-8 h-8 border-2 border-orange-800 transform rotate-45\"\n              style={{\n                clipPath: 'polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%)'\n              }}\n            />\n          ))}\n        </div>\n      </div>\n\n      {/* Return to WebOS Button */}\n      <Button\n        onClick={onReturnToWebOS}\n        className=\"absolute top-4 left-4 bg-black/20 hover:bg-black/30 text-white border-orange-300\"\n        variant=\"outline\"\n      >\n        <ArrowLeft className=\"w-4 h-4 mr-2\" />\n        Return to WebOS\n      </Button>\n\n      {/* Login Container */}\n      <div className=\"bg-white/10 backdrop-blur-lg rounded-3xl p-8 w-full max-w-md border border-white/20 shadow-2xl\">\n        {/* Bumblebee OS Header */}\n        <div className=\"text-center mb-8\">\n          <div className=\"inline-flex items-center justify-center w-20 h-20 bg-yellow-400 rounded-full mb-4 shadow-lg\">\n            <Bug className=\"w-10 h-10 text-orange-800\" />\n          </div>\n          <h1 className=\"text-3xl font-bold text-white mb-2\">Bumblebee OS</h1>\n          <p className=\"text-orange-100\">Ubuntu-based Desktop Environment</p>\n        </div>\n\n        {/* User Selection */}\n        <div className=\"mb-6\">\n          <label className=\"block text-orange-100 text-sm font-medium mb-3\">\n            Select User Account\n          </label>\n          <div className=\"grid grid-cols-2 gap-3\">\n            {defaultUsers.map((user) => (\n              <button\n                key={user.username}\n                onClick={() => handleUserSelect(user.username)}\n                className={`p-3 rounded-lg border-2 transition-all ${\n                  selectedUser === user.username\n                    ? 'border-white bg-white/20 text-white'\n                    : 'border-orange-300/50 bg-white/10 text-orange-100 hover:bg-white/15'\n                }`}\n              >\n                <div className=\"text-2xl mb-1\">{user.avatar}</div>\n                <div className=\"text-sm font-medium\">{user.fullName}</div>\n                <div className=\"text-xs opacity-75\">{user.username}</div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        {/* Manual Username Input */}\n        <div className=\"mb-4\">\n          <label className=\"block text-orange-100 text-sm font-medium mb-2\">\n            <User className=\"w-4 h-4 inline mr-2\" />\n            Username\n          </label>\n          <Input\n            type=\"text\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            placeholder=\"Enter username\"\n            className=\"bg-white/10 border-orange-300/50 text-white placeholder-orange-200/70 focus:border-white\"\n            onKeyPress={(e) => e.key === 'Enter' && handleLogin()}\n          />\n        </div>\n\n        {/* Password Input */}\n        <div className=\"mb-6\">\n          <label className=\"block text-orange-100 text-sm font-medium mb-2\">\n            <Shield className=\"w-4 h-4 inline mr-2\" />\n            Password\n          </label>\n          <Input\n            type=\"password\"\n            value={password}\n            onChange={(e) => setPassword(e.target.value)}\n            placeholder=\"Enter password\"\n            className=\"bg-white/10 border-orange-300/50 text-white placeholder-orange-200/70 focus:border-white\"\n            onKeyPress={(e) => e.key === 'Enter' && handleLogin()}\n          />\n        </div>\n\n        {/* Login Button */}\n        <Button\n          onClick={handleLogin}\n          disabled={!username.trim()}\n          className=\"w-full bg-yellow-500 hover:bg-yellow-400 text-orange-900 font-semibold py-3 text-lg disabled:opacity-50\"\n        >\n          Sign In to Bumblebee OS\n        </Button>\n\n        {/* System Info */}\n        <div className=\"mt-6 text-center text-orange-100/70 text-sm\">\n          <p>Bumblebee OS v22.04 LTS</p>\n          <p>Powered by Ubuntu + GNOME</p>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":5409},"client/src/components/BumblebeeOS.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { BumblebeeLogin } from './BumblebeeLogin';\nimport { BumblebeeDesktop } from './BumblebeeDesktop';\n\ninterface BumblebeeOSProps {\n  onReturnToWebOS: () => void;\n}\n\nexport const BumblebeeOS: FC<BumblebeeOSProps> = ({ onReturnToWebOS }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [currentUser, setCurrentUser] = useState<string>('');\n\n  const handleLogin = (username: string) => {\n    setCurrentUser(username);\n    setIsLoggedIn(true);\n  };\n\n  const handleLogout = () => {\n    setIsLoggedIn(false);\n    setCurrentUser('');\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-gradient-to-br from-orange-400 via-yellow-500 to-amber-600 overflow-hidden\">\n      {!isLoggedIn ? (\n        <BumblebeeLogin onLogin={handleLogin} onReturnToWebOS={onReturnToWebOS} />\n      ) : (\n        <BumblebeeDesktop \n          username={currentUser} \n          onLogout={handleLogout}\n          onReturnToWebOS={onReturnToWebOS}\n        />\n      )}\n    </div>\n  );\n};","size_bytes":1029},"client/src/components/HelpSystem.tsx":{"content":"import { FC, useState } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { \n  HelpCircle, \n  BookOpen, \n  Play, \n  Zap, \n  Monitor, \n  Keyboard,\n  X,\n  ChevronRight,\n  Clock\n} from 'lucide-react';\n\ninterface HelpSystemProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onStartTour: (tourType: 'welcome' | 'features' | 'advanced') => void;\n}\n\nconst HELP_TOPICS = [\n  {\n    id: 'getting-started',\n    title: 'Getting Started',\n    description: 'Learn the basics of navigating WebOS',\n    icon: <Play className=\"w-5 h-5\" />,\n    action: 'tour:welcome',\n    estimated: '3 min'\n  },\n  {\n    id: 'features',\n    title: 'Features Overview',\n    description: 'Discover all the applications and tools available',\n    icon: <Zap className=\"w-5 h-5\" />,\n    action: 'tour:features',\n    estimated: '5 min'\n  },\n  {\n    id: 'advanced',\n    title: 'Advanced Usage',\n    description: 'Master workspace management and power features',\n    icon: <Monitor className=\"w-5 h-5\" />,\n    action: 'tour:advanced',\n    estimated: '8 min'\n  }\n];\n\nconst QUICK_TIPS = [\n  {\n    title: 'Quick Launch',\n    shortcut: 'Ctrl + Space',\n    description: 'Instantly search and launch any application'\n  },\n  {\n    title: 'Drag Icons',\n    shortcut: 'Click & Drag',\n    description: 'Rearrange desktop icons by dragging them'\n  },\n  {\n    title: 'Right Click',\n    shortcut: 'Right Click',\n    description: 'Access context menus for additional options'\n  },\n  {\n    title: 'Workspace Switch',\n    shortcut: 'Click Numbers',\n    description: 'Switch between different desktop workspaces'\n  }\n];\n\nconst FAQ_ITEMS = [\n  {\n    question: 'How do I install new applications?',\n    answer: 'Use the Package Manager app to browse and install new applications. Click on any package and select \"Install\" to add it to your desktop.'\n  },\n  {\n    question: 'Can I organize my desktop icons?',\n    answer: 'Yes! You can drag icons to rearrange them, or use the \"Organize Apps\" button to create folders and group applications by category.'\n  },\n  {\n    question: 'How do I browse the internet?',\n    answer: 'Launch the Web Browser app to access real websites. The browser supports full web browsing with a built-in proxy system.'\n  },\n  {\n    question: 'What are achievements?',\n    answer: 'Achievements track your usage patterns and reward you for exploring different features. Check the Achievements app to see your progress.'\n  },\n  {\n    question: 'How do I change my password or settings?',\n    answer: 'Use the Account Manager app to update your profile, change passwords, and manage user accounts if you have admin privileges.'\n  }\n];\n\nexport const HelpSystem: FC<HelpSystemProps> = ({ isOpen, onClose, onStartTour }) => {\n  const [activeSection, setActiveSection] = useState<'tours' | 'tips' | 'faq'>('tours');\n\n  if (!isOpen) return null;\n\n  const handleActionClick = (action: string) => {\n    if (action.startsWith('tour:')) {\n      const tourType = action.split(':')[1] as 'welcome' | 'features' | 'advanced';\n      onStartTour(tourType);\n      onClose();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-40 flex items-center justify-center bg-black/50\">\n      <Card className=\"w-full max-w-4xl max-h-[80vh] m-4 overflow-hidden\">\n        <div className=\"flex h-full\">\n          {/* Sidebar */}\n          <div className=\"w-64 bg-muted/30 border-r p-4\">\n            <div className=\"flex items-center gap-2 mb-6\">\n              <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                <HelpCircle className=\"w-5 h-5 text-primary\" />\n              </div>\n              <div>\n                <h2 className=\"font-semibold\">Help Center</h2>\n                <p className=\"text-xs text-muted-foreground\">Learn WebOS</p>\n              </div>\n            </div>\n\n            <nav className=\"space-y-2\">\n              <button\n                onClick={() => setActiveSection('tours')}\n                className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${\n                  activeSection === 'tours' ? 'bg-primary text-primary-foreground' : 'hover:bg-muted'\n                }`}\n              >\n                <BookOpen className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">Interactive Tours</span>\n              </button>\n\n              <button\n                onClick={() => setActiveSection('tips')}\n                className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${\n                  activeSection === 'tips' ? 'bg-primary text-primary-foreground' : 'hover:bg-muted'\n                }`}\n              >\n                <Keyboard className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">Quick Tips</span>\n              </button>\n\n              <button\n                onClick={() => setActiveSection('faq')}\n                className={`w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors ${\n                  activeSection === 'faq' ? 'bg-primary text-primary-foreground' : 'hover:bg-muted'\n                }`}\n              >\n                <HelpCircle className=\"w-4 h-4\" />\n                <span className=\"text-sm font-medium\">FAQ</span>\n              </button>\n            </nav>\n          </div>\n\n          {/* Main content */}\n          <div className=\"flex-1 p-6 overflow-auto\">\n            <div className=\"flex items-center justify-between mb-6\">\n              <div>\n                <h1 className=\"text-2xl font-bold capitalize\">{activeSection}</h1>\n                <p className=\"text-muted-foreground\">\n                  {activeSection === 'tours' && 'Take guided tours to learn WebOS features'}\n                  {activeSection === 'tips' && 'Quick keyboard shortcuts and tips'}\n                  {activeSection === 'faq' && 'Frequently asked questions and answers'}\n                </p>\n              </div>\n              <Button variant=\"ghost\" size=\"sm\" onClick={onClose}>\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            {/* Tours Section */}\n            {activeSection === 'tours' && (\n              <div className=\"space-y-4\">\n                {HELP_TOPICS.map((topic) => (\n                  <Card key={topic.id} className=\"p-4 hover:shadow-md transition-shadow\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"w-12 h-12 rounded-lg bg-primary/10 flex items-center justify-center\">\n                          {topic.icon}\n                        </div>\n                        <div>\n                          <h3 className=\"font-semibold\">{topic.title}</h3>\n                          <p className=\"text-sm text-muted-foreground\">{topic.description}</p>\n                          <div className=\"flex items-center gap-2 mt-2\">\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              <Clock className=\"w-3 h-3 mr-1\" />\n                              {topic.estimated}\n                            </Badge>\n                          </div>\n                        </div>\n                      </div>\n                      <Button onClick={() => handleActionClick(topic.action)}>\n                        Start Tour\n                        <ChevronRight className=\"w-4 h-4 ml-2\" />\n                      </Button>\n                    </div>\n                  </Card>\n                ))}\n\n                <Card className=\"p-4 bg-blue-50 border-blue-200\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0\">\n                      <HelpCircle className=\"w-4 h-4 text-blue-600\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium text-blue-900 mb-1\">New to WebOS?</h4>\n                      <p className=\"text-sm text-blue-700 mb-3\">\n                        We recommend starting with the \"Getting Started\" tour to learn the basics, \n                        then explore the features tour to discover all available applications.\n                      </p>\n                      <Button \n                        size=\"sm\" \n                        onClick={() => handleActionClick('tour:welcome')}\n                        className=\"bg-blue-600 hover:bg-blue-700\"\n                      >\n                        Start Here\n                      </Button>\n                    </div>\n                  </div>\n                </Card>\n              </div>\n            )}\n\n            {/* Tips Section */}\n            {activeSection === 'tips' && (\n              <div className=\"space-y-4\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {QUICK_TIPS.map((tip, index) => (\n                    <Card key={index} className=\"p-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"w-8 h-8 rounded bg-primary/10 flex items-center justify-center flex-shrink-0\">\n                          <span className=\"text-xs font-bold text-primary\">{index + 1}</span>\n                        </div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center gap-2 mb-2\">\n                            <h4 className=\"font-medium\">{tip.title}</h4>\n                            <Badge variant=\"secondary\" className=\"text-xs\">\n                              {tip.shortcut}\n                            </Badge>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground\">{tip.description}</p>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n\n                <Separator />\n\n                <Card className=\"p-4 bg-green-50 border-green-200\">\n                  <h4 className=\"font-medium text-green-900 mb-2\">Pro Tip</h4>\n                  <p className=\"text-sm text-green-700\">\n                    You can access this help system anytime by clicking the help button in the taskbar \n                    or pressing F1 while on the desktop.\n                  </p>\n                </Card>\n              </div>\n            )}\n\n            {/* FAQ Section */}\n            {activeSection === 'faq' && (\n              <div className=\"space-y-4\">\n                {FAQ_ITEMS.map((item, index) => (\n                  <Card key={index} className=\"p-4\">\n                    <h4 className=\"font-medium mb-2\">{item.question}</h4>\n                    <p className=\"text-sm text-muted-foreground leading-relaxed\">{item.answer}</p>\n                  </Card>\n                ))}\n\n                <Card className=\"p-4 bg-yellow-50 border-yellow-200\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center flex-shrink-0\">\n                      <HelpCircle className=\"w-4 h-4 text-yellow-600\" />\n                    </div>\n                    <div>\n                      <h4 className=\"font-medium text-yellow-900 mb-1\">Need More Help?</h4>\n                      <p className=\"text-sm text-yellow-700\">\n                        If you can't find what you're looking for, try taking one of our interactive \n                        tours or explore the applications to learn by doing.\n                      </p>\n                    </div>\n                  </div>\n                </Card>\n              </div>\n            )}\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n};","size_bytes":11839},"client/src/components/LoginAnimation.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { soundManager } from '@/lib/soundManager';\n\ninterface LoginAnimationProps {\n  username: string;\n  onComplete: () => void;\n}\n\nexport const LoginAnimation: FC<LoginAnimationProps> = ({ username, onComplete }) => {\n  const [stage, setStage] = useState<'welcome' | 'loading' | 'desktop'>('welcome');\n  const [progress, setProgress] = useState(0);\n  const [dots, setDots] = useState('');\n\n  useEffect(() => {\n    // Play Windows XP login sound\n    soundManager.play('login');\n    \n    const sequence = async () => {\n      // Welcome stage - 2 seconds\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // Loading stage with progress\n      setStage('loading');\n      \n      // Animate progress bar\n      const progressInterval = setInterval(() => {\n        setProgress(prev => {\n          if (prev >= 100) {\n            clearInterval(progressInterval);\n            return 100;\n          }\n          return prev + Math.random() * 15;\n        });\n      }, 200);\n\n      // Animate dots\n      const dotsInterval = setInterval(() => {\n        setDots(prev => {\n          if (prev.length >= 3) return '';\n          return prev + '.';\n        });\n      }, 500);\n\n      // Wait for progress to complete\n      await new Promise(resolve => {\n        const checkProgress = setInterval(() => {\n          if (progress >= 100) {\n            clearInterval(checkProgress);\n            clearInterval(dotsInterval);\n            resolve(void 0);\n          }\n        }, 100);\n      });\n\n      // Desktop transition\n      setStage('desktop');\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      onComplete();\n    };\n\n    sequence();\n  }, [onComplete, progress]);\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-gradient-to-br from-blue-600 via-blue-700 to-blue-800 flex items-center justify-center\">\n      {/* Windows XP style background pattern */}\n      <div className=\"absolute inset-0 opacity-10\">\n        <div \n          className=\"w-full h-full\"\n          style={{\n            backgroundImage: `\n              radial-gradient(circle at 25% 25%, rgba(255,255,255,0.1) 0%, transparent 50%),\n              radial-gradient(circle at 75% 75%, rgba(255,255,255,0.1) 0%, transparent 50%)\n            `\n          }}\n        />\n      </div>\n\n      <div className=\"relative text-center text-white\">\n        {stage === 'welcome' && (\n          <div className=\"animate-fade-in\">\n            {/* Windows logo placeholder */}\n            <div className=\"mb-8 flex justify-center\">\n              <div className=\"w-16 h-16 bg-white rounded-lg flex items-center justify-center shadow-2xl\">\n                <div className=\"grid grid-cols-2 gap-1\">\n                  <div className=\"w-3 h-3 bg-red-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-green-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-blue-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-yellow-500 rounded-sm\"></div>\n                </div>\n              </div>\n            </div>\n            \n            <h1 className=\"text-4xl font-light mb-4 tracking-wide\">\n              Welcome\n            </h1>\n            <p className=\"text-xl opacity-90\">\n              {username}\n            </p>\n          </div>\n        )}\n\n        {stage === 'loading' && (\n          <div className=\"animate-fade-in\">\n            <div className=\"mb-8 flex justify-center\">\n              <div className=\"w-16 h-16 bg-white rounded-lg flex items-center justify-center shadow-2xl animate-pulse\">\n                <div className=\"grid grid-cols-2 gap-1\">\n                  <div className=\"w-3 h-3 bg-red-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-green-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-blue-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-yellow-500 rounded-sm\"></div>\n                </div>\n              </div>\n            </div>\n\n            <h2 className=\"text-2xl font-light mb-8\">\n              Loading your personal settings{dots}\n            </h2>\n\n            {/* Progress bar */}\n            <div className=\"w-80 mx-auto mb-4\">\n              <div className=\"bg-white/20 rounded-full h-2 overflow-hidden\">\n                <div \n                  className=\"bg-white h-full rounded-full transition-all duration-300 ease-out\"\n                  style={{ width: `${Math.min(progress, 100)}%` }}\n                />\n              </div>\n            </div>\n\n            <p className=\"text-sm opacity-75\">\n              Please wait while Windows configures your desktop...\n            </p>\n          </div>\n        )}\n\n        {stage === 'desktop' && (\n          <div className=\"animate-fade-in\">\n            <div className=\"mb-8 flex justify-center\">\n              <div className=\"w-16 h-16 bg-white rounded-lg flex items-center justify-center shadow-2xl animate-bounce\">\n                <div className=\"grid grid-cols-2 gap-1\">\n                  <div className=\"w-3 h-3 bg-red-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-green-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-blue-500 rounded-sm\"></div>\n                  <div className=\"w-3 h-3 bg-yellow-500 rounded-sm\"></div>\n                </div>\n              </div>\n            </div>\n\n            <h2 className=\"text-3xl font-light\">\n              Welcome to WebOS\n            </h2>\n            <p className=\"text-lg opacity-90 mt-2\">\n              Your desktop is ready\n            </p>\n          </div>\n        )}\n      </div>\n\n      {/* XP-style corner elements */}\n      <div className=\"absolute bottom-4 right-4 text-white/50 text-xs\">\n        WebOS • {new Date().getFullYear()}\n      </div>\n    </div>\n  );\n};","size_bytes":5773},"client/src/components/LoginScreen.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Eye, EyeOff, User, Lock, Power } from 'lucide-react';\nimport { WebOSMascot } from './WebOSMascot';\nimport { PrideTheme, usePrideTheme } from './PrideTheme';\n\ninterface User {\n  username: string;\n  password: string;\n  fullName: string;\n  avatar?: string;\n  lastLogin?: Date;\n  theme: 'light' | 'dark' | 'auto';\n  wallpaper: string;\n}\n\ninterface LoginScreenProps {\n  onLogin: (user: User) => void;\n  onShutdown: () => void;\n}\n\nexport const LoginScreen: FC<LoginScreenProps> = ({ onLogin, onShutdown }) => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [password, setPassword] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [showCreateAccount, setShowCreateAccount] = useState(false);\n  const [showStartup, setShowStartup] = useState(true);\n  \n  // Pride Month theme\n  const { isEnabled: isPrideThemeEnabled } = usePrideTheme();\n  const [newAccount, setNewAccount] = useState({\n    username: '',\n    password: '',\n    confirmPassword: '',\n    fullName: ''\n  });\n\n  // Startup sequence with logo and sound\n  useEffect(() => {\n    const startupSequence = async () => {\n      // Play startup sound\n      try {\n        if ('AudioContext' in window) {\n          const audioContext = new AudioContext();\n          const oscillator = audioContext.createOscillator();\n          const gainNode = audioContext.createGain();\n          \n          oscillator.connect(gainNode);\n          gainNode.connect(audioContext.destination);\n          \n          oscillator.frequency.setValueAtTime(800, audioContext.currentTime);\n          oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.5);\n          \n          gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);\n          gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);\n          \n          oscillator.start(audioContext.currentTime);\n          oscillator.stop(audioContext.currentTime + 0.5);\n        }\n      } catch (e) {\n        // Silently handle audio error\n      }\n\n      // Show startup logo for 8 seconds to enjoy the mascot longer\n      setTimeout(() => {\n        setShowStartup(false);\n      }, 8000);\n    };\n\n    startupSequence();\n  }, []);\n\n  // Load users on mount\n  useEffect(() => {\n    if (showStartup) return; // Don't load users during startup\n\n    const loadUsers = () => {\n      const stored = localStorage.getItem('webos-users');\n      if (stored) {\n        const parsedUsers = JSON.parse(stored);\n        setUsers(parsedUsers);\n        \n        // Auto-select the last logged in user\n        const lastUser = localStorage.getItem('webos-last-user');\n        if (lastUser) {\n          const user = parsedUsers.find((u: User) => u.username === lastUser);\n          if (user) {\n            setSelectedUser(user);\n          }\n        } else if (parsedUsers.length > 0) {\n          setSelectedUser(parsedUsers[0]);\n        }\n      } else {\n        // Create default admin account\n        const defaultUser: User = {\n          username: 'Admin',\n          password: 'password',\n          fullName: 'Administrator',\n          theme: 'dark',\n          wallpaper: 'arch'\n        };\n        setUsers([defaultUser]);\n        setSelectedUser(defaultUser);\n        localStorage.setItem('webos-users', JSON.stringify([defaultUser]));\n      }\n    };\n\n    loadUsers();\n  }, [showStartup]);\n\n  const handleLogin = async () => {\n    if (!selectedUser || !password) {\n      setError('Please enter your password');\n      return;\n    }\n\n    setIsLoading(true);\n    setError('');\n\n    // Simulate authentication delay\n    await new Promise(resolve => setTimeout(resolve, 800));\n\n    if (password === selectedUser.password) {\n      const updatedUser = {\n        ...selectedUser,\n        lastLogin: new Date()\n      };\n\n      // Update user's last login\n      const updatedUsers = users.map(u => \n        u.username === selectedUser.username ? updatedUser : u\n      );\n      setUsers(updatedUsers);\n      localStorage.setItem('webos-users', JSON.stringify(updatedUsers));\n      localStorage.setItem('webos-last-user', selectedUser.username);\n      localStorage.setItem('webos-current-user', JSON.stringify(updatedUser));\n\n      onLogin(updatedUser);\n    } else {\n      setError('Invalid password');\n    }\n\n    setIsLoading(false);\n  };\n\n  const handleCreateAccount = () => {\n    if (!newAccount.username || !newAccount.password || !newAccount.fullName) {\n      setError('Please fill in all fields');\n      return;\n    }\n\n    if (newAccount.password !== newAccount.confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    if (users.some(u => u.username === newAccount.username)) {\n      setError('Username already exists');\n      return;\n    }\n\n    const user: User = {\n      username: newAccount.username,\n      password: newAccount.password,\n      fullName: newAccount.fullName,\n      theme: 'dark',\n      wallpaper: 'arch'\n    };\n\n    const updatedUsers = [...users, user];\n    setUsers(updatedUsers);\n    localStorage.setItem('webos-users', JSON.stringify(updatedUsers));\n    \n    setSelectedUser(user);\n    setShowCreateAccount(false);\n    setNewAccount({ username: '', password: '', confirmPassword: '', fullName: '' });\n    setError('');\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter' && !isLoading) {\n      if (showCreateAccount) {\n        handleCreateAccount();\n      } else {\n        handleLogin();\n      }\n    }\n  };\n\n  // Show startup screen\n  if (showStartup) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center relative overflow-hidden\">\n        {/* Startup animation */}\n        <div className=\"text-center\">\n          <div className=\"mb-8 animate-pulse\">\n            <svg width=\"120\" height=\"120\" viewBox=\"0 0 200 200\" className=\"text-orange-400 mx-auto\">\n              <rect x=\"20\" y=\"20\" width=\"160\" height=\"160\" rx=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"8\"/>\n              <text x=\"100\" y=\"80\" textAnchor=\"middle\" className=\"text-4xl font-bold fill-orange-400\">&lt;/&gt;</text>\n              <text x=\"100\" y=\"140\" textAnchor=\"middle\" className=\"text-sm fill-yellow-400\">HTML</text>\n              <circle cx=\"60\" cy=\"160\" r=\"8\" className=\"fill-blue-400\"/>\n              <circle cx=\"100\" cy=\"160\" r=\"8\" className=\"fill-green-400\"/>\n              <circle cx=\"140\" cy=\"160\" r=\"8\" className=\"fill-red-400\"/>\n            </svg>\n          </div>\n          <h1 className=\"text-4xl font-bold text-white mb-4\">WebOS</h1>\n          <p className=\"text-orange-400 text-lg\">HTML/JavaScript Operating System</p>\n          \n          {/* Loading dots */}\n          <div className=\"flex justify-center mt-6 space-x-1\">\n            <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{animationDelay: '0ms'}}></div>\n            <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{animationDelay: '150ms'}}></div>\n            <div className=\"w-2 h-2 bg-blue-400 rounded-full animate-bounce\" style={{animationDelay: '300ms'}}></div>\n          </div>\n          \n          {/* Interactive WebOS Mascot */}\n          <WebOSMascot isVisible={showStartup} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900\">\n      {/* Background pattern */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <pattern id=\"loginGrid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n              <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"rgba(115, 176, 219, 0.3)\" strokeWidth=\"0.5\"/>\n            </pattern>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#loginGrid)\" />\n        </svg>\n      </div>\n\n      {/* WebOS logo background */}\n      <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\">\n        <svg width=\"600\" height=\"600\" viewBox=\"0 0 200 200\" className=\"text-white\">\n          <rect x=\"20\" y=\"20\" width=\"160\" height=\"160\" rx=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"4\"/>\n          <text x=\"100\" y=\"80\" textAnchor=\"middle\" className=\"text-6xl font-bold fill-current\">&lt;/&gt;</text>\n          <text x=\"100\" y=\"140\" textAnchor=\"middle\" className=\"text-2xl fill-current\">HTML</text>\n        </svg>\n      </div>\n\n      {/* Login card */}\n      <Card className=\"w-full max-w-md p-8 bg-background/95 backdrop-blur-sm border-border/50 shadow-2xl\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-primary/10 flex items-center justify-center\">\n            <svg width=\"32\" height=\"32\" viewBox=\"0 0 200 200\" className=\"text-primary\">\n              <rect x=\"20\" y=\"20\" width=\"160\" height=\"160\" rx=\"20\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"8\"/>\n              <text x=\"100\" y=\"80\" textAnchor=\"middle\" className=\"text-4xl font-bold fill-current\">&lt;/&gt;</text>\n              <text x=\"100\" y=\"140\" textAnchor=\"middle\" className=\"text-sm fill-current\">JS</text>\n            </svg>\n          </div>\n          <h1 className=\"text-2xl font-bold text-foreground\">WebOS</h1>\n          <p className=\"text-muted-foreground\">HTML/JavaScript Desktop Environment</p>\n        </div>\n\n        {!showCreateAccount ? (\n          <>\n            {/* User selection */}\n            {users.length > 0 && (\n              <div className=\"mb-6\">\n                <Label className=\"text-sm font-medium mb-3 block\">Select User</Label>\n                <div className=\"space-y-2\">\n                  {users.map((user) => (\n                    <Card\n                      key={user.username}\n                      className={`p-3 cursor-pointer transition-all hover:bg-accent ${\n                        selectedUser?.username === user.username\n                          ? 'ring-2 ring-primary bg-accent'\n                          : 'bg-background'\n                      }`}\n                      onClick={() => {\n                        setSelectedUser(user);\n                        setPassword('');\n                        setError('');\n                      }}\n                    >\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                          <User className=\"w-5 h-5 text-primary\" />\n                        </div>\n                        <div>\n                          <div className=\"font-medium\">{user.fullName}</div>\n                          <div className=\"text-sm text-muted-foreground\">@{user.username}</div>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* Password input */}\n            {selectedUser && (\n              <div className=\"space-y-4\">\n                <div>\n                  <Label htmlFor=\"password\">Password</Label>\n                  <div className=\"relative\">\n                    <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                    <Input\n                      id=\"password\"\n                      type={showPassword ? 'text' : 'password'}\n                      value={password}\n                      onChange={(e) => setPassword(e.target.value)}\n                      onKeyPress={handleKeyPress}\n                      className=\"pl-10 pr-10\"\n                      placeholder=\"Enter your password\"\n                      autoFocus\n                    />\n                    <button\n                      type=\"button\"\n                      onClick={() => setShowPassword(!showPassword)}\n                      className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-muted-foreground hover:text-foreground\"\n                    >\n                      {showPassword ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n                    </button>\n                  </div>\n                </div>\n\n                {error && (\n                  <Alert variant=\"destructive\">\n                    <AlertDescription>{error}</AlertDescription>\n                  </Alert>\n                )}\n\n                <Button\n                  onClick={handleLogin}\n                  disabled={isLoading || !password}\n                  className=\"w-full\"\n                >\n                  {isLoading ? 'Signing in...' : 'Sign In'}\n                </Button>\n              </div>\n            )}\n\n            {/* Action buttons */}\n            <div className=\"flex justify-between mt-6 pt-4 border-t\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowCreateAccount(true)}\n              >\n                <User className=\"w-4 h-4 mr-2\" />\n                New User\n              </Button>\n              \n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={onShutdown}\n                className=\"text-destructive hover:text-destructive\"\n              >\n                <Power className=\"w-4 h-4 mr-2\" />\n                Shutdown\n              </Button>\n            </div>\n          </>\n        ) : (\n          <>\n            {/* Create account form */}\n            <div className=\"space-y-4\">\n              <h2 className=\"text-lg font-semibold text-center\">Create New Account</h2>\n              \n              <div>\n                <Label htmlFor=\"fullName\">Full Name</Label>\n                <Input\n                  id=\"fullName\"\n                  value={newAccount.fullName}\n                  onChange={(e) => setNewAccount({ ...newAccount, fullName: e.target.value })}\n                  placeholder=\"Enter your full name\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"username\">Username</Label>\n                <Input\n                  id=\"username\"\n                  value={newAccount.username}\n                  onChange={(e) => setNewAccount({ ...newAccount, username: e.target.value.toLowerCase() })}\n                  placeholder=\"Choose a username\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"newPassword\">Password</Label>\n                <Input\n                  id=\"newPassword\"\n                  type=\"password\"\n                  value={newAccount.password}\n                  onChange={(e) => setNewAccount({ ...newAccount, password: e.target.value })}\n                  placeholder=\"Enter your password\"\n                />\n              </div>\n\n              <div>\n                <Label htmlFor=\"confirmPassword\">Confirm Password</Label>\n                <Input\n                  id=\"confirmPassword\"\n                  type=\"password\"\n                  value={newAccount.confirmPassword}\n                  onChange={(e) => setNewAccount({ ...newAccount, confirmPassword: e.target.value })}\n                  onKeyPress={handleKeyPress}\n                  placeholder=\"Confirm your password\"\n                />\n              </div>\n\n              {error && (\n                <Alert variant=\"destructive\">\n                  <AlertDescription>{error}</AlertDescription>\n                </Alert>\n              )}\n\n              <div className=\"flex gap-2\">\n                <Button onClick={handleCreateAccount} className=\"flex-1\">\n                  Create Account\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  onClick={() => {\n                    setShowCreateAccount(false);\n                    setError('');\n                    setNewAccount({ username: '', password: '', confirmPassword: '', fullName: '' });\n                  }}\n                >\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </>\n        )}\n      </Card>\n\n      {/* Pride Month Theme */}\n      <PrideTheme isActive={isPrideThemeEnabled} />\n    </div>\n  );\n};","size_bytes":16587},"client/src/components/PrideTheme.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Heart, Star, Sparkles } from 'lucide-react';\n\ninterface PrideThemeProps {\n  isActive?: boolean;\n}\n\nexport const PrideTheme: FC<PrideThemeProps> = ({ isActive = true }) => {\n  const [showFloatingElements, setShowFloatingElements] = useState(false);\n\n  useEffect(() => {\n    if (isActive) {\n      setShowFloatingElements(true);\n    } else {\n      setShowFloatingElements(false);\n    }\n  }, [isActive]);\n\n  // Return null immediately if not active - this makes it disappear\n  if (!isActive) return null;\n\n  return (\n    <div className=\"fixed inset-0 pointer-events-none z-10 overflow-hidden\">\n      {/* Rainbow gradient overlay */}\n      <div className=\"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-red-500 via-orange-500 via-yellow-500 via-green-500 via-blue-500 via-indigo-500 to-purple-500 opacity-80\" />\n      \n      {/* Floating rainbow hearts */}\n      {showFloatingElements && Array.from({ length: 8 }).map((_, i) => (\n        <motion.div\n          key={i}\n          className=\"absolute\"\n          initial={{ \n            x: Math.random() * window.innerWidth,\n            y: window.innerHeight + 50,\n            opacity: 0 \n          }}\n          animate={{ \n            y: -50,\n            opacity: [0, 1, 1, 0],\n            rotate: [0, 360]\n          }}\n          transition={{\n            duration: 8 + Math.random() * 4,\n            delay: i * 0.5,\n            repeat: Infinity,\n            ease: \"linear\"\n          }}\n        >\n          <Heart \n            className=\"w-6 h-6\"\n            style={{\n              color: [\n                '#ef4444', '#f97316', '#eab308', \n                '#22c55e', '#3b82f6', '#6366f1', '#a855f7'\n              ][i % 7]\n            }}\n            fill=\"currentColor\"\n          />\n        </motion.div>\n      ))}\n\n      {/* Sparkle effects */}\n      {showFloatingElements && Array.from({ length: 12 }).map((_, i) => (\n        <motion.div\n          key={`sparkle-${i}`}\n          className=\"absolute\"\n          initial={{ \n            x: Math.random() * window.innerWidth,\n            y: Math.random() * window.innerHeight,\n            scale: 0,\n            opacity: 0 \n          }}\n          animate={{ \n            scale: [0, 1, 0],\n            opacity: [0, 1, 0],\n            rotate: [0, 180, 360]\n          }}\n          transition={{\n            duration: 2 + Math.random() * 2,\n            delay: i * 0.3,\n            repeat: Infinity,\n            ease: \"easeInOut\"\n          }}\n        >\n          <Sparkles \n            className=\"w-4 h-4\"\n            style={{\n              color: [\n                '#ef4444', '#f97316', '#eab308', \n                '#22c55e', '#3b82f6', '#6366f1', '#a855f7'\n              ][i % 7]\n            }}\n          />\n        </motion.div>\n      ))}\n\n      {/* Pride flag corner decoration */}\n      <div className=\"absolute top-4 right-4 w-16 h-10 rounded-md overflow-hidden shadow-lg\">\n        <div className=\"w-full h-full bg-gradient-to-b from-red-500 via-orange-500 via-yellow-500 via-green-500 via-blue-500 via-indigo-500 to-purple-500\" />\n      </div>\n\n      {/* Celebratory message */}\n      <motion.div\n        className=\"absolute top-20 left-1/2 transform -translate-x-1/2\"\n        initial={{ opacity: 0, y: -20 }}\n        animate={{ opacity: 1, y: 0 }}\n        transition={{ delay: 1, duration: 1 }}\n      >\n        <div className=\"bg-white/90 backdrop-blur-sm px-6 py-3 rounded-full shadow-lg\">\n          <div className=\"flex items-center gap-2\">\n            <Heart className=\"w-5 h-5 text-red-500\" fill=\"currentColor\" />\n            <span className=\"text-gray-800 font-semibold\">Happy Pride Month! 🏳️‍🌈</span>\n            <Star className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" />\n          </div>\n        </div>\n      </motion.div>\n    </div>\n  );\n};\n\nexport const PrideColors = {\n  red: '#ef4444',\n  orange: '#f97316', \n  yellow: '#eab308',\n  green: '#22c55e',\n  blue: '#3b82f6',\n  indigo: '#6366f1',\n  purple: '#a855f7'\n};\n\nexport const usePrideTheme = () => {\n  const [isEnabled, setIsEnabled] = useState(() => {\n    // Check user preference first\n    const userDisabled = localStorage.getItem('pride-theme-disabled') === 'true';\n    if (userDisabled) return false;\n    \n    // Check if manually enabled\n    const manuallyEnabled = localStorage.getItem('pride-theme-enabled') === 'true';\n    if (manuallyEnabled) return true;\n    \n    // Check if it's June (Pride Month) - but always enable for demo purposes\n    const currentMonth = new Date().getMonth();\n    return currentMonth === 5 || true; // Always enabled for demo\n  });\n\n  const togglePrideTheme = () => {\n    const newState = !isEnabled;\n    setIsEnabled(newState);\n    \n    // Store the explicit user preference\n    if (newState) {\n      localStorage.setItem('pride-theme-enabled', 'true');\n      localStorage.removeItem('pride-theme-disabled');\n    } else {\n      localStorage.setItem('pride-theme-disabled', 'true');\n      localStorage.removeItem('pride-theme-enabled');\n    }\n    \n    // Dispatch event to notify other components\n    window.dispatchEvent(new CustomEvent('pride-theme-changed', { \n      detail: { enabled: newState } \n    }));\n  };\n\n  const setPrideTheme = (enabled: boolean) => {\n    setIsEnabled(enabled);\n    \n    // Store the explicit user preference\n    if (enabled) {\n      localStorage.setItem('pride-theme-enabled', 'true');\n      localStorage.removeItem('pride-theme-disabled');\n      \n      // Apply pride theme colors to the system\n      document.documentElement.style.setProperty('--pride-primary', '#ef4444');\n      document.documentElement.style.setProperty('--pride-secondary', '#3b82f6');\n      document.documentElement.classList.add('pride-theme-active');\n      \n      // Show pride notification\n      window.dispatchEvent(new CustomEvent('show-notification', {\n        detail: {\n          title: 'Pride Theme Activated!',\n          message: 'Celebrating diversity and inclusion 🏳️‍🌈',\n          type: 'success'\n        }\n      }));\n    } else {\n      localStorage.setItem('pride-theme-disabled', 'true');\n      localStorage.removeItem('pride-theme-enabled');\n      \n      // Remove pride theme colors\n      document.documentElement.style.removeProperty('--pride-primary');\n      document.documentElement.style.removeProperty('--pride-secondary');\n      document.documentElement.classList.remove('pride-theme-active');\n    }\n    \n    window.dispatchEvent(new CustomEvent('pride-theme-changed', { \n      detail: { enabled } \n    }));\n  };\n\n  useEffect(() => {\n    const handleStorageChange = () => {\n      const userDisabled = localStorage.getItem('pride-theme-disabled') === 'true';\n      if (userDisabled) {\n        setIsEnabled(false);\n      } else {\n        const currentMonth = new Date().getMonth();\n        setIsEnabled(currentMonth === 5);\n      }\n    };\n\n    window.addEventListener('storage', handleStorageChange);\n    return () => window.removeEventListener('storage', handleStorageChange);\n  }, []);\n\n  return { isEnabled, togglePrideTheme, setPrideTheme };\n};","size_bytes":7093},"client/src/components/ShutdownConsole.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { playSounds } from '@/lib/soundManager';\n\ninterface ShutdownConsoleProps {\n  onComplete: () => void;\n  shutdownType: 'shutdown' | 'restart' | 'logout';\n}\n\nexport const ShutdownConsole: FC<ShutdownConsoleProps> = ({ onComplete, shutdownType }) => {\n  const [messages, setMessages] = useState<string[]>([]);\n  const [isComplete, setIsComplete] = useState(false);\n\n  useEffect(() => {\n    // Play initial shutdown sound\n    playSounds.shutdown();\n\n    const shutdownMessages = [\n      'Stopping user processes...',\n      'Unmounting file systems...',\n      'Stopping network services...',\n      'Stopping system services...',\n      'Saving system state...',\n      'Stopping database services...',\n      'Stopping web server...',\n      'Stopping background processes...',\n      'Syncing file system...',\n      'Unmounting /home partition...',\n      'Unmounting /var partition...',\n      'Unmounting /tmp partition...',\n      'Stopping kernel modules...',\n      shutdownType === 'restart' ? 'System restart initiated...' : \n      shutdownType === 'logout' ? 'User session terminated...' : 'System halt initiated...'\n    ];\n\n    let currentIndex = 0;\n    \n    const addMessage = () => {\n      if (currentIndex < shutdownMessages.length) {\n        setMessages(prev => [...prev, shutdownMessages[currentIndex]]);\n        // Play console beep for each message\n        playSounds.console();\n        currentIndex++;\n        setTimeout(addMessage, Math.random() * 800 + 400);\n      } else {\n        setTimeout(() => {\n          setIsComplete(true);\n          setTimeout(onComplete, 2000);\n        }, 1000);\n      }\n    };\n\n    setTimeout(addMessage, 500);\n  }, [onComplete, shutdownType]);\n\n  return (\n    <div className=\"h-screen bg-black text-green-400 font-mono p-8 overflow-hidden\">\n      <div className=\"mb-4\">\n        <div className=\"text-xl mb-2\">WebOS System {shutdownType === 'restart' ? 'Restart' : shutdownType === 'logout' ? 'Logout' : 'Shutdown'}</div>\n        <div className=\"text-sm text-gray-500 mb-4\">\n          {new Date().toLocaleString()}\n        </div>\n      </div>\n\n      <div className=\"space-y-1\">\n        {messages.map((message, index) => (\n          <div key={index} className=\"flex items-center\">\n            <span className=\"text-blue-400 mr-2\">[OK]</span>\n            <span>{message}</span>\n          </div>\n        ))}\n      </div>\n\n      {isComplete && (\n        <div className=\"mt-8 text-center\">\n          <div className=\"text-2xl mb-4\">\n            {shutdownType === 'restart' ? '🔄 Restarting...' : \n             shutdownType === 'logout' ? '👋 Logging out...' : '⏻ Shutting down...'}\n          </div>\n          <div className=\"text-sm text-gray-400\">\n            {shutdownType === 'restart' ? 'System will restart shortly' : \n             shutdownType === 'logout' ? 'Returning to login screen' : 'System halted'}\n          </div>\n        </div>\n      )}\n\n      {!isComplete && (\n        <div className=\"mt-4\">\n          <div className=\"animate-pulse\">_</div>\n        </div>\n      )}\n    </div>\n  );\n};","size_bytes":3089},"client/src/components/ShutdownScreen.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Power, RotateCcw, LogOut, Moon, RefreshCw } from 'lucide-react';\n\ninterface ShutdownScreenProps {\n  onRestart: () => void;\n  onLogout: () => void;\n  onCancel: () => void;\n  onShutdown: () => void;\n  onFactoryReset?: () => void;\n}\n\nexport const ShutdownScreen: FC<ShutdownScreenProps> = ({ onRestart, onLogout, onCancel, onShutdown, onFactoryReset }) => {\n  const [isShuttingDown, setIsShuttingDown] = useState(false);\n  const [countdown, setCountdown] = useState(0);\n  const [showFactoryResetConfirm, setShowFactoryResetConfirm] = useState(false);\n\n  const handleShutdown = () => {\n    setIsShuttingDown(true);\n    setCountdown(5);\n  };\n\n  const handleFactoryReset = () => {\n    if (!onFactoryReset) return;\n    \n    // Perform factory reset - clear all user data except default apps\n    const keysToKeep = [\n      'archInstalled', // Keep installation state\n      'webos-setup-complete' // Keep setup completion\n    ];\n    \n    // Get all localStorage keys\n    const allKeys = Object.keys(localStorage);\n    \n    // Remove all keys except the ones we want to keep\n    allKeys.forEach(key => {\n      if (!keysToKeep.includes(key)) {\n        localStorage.removeItem(key);\n      }\n    });\n    \n    onFactoryReset();\n  };\n\n  useEffect(() => {\n    if (countdown > 0) {\n      const timer = setTimeout(() => {\n        setCountdown(countdown - 1);\n      }, 1000);\n      \n      return () => clearTimeout(timer);\n    } else if (isShuttingDown && countdown === 0) {\n      // Simulate shutdown by showing a black screen and clearing all data\n      document.body.innerHTML = '<div style=\"background: black; width: 100vw; height: 100vh; color: white; display: flex; align-items: center; justify-content: center; font-family: monospace;\">System Halted</div>';\n    }\n  }, [countdown, isShuttingDown]);\n\n  if (isShuttingDown) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-black text-white\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-red-900/50 flex items-center justify-center\">\n            <Power className=\"w-8 h-8 text-red-400\" />\n          </div>\n          <h1 className=\"text-2xl font-bold mb-2\">Shutting Down...</h1>\n          <p className=\"text-gray-400 mb-4\">System will halt in {countdown} seconds</p>\n          <div className=\"w-48 h-2 bg-gray-800 rounded-full mx-auto\">\n            <div \n              className=\"h-full bg-red-500 rounded-full transition-all duration-1000\"\n              style={{ width: `${((5 - countdown) / 5) * 100}%` }}\n            />\n          </div>\n          <Button\n            variant=\"ghost\"\n            onClick={() => {\n              setIsShuttingDown(false);\n              setCountdown(0);\n            }}\n            className=\"mt-4 text-gray-400 hover:text-white\"\n          >\n            Cancel Shutdown\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900\">\n      {/* Background pattern */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n          <defs>\n            <pattern id=\"shutdownGrid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n              <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"rgba(115, 176, 219, 0.3)\" strokeWidth=\"0.5\"/>\n            </pattern>\n          </defs>\n          <rect width=\"100%\" height=\"100%\" fill=\"url(#shutdownGrid)\" />\n        </svg>\n      </div>\n\n      {/* Arch logo background */}\n      <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\">\n        <svg width=\"600\" height=\"600\" viewBox=\"0 0 64 64\" className=\"text-white\">\n          <path fill=\"currentColor\" d=\"M32 2L4 62h56L32 2zm0 8.5L54.2 58H9.8L32 10.5z\"/>\n        </svg>\n      </div>\n\n      {/* Shutdown options card */}\n      <Card className=\"w-full max-w-md p-8 bg-background/95 backdrop-blur-sm border-border/50 shadow-2xl\">\n        <div className=\"text-center mb-8\">\n          <div className=\"w-16 h-16 mx-auto mb-4 rounded-full bg-destructive/10 flex items-center justify-center\">\n            <Power className=\"w-8 h-8 text-destructive\" />\n          </div>\n          <h1 className=\"text-2xl font-bold text-foreground\">System Options</h1>\n          <p className=\"text-muted-foreground\">Choose an action to perform</p>\n        </div>\n\n        <div className=\"space-y-4\">\n          <Button\n            onClick={onShutdown}\n            variant=\"destructive\"\n            className=\"w-full h-14 text-lg\"\n          >\n            <Power className=\"w-5 h-5 mr-3\" />\n            Shutdown\n          </Button>\n\n          <Button\n            onClick={onRestart}\n            variant=\"outline\"\n            className=\"w-full h-14 text-lg\"\n          >\n            <RotateCcw className=\"w-5 h-5 mr-3\" />\n            Restart\n          </Button>\n\n          <Button\n            onClick={onLogout}\n            variant=\"outline\"\n            className=\"w-full h-14 text-lg\"\n          >\n            <LogOut className=\"w-5 h-5 mr-3\" />\n            Log Out\n          </Button>\n\n          <Button\n            onClick={() => {\n              // Simulate sleep mode\n              const sleepOverlay = document.createElement('div');\n              sleepOverlay.style.cssText = `\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100vw;\n                height: 100vh;\n                background: black;\n                z-index: 9999;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-family: monospace;\n                cursor: pointer;\n              `;\n              sleepOverlay.innerHTML = '<div><div style=\"text-align: center;\"><div style=\"font-size: 2rem; margin-bottom: 1rem;\">💤</div><div>System Sleeping</div><div style=\"font-size: 0.8rem; margin-top: 1rem; opacity: 0.7;\">Click anywhere to wake</div></div></div>';\n              \n              sleepOverlay.onclick = () => {\n                document.body.removeChild(sleepOverlay);\n              };\n              \n              document.body.appendChild(sleepOverlay);\n            }}\n            variant=\"outline\"\n            className=\"w-full h-14 text-lg\"\n          >\n            <Moon className=\"w-5 h-5 mr-3\" />\n            Sleep\n          </Button>\n\n          {onFactoryReset && !showFactoryResetConfirm && (\n            <Button\n              onClick={() => setShowFactoryResetConfirm(true)}\n              variant=\"outline\"\n              className=\"w-full h-14 text-lg border-orange-300 text-orange-600 hover:bg-orange-50\"\n            >\n              <RefreshCw className=\"w-5 h-5 mr-3\" />\n              Factory Reset\n            </Button>\n          )}\n\n          {showFactoryResetConfirm && (\n            <div className=\"space-y-2 p-4 border border-orange-300 rounded-lg bg-orange-50\">\n              <h3 className=\"font-semibold text-orange-800\">Factory Reset Warning</h3>\n              <p className=\"text-sm text-orange-700\">\n                This will delete all user data, installed apps, achievements, and settings. \n                Only default system apps will remain. This action cannot be undone.\n              </p>\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={handleFactoryReset}\n                  variant=\"destructive\"\n                  className=\"flex-1\"\n                >\n                  Confirm Reset\n                </Button>\n                <Button\n                  onClick={() => setShowFactoryResetConfirm(false)}\n                  variant=\"outline\"\n                  className=\"flex-1\"\n                >\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"mt-8 pt-4 border-t\">\n          <Button\n            onClick={onCancel}\n            variant=\"ghost\"\n            className=\"w-full\"\n          >\n            Cancel\n          </Button>\n        </div>\n      </Card>\n    </div>\n  );\n};","size_bytes":8301},"client/src/components/TourGuide.tsx":{"content":"import { FC, useState, useEffect, useRef } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { X, ArrowRight, ArrowLeft, SkipForward, RotateCcw, HelpCircle } from 'lucide-react';\n\ninterface TourStep {\n  id: string;\n  title: string;\n  description: string;\n  target: string; // CSS selector or element ID\n  position: 'top' | 'bottom' | 'left' | 'right' | 'center';\n  action?: 'click' | 'hover' | 'none';\n  waitForElement?: boolean;\n  optional?: boolean;\n}\n\ninterface TourGuideProps {\n  isActive: boolean;\n  onComplete: () => void;\n  onSkip: () => void;\n  tourType?: 'welcome' | 'features' | 'advanced';\n}\n\nconst WELCOME_TOUR: TourStep[] = [\n  {\n    id: 'welcome',\n    title: 'Welcome to WebOS!',\n    description: 'Let\\'s take a quick tour to help you get started with the desktop environment.',\n    target: 'body',\n    position: 'center'\n  },\n  {\n    id: 'desktop',\n    title: 'Desktop Area',\n    description: 'This is your desktop where application icons are displayed. You can drag icons to rearrange them.',\n    target: '.desktop-area',\n    position: 'center'\n  },\n  {\n    id: 'app-icons',\n    title: 'Application Icons',\n    description: 'Double-click any application icon to launch it. Right-click for additional options.',\n    target: '[data-app-id=\"terminal\"]',\n    position: 'bottom',\n    action: 'hover'\n  },\n  {\n    id: 'taskbar',\n    title: 'Taskbar',\n    description: 'The taskbar shows running applications and system information. Click the start menu to access more apps.',\n    target: '.taskbar',\n    position: 'top'\n  },\n  {\n    id: 'start-menu',\n    title: 'Start Menu',\n    description: 'Click here to access the start menu with quick actions and system options.',\n    target: '#start-button',\n    position: 'top',\n    action: 'click'\n  },\n  {\n    id: 'quick-launch',\n    title: 'Quick Launch',\n    description: 'Press Ctrl+Space anywhere to quickly search and launch applications.',\n    target: 'body',\n    position: 'center'\n  },\n  {\n    id: 'workspace-switcher',\n    title: 'Workspace Switcher',\n    description: 'Use the workspace indicator to switch between different desktops for better organization.',\n    target: '.workspace-indicator',\n    position: 'left'\n  }\n];\n\nconst FEATURES_TOUR: TourStep[] = [\n  {\n    id: 'package-manager',\n    title: 'Package Manager',\n    description: 'Install new applications and manage existing ones through the package manager.',\n    target: '[data-app-id=\"package-manager\"]',\n    position: 'bottom'\n  },\n  {\n    id: 'file-manager',\n    title: 'File Manager',\n    description: 'Browse and manage files and folders in your system.',\n    target: '[data-app-id=\"file-manager\"]',\n    position: 'bottom'\n  },\n  {\n    id: 'terminal',\n    title: 'Terminal',\n    description: 'Access the command line interface for advanced system operations.',\n    target: '[data-app-id=\"terminal\"]',\n    position: 'bottom'\n  },\n  {\n    id: 'browser',\n    title: 'Web Browser',\n    description: 'Browse the internet with the built-in web browser that can access real websites.',\n    target: '[data-app-id=\"browser\"]',\n    position: 'bottom'\n  },\n  {\n    id: 'achievements',\n    title: 'Achievements System',\n    description: 'Track your progress and unlock achievements as you use the system.',\n    target: '[data-app-id=\"achievements\"]',\n    position: 'bottom'\n  },\n  {\n    id: 'folder-organization',\n    title: 'Folder Organization',\n    description: 'Click the organize button to create folders and organize your desktop apps.',\n    target: '.organize-button',\n    position: 'left'\n  }\n];\n\nexport const TourGuide: FC<TourGuideProps> = ({ \n  isActive, \n  onComplete, \n  onSkip, \n  tourType = 'welcome' \n}) => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [isVisible, setIsVisible] = useState(false);\n  const [highlightPosition, setHighlightPosition] = useState({ x: 0, y: 0, width: 0, height: 0 });\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n  const overlayRef = useRef<HTMLDivElement>(null);\n  const tooltipRef = useRef<HTMLDivElement>(null);\n\n  const tours = {\n    welcome: WELCOME_TOUR,\n    features: FEATURES_TOUR,\n    advanced: [...WELCOME_TOUR, ...FEATURES_TOUR]\n  };\n\n  const currentTour = tours[tourType];\n  const step = currentTour[currentStep];\n\n  useEffect(() => {\n    if (isActive) {\n      setIsVisible(true);\n      setCurrentStep(0);\n      updateHighlight();\n    } else {\n      setIsVisible(false);\n    }\n  }, [isActive]);\n\n  useEffect(() => {\n    if (isVisible && step) {\n      updateHighlight();\n    }\n  }, [currentStep, isVisible, step]);\n\n  const updateHighlight = () => {\n    if (!step) return;\n\n    const targetElement = document.querySelector(step.target) as HTMLElement;\n    if (!targetElement) {\n      // If target not found, center the tooltip\n      setHighlightPosition({ x: 0, y: 0, width: 0, height: 0 });\n      setTooltipPosition({ \n        x: window.innerWidth / 2 - 200, \n        y: window.innerHeight / 2 - 100 \n      });\n      return;\n    }\n\n    const rect = targetElement.getBoundingClientRect();\n    setHighlightPosition({\n      x: rect.left,\n      y: rect.top,\n      width: rect.width,\n      height: rect.height\n    });\n\n    // Calculate tooltip position based on step position preference\n    let tooltipX = 0;\n    let tooltipY = 0;\n\n    switch (step.position) {\n      case 'top':\n        tooltipX = rect.left + rect.width / 2 - 200;\n        tooltipY = rect.top - 120;\n        break;\n      case 'bottom':\n        tooltipX = rect.left + rect.width / 2 - 200;\n        tooltipY = rect.bottom + 20;\n        break;\n      case 'left':\n        tooltipX = rect.left - 420;\n        tooltipY = rect.top + rect.height / 2 - 60;\n        break;\n      case 'right':\n        tooltipX = rect.right + 20;\n        tooltipY = rect.top + rect.height / 2 - 60;\n        break;\n      case 'center':\n      default:\n        tooltipX = window.innerWidth / 2 - 200;\n        tooltipY = window.innerHeight / 2 - 100;\n        break;\n    }\n\n    // Ensure tooltip stays within viewport\n    tooltipX = Math.max(20, Math.min(tooltipX, window.innerWidth - 420));\n    tooltipY = Math.max(20, Math.min(tooltipY, window.innerHeight - 200));\n\n    setTooltipPosition({ x: tooltipX, y: tooltipY });\n  };\n\n  const handleNext = () => {\n    if (currentStep < currentTour.length - 1) {\n      setCurrentStep(currentStep + 1);\n    } else {\n      handleComplete();\n    }\n  };\n\n  const handlePrevious = () => {\n    if (currentStep > 0) {\n      setCurrentStep(currentStep - 1);\n    }\n  };\n\n  const handleComplete = () => {\n    setIsVisible(false);\n    onComplete();\n    \n    // Mark tour as completed\n    localStorage.setItem(`webos-tour-${tourType}-completed`, 'true');\n  };\n\n  const handleSkip = () => {\n    setIsVisible(false);\n    onSkip();\n  };\n\n  const handleRestart = () => {\n    setCurrentStep(0);\n    updateHighlight();\n  };\n\n  const handleStepClick = (stepIndex: number) => {\n    setCurrentStep(stepIndex);\n  };\n\n  if (!isVisible || !step) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 pointer-events-none\">\n      {/* Overlay with highlight cutout */}\n      <div \n        ref={overlayRef}\n        className=\"absolute inset-0 bg-black/50 pointer-events-auto\"\n        style={{\n          clipPath: highlightPosition.width > 0 \n            ? `polygon(0% 0%, 0% 100%, ${highlightPosition.x}px 100%, ${highlightPosition.x}px ${highlightPosition.y}px, ${highlightPosition.x + highlightPosition.width}px ${highlightPosition.y}px, ${highlightPosition.x + highlightPosition.width}px ${highlightPosition.y + highlightPosition.height}px, ${highlightPosition.x}px ${highlightPosition.y + highlightPosition.height}px, ${highlightPosition.x}px 100%, 100% 100%, 100% 0%)`\n            : 'none'\n        }}\n      />\n\n      {/* Highlight border */}\n      {highlightPosition.width > 0 && (\n        <div\n          className=\"absolute border-2 border-primary rounded pointer-events-none animate-pulse\"\n          style={{\n            left: highlightPosition.x - 2,\n            top: highlightPosition.y - 2,\n            width: highlightPosition.width + 4,\n            height: highlightPosition.height + 4\n          }}\n        />\n      )}\n\n      {/* Tooltip */}\n      <Card\n        ref={tooltipRef}\n        className=\"absolute w-96 p-6 pointer-events-auto shadow-2xl border-primary/20\"\n        style={{\n          left: tooltipPosition.x,\n          top: tooltipPosition.y\n        }}\n      >\n        <div className=\"flex items-start justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Badge variant=\"secondary\" className=\"text-xs\">\n              {currentStep + 1} of {currentTour.length}\n            </Badge>\n            <Badge variant=\"outline\" className=\"text-xs capitalize\">\n              {tourType} Tour\n            </Badge>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleSkip}\n            className=\"h-6 w-6 p-0\"\n          >\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        <h3 className=\"text-lg font-semibold mb-2\">{step.title}</h3>\n        <p className=\"text-muted-foreground mb-4 text-sm leading-relaxed\">\n          {step.description}\n        </p>\n\n        {/* Progress indicators */}\n        <div className=\"flex gap-1 mb-4\">\n          {currentTour.map((_, index) => (\n            <button\n              key={index}\n              onClick={() => handleStepClick(index)}\n              className={`h-2 rounded-full transition-all ${\n                index === currentStep \n                  ? 'bg-primary w-6' \n                  : index < currentStep \n                    ? 'bg-primary/60 w-2' \n                    : 'bg-muted w-2'\n              }`}\n            />\n          ))}\n        </div>\n\n        {/* Navigation buttons */}\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handlePrevious}\n              disabled={currentStep === 0}\n            >\n              <ArrowLeft className=\"w-4 h-4 mr-1\" />\n              Previous\n            </Button>\n            \n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={handleRestart}\n            >\n              <RotateCcw className=\"w-4 h-4 mr-1\" />\n              Restart\n            </Button>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={handleSkip}\n            >\n              <SkipForward className=\"w-4 h-4 mr-1\" />\n              Skip Tour\n            </Button>\n            \n            <Button\n              onClick={handleNext}\n              size=\"sm\"\n            >\n              {currentStep === currentTour.length - 1 ? 'Complete' : 'Next'}\n              <ArrowRight className=\"w-4 h-4 ml-1\" />\n            </Button>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n};","size_bytes":11058},"client/src/components/WebOSMakerRecovery.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { \n  AlertTriangle, \n  Wrench, \n  HardDrive, \n  Download,\n  RefreshCw,\n  Terminal,\n  Shield,\n  Zap\n} from 'lucide-react';\n\nexport const WebOSMakerRecovery: FC = () => {\n  const [currentStep, setCurrentStep] = useState(0);\n  const [progress, setProgress] = useState(0);\n  const [isRecovering, setIsRecovering] = useState(false);\n\n  const recoverySteps = [\n    'Initializing WebOS Maker Recovery Environment',\n    'Scanning for corrupted system files',\n    'Attempting automatic repair',\n    'Recovery process failed - manual intervention required',\n    'Contact WebOS Support for advanced recovery options'\n  ];\n\n  useEffect(() => {\n    if (isRecovering) {\n      const interval = setInterval(() => {\n        setProgress(prev => {\n          if (prev >= 100) {\n            clearInterval(interval);\n            setCurrentStep(prev => Math.min(prev + 1, recoverySteps.length - 1));\n            return 0;\n          }\n          return prev + 2;\n        });\n      }, 100);\n\n      return () => clearInterval(interval);\n    }\n  }, [isRecovering, currentStep]);\n\n  const startRecovery = () => {\n    setIsRecovering(true);\n    setCurrentStep(0);\n    setProgress(0);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-red-900 via-red-800 to-black text-white flex flex-col items-center justify-center p-8\">\n      <div className=\"max-w-2xl w-full text-center space-y-8\">\n        {/* Header */}\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center justify-center space-x-4\">\n            <Wrench className=\"w-16 h-16 text-red-400\" />\n            <AlertTriangle className=\"w-20 h-20 text-yellow-400 animate-pulse\" />\n            <Wrench className=\"w-16 h-16 text-red-400\" />\n          </div>\n          <h1 className=\"text-5xl font-bold\">WebOS Maker Recovery</h1>\n          <p className=\"text-xl text-red-200\">Critical System Failure Detected</p>\n        </div>\n\n        {/* Error Information */}\n        <div className=\"bg-red-800/50 border border-red-600 rounded-lg p-6 text-left\">\n          <h2 className=\"text-2xl font-bold mb-4 flex items-center\">\n            <Shield className=\"w-6 h-6 mr-2\" />\n            System WOS Corruption Detected\n          </h2>\n          <div className=\"space-y-2 text-red-100\">\n            <p>• Critical system files have been deleted or corrupted</p>\n            <p>• Windows manager service has stopped responding</p>\n            <p>• Desktop environment cannot be loaded</p>\n            <p>• System integrity has been compromised</p>\n          </div>\n        </div>\n\n        {/* Recovery Status */}\n        <div className=\"bg-black/50 border border-gray-600 rounded-lg p-6\">\n          <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n            <HardDrive className=\"w-5 h-5 mr-2\" />\n            Recovery Status\n          </h3>\n          \n          {!isRecovering ? (\n            <div className=\"space-y-4\">\n              <p className=\"text-gray-300\">\n                WebOS Maker will attempt to repair your system automatically.\n                This process may take several minutes.\n              </p>\n              <Button \n                onClick={startRecovery}\n                className=\"w-full bg-blue-600 hover:bg-blue-700\"\n                size=\"lg\"\n              >\n                <RefreshCw className=\"w-5 h-5 mr-2\" />\n                Start System Recovery\n              </Button>\n            </div>\n          ) : (\n            <div className=\"space-y-4\">\n              <div className=\"text-left\">\n                <p className=\"font-medium mb-2\">{recoverySteps[currentStep]}</p>\n                <Progress value={progress} className=\"w-full\" />\n                <p className=\"text-sm text-gray-400 mt-1\">{progress}% complete</p>\n              </div>\n              \n              {currentStep >= 3 && (\n                <div className=\"bg-red-900/50 border border-red-600 rounded p-4 text-left\">\n                  <h4 className=\"font-bold text-red-200 mb-2\">Recovery Failed</h4>\n                  <p className=\"text-red-100 text-sm\">\n                    Automatic recovery could not restore System WOS. \n                    The damage is too severe for automated repair.\n                  </p>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* Manual Recovery Options */}\n        {currentStep >= 4 && (\n          <div className=\"bg-gray-900/50 border border-gray-600 rounded-lg p-6 text-left\">\n            <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n              <Terminal className=\"w-5 h-5 mr-2\" />\n              Manual Recovery Options\n            </h3>\n            <div className=\"space-y-3 text-gray-300\">\n              <p>• <strong>Complete System Reinstall:</strong> This will erase all data and restore WebOS to factory settings</p>\n              <p>• <strong>Professional Recovery Service:</strong> Contact WebOS Support for advanced data recovery</p>\n              <p>• <strong>System Backup Restore:</strong> Restore from a previous system backup (if available)</p>\n            </div>\n            \n            <div className=\"mt-6 space-y-3\">\n              <Button variant=\"destructive\" className=\"w-full\" size=\"lg\">\n                <Download className=\"w-5 h-5 mr-2\" />\n                Download WebOS Recovery USB Tool\n              </Button>\n              <Button variant=\"outline\" className=\"w-full\" size=\"lg\">\n                <Zap className=\"w-5 h-5 mr-2\" />\n                Contact WebOS Support\n              </Button>\n            </div>\n          </div>\n        )}\n\n        {/* Warning */}\n        <div className=\"bg-yellow-900/30 border border-yellow-600 rounded-lg p-4\">\n          <p className=\"text-yellow-200 text-sm\">\n            <strong>Warning:</strong> Do not power off your computer during recovery. \n            This may cause permanent data loss and hardware damage.\n          </p>\n        </div>\n\n        {/* Footer */}\n        <div className=\"text-gray-400 text-sm space-y-1\">\n          <p>WebOS Maker Recovery Environment v3.0</p>\n          <p>Build 22000.1.2024.0115.recovery</p>\n          <p>If you can see this message, your hardware is functioning correctly.</p>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":6364},"client/src/components/WebOSMascot.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { motion, useAnimation } from 'framer-motion';\n\ninterface WebOSMascotProps {\n  isVisible?: boolean;\n}\n\nexport const WebOSMascot: FC<WebOSMascotProps> = ({ isVisible = true }) => {\n  const [position, setPosition] = useState({ x: 10, y: 10 });\n  const [isDragging, setIsDragging] = useState(false);\n  const [clickCount, setClickCount] = useState(0);\n  const [isAngry, setIsAngry] = useState(false);\n  const [showGun, setShowGun] = useState(false);\n  const controls = useAnimation();\n  const lastClickTime = useRef(0);\n\n  useEffect(() => {\n    // Spinning animation when not being dragged\n    if (!isDragging && isVisible) {\n      controls.start({\n        rotate: 360,\n        transition: {\n          duration: 4,\n          ease: \"linear\",\n          repeat: Infinity\n        }\n      });\n    } else {\n      controls.stop();\n    }\n  }, [isDragging, isVisible, controls]);\n\n  const handleClick = () => {\n    const now = Date.now();\n    \n    // Reset click count if more than 3 seconds between clicks\n    if (now - lastClickTime.current > 3000) {\n      setClickCount(1);\n    } else {\n      setClickCount(prev => prev + 1);\n    }\n    \n    lastClickTime.current = now;\n\n    // Show gun after 10 rapid clicks\n    if (clickCount >= 9) {\n      setIsAngry(true);\n      setShowGun(true);\n      \n      // Hide gun after 3 seconds\n      setTimeout(() => {\n        setShowGun(false);\n        setIsAngry(false);\n        setClickCount(0);\n      }, 3000);\n    } else if (clickCount >= 5) {\n      setIsAngry(true);\n      // Shake animation when getting annoyed\n      controls.start({\n        x: [0, -5, 5, -5, 5, 0],\n        transition: { duration: 0.5 }\n      });\n    }\n  };\n\n  const handleDragStart = () => {\n    setIsDragging(true);\n    controls.stop();\n  };\n\n  const handleDragEnd = (event: any, info: any) => {\n    setIsDragging(false);\n    const newX = Math.max(0, Math.min(100, position.x + (info.offset.x / window.innerWidth) * 100));\n    const newY = Math.max(0, Math.min(100, position.y + (info.offset.y / window.innerHeight) * 100));\n    setPosition({ x: newX, y: newY });\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <motion.div\n      className=\"fixed z-50 cursor-pointer select-none\"\n      style={{\n        left: `${position.x}%`,\n        top: `${position.y}%`,\n        transform: 'translate(-50%, -50%)'\n      }}\n      animate={controls}\n      drag\n      dragMomentum={false}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n      onClick={handleClick}\n      whileHover={{ scale: 1.1 }}\n      whileTap={{ scale: 0.95 }}\n    >\n      <div className=\"relative\">\n        {/* Main mascot body */}\n        <div \n          className={`w-16 h-16 rounded-full border-4 border-blue-400 bg-gradient-to-br from-blue-500 to-purple-600 shadow-lg transition-all duration-300 ${\n            isAngry ? 'border-red-400 from-red-500 to-orange-600' : ''\n          }`}\n        >\n          {/* Eyes */}\n          <div className=\"flex justify-center items-center h-full\">\n            <div className=\"flex space-x-2\">\n              <div \n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\n                  isAngry ? 'bg-red-300' : 'bg-white'\n                }`} \n              />\n              <div \n                className={`w-2 h-2 rounded-full transition-all duration-300 ${\n                  isAngry ? 'bg-red-300' : 'bg-white'\n                }`} \n              />\n            </div>\n          </div>\n          \n          {/* Mouth */}\n          <div className=\"absolute bottom-2 left-1/2 transform -translate-x-1/2\">\n            {isAngry ? (\n              <div className=\"w-3 h-1 bg-red-300 rounded-full transform rotate-180\" />\n            ) : (\n              <div className=\"w-3 h-1 bg-white rounded-full\" />\n            )}\n          </div>\n        </div>\n\n        {/* WebOS logo overlay */}\n        <div className=\"absolute inset-0 flex items-center justify-center\">\n          <svg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" className=\"opacity-70\">\n            <path\n              d=\"M12 2L2 7L12 12L22 7L12 2Z\"\n              stroke=\"white\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M2 17L12 22L22 17\"\n              stroke=\"white\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n            <path\n              d=\"M2 12L12 17L22 12\"\n              stroke=\"white\"\n              strokeWidth=\"2\"\n              strokeLinecap=\"round\"\n              strokeLinejoin=\"round\"\n            />\n          </svg>\n        </div>\n\n        {/* Fake gun when angry */}\n        {showGun && (\n          <motion.div\n            className=\"absolute -right-8 top-1/2 transform -translate-y-1/2\"\n            initial={{ opacity: 0, scale: 0 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0 }}\n          >\n            <div className=\"w-6 h-3 bg-gray-700 rounded-sm relative\">\n              <div className=\"w-2 h-1 bg-gray-800 rounded-full absolute right-0 top-1/2 transform translate-x-full -translate-y-1/2\" />\n              <div className=\"w-1 h-4 bg-gray-600 absolute -bottom-1 left-1\" />\n            </div>\n          </motion.div>\n        )}\n\n        {/* Click counter display when getting annoyed */}\n        {clickCount >= 3 && clickCount < 10 && (\n          <motion.div\n            className=\"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-red-500 text-white text-xs px-2 py-1 rounded\"\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n          >\n            Stop it! ({clickCount}/10)\n          </motion.div>\n        )}\n\n        {/* Angry message */}\n        {showGun && (\n          <motion.div\n            className=\"absolute -top-12 left-1/2 transform -translate-x-1/2 bg-red-600 text-white text-xs px-3 py-2 rounded whitespace-nowrap\"\n            initial={{ opacity: 0, scale: 0 }}\n            animate={{ opacity: 1, scale: 1 }}\n          >\n            That's enough! 🔫\n          </motion.div>\n        )}\n\n        {/* Spinning trail effect */}\n        {!isDragging && (\n          <div className=\"absolute inset-0 rounded-full border-2 border-blue-300 opacity-30 animate-ping\" />\n        )}\n      </div>\n    </motion.div>\n  );\n};","size_bytes":6396},"client/src/components/WelcomeDialog.tsx":{"content":"import { FC, useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Checkbox } from '@/components/ui/checkbox';\n\ninterface WelcomeDialogProps {\n  isOpen: boolean;\n  onComplete: (userInfo: UserSetupInfo) => void;\n}\n\ninterface UserSetupInfo {\n  username: string;\n  theme: string;\n  wallpaper: string;\n  showTutorial: boolean;\n}\n\nexport const WelcomeDialog: FC<WelcomeDialogProps> = ({ isOpen, onComplete }) => {\n  const [step, setStep] = useState(0);\n  const [userInfo, setUserInfo] = useState<UserSetupInfo>({\n    username: 'user',\n    theme: 'dark',\n    wallpaper: 'default',\n    showTutorial: true\n  });\n\n  const steps = [\n    {\n      title: 'Welcome to WebOS!',\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4\">🎉</div>\n            <p className=\"text-lg text-muted-foreground\">\n              Installation completed successfully! WebOS is now ready to use.\n            </p>\n            <p className=\"text-sm text-muted-foreground mt-2\">\n              Let's set up your system preferences to get you started.\n            </p>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'User Setup',\n      content: (\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"username\">Choose a username</Label>\n            <Input\n              id=\"username\"\n              value={userInfo.username}\n              onChange={(e) => setUserInfo(prev => ({ ...prev, username: e.target.value }))}\n              placeholder=\"Enter your username\"\n              className=\"mt-1\"\n            />\n            <p className=\"text-xs text-muted-foreground mt-1\">\n              This will be displayed in the terminal and system\n            </p>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Appearance',\n      content: (\n        <div className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"theme\">Theme</Label>\n            <Select \n              value={userInfo.theme} \n              onValueChange={(value) => setUserInfo(prev => ({ ...prev, theme: value }))}\n            >\n              <SelectTrigger className=\"mt-1\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"dark\">Dark (Recommended)</SelectItem>\n                <SelectItem value=\"light\">Light</SelectItem>\n                <SelectItem value=\"auto\">Auto (System)</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div>\n            <Label htmlFor=\"wallpaper\">Wallpaper</Label>\n            <Select \n              value={userInfo.wallpaper} \n              onValueChange={(value) => setUserInfo(prev => ({ ...prev, wallpaper: value }))}\n            >\n              <SelectTrigger className=\"mt-1\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"default\">Arch Dark</SelectItem>\n                <SelectItem value=\"terminal\">Terminal Green</SelectItem>\n                <SelectItem value=\"code\">Code Blue</SelectItem>\n                <SelectItem value=\"matrix\">Matrix Black</SelectItem>\n                <SelectItem value=\"cyber\">Cyber Purple</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n      )\n    },\n    {\n      title: 'Getting Started',\n      content: (\n        <div className=\"space-y-4\">\n          <div className=\"flex items-center space-x-2\">\n            <Checkbox\n              id=\"tutorial\"\n              checked={userInfo.showTutorial}\n              onCheckedChange={(checked) => setUserInfo(prev => ({ ...prev, showTutorial: !!checked }))}\n            />\n            <Label htmlFor=\"tutorial\">Show tutorial on first launch</Label>\n          </div>\n          \n          <div className=\"bg-muted p-4 rounded-lg\">\n            <h4 className=\"font-medium mb-2\">Quick Tips:</h4>\n            <ul className=\"text-sm space-y-1 text-muted-foreground\">\n              <li>• Double-click desktop icons to open applications</li>\n              <li>• Use the start menu for quick access to all apps</li>\n              <li>• Terminal supports many Linux commands</li>\n              <li>• Package manager lets you install new software</li>\n              <li>• Settings app allows customization</li>\n            </ul>\n          </div>\n        </div>\n      )\n    }\n  ];\n\n  const handleNext = () => {\n    if (step < steps.length - 1) {\n      setStep(step + 1);\n    } else {\n      handleComplete();\n    }\n  };\n\n  const handlePrevious = () => {\n    if (step > 0) {\n      setStep(step - 1);\n    }\n  };\n\n  const handleComplete = () => {\n    localStorage.setItem('webos-user-setup', JSON.stringify(userInfo));\n    localStorage.setItem('webos-setup-complete', 'true');\n    onComplete(userInfo);\n  };\n\n  return (\n    <Dialog open={isOpen}>\n      <DialogContent className=\"max-w-md\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center justify-between\">\n            {steps[step].title}\n            <span className=\"text-sm text-muted-foreground\">\n              {step + 1} of {steps.length}\n            </span>\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"py-4\">\n          {steps[step].content}\n        </div>\n        \n        <div className=\"flex justify-between\">\n          <Button\n            variant=\"outline\"\n            onClick={handlePrevious}\n            disabled={step === 0}\n          >\n            Previous\n          </Button>\n          \n          <Button onClick={handleNext}>\n            {step === steps.length - 1 ? 'Complete Setup' : 'Next'}\n          </Button>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","size_bytes":6056},"client/src/components/WorkspaceManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { WindowState } from '@/types/os';\n\ninterface WorkspaceManagerProps {\n  windows: WindowState[];\n  activeWorkspace: number;\n  onWorkspaceChange: (workspace: number) => void;\n}\n\nexport const WorkspaceManager: FC<WorkspaceManagerProps> = ({\n  windows,\n  activeWorkspace,\n  onWorkspaceChange\n}) => {\n  const [workspaces] = useState([1, 2, 3, 4, 5]);\n\n  const getWorkspaceWindows = (workspace: number) => {\n    return windows.filter(w => w.workspace === workspace && !w.minimized);\n  };\n\n  const handleWorkspaceClick = (workspace: number) => {\n    onWorkspaceChange(workspace);\n  };\n\n  // Keyboard shortcuts for workspace switching\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.altKey && e.key >= '1' && e.key <= '5') {\n        e.preventDefault();\n        const workspace = parseInt(e.key);\n        onWorkspaceChange(workspace);\n      }\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    return () => window.removeEventListener('keydown', handleKeyDown);\n  }, [onWorkspaceChange]);\n\n  return (\n    <div className=\"fixed bottom-16 left-1/2 transform -translate-x-1/2 z-50\">\n      <div className=\"bg-black/80 backdrop-blur-md rounded-lg px-4 py-2 border border-primary/30\">\n        <div className=\"flex space-x-2\">\n          {workspaces.map((workspace) => {\n            const windowCount = getWorkspaceWindows(workspace).length;\n            const isActive = workspace === activeWorkspace;\n            \n            return (\n              <button\n                key={workspace}\n                onClick={() => handleWorkspaceClick(workspace)}\n                className={`\n                  relative w-12 h-8 rounded-md transition-all duration-200 \n                  ${isActive \n                    ? 'bg-primary text-primary-foreground' \n                    : 'bg-muted/50 hover:bg-muted text-muted-foreground hover:text-foreground'\n                  }\n                `}\n              >\n                <span className=\"text-xs font-mono\">{workspace}</span>\n                {windowCount > 0 && (\n                  <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-cyan-400 rounded-full text-[8px] flex items-center justify-center text-black\">\n                    {windowCount}\n                  </div>\n                )}\n              </button>\n            );\n          })}\n        </div>\n        <div className=\"text-xs text-center text-muted-foreground mt-1 font-mono\">\n          Alt+{activeWorkspace}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":2552},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/hooks/useWindowManager.ts":{"content":"import { useState, useCallback, useRef } from 'react';\nimport { WindowState, OSSettings, DragState } from '@/types/os';\n\nexport function useWindowManager() {\n  const [windows, setWindows] = useState<Map<string, WindowState>>(new Map());\n  const [activeWindowId, setActiveWindowId] = useState<string | null>(null);\n  const [dragState, setDragState] = useState<DragState>({\n    isDragging: false,\n    windowId: null,\n    offset: { x: 0, y: 0 }\n  });\n  const [settings, setSettings] = useState<OSSettings>(() => {\n    const saved = localStorage.getItem('os-settings');\n    return saved ? JSON.parse(saved) : {\n      theme: 'light',\n      wallpaper: 'default',\n      showDesktopIcons: true\n    };\n  });\n\n  const zIndexRef = useRef(100);\n\n  const createWindow = useCallback((app: string, title: string, icon: string) => {\n    const windowId = `window-${Date.now()}`;\n    const existingWindows = Array.from(windows.values());\n    \n    // Calculate responsive window dimensions\n    const screenWidth = Math.max(globalThis.innerWidth || 1200, 800);\n    const screenHeight = Math.max(globalThis.innerHeight || 800, 600);\n    const taskbarHeight = 40;\n    const availableHeight = screenHeight - taskbarHeight;\n    \n    const defaultWidth = Math.min(800, screenWidth * 0.7);\n    const defaultHeight = Math.min(600, availableHeight * 0.7);\n    \n    let newWindow: WindowState;\n    \n    // Hyprland-style automatic tiling\n    const totalWindows = existingWindows.length + 1;\n    \n    if (totalWindows === 1) {\n      // Single window: take most of the screen\n      newWindow = {\n        id: windowId,\n        app,\n        title,\n        icon,\n        x: 50,\n        y: 50,\n        width: screenWidth - 100,\n        height: availableHeight - 100,\n        minimized: false,\n        maximized: false,\n        zIndex: ++zIndexRef.current,\n        workspace: 1\n      };\n    } else if (totalWindows === 2) {\n      // Two windows: split vertically\n      const width = (screenWidth - 60) / 2;\n      newWindow = {\n        id: windowId,\n        app,\n        title,\n        icon,\n        x: 20 + width + 20,\n        y: 50,\n        width: width,\n        height: availableHeight - 100,\n        minimized: false,\n        maximized: false,\n        zIndex: ++zIndexRef.current,\n        workspace: 1\n      };\n      \n      // Resize existing window\n      const firstWindow = existingWindows[0];\n      if (firstWindow) {\n        setWindows(prev => {\n          const updatedWindows = new Map(prev);\n          updatedWindows.set(firstWindow.id, {\n            ...firstWindow,\n            x: 20,\n            y: 50,\n            width: width,\n            height: availableHeight - 100\n          });\n          return updatedWindows;\n        });\n      }\n    } else if (totalWindows === 3) {\n      // Three windows: main window left, two stacked right\n      const mainWidth = (screenWidth - 60) * 0.6;\n      const rightWidth = (screenWidth - 60) * 0.4;\n      const rightHeight = (availableHeight - 120) / 2;\n      \n      newWindow = {\n        id: windowId,\n        app,\n        title,\n        icon,\n        x: 20 + mainWidth + 20,\n        y: 50 + rightHeight + 20,\n        width: rightWidth,\n        height: rightHeight,\n        minimized: false,\n        maximized: false,\n        zIndex: ++zIndexRef.current,\n        workspace: 1\n      };\n      \n      // Rearrange existing windows\n      existingWindows.forEach((window, index) => {\n        setWindows(prev => {\n          const updatedWindows = new Map(prev);\n          if (index === 0) {\n            updatedWindows.set(window.id, {\n              ...window,\n              x: 20,\n              y: 50,\n              width: mainWidth,\n              height: availableHeight - 100\n            });\n          } else {\n            updatedWindows.set(window.id, {\n              ...window,\n              x: 20 + mainWidth + 20,\n              y: 50,\n              width: rightWidth,\n              height: rightHeight\n            });\n          }\n          return updatedWindows;\n        });\n      });\n    } else {\n      // Four or more: grid layout\n      const cols = Math.ceil(Math.sqrt(totalWindows));\n      const rows = Math.ceil(totalWindows / cols);\n      const windowWidth = (screenWidth - 20 * (cols + 1)) / cols;\n      const windowHeight = (availableHeight - 20 * (rows + 1)) / rows;\n      \n      const newWindowIndex = totalWindows - 1;\n      const col = newWindowIndex % cols;\n      const row = Math.floor(newWindowIndex / cols);\n      \n      newWindow = {\n        id: windowId,\n        app,\n        title,\n        icon,\n        x: 20 + col * (windowWidth + 20),\n        y: 50 + row * (windowHeight + 20),\n        width: windowWidth,\n        height: windowHeight,\n        minimized: false,\n        maximized: false,\n        zIndex: ++zIndexRef.current,\n        workspace: 1\n      };\n      \n      // Rearrange all existing windows in grid\n      existingWindows.forEach((window, index) => {\n        const windowCol = index % cols;\n        const windowRow = Math.floor(index / cols);\n        \n        setWindows(prev => {\n          const updatedWindows = new Map(prev);\n          updatedWindows.set(window.id, {\n            ...window,\n            x: 20 + windowCol * (windowWidth + 20),\n            y: 50 + windowRow * (windowHeight + 20),\n            width: windowWidth,\n            height: windowHeight\n          });\n          return updatedWindows;\n        });\n      });\n    }\n\n    setWindows(prev => {\n      const newWindows = new Map(prev);\n      newWindows.set(windowId, newWindow);\n      return newWindows;\n    });\n    \n    setActiveWindowId(windowId);\n    return windowId;\n  }, [windows]);\n\n  const closeWindow = useCallback((windowId: string) => {\n    setWindows(prev => {\n      const currentWindows = new Map(prev);\n      currentWindows.delete(windowId);\n      \n      // Get remaining windows and rearrange them\n      const remainingWindows = Array.from(currentWindows.values());\n      const totalWindows = remainingWindows.length;\n      \n      if (totalWindows > 0) {\n        const screenWidth = Math.max(globalThis.innerWidth || 1200, 800);\n        const screenHeight = Math.max(globalThis.innerHeight || 800, 600);\n        const taskbarHeight = 40;\n        const availableHeight = screenHeight - taskbarHeight;\n        \n        // Rearrange remaining windows using the same tiling logic\n        remainingWindows.forEach((window, index) => {\n          let newProps: Partial<WindowState> = {};\n          \n          if (totalWindows === 1) {\n            // Single window: take most of the screen\n            newProps = {\n              x: 50,\n              y: 50,\n              width: screenWidth - 100,\n              height: availableHeight - 100\n            };\n          } else if (totalWindows === 2) {\n            // Two windows: split vertically\n            const width = (screenWidth - 60) / 2;\n            newProps = {\n              x: index === 0 ? 20 : 20 + width + 20,\n              y: 50,\n              width: width,\n              height: availableHeight - 100\n            };\n          } else if (totalWindows === 3) {\n            // Three windows: main window left, two stacked right\n            const mainWidth = (screenWidth - 60) * 0.6;\n            const rightWidth = (screenWidth - 60) * 0.4;\n            const rightHeight = (availableHeight - 120) / 2;\n            \n            if (index === 0) {\n              newProps = {\n                x: 20,\n                y: 50,\n                width: mainWidth,\n                height: availableHeight - 100\n              };\n            } else {\n              newProps = {\n                x: 20 + mainWidth + 20,\n                y: index === 1 ? 50 : 50 + rightHeight + 20,\n                width: rightWidth,\n                height: rightHeight\n              };\n            }\n          } else {\n            // Four or more: grid layout\n            const cols = Math.ceil(Math.sqrt(totalWindows));\n            const rows = Math.ceil(totalWindows / cols);\n            const windowWidth = (screenWidth - 20 * (cols + 1)) / cols;\n            const windowHeight = (availableHeight - 20 * (rows + 1)) / rows;\n            \n            const col = index % cols;\n            const row = Math.floor(index / cols);\n            \n            newProps = {\n              x: 20 + col * (windowWidth + 20),\n              y: 50 + row * (windowHeight + 20),\n              width: windowWidth,\n              height: windowHeight\n            };\n          }\n          \n          currentWindows.set(window.id, { ...window, ...newProps });\n        });\n      }\n      \n      return currentWindows;\n    });\n    \n    if (activeWindowId === windowId) {\n      setActiveWindowId(null);\n    }\n  }, [activeWindowId]);\n\n  const minimizeWindow = useCallback((windowId: string) => {\n    setWindows(prev => {\n      const newWindows = new Map(prev);\n      const window = newWindows.get(windowId);\n      if (window) {\n        newWindows.set(windowId, { ...window, minimized: !window.minimized });\n      }\n      return newWindows;\n    });\n    \n    if (activeWindowId === windowId) {\n      setActiveWindowId(null);\n    }\n  }, [activeWindowId]);\n\n  const maximizeWindow = useCallback((windowId: string) => {\n    setWindows(prev => {\n      const newWindows = new Map(prev);\n      const window = newWindows.get(windowId);\n      if (window) {\n        newWindows.set(windowId, { \n          ...window, \n          maximized: !window.maximized,\n          minimized: false\n        });\n      }\n      return newWindows;\n    });\n  }, []);\n\n  const focusWindow = useCallback((windowId: string) => {\n    setActiveWindowId(windowId);\n    setWindows(prev => {\n      const newWindows = new Map(prev);\n      const window = newWindows.get(windowId);\n      if (window) {\n        newWindows.set(windowId, { \n          ...window, \n          zIndex: ++zIndexRef.current,\n          minimized: false\n        });\n      }\n      return newWindows;\n    });\n  }, []);\n\n  const moveWindow = useCallback((windowId: string, x: number, y: number) => {\n    setWindows(prev => {\n      const newWindows = new Map(prev);\n      const window = newWindows.get(windowId);\n      if (window && !window.maximized) {\n        const screenWidth = globalThis.innerWidth || 1200;\n        const screenHeight = globalThis.innerHeight || 800;\n        \n        // Keep window within screen bounds\n        const clampedX = Math.max(0, Math.min(x - dragState.offset.x, screenWidth - window.width));\n        const clampedY = Math.max(0, Math.min(y - dragState.offset.y, screenHeight - window.height - 40));\n        \n        newWindows.set(windowId, { \n          ...window, \n          x: clampedX, \n          y: clampedY \n        });\n      }\n      return newWindows;\n    });\n  }, [dragState]);\n\n  const startDrag = useCallback((windowId: string, offsetX: number, offsetY: number) => {\n    setDragState({\n      isDragging: true,\n      windowId,\n      offset: { x: offsetX, y: offsetY }\n    });\n  }, []);\n\n  const endDrag = useCallback(() => {\n    setDragState({\n      isDragging: false,\n      windowId: null,\n      offset: { x: 0, y: 0 }\n    });\n  }, []);\n\n  const updateSettings = useCallback((newSettings: Partial<OSSettings>) => {\n    setSettings(prev => {\n      const updated = { ...prev, ...newSettings };\n      localStorage.setItem('os-settings', JSON.stringify(updated));\n      return updated;\n    });\n  }, []);\n\n  return {\n    windows: Array.from(windows.values()),\n    activeWindowId,\n    dragState,\n    settings,\n    createWindow,\n    closeWindow,\n    minimizeWindow,\n    maximizeWindow,\n    focusWindow,\n    moveWindow,\n    startDrag,\n    endDrag,\n    updateSettings\n  };\n}","size_bytes":11555},"client/src/lib/colorPalette.ts":{"content":"interface ColorPalette {\n  id: string;\n  name: string;\n  description: string;\n  primary: string;\n  secondary: string;\n  accent: string;\n  background: string;\n  surface: string;\n  text: string;\n  textSecondary: string;\n  border: string;\n  success: string;\n  warning: string;\n  error: string;\n  info: string;\n  preview?: string;\n}\n\ninterface CustomColorPalette extends ColorPalette {\n  isCustom: boolean;\n  createdAt: Date;\n}\n\nexport const defaultPalettes: ColorPalette[] = [\n  {\n    id: 'arch-dark',\n    name: 'Arch Dark',\n    description: 'Classic Arch Linux inspired dark theme',\n    primary: '#1793d1',\n    secondary: '#0f172a',\n    accent: '#3b82f6',\n    background: '#0a0e18',\n    surface: '#1e293b',\n    text: '#f8fafc',\n    textSecondary: '#94a3b8',\n    border: '#334155',\n    success: '#22c55e',\n    warning: '#f59e0b',\n    error: '#ef4444',\n    info: '#06b6d4'\n  },\n  {\n    id: 'ocean-blue',\n    name: 'Ocean Blue',\n    description: 'Calming ocean-inspired blue tones',\n    primary: '#0ea5e9',\n    secondary: '#0c4a6e',\n    accent: '#38bdf8',\n    background: '#0f172a',\n    surface: '#1e293b',\n    text: '#f1f5f9',\n    textSecondary: '#64748b',\n    border: '#475569',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#f87171',\n    info: '#06b6d4'\n  },\n  {\n    id: 'forest-green',\n    name: 'Forest Green',\n    description: 'Natural forest green palette',\n    primary: '#22c55e',\n    secondary: '#14532d',\n    accent: '#4ade80',\n    background: '#0f1b0f',\n    surface: '#1a2e1a',\n    text: '#f0fdf4',\n    textSecondary: '#86efac',\n    border: '#166534',\n    success: '#22c55e',\n    warning: '#eab308',\n    error: '#dc2626',\n    info: '#06b6d4'\n  },\n  {\n    id: 'sunset-orange',\n    name: 'Sunset Orange',\n    description: 'Warm sunset orange and red tones',\n    primary: '#f97316',\n    secondary: '#9a3412',\n    accent: '#fb923c',\n    background: '#1c1917',\n    surface: '#292524',\n    text: '#fef7ee',\n    textSecondary: '#fdba74',\n    border: '#78716c',\n    success: '#22c55e',\n    warning: '#f59e0b',\n    error: '#dc2626',\n    info: '#06b6d4'\n  },\n  {\n    id: 'purple-cosmic',\n    name: 'Purple Cosmic',\n    description: 'Deep space purple theme',\n    primary: '#8b5cf6',\n    secondary: '#581c87',\n    accent: '#a78bfa',\n    background: '#1e1b2e',\n    surface: '#2d2438',\n    text: '#f3f4f6',\n    textSecondary: '#c4b5fd',\n    border: '#6b46c1',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#ef4444',\n    info: '#06b6d4'\n  },\n  {\n    id: 'cyberpunk-pink',\n    name: 'Cyberpunk Pink',\n    description: 'Neon cyberpunk aesthetic',\n    primary: '#ec4899',\n    secondary: '#831843',\n    accent: '#f472b6',\n    background: '#0f0a0f',\n    surface: '#1f1726',\n    text: '#fdf2f8',\n    textSecondary: '#f9a8d4',\n    border: '#be185d',\n    success: '#22c55e',\n    warning: '#fbbf24',\n    error: '#f87171',\n    info: '#06b6d4'\n  },\n  {\n    id: 'light-minimal',\n    name: 'Light Minimal',\n    description: 'Clean minimal light theme',\n    primary: '#2563eb',\n    secondary: '#f1f5f9',\n    accent: '#3b82f6',\n    background: '#ffffff',\n    surface: '#f8fafc',\n    text: '#0f172a',\n    textSecondary: '#475569',\n    border: '#e2e8f0',\n    success: '#059669',\n    warning: '#d97706',\n    error: '#dc2626',\n    info: '#0284c7'\n  },\n  {\n    id: 'dark-minimal',\n    name: 'Dark Minimal',\n    description: 'Clean minimal dark theme',\n    primary: '#3b82f6',\n    secondary: '#1e293b',\n    accent: '#60a5fa',\n    background: '#020617',\n    surface: '#0f172a',\n    text: '#f1f5f9',\n    textSecondary: '#64748b',\n    border: '#334155',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#ef4444',\n    info: '#06b6d4'\n  }\n];\n\nclass ColorPaletteManager {\n  private currentPalette: ColorPalette | CustomColorPalette;\n  private customPalettes: CustomColorPalette[] = [];\n  private listeners: Set<(palette: ColorPalette | CustomColorPalette) => void> = new Set();\n\n  constructor() {\n    this.loadCustomPalettes();\n    this.currentPalette = this.loadCurrentPalette();\n    this.applyPalette(this.currentPalette);\n  }\n\n  private loadCustomPalettes(): void {\n    const stored = localStorage.getItem('webos-custom-palettes');\n    if (stored) {\n      try {\n        this.customPalettes = JSON.parse(stored).map((palette: any) => ({\n          ...palette,\n          createdAt: new Date(palette.createdAt)\n        }));\n      } catch (error) {\n        console.warn('Failed to load custom palettes:', error);\n        this.customPalettes = [];\n      }\n    }\n  }\n\n  private saveCustomPalettes(): void {\n    localStorage.setItem('webos-custom-palettes', JSON.stringify(this.customPalettes));\n  }\n\n  private loadCurrentPalette(): ColorPalette | CustomColorPalette {\n    const storedId = localStorage.getItem('webos-color-palette');\n    if (storedId) {\n      const defaultPalette = defaultPalettes.find(p => p.id === storedId);\n      if (defaultPalette) return defaultPalette;\n      \n      const customPalette = this.customPalettes.find(p => p.id === storedId);\n      if (customPalette) return customPalette;\n    }\n    return defaultPalettes[0]; // Default to Arch Dark\n  }\n\n  public getAllPalettes(): (ColorPalette | CustomColorPalette)[] {\n    return [...defaultPalettes, ...this.customPalettes];\n  }\n\n  public getCurrentPalette(): ColorPalette | CustomColorPalette {\n    return this.currentPalette;\n  }\n\n  public setPalette(paletteId: string): boolean {\n    const palette = this.getAllPalettes().find(p => p.id === paletteId);\n    if (!palette) return false;\n\n    this.currentPalette = palette;\n    this.applyPalette(palette);\n    localStorage.setItem('webos-color-palette', paletteId);\n    this.notifyListeners();\n    return true;\n  }\n\n  public createCustomPalette(palette: Omit<CustomColorPalette, 'id' | 'isCustom' | 'createdAt'>): CustomColorPalette {\n    const customPalette: CustomColorPalette = {\n      ...palette,\n      id: `custom-${Date.now()}`,\n      isCustom: true,\n      createdAt: new Date()\n    };\n\n    this.customPalettes.push(customPalette);\n    this.saveCustomPalettes();\n    return customPalette;\n  }\n\n  public updateCustomPalette(id: string, updates: Partial<ColorPalette>): boolean {\n    const index = this.customPalettes.findIndex(p => p.id === id);\n    if (index === -1) return false;\n\n    this.customPalettes[index] = { ...this.customPalettes[index], ...updates };\n    this.saveCustomPalettes();\n\n    if (this.currentPalette.id === id) {\n      this.currentPalette = this.customPalettes[index];\n      this.applyPalette(this.currentPalette);\n      this.notifyListeners();\n    }\n    return true;\n  }\n\n  public deleteCustomPalette(id: string): boolean {\n    const index = this.customPalettes.findIndex(p => p.id === id);\n    if (index === -1) return false;\n\n    this.customPalettes.splice(index, 1);\n    this.saveCustomPalettes();\n\n    if (this.currentPalette.id === id) {\n      this.setPalette(defaultPalettes[0].id);\n    }\n    return true;\n  }\n\n  private applyPalette(palette: ColorPalette | CustomColorPalette): void {\n    const root = document.documentElement;\n    \n    // Convert hex to HSL for CSS custom properties\n    const hexToHsl = (hex: string) => {\n      const r = parseInt(hex.slice(1, 3), 16) / 255;\n      const g = parseInt(hex.slice(3, 5), 16) / 255;\n      const b = parseInt(hex.slice(5, 7), 16) / 255;\n\n      const max = Math.max(r, g, b);\n      const min = Math.min(r, g, b);\n      let h = 0, s = 0, l = (max + min) / 2;\n\n      if (max !== min) {\n        const d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        \n        switch (max) {\n          case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n          case g: h = (b - r) / d + 2; break;\n          case b: h = (r - g) / d + 4; break;\n        }\n        h /= 6;\n      }\n\n      return `${Math.round(h * 360)} ${Math.round(s * 100)}% ${Math.round(l * 100)}%`;\n    };\n\n    // Apply CSS custom properties\n    root.style.setProperty('--primary', hexToHsl(palette.primary));\n    root.style.setProperty('--secondary', hexToHsl(palette.secondary));\n    root.style.setProperty('--accent', hexToHsl(palette.accent));\n    root.style.setProperty('--background', hexToHsl(palette.background));\n    root.style.setProperty('--surface', hexToHsl(palette.surface));\n    root.style.setProperty('--foreground', hexToHsl(palette.text));\n    root.style.setProperty('--muted-foreground', hexToHsl(palette.textSecondary));\n    root.style.setProperty('--border', hexToHsl(palette.border));\n    root.style.setProperty('--destructive', hexToHsl(palette.error));\n    root.style.setProperty('--success', hexToHsl(palette.success));\n    root.style.setProperty('--warning', hexToHsl(palette.warning));\n    root.style.setProperty('--info', hexToHsl(palette.info));\n\n    // Dispatch event for components that need to react to palette changes\n    window.dispatchEvent(new CustomEvent('palette-changed', { \n      detail: { palette } \n    }));\n  }\n\n  public onChange(listener: (palette: ColorPalette | CustomColorPalette) => void): () => void {\n    this.listeners.add(listener);\n    // Immediately notify with current palette\n    listener(this.currentPalette);\n    \n    return () => {\n      this.listeners.delete(listener);\n    };\n  }\n\n  private notifyListeners(): void {\n    this.listeners.forEach(listener => {\n      try {\n        listener(this.currentPalette);\n      } catch (error) {\n        console.error('Error in palette listener:', error);\n      }\n    });\n  }\n\n  public exportPalette(id: string): string | null {\n    const palette = this.getAllPalettes().find(p => p.id === id);\n    if (!palette) return null;\n    \n    return JSON.stringify(palette, null, 2);\n  }\n\n  public importPalette(paletteJson: string): CustomColorPalette | null {\n    try {\n      const palette = JSON.parse(paletteJson);\n      \n      // Validate required properties\n      const requiredProps = ['name', 'primary', 'secondary', 'accent', 'background', 'surface', 'text'];\n      for (const prop of requiredProps) {\n        if (!palette[prop]) {\n          throw new Error(`Missing required property: ${prop}`);\n        }\n      }\n\n      return this.createCustomPalette({\n        ...palette,\n        description: palette.description || 'Imported palette'\n      });\n    } catch (error) {\n      console.error('Failed to import palette:', error);\n      return null;\n    }\n  }\n}\n\n// Global color palette manager instance\nexport const colorPaletteManager = new ColorPaletteManager();\n\n// Utility functions\nexport const isCustomPalette = (palette: ColorPalette | CustomColorPalette): palette is CustomColorPalette => {\n  return 'isCustom' in palette && palette.isCustom;\n};\n\nexport const getContrastColor = (hexColor: string): string => {\n  const r = parseInt(hexColor.slice(1, 3), 16);\n  const g = parseInt(hexColor.slice(3, 5), 16);\n  const b = parseInt(hexColor.slice(5, 7), 16);\n  \n  const luminance = (0.299 * r + 0.587 * g + 0.114 * b) / 255;\n  return luminance > 0.5 ? '#000000' : '#ffffff';\n};","size_bytes":10866},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey[0] as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1376},"client/src/lib/soundManager.ts":{"content":"interface SoundConfig {\n  [key: string]: {\n    frequency: number;\n    duration: number;\n    type: 'sine' | 'square' | 'sawtooth' | 'triangle';\n    volume?: number;\n  };\n}\n\nclass SoundManager {\n  private audioContext: AudioContext | null = null;\n  private enabled: boolean = true;\n  private volume: number = 0.3;\n\n  private sounds: SoundConfig = {\n    // UI Sounds\n    click: { frequency: 800, duration: 100, type: 'sine', volume: 0.2 },\n    iconClick: { frequency: 900, duration: 80, type: 'triangle', volume: 0.18 },\n    buttonClick: { frequency: 1200, duration: 60, type: 'square', volume: 0.15 },\n    hover: { frequency: 600, duration: 50, type: 'sine', volume: 0.1 },\n    open: { frequency: 440, duration: 200, type: 'sine', volume: 0.25 },\n    close: { frequency: 330, duration: 150, type: 'sine', volume: 0.2 },\n    minimize: { frequency: 880, duration: 100, type: 'triangle', volume: 0.15 },\n    maximize: { frequency: 1100, duration: 150, type: 'triangle', volume: 0.2 },\n    \n    // System Sounds\n    startup: { frequency: 523, duration: 500, type: 'sine', volume: 0.3 },\n    shutdown: { frequency: 220, duration: 800, type: 'sine', volume: 0.4 },\n    login: { frequency: 659, duration: 400, type: 'sine', volume: 0.35 },\n    welcome: { frequency: 784, duration: 600, type: 'triangle', volume: 0.3 },\n    logout: { frequency: 392, duration: 400, type: 'sine', volume: 0.3 },\n    \n    // Notification Sounds\n    achievement: { frequency: 1000, duration: 300, type: 'square', volume: 0.3 },\n    error: { frequency: 150, duration: 200, type: 'sawtooth', volume: 0.25 },\n    success: { frequency: 784, duration: 200, type: 'sine', volume: 0.25 },\n    warning: { frequency: 523, duration: 250, type: 'triangle', volume: 0.2 },\n    \n    // App Sounds\n    terminal: { frequency: 350, duration: 80, type: 'square', volume: 0.15 },\n    typing: { frequency: 400, duration: 30, type: 'square', volume: 0.1 },\n    keypress: { frequency: 450, duration: 25, type: 'triangle', volume: 0.08 },\n    backspace: { frequency: 300, duration: 40, type: 'square', volume: 0.12 },\n    folder: { frequency: 500, duration: 120, type: 'sine', volume: 0.2 },\n    delete: { frequency: 200, duration: 180, type: 'sawtooth', volume: 0.2 },\n    \n    // Game Sounds\n    powerup: { frequency: 1200, duration: 250, type: 'square', volume: 0.3 },\n    coin: { frequency: 1047, duration: 150, type: 'sine', volume: 0.25 },\n    jump: { frequency: 659, duration: 100, type: 'triangle', volume: 0.2 },\n    \n    // Installation Sounds\n    install: { frequency: 740, duration: 200, type: 'sine', volume: 0.25 },\n    uninstall: { frequency: 370, duration: 250, type: 'triangle', volume: 0.2 },\n    \n    // Console Sounds\n    beep: { frequency: 1000, duration: 100, type: 'square', volume: 0.2 },\n    console: { frequency: 300, duration: 60, type: 'square', volume: 0.15 }\n  };\n\n  constructor() {\n    this.initAudioContext();\n    this.loadSettings();\n  }\n\n  private initAudioContext() {\n    try {\n      if (typeof window !== 'undefined' && this.enabled) {\n        const AudioContextClass = window.AudioContext || (window as any).webkitAudioContext;\n        if (AudioContextClass) {\n          this.audioContext = new AudioContextClass();\n          \n          // Handle autoplay policy restrictions\n          if (this.audioContext.state === 'suspended') {\n            const resumeContext = () => {\n              if (this.audioContext && this.audioContext.state === 'suspended') {\n                this.audioContext.resume().catch(() => {\n                  console.warn('Audio context resume failed');\n                });\n              }\n            };\n            \n            // Try to resume on first user interaction\n            const events = ['click', 'keydown', 'touchstart'];\n            events.forEach(event => {\n              document.addEventListener(event, resumeContext, { once: true });\n            });\n          }\n        } else {\n          throw new Error('AudioContext not available');\n        }\n      }\n    } catch (e) {\n      console.warn('Web Audio API initialization failed:', e);\n      this.enabled = false;\n      this.audioContext = null;\n    }\n  }\n\n  private loadSettings() {\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        const savedEnabled = localStorage.getItem('webos-sound-enabled');\n        const savedVolume = localStorage.getItem('webos-sound-volume');\n        \n        this.enabled = savedEnabled !== 'false';\n        this.volume = savedVolume ? parseFloat(savedVolume) : 0.3;\n      }\n    } catch (e) {\n      console.warn('Could not load sound settings from localStorage');\n      this.enabled = true;\n      this.volume = 0.3;\n    }\n  }\n\n  public setEnabled(enabled: boolean) {\n    this.enabled = enabled;\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        localStorage.setItem('webos-sound-enabled', enabled.toString());\n      }\n    } catch (e) {\n      console.warn('Could not save sound enabled setting');\n    }\n  }\n\n  public setVolume(volume: number) {\n    this.volume = Math.max(0, Math.min(1, volume));\n    try {\n      if (typeof window !== 'undefined' && window.localStorage) {\n        localStorage.setItem('webos-sound-volume', this.volume.toString());\n      }\n    } catch (e) {\n      console.warn('Could not save sound volume setting');\n    }\n  }\n\n  public isEnabled(): boolean {\n    return this.enabled;\n  }\n\n  public getVolume(): number {\n    return this.volume;\n  }\n\n  public play(soundName: string, pitch: number = 1) {\n    if (!this.enabled || !this.audioContext || !soundName || typeof soundName !== 'string' || !this.sounds[soundName]) {\n      return;\n    }\n\n    try {\n      // Ensure audio context is running\n      if (this.audioContext.state === 'suspended') {\n        this.audioContext.resume().catch(() => {\n          console.warn('Failed to resume audio context');\n          return;\n        });\n      }\n\n      const sound = this.sounds[soundName];\n      const oscillator = this.audioContext.createOscillator();\n      const gainNode = this.audioContext.createGain();\n\n      // Connect nodes\n      oscillator.connect(gainNode);\n      gainNode.connect(this.audioContext.destination);\n\n      // Set oscillator properties\n      const frequency = Math.max(20, Math.min(20000, sound.frequency * pitch));\n      oscillator.frequency.setValueAtTime(frequency, this.audioContext.currentTime);\n      oscillator.type = sound.type;\n\n      // Set volume with smooth fade out\n      const volume = Math.max(0, Math.min(1, (sound.volume || 0.3) * this.volume));\n      gainNode.gain.setValueAtTime(volume, this.audioContext.currentTime);\n      \n      const duration = Math.max(10, sound.duration) / 1000;\n      const fadeOutTime = Math.min(duration * 0.8, duration - 0.01);\n      \n      gainNode.gain.exponentialRampToValueAtTime(\n        Math.max(0.001, volume * 0.001), \n        this.audioContext.currentTime + fadeOutTime\n      );\n\n      // Start and stop oscillator with proper timing\n      const startTime = this.audioContext.currentTime;\n      const stopTime = startTime + duration;\n      \n      oscillator.start(startTime);\n      oscillator.stop(stopTime);\n      \n      // Clean up oscillator after it finishes\n      oscillator.onended = () => {\n        try {\n          oscillator.disconnect();\n          gainNode.disconnect();\n        } catch (cleanupError) {\n          // Ignore cleanup errors\n        }\n      };\n      \n    } catch (e) {\n      console.warn('Sound playback failed for', soundName, ':', e);\n    }\n  }\n\n  public playSequence(soundNames: string[] | undefined, interval: number = 200) {\n    if (!this.enabled || !soundNames || !Array.isArray(soundNames) || soundNames.length === 0) {\n      return;\n    }\n    \n    soundNames.forEach((soundName, index) => {\n      if (soundName && typeof soundName === 'string' && this.sounds[soundName]) {\n        setTimeout(() => this.play(soundName), Math.max(0, index * interval));\n      }\n    });\n  }\n\n  public playStartupSound() {\n    this.playSequence(['startup', 'beep'], 300);\n  }\n\n  public playShutdownSound() {\n    this.playSequence(['shutdown', 'beep'], 500);\n  }\n\n  public playAchievementSound() {\n    this.playSequence(['achievement', 'powerup'], 150);\n  }\n\n  public playTypingSound() {\n    // Random pitch variation for more realistic typing\n    const pitch = 0.9 + Math.random() * 0.2;\n    this.play('typing', pitch);\n  }\n\n  public playLoginSequence() {\n    // Windows XP-style login sound sequence\n    this.playSequence(['login', 'welcome'], 800);\n  }\n\n  public playConsoleSequence() {\n    // Play a sequence for console operations\n    const sequence = ['console', 'beep', 'console'];\n    this.playSequence(sequence, 100);\n  }\n\n  public initGlobalKeyboardSounds() {\n    try {\n      if (typeof document !== 'undefined') {\n        document.addEventListener('keydown', (event) => {\n          try {\n            if (!this.isEnabled() || !event || !event.target) return;\n            \n            // Only play sounds for text input elements\n            const target = event.target as HTMLElement;\n            if (target && (target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.contentEditable === 'true')) {\n              if (event.key === 'Backspace' || event.key === 'Delete') {\n                this.play('backspace');\n              } else if (event.key && event.key.length === 1) { // Regular character keys\n                this.play('keypress', Math.random() * 0.3 + 0.8); // Slight pitch variation\n              }\n            }\n          } catch (e) {\n            // Silently ignore keyboard sound errors\n          }\n        });\n      }\n    } catch (e) {\n      console.warn('Failed to initialize keyboard sounds:', e);\n    }\n  }\n}\n\n// Create singleton instance\nexport const soundManager = new SoundManager();\n\n// Initialize global keyboard sounds safely\ntry {\n  soundManager.initGlobalKeyboardSounds();\n} catch (e) {\n  console.warn('Failed to initialize global keyboard sounds:', e);\n}\n\n// Utility function for components with error handling\nexport const playSound = (soundName: string, pitch?: number) => {\n  try {\n    if (soundName && typeof soundName === 'string') {\n      soundManager.play(soundName, pitch);\n    }\n  } catch (e) {\n    console.warn('Failed to play sound:', soundName, e);\n  }\n};\n\n// Common sound combinations with error handling\nexport const playSounds = {\n  click: () => { try { soundManager.play('click'); } catch (e) {} },\n  iconClick: () => { try { soundManager.play('iconClick'); } catch (e) {} },\n  buttonClick: () => { try { soundManager.play('buttonClick'); } catch (e) {} },\n  hover: () => { try { soundManager.play('hover'); } catch (e) {} },\n  windowOpen: () => { try { soundManager.play('open'); } catch (e) {} },\n  windowClose: () => { try { soundManager.play('close'); } catch (e) {} },\n  windowMinimize: () => { try { soundManager.play('minimize'); } catch (e) {} },\n  windowMaximize: () => { try { soundManager.play('maximize'); } catch (e) {} },\n  buttonHover: () => { try { soundManager.play('hover'); } catch (e) {} },\n  appLaunch: () => { try { soundManager.play('open'); } catch (e) {} },\n  folderOpen: () => { try { soundManager.play('folder'); } catch (e) {} },\n  fileDelete: () => { try { soundManager.play('delete'); } catch (e) {} },\n  notification: () => { try { soundManager.play('success'); } catch (e) {} },\n  error: () => { try { soundManager.play('error'); } catch (e) {} },\n  achievement: () => { try { soundManager.playAchievementSound(); } catch (e) {} },\n  startup: () => { try { soundManager.playStartupSound(); } catch (e) {} },\n  shutdown: () => { try { soundManager.playShutdownSound(); } catch (e) {} },\n  typing: () => { try { soundManager.playTypingSound(); } catch (e) {} },\n  console: () => { try { soundManager.playConsoleSequence(); } catch (e) {} },\n  install: () => { try { soundManager.play('install'); } catch (e) {} },\n  uninstall: () => { try { soundManager.play('uninstall'); } catch (e) {} }\n};","size_bytes":11916},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/lib/websocketManager.ts":{"content":"interface WebSocketConfig {\n  url: string;\n  maxReconnectAttempts: number;\n  reconnectInterval: number;\n  heartbeatInterval: number;\n  timeout: number;\n}\n\ninterface WebSocketMessage {\n  type: string;\n  data?: any;\n  timestamp: number;\n}\n\ninterface ConnectionStatus {\n  isConnected: boolean;\n  isReconnecting: boolean;\n  reconnectAttempts: number;\n  lastError?: string;\n  latency?: number;\n}\n\ntype StatusListener = (status: ConnectionStatus) => void;\ntype MessageListener = (message: WebSocketMessage) => void;\n\nexport class WebSocketManager {\n  private ws: WebSocket | null = null;\n  private config: WebSocketConfig;\n  private statusListeners: Set<StatusListener> = new Set();\n  private messageListeners: Set<MessageListener> = new Set();\n  private reconnectTimer: NodeJS.Timeout | null = null;\n  private heartbeatTimer: NodeJS.Timeout | null = null;\n  private connectionStatus: ConnectionStatus = {\n    isConnected: false,\n    isReconnecting: false,\n    reconnectAttempts: 0\n  };\n  private shouldReconnect = true;\n  private lastPingTime = 0;\n\n  constructor(config: Partial<WebSocketConfig> = {}) {\n    this.config = {\n      url: this.getWebSocketUrl(),\n      maxReconnectAttempts: 5,\n      reconnectInterval: 2000,\n      heartbeatInterval: 30000,\n      timeout: 3000,\n      ...config\n    };\n  }\n\n  private getWebSocketUrl(): string {\n    const protocol = window.location.protocol === \"https:\" ? \"wss:\" : \"ws:\";\n    return `${protocol}//${window.location.host}/ws`;\n  }\n\n  public connect(): Promise<void> {\n    return new Promise((resolve, reject) => {\n      if (this.ws?.readyState === WebSocket.OPEN) {\n        resolve();\n        return;\n      }\n\n      this.cleanup();\n      this.shouldReconnect = true;\n\n      try {\n        this.ws = new WebSocket(this.config.url);\n        this.setupEventListeners(resolve, reject);\n      } catch (error) {\n        this.handleError(error as Error);\n        reject(error);\n      }\n    });\n  }\n\n  private setupEventListeners(resolve: () => void, reject: (error: Error) => void): void {\n    if (!this.ws) return;\n\n    const connectTimeout = setTimeout(() => {\n      this.handleError(new Error('Connection timeout'));\n      reject(new Error('Connection timeout'));\n    }, this.config.timeout);\n\n    this.ws.onopen = () => {\n      clearTimeout(connectTimeout);\n      this.connectionStatus = {\n        isConnected: true,\n        isReconnecting: false,\n        reconnectAttempts: 0\n      };\n      this.notifyStatusListeners();\n      this.startHeartbeat();\n      resolve();\n    };\n\n    this.ws.onmessage = (event) => {\n      try {\n        const message: WebSocketMessage = JSON.parse(event.data);\n        \n        // Handle pong response for latency calculation\n        if (message.type === 'pong') {\n          this.connectionStatus.latency = Date.now() - this.lastPingTime;\n          this.notifyStatusListeners();\n          return;\n        }\n\n        this.notifyMessageListeners(message);\n      } catch (error) {\n        console.warn('Failed to parse WebSocket message:', error);\n      }\n    };\n\n    this.ws.onclose = (event) => {\n      clearTimeout(connectTimeout);\n      this.connectionStatus.isConnected = false;\n      this.stopHeartbeat();\n      \n      if (this.shouldReconnect && event.code !== 1000) {\n        this.attemptReconnect();\n      } else {\n        this.connectionStatus.isReconnecting = false;\n        this.notifyStatusListeners();\n      }\n    };\n\n    this.ws.onerror = (error) => {\n      clearTimeout(connectTimeout);\n      // Don't spam console with connection errors during normal reconnection attempts\n      if (this.connectionStatus.reconnectAttempts === 0) {\n        this.handleError(new Error('WebSocket connection error'));\n      } else {\n        this.connectionStatus.lastError = 'Connection failed';\n        this.notifyStatusListeners();\n      }\n    };\n  }\n\n  private attemptReconnect(): void {\n    if (this.connectionStatus.reconnectAttempts >= this.config.maxReconnectAttempts) {\n      this.connectionStatus.isReconnecting = false;\n      this.connectionStatus.lastError = 'Max reconnection attempts reached';\n      this.notifyStatusListeners();\n      return;\n    }\n\n    this.connectionStatus.isReconnecting = true;\n    this.connectionStatus.reconnectAttempts++;\n    this.notifyStatusListeners();\n\n    const delay = Math.min(\n      this.config.reconnectInterval * Math.pow(2, this.connectionStatus.reconnectAttempts - 1),\n      30000\n    );\n\n    this.reconnectTimer = setTimeout(() => {\n      this.connect().catch(() => {\n        // Reconnection failed, will try again\n      });\n    }, delay);\n  }\n\n  private startHeartbeat(): void {\n    this.stopHeartbeat();\n    this.heartbeatTimer = setInterval(() => {\n      if (this.ws?.readyState === WebSocket.OPEN) {\n        this.lastPingTime = Date.now();\n        this.send({ type: 'ping', timestamp: this.lastPingTime });\n      }\n    }, this.config.heartbeatInterval);\n  }\n\n  private stopHeartbeat(): void {\n    if (this.heartbeatTimer) {\n      clearInterval(this.heartbeatTimer);\n      this.heartbeatTimer = null;\n    }\n  }\n\n  private handleError(error: Error): void {\n    this.connectionStatus.lastError = error.message;\n    this.connectionStatus.isConnected = false;\n    this.notifyStatusListeners();\n    // Only log actual errors, not connection attempts\n    if (error.message !== 'Connection timeout') {\n      console.error('WebSocket error:', error);\n    }\n  }\n\n  public send(message: WebSocketMessage): boolean {\n    if (this.ws?.readyState === WebSocket.OPEN) {\n      try {\n        this.ws.send(JSON.stringify({\n          ...message,\n          timestamp: message.timestamp || Date.now()\n        }));\n        return true;\n      } catch (error) {\n        this.handleError(error as Error);\n        return false;\n      }\n    }\n    return false;\n  }\n\n  public disconnect(): void {\n    this.shouldReconnect = false;\n    this.cleanup();\n    this.connectionStatus = {\n      isConnected: false,\n      isReconnecting: false,\n      reconnectAttempts: 0\n    };\n    this.notifyStatusListeners();\n  }\n\n  private cleanup(): void {\n    if (this.reconnectTimer) {\n      clearTimeout(this.reconnectTimer);\n      this.reconnectTimer = null;\n    }\n    this.stopHeartbeat();\n    \n    if (this.ws) {\n      this.ws.onopen = null;\n      this.ws.onmessage = null;\n      this.ws.onclose = null;\n      this.ws.onerror = null;\n      \n      if (this.ws.readyState === WebSocket.OPEN || this.ws.readyState === WebSocket.CONNECTING) {\n        this.ws.close();\n      }\n      this.ws = null;\n    }\n  }\n\n  public onStatusChange(listener: StatusListener): () => void {\n    this.statusListeners.add(listener);\n    // Immediately notify with current status\n    listener(this.connectionStatus);\n    \n    return () => {\n      this.statusListeners.delete(listener);\n    };\n  }\n\n  public onMessage(listener: MessageListener): () => void {\n    this.messageListeners.add(listener);\n    return () => {\n      this.messageListeners.delete(listener);\n    };\n  }\n\n  private notifyStatusListeners(): void {\n    this.statusListeners.forEach(listener => {\n      try {\n        listener({ ...this.connectionStatus });\n      } catch (error) {\n        console.error('Error in status listener:', error);\n      }\n    });\n  }\n\n  private notifyMessageListeners(message: WebSocketMessage): void {\n    this.messageListeners.forEach(listener => {\n      try {\n        listener(message);\n      } catch (error) {\n        console.error('Error in message listener:', error);\n      }\n    });\n  }\n\n  public getStatus(): ConnectionStatus {\n    return { ...this.connectionStatus };\n  }\n\n  public isConnected(): boolean {\n    return this.connectionStatus.isConnected;\n  }\n\n  public forceReconnect(): void {\n    this.connectionStatus.reconnectAttempts = 0;\n    this.disconnect();\n    this.shouldReconnect = true;\n    this.connect();\n  }\n}\n\n// Global WebSocket manager instance\nexport const wsManager = new WebSocketManager();\n\n// Don't auto-connect to prevent console spam\n// Connection will be initiated when needed by components","size_bytes":7965},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/types/os.ts":{"content":"export interface WindowState {\n  id: string;\n  app: string;\n  title: string;\n  icon: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  minimized: boolean;\n  maximized: boolean;\n  zIndex: number;\n  workspace: number;\n}\n\nexport interface OSSettings {\n  theme: 'light' | 'dark' | 'auto';\n  wallpaper: string;\n  showDesktopIcons: boolean;\n}\n\nexport interface AppConfig {\n  id: string;\n  name: string;\n  icon: string;\n  component: React.ComponentType;\n}\n\nexport interface DragState {\n  isDragging: boolean;\n  windowId: string | null;\n  offset: { x: number; y: number };\n}\n","size_bytes":588},"client/src/components/apps/AccountManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { Badge } from '@/components/ui/badge';\nimport { Separator } from '@/components/ui/separator';\nimport { User, Lock, Trash2, UserPlus, Shield, Calendar, Clock } from 'lucide-react';\n\ninterface User {\n  username: string;\n  password: string;\n  fullName: string;\n  avatar?: string;\n  lastLogin?: Date;\n  theme: 'light' | 'dark' | 'auto';\n  wallpaper: string;\n  createdAt?: Date;\n  isAdmin?: boolean;\n}\n\nexport const AccountManager: FC = () => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [isEditingProfile, setIsEditingProfile] = useState(false);\n  const [isChangingPassword, setIsChangingPassword] = useState(false);\n  const [isCreatingUser, setIsCreatingUser] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  const [profileForm, setProfileForm] = useState({\n    fullName: '',\n    theme: 'dark' as 'light' | 'dark' | 'auto',\n    wallpaper: 'arch'\n  });\n\n  const [passwordForm, setPasswordForm] = useState({\n    currentPassword: '',\n    newPassword: '',\n    confirmPassword: ''\n  });\n\n  const [newUserForm, setNewUserForm] = useState({\n    username: '',\n    fullName: '',\n    password: '',\n    confirmPassword: '',\n    isAdmin: false\n  });\n\n  useEffect(() => {\n    loadUsers();\n    loadCurrentUser();\n  }, []);\n\n  const loadUsers = () => {\n    const stored = localStorage.getItem('webos-users');\n    if (stored) {\n      setUsers(JSON.parse(stored));\n    }\n  };\n\n  const loadCurrentUser = () => {\n    const stored = localStorage.getItem('webos-current-user');\n    if (stored) {\n      const user = JSON.parse(stored);\n      setCurrentUser(user);\n      setSelectedUser(user);\n      setProfileForm({\n        fullName: user.fullName,\n        theme: user.theme || 'dark',\n        wallpaper: user.wallpaper || 'arch'\n      });\n    }\n  };\n\n  const saveUsers = (updatedUsers: User[]) => {\n    setUsers(updatedUsers);\n    localStorage.setItem('webos-users', JSON.stringify(updatedUsers));\n  };\n\n  const handleUpdateProfile = () => {\n    if (!currentUser) return;\n\n    if (!profileForm.fullName.trim()) {\n      setError('Full name is required');\n      return;\n    }\n\n    const updatedUser = {\n      ...currentUser,\n      fullName: profileForm.fullName,\n      theme: profileForm.theme,\n      wallpaper: profileForm.wallpaper\n    };\n\n    const updatedUsers = users.map(u => \n      u.username === currentUser.username ? updatedUser : u\n    );\n\n    saveUsers(updatedUsers);\n    setCurrentUser(updatedUser);\n    localStorage.setItem('webos-current-user', JSON.stringify(updatedUser));\n\n    // Apply theme and wallpaper changes\n    document.documentElement.classList.toggle('dark', profileForm.theme === 'dark');\n    window.dispatchEvent(new CustomEvent('wallpaper-change', { \n      detail: { wallpaper: profileForm.wallpaper } \n    }));\n\n    setIsEditingProfile(false);\n    setSuccess('Profile updated successfully');\n    setError('');\n  };\n\n  const handleChangePassword = () => {\n    if (!currentUser) return;\n\n    if (!passwordForm.currentPassword || !passwordForm.newPassword || !passwordForm.confirmPassword) {\n      setError('All password fields are required');\n      return;\n    }\n\n    if (passwordForm.currentPassword !== currentUser.password) {\n      setError('Current password is incorrect');\n      return;\n    }\n\n    if (passwordForm.newPassword !== passwordForm.confirmPassword) {\n      setError('New passwords do not match');\n      return;\n    }\n\n    if (passwordForm.newPassword.length < 4) {\n      setError('Password must be at least 4 characters long');\n      return;\n    }\n\n    const updatedUser = {\n      ...currentUser,\n      password: passwordForm.newPassword\n    };\n\n    const updatedUsers = users.map(u => \n      u.username === currentUser.username ? updatedUser : u\n    );\n\n    saveUsers(updatedUsers);\n    setCurrentUser(updatedUser);\n    localStorage.setItem('webos-current-user', JSON.stringify(updatedUser));\n\n    setIsChangingPassword(false);\n    setPasswordForm({ currentPassword: '', newPassword: '', confirmPassword: '' });\n    setSuccess('Password changed successfully');\n    setError('');\n  };\n\n  const handleCreateUser = () => {\n    if (!newUserForm.username || !newUserForm.fullName || !newUserForm.password || !newUserForm.confirmPassword) {\n      setError('All fields are required');\n      return;\n    }\n\n    if (newUserForm.password !== newUserForm.confirmPassword) {\n      setError('Passwords do not match');\n      return;\n    }\n\n    if (users.some(u => u.username === newUserForm.username)) {\n      setError('Username already exists');\n      return;\n    }\n\n    const newUser: User = {\n      username: newUserForm.username.toLowerCase(),\n      fullName: newUserForm.fullName,\n      password: newUserForm.password,\n      theme: 'dark',\n      wallpaper: 'arch',\n      createdAt: new Date(),\n      isAdmin: newUserForm.isAdmin\n    };\n\n    saveUsers([...users, newUser]);\n    setIsCreatingUser(false);\n    setNewUserForm({ username: '', fullName: '', password: '', confirmPassword: '', isAdmin: false });\n    setSuccess('User created successfully');\n    setError('');\n  };\n\n  const handleDeleteUser = (userToDelete: User) => {\n    if (userToDelete.username === currentUser?.username) {\n      setError('Cannot delete your own account');\n      return;\n    }\n\n    if (confirm(`Are you sure you want to delete user \"${userToDelete.fullName}\"?`)) {\n      const updatedUsers = users.filter(u => u.username !== userToDelete.username);\n      saveUsers(updatedUsers);\n      setSuccess('User deleted successfully');\n      setError('');\n    }\n  };\n\n  const isCurrentUserAdmin = currentUser?.isAdmin || currentUser?.username === 'admin';\n\n  return (\n    <div className=\"h-full flex flex-col bg-background p-6\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <div className=\"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center\">\n          <User className=\"w-6 h-6 text-primary\" />\n        </div>\n        <div>\n          <h1 className=\"text-2xl font-bold\">Account Manager</h1>\n          <p className=\"text-muted-foreground\">Manage user accounts and settings</p>\n        </div>\n      </div>\n\n      {error && (\n        <Alert variant=\"destructive\" className=\"mb-4\">\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      )}\n\n      {success && (\n        <Alert className=\"mb-4 border-green-200 bg-green-50 text-green-800\">\n          <AlertDescription>{success}</AlertDescription>\n        </Alert>\n      )}\n\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Current User Profile */}\n          <Card className=\"p-6\">\n            <h2 className=\"text-lg font-semibold mb-4 flex items-center gap-2\">\n              <User className=\"w-5 h-5\" />\n              Your Profile\n            </h2>\n\n            {currentUser && (\n              <div className=\"space-y-4\">\n                <div className=\"flex items-center gap-4\">\n                  <div className=\"w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center\">\n                    <User className=\"w-8 h-8 text-primary\" />\n                  </div>\n                  <div>\n                    <h3 className=\"font-semibold\">{currentUser.fullName}</h3>\n                    <p className=\"text-sm text-muted-foreground\">@{currentUser.username}</p>\n                    {currentUser.isAdmin && (\n                      <Badge variant=\"secondary\" className=\"mt-1\">\n                        <Shield className=\"w-3 h-3 mr-1\" />\n                        Administrator\n                      </Badge>\n                    )}\n                  </div>\n                </div>\n\n                {currentUser.lastLogin && (\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <Clock className=\"w-4 h-4\" />\n                    Last login: {new Date(currentUser.lastLogin).toLocaleString()}\n                  </div>\n                )}\n\n                <Separator />\n\n                {!isEditingProfile ? (\n                  <div className=\"space-y-3\">\n                    <div>\n                      <Label className=\"text-sm font-medium\">Theme</Label>\n                      <p className=\"text-sm text-muted-foreground capitalize\">{currentUser.theme}</p>\n                    </div>\n                    <div>\n                      <Label className=\"text-sm font-medium\">Wallpaper</Label>\n                      <p className=\"text-sm text-muted-foreground capitalize\">{currentUser.wallpaper}</p>\n                    </div>\n                    <Button onClick={() => setIsEditingProfile(true)} variant=\"outline\" className=\"w-full\">\n                      Edit Profile\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    <div>\n                      <Label htmlFor=\"fullName\">Full Name</Label>\n                      <Input\n                        id=\"fullName\"\n                        value={profileForm.fullName}\n                        onChange={(e) => setProfileForm({ ...profileForm, fullName: e.target.value })}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"theme\">Theme</Label>\n                      <select\n                        id=\"theme\"\n                        value={profileForm.theme}\n                        onChange={(e) => setProfileForm({ ...profileForm, theme: e.target.value as any })}\n                        className=\"w-full p-2 border rounded-md bg-background\"\n                      >\n                        <option value=\"light\">Light</option>\n                        <option value=\"dark\">Dark</option>\n                        <option value=\"auto\">Auto</option>\n                      </select>\n                    </div>\n                    <div>\n                      <Label htmlFor=\"wallpaper\">Wallpaper</Label>\n                      <select\n                        id=\"wallpaper\"\n                        value={profileForm.wallpaper}\n                        onChange={(e) => setProfileForm({ ...profileForm, wallpaper: e.target.value })}\n                        className=\"w-full p-2 border rounded-md bg-background\"\n                      >\n                        <option value=\"arch\">Arch Linux</option>\n                        <option value=\"matrix\">Matrix</option>\n                        <option value=\"cyber\">Cyberpunk</option>\n                        <option value=\"minimal\">Minimal</option>\n                      </select>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button onClick={handleUpdateProfile} className=\"flex-1\">Save</Button>\n                      <Button onClick={() => setIsEditingProfile(false)} variant=\"outline\">Cancel</Button>\n                    </div>\n                  </div>\n                )}\n\n                <Separator />\n\n                {!isChangingPassword ? (\n                  <Button \n                    onClick={() => setIsChangingPassword(true)} \n                    variant=\"outline\" \n                    className=\"w-full\"\n                  >\n                    <Lock className=\"w-4 h-4 mr-2\" />\n                    Change Password\n                  </Button>\n                ) : (\n                  <div className=\"space-y-3\">\n                    <div>\n                      <Label htmlFor=\"currentPassword\">Current Password</Label>\n                      <Input\n                        id=\"currentPassword\"\n                        type=\"password\"\n                        value={passwordForm.currentPassword}\n                        onChange={(e) => setPasswordForm({ ...passwordForm, currentPassword: e.target.value })}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"newPassword\">New Password</Label>\n                      <Input\n                        id=\"newPassword\"\n                        type=\"password\"\n                        value={passwordForm.newPassword}\n                        onChange={(e) => setPasswordForm({ ...passwordForm, newPassword: e.target.value })}\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"confirmNewPassword\">Confirm New Password</Label>\n                      <Input\n                        id=\"confirmNewPassword\"\n                        type=\"password\"\n                        value={passwordForm.confirmPassword}\n                        onChange={(e) => setPasswordForm({ ...passwordForm, confirmPassword: e.target.value })}\n                      />\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button onClick={handleChangePassword} className=\"flex-1\">Change Password</Button>\n                      <Button onClick={() => setIsChangingPassword(false)} variant=\"outline\">Cancel</Button>\n                    </div>\n                  </div>\n                )}\n              </div>\n            )}\n          </Card>\n\n          {/* User Management */}\n          {isCurrentUserAdmin && (\n            <Card className=\"p-6\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-lg font-semibold flex items-center gap-2\">\n                  <Shield className=\"w-5 h-5\" />\n                  User Management\n                </h2>\n                <Button \n                  onClick={() => setIsCreatingUser(true)} \n                  size=\"sm\"\n                  disabled={isCreatingUser}\n                >\n                  <UserPlus className=\"w-4 h-4 mr-2\" />\n                  Add User\n                </Button>\n              </div>\n\n              {isCreatingUser && (\n                <Card className=\"p-4 mb-4 bg-muted/50\">\n                  <h3 className=\"font-medium mb-3\">Create New User</h3>\n                  <div className=\"space-y-3\">\n                    <div>\n                      <Label htmlFor=\"newUsername\">Username</Label>\n                      <Input\n                        id=\"newUsername\"\n                        value={newUserForm.username}\n                        onChange={(e) => setNewUserForm({ ...newUserForm, username: e.target.value })}\n                        placeholder=\"Enter username\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"newFullName\">Full Name</Label>\n                      <Input\n                        id=\"newFullName\"\n                        value={newUserForm.fullName}\n                        onChange={(e) => setNewUserForm({ ...newUserForm, fullName: e.target.value })}\n                        placeholder=\"Enter full name\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"newUserPassword\">Password</Label>\n                      <Input\n                        id=\"newUserPassword\"\n                        type=\"password\"\n                        value={newUserForm.password}\n                        onChange={(e) => setNewUserForm({ ...newUserForm, password: e.target.value })}\n                        placeholder=\"Enter password\"\n                      />\n                    </div>\n                    <div>\n                      <Label htmlFor=\"confirmNewUserPassword\">Confirm Password</Label>\n                      <Input\n                        id=\"confirmNewUserPassword\"\n                        type=\"password\"\n                        value={newUserForm.confirmPassword}\n                        onChange={(e) => setNewUserForm({ ...newUserForm, confirmPassword: e.target.value })}\n                        placeholder=\"Confirm password\"\n                      />\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <input\n                        type=\"checkbox\"\n                        id=\"isAdmin\"\n                        checked={newUserForm.isAdmin}\n                        onChange={(e) => setNewUserForm({ ...newUserForm, isAdmin: e.target.checked })}\n                      />\n                      <Label htmlFor=\"isAdmin\">Administrator privileges</Label>\n                    </div>\n                    <div className=\"flex gap-2\">\n                      <Button onClick={handleCreateUser} className=\"flex-1\">Create User</Button>\n                      <Button onClick={() => setIsCreatingUser(false)} variant=\"outline\">Cancel</Button>\n                    </div>\n                  </div>\n                </Card>\n              )}\n\n              <div className=\"space-y-3\">\n                {users.map((user) => (\n                  <Card key={user.username} className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center\">\n                          <User className=\"w-5 h-5 text-primary\" />\n                        </div>\n                        <div>\n                          <div className=\"font-medium\">{user.fullName}</div>\n                          <div className=\"text-sm text-muted-foreground\">@{user.username}</div>\n                          <div className=\"flex gap-2 mt-1\">\n                            {user.isAdmin && (\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                <Shield className=\"w-3 h-3 mr-1\" />\n                                Admin\n                              </Badge>\n                            )}\n                            {user.lastLogin && (\n                              <Badge variant=\"outline\" className=\"text-xs\">\n                                <Calendar className=\"w-3 h-3 mr-1\" />\n                                {new Date(user.lastLogin).toLocaleDateString()}\n                              </Badge>\n                            )}\n                          </div>\n                        </div>\n                      </div>\n                      {user.username !== currentUser?.username && (\n                        <Button\n                          onClick={() => handleDeleteUser(user)}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"text-destructive hover:text-destructive\"\n                        >\n                          <Trash2 className=\"w-4 h-4\" />\n                        </Button>\n                      )}\n                    </div>\n                  </Card>\n                ))}\n              </div>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":19111},"client/src/components/apps/AchievementNotification.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Trophy, X, Star } from 'lucide-react';\nimport { playSounds } from '@/lib/soundManager';\n\ninterface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\ninterface AchievementNotificationProps {\n  achievement: Achievement | null;\n  onClose: () => void;\n}\n\nexport const AchievementNotification: FC<AchievementNotificationProps> = ({ achievement, onClose }) => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    if (achievement) {\n      setIsVisible(true);\n      playSounds.achievement();\n      // Auto-hide after 5 seconds\n      const timer = setTimeout(() => {\n        setIsVisible(false);\n        setTimeout(onClose, 300); // Wait for animation\n      }, 5000);\n      \n      return () => clearTimeout(timer);\n    }\n  }, [achievement, onClose]);\n\n  if (!achievement) return null;\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity) {\n      case 'common': return 'border-gray-400 bg-gray-50';\n      case 'rare': return 'border-blue-400 bg-blue-50';\n      case 'epic': return 'border-purple-400 bg-purple-50';\n      case 'legendary': return 'border-yellow-400 bg-yellow-50';\n      default: return 'border-gray-400 bg-gray-50';\n    }\n  };\n\n  const getRarityIcon = (rarity: string) => {\n    switch (rarity) {\n      case 'legendary': return <Star className=\"w-4 h-4 text-yellow-500\" />;\n      default: return <Trophy className=\"w-4 h-4 text-green-500\" />;\n    }\n  };\n\n  return (\n    <div className={`fixed top-20 right-4 z-50 transition-all duration-300 ${\n      isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'\n    }`}>\n      <Card className={`p-4 w-80 border-2 ${getRarityColor(achievement.rarity)} shadow-lg`}>\n        <div className=\"flex items-start gap-3\">\n          <div className=\"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0\">\n            <i className={`${achievement.icon} text-lg text-green-600`} />\n          </div>\n          \n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <span className=\"font-bold text-green-700\">Achievement Unlocked!</span>\n              {getRarityIcon(achievement.rarity)}\n            </div>\n            \n            <h4 className=\"font-semibold text-foreground mb-1\">\n              {achievement.name}\n            </h4>\n            \n            <p className=\"text-sm text-muted-foreground\">\n              {achievement.description}\n            </p>\n            \n            <div className=\"flex items-center justify-between mt-2\">\n              <span className={`text-xs px-2 py-1 rounded capitalize font-medium ${\n                achievement.rarity === 'common' ? 'bg-gray-200 text-gray-700' :\n                achievement.rarity === 'rare' ? 'bg-blue-200 text-blue-700' :\n                achievement.rarity === 'epic' ? 'bg-purple-200 text-purple-700' :\n                'bg-yellow-200 text-yellow-700'\n              }`}>\n                {achievement.rarity}\n              </span>\n              \n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => {\n                  setIsVisible(false);\n                  setTimeout(onClose, 300);\n                }}\n                className=\"h-6 w-6 p-0\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n      </Card>\n    </div>\n  );\n};","size_bytes":3653},"client/src/components/apps/Achievements.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Button } from '@/components/ui/button';\nimport { Trophy, Star, Target, Clock, Package, Terminal, Globe, Folder } from 'lucide-react';\n\ninterface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  category: 'usage' | 'exploration' | 'productivity' | 'mastery';\n  type: 'count' | 'streak' | 'milestone' | 'time';\n  target: number;\n  current: number;\n  unlocked: boolean;\n  unlockedAt?: Date;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\nconst ACHIEVEMENTS_DATA: Omit<Achievement, 'current' | 'unlocked' | 'unlockedAt'>[] = [\n  {\n    id: 'first-launch',\n    name: 'Welcome to WebOS',\n    description: 'Launch your first application',\n    icon: 'fas fa-rocket',\n    category: 'usage',\n    type: 'milestone',\n    target: 1,\n    rarity: 'common'\n  },\n  {\n    id: 'app-explorer',\n    name: 'App Explorer',\n    description: 'Launch 5 different applications',\n    icon: 'fas fa-compass',\n    category: 'exploration',\n    type: 'count',\n    target: 5,\n    rarity: 'common'\n  },\n  {\n    id: 'power-user',\n    name: 'Power User',\n    description: 'Launch 25 applications total',\n    icon: 'fas fa-bolt',\n    category: 'usage',\n    type: 'count',\n    target: 25,\n    rarity: 'rare'\n  },\n  {\n    id: 'terminal-master',\n    name: 'Terminal Master',\n    description: 'Use the terminal 10 times',\n    icon: 'fas fa-terminal',\n    category: 'mastery',\n    type: 'count',\n    target: 10,\n    rarity: 'rare'\n  },\n  {\n    id: 'web-surfer',\n    name: 'Web Surfer',\n    description: 'Browse 20 different websites',\n    icon: 'fas fa-globe',\n    category: 'exploration',\n    type: 'count',\n    target: 20,\n    rarity: 'common'\n  },\n  {\n    id: 'package-collector',\n    name: 'Software Collector',\n    description: 'Install 5 applications from package manager',\n    icon: 'fas fa-download',\n    category: 'exploration',\n    type: 'count',\n    target: 5,\n    rarity: 'rare'\n  },\n  {\n    id: 'organizer',\n    name: 'Desktop Organizer',\n    description: 'Create your first folder',\n    icon: 'fas fa-folder',\n    category: 'productivity',\n    type: 'milestone',\n    target: 1,\n    rarity: 'common'\n  },\n  {\n    id: 'speed-launcher',\n    name: 'Speed Launcher',\n    description: 'Use quick launch (Ctrl+Space) 10 times',\n    icon: 'fas fa-search',\n    category: 'productivity',\n    type: 'count',\n    target: 10,\n    rarity: 'rare'\n  },\n  {\n    id: 'multitasker',\n    name: 'Multitasker',\n    description: 'Have 5 applications open simultaneously',\n    icon: 'fas fa-layer-group',\n    category: 'productivity',\n    type: 'milestone',\n    target: 5,\n    rarity: 'epic'\n  },\n  {\n    id: 'browser-master',\n    name: 'Browser Master',\n    description: 'Use the web browser 20 times',\n    icon: 'fas fa-globe',\n    category: 'mastery',\n    type: 'count',\n    target: 20,\n    rarity: 'rare'\n  },\n  {\n    id: 'calculator-wizard',\n    name: 'Calculator Wizard',\n    description: 'Perform 50 calculations',\n    icon: 'fas fa-calculator',\n    category: 'mastery',\n    type: 'count',\n    target: 50,\n    rarity: 'epic'\n  },\n  {\n    id: 'text-master',\n    name: 'Text Master',\n    description: 'Create 10 notes in NotePad',\n    icon: 'fas fa-file-alt',\n    category: 'productivity',\n    type: 'count',\n    target: 10,\n    rarity: 'rare'\n  }\n];\n\nexport const Achievements: FC = () => {\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\n  const [filter, setFilter] = useState<'all' | 'unlocked' | 'locked'>('all');\n  const [categoryFilter, setCategoryFilter] = useState<string>('all');\n\n  useEffect(() => {\n    const loadAchievements = () => {\n      const stored = localStorage.getItem('webos-achievements');\n      \n      if (stored) {\n        setAchievements(JSON.parse(stored));\n      } else {\n        const initialAchievements = ACHIEVEMENTS_DATA.map(achievement => ({\n          ...achievement,\n          current: 0,\n          unlocked: false\n        }));\n        setAchievements(initialAchievements);\n        localStorage.setItem('webos-achievements', JSON.stringify(initialAchievements));\n      }\n    };\n\n    loadAchievements();\n  }, []);\n\n  const filteredAchievements = achievements.filter(achievement => {\n    const statusMatch = filter === 'all' || \n                       (filter === 'unlocked' && achievement.unlocked) ||\n                       (filter === 'locked' && !achievement.unlocked);\n    \n    const categoryMatch = categoryFilter === 'all' || achievement.category === categoryFilter;\n    \n    return statusMatch && categoryMatch;\n  });\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity) {\n      case 'common': return 'text-gray-600 border-gray-200';\n      case 'rare': return 'text-blue-600 border-blue-200';\n      case 'epic': return 'text-purple-600 border-purple-200';\n      case 'legendary': return 'text-yellow-600 border-yellow-200';\n      default: return 'text-gray-600 border-gray-200';\n    }\n  };\n\n  const getRarityBg = (rarity: string) => {\n    switch (rarity) {\n      case 'common': return 'bg-gray-50';\n      case 'rare': return 'bg-blue-50';\n      case 'epic': return 'bg-purple-50';\n      case 'legendary': return 'bg-yellow-50';\n      default: return 'bg-gray-50';\n    }\n  };\n\n  const unlockedCount = achievements.filter(a => a.unlocked).length;\n  const totalCount = achievements.length;\n  const completionPercentage = totalCount > 0 ? (unlockedCount / totalCount) * 100 : 0;\n\n  const categories = ['all', 'usage', 'exploration', 'productivity', 'mastery'];\n\n  return (\n    <div className=\"h-full flex flex-col bg-background p-6\">\n      {/* Header */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <div className=\"w-12 h-12 rounded-full bg-yellow-100 flex items-center justify-center\">\n            <Trophy className=\"w-6 h-6 text-yellow-600\" />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold\">Achievements</h1>\n            <p className=\"text-muted-foreground\">Track your progress and unlock rewards</p>\n          </div>\n        </div>\n\n        {/* Progress Overview */}\n        <Card className=\"p-4 mb-4\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"font-semibold\">Overall Progress</span>\n            <span className=\"text-sm text-muted-foreground\">{unlockedCount}/{totalCount}</span>\n          </div>\n          <Progress value={completionPercentage} className=\"h-3 mb-2\" />\n          <div className=\"grid grid-cols-4 gap-4 text-center\">\n            <div>\n              <div className=\"text-lg font-bold text-gray-600\">{achievements.filter(a => a.rarity === 'common' && a.unlocked).length}</div>\n              <div className=\"text-xs text-muted-foreground\">Common</div>\n            </div>\n            <div>\n              <div className=\"text-lg font-bold text-blue-600\">{achievements.filter(a => a.rarity === 'rare' && a.unlocked).length}</div>\n              <div className=\"text-xs text-muted-foreground\">Rare</div>\n            </div>\n            <div>\n              <div className=\"text-lg font-bold text-purple-600\">{achievements.filter(a => a.rarity === 'epic' && a.unlocked).length}</div>\n              <div className=\"text-xs text-muted-foreground\">Epic</div>\n            </div>\n            <div>\n              <div className=\"text-lg font-bold text-yellow-600\">{achievements.filter(a => a.rarity === 'legendary' && a.unlocked).length}</div>\n              <div className=\"text-xs text-muted-foreground\">Legendary</div>\n            </div>\n          </div>\n        </Card>\n\n        {/* Filters */}\n        <div className=\"flex flex-wrap gap-2 mb-4\">\n          <div className=\"flex gap-1\">\n            {['all', 'unlocked', 'locked'].map(status => (\n              <Button\n                key={status}\n                variant={filter === status ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter(status as any)}\n                className=\"capitalize\"\n              >\n                {status} {status === 'all' ? `(${totalCount})` : \n                         status === 'unlocked' ? `(${unlockedCount})` : \n                         `(${totalCount - unlockedCount})`}\n              </Button>\n            ))}\n          </div>\n          <div className=\"flex gap-1\">\n            {categories.map(category => (\n              <Button\n                key={category}\n                variant={categoryFilter === category ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setCategoryFilter(category)}\n                className=\"capitalize\"\n              >\n                {category}\n              </Button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Achievements Grid */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredAchievements.map(achievement => (\n            <Card \n              key={achievement.id} \n              className={`p-4 transition-all hover:shadow-md ${\n                achievement.unlocked ? 'border-green-200 bg-green-50/50' : 'border-gray-200'\n              } ${getRarityColor(achievement.rarity)}`}\n            >\n              <div className=\"flex items-start gap-3\">\n                <div className={`w-12 h-12 rounded-full flex items-center justify-center ${\n                  achievement.unlocked ? 'bg-green-100' : 'bg-gray-100'\n                } ${getRarityBg(achievement.rarity)}`}>\n                  <i className={`${achievement.icon} text-lg ${\n                    achievement.unlocked ? 'text-green-600' : 'text-gray-400'\n                  }`} />\n                </div>\n                \n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <h4 className={`font-semibold truncate ${\n                      achievement.unlocked ? 'text-foreground' : 'text-muted-foreground'\n                    }`}>\n                      {achievement.name}\n                    </h4>\n                    {achievement.unlocked && <Trophy className=\"w-4 h-4 text-yellow-500 flex-shrink-0\" />}\n                  </div>\n                  \n                  <div className=\"flex items-center gap-2 mb-2\">\n                    <Badge variant=\"outline\" className={`text-xs ${getRarityColor(achievement.rarity)}`}>\n                      {achievement.rarity}\n                    </Badge>\n                    <Badge variant=\"secondary\" className=\"text-xs capitalize\">\n                      {achievement.category}\n                    </Badge>\n                  </div>\n                  \n                  <p className={`text-sm mb-3 ${\n                    achievement.unlocked ? 'text-foreground' : 'text-muted-foreground'\n                  }`}>\n                    {achievement.description}\n                  </p>\n                  \n                  {!achievement.unlocked && (\n                    <div className=\"space-y-1\">\n                      <div className=\"flex justify-between text-xs\">\n                        <span>Progress</span>\n                        <span>{achievement.current}/{achievement.target}</span>\n                      </div>\n                      <Progress value={(achievement.current / achievement.target) * 100} className=\"h-2\" />\n                    </div>\n                  )}\n                  \n                  {achievement.unlocked && achievement.unlockedAt && (\n                    <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                      <Clock className=\"w-3 h-3\" />\n                      <span>Unlocked {new Date(achievement.unlockedAt).toLocaleDateString()}</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            </Card>\n          ))}\n        </div>\n\n        {filteredAchievements.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Target className=\"w-16 h-16 mx-auto mb-4 text-muted-foreground opacity-50\" />\n            <h3 className=\"text-lg font-semibold mb-2\">No achievements found</h3>\n            <p className=\"text-muted-foreground\">Try adjusting your filters</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":12363},"client/src/components/apps/AdvancedDashboard.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { X, TrendingUp, DollarSign, Cloud, Newspaper, Cpu, Activity, RefreshCw } from 'lucide-react';\n\ninterface DashboardData {\n  weather: any;\n  stocks: any[];\n  crypto: any[];\n  news: any[];\n  system: any;\n}\n\nexport const AdvancedDashboard: FC = () => {\n  const [data, setData] = useState<DashboardData>({\n    weather: null,\n    stocks: [],\n    crypto: [],\n    news: [],\n    system: null\n  });\n  const [loading, setLoading] = useState(false);\n  const [lastUpdate, setLastUpdate] = useState(new Date());\n\n  useEffect(() => {\n    fetchAllData();\n    const interval = setInterval(fetchAllData, 300000); // Update every 5 minutes\n    return () => clearInterval(interval);\n  }, []);\n\n  const fetchAllData = async () => {\n    setLoading(true);\n    try {\n      const [weatherRes, stocksRes, cryptoRes, newsRes] = await Promise.all([\n        fetch('/api/weather?location=New York'),\n        fetch('/api/stocks?symbol=AAPL'),\n        fetch('/api/crypto'),\n        fetch('/api/news?category=technology')\n      ]);\n\n      const weatherData = weatherRes.ok ? await weatherRes.json() : null;\n      const stocksData = stocksRes.ok ? await stocksRes.json() : null;\n      const cryptoData = cryptoRes.ok ? await cryptoRes.json() : [];\n      const newsData = newsRes.ok ? await newsRes.json() : [];\n\n      setData({\n        weather: weatherData,\n        stocks: stocksData ? [stocksData] : [],\n        crypto: cryptoData.slice(0, 5),\n        news: newsData.slice(0, 3),\n        system: {\n          cpu: Math.floor(Math.random() * 100),\n          memory: Math.floor(Math.random() * 100),\n          disk: 78,\n          uptime: '2h 45m'\n        }\n      });\n      setLastUpdate(new Date());\n    } catch (error) {\n      console.error('Dashboard data fetch error:', error);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-background text-foreground\">\n      <div className=\"bg-gradient-to-r from-blue-600 to-purple-600 px-4 py-2 flex items-center justify-between text-white\">\n        <div className=\"flex items-center space-x-2\">\n          <Activity className=\"w-5 h-5\" />\n          <span className=\"font-medium\">WebOS Command Center</span>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <span className=\"text-sm opacity-80\">Last updated: {lastUpdate.toLocaleTimeString()}</span>\n          <Button \n            onClick={fetchAllData} \n            size=\"sm\" \n            variant=\"ghost\" \n            className=\"text-white hover:bg-white/20\"\n            disabled={loading}\n          >\n            <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4 mb-6\">\n          {/* Weather Widget */}\n          <div className=\"bg-gradient-to-br from-blue-500 to-cyan-600 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <Cloud className=\"w-6 h-6\" />\n              <span className=\"text-sm font-medium\">Weather</span>\n            </div>\n            {data.weather ? (\n              <>\n                <div className=\"text-2xl font-bold\">{data.weather.temperature}°C</div>\n                <div className=\"text-sm opacity-80\">{data.weather.location}</div>\n                <div className=\"text-sm opacity-60\">{data.weather.condition}</div>\n              </>\n            ) : (\n              <div className=\"text-sm opacity-60\">Loading...</div>\n            )}\n          </div>\n\n          {/* Stock Widget */}\n          <div className=\"bg-gradient-to-br from-green-500 to-emerald-600 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <TrendingUp className=\"w-6 h-6\" />\n              <span className=\"text-sm font-medium\">Stocks</span>\n            </div>\n            {data.stocks.length > 0 && data.stocks[0][\"Global Quote\"] ? (\n              <>\n                <div className=\"text-2xl font-bold\">\n                  ${parseFloat(data.stocks[0][\"Global Quote\"][\"05. price\"]).toFixed(2)}\n                </div>\n                <div className=\"text-sm opacity-80\">AAPL</div>\n                <div className=\"text-sm opacity-60\">\n                  {data.stocks[0][\"Global Quote\"][\"10. change percent\"]}\n                </div>\n              </>\n            ) : (\n              <div className=\"text-sm opacity-60\">Loading...</div>\n            )}\n          </div>\n\n          {/* Crypto Widget */}\n          <div className=\"bg-gradient-to-br from-yellow-500 to-orange-600 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <DollarSign className=\"w-6 h-6\" />\n              <span className=\"text-sm font-medium\">Crypto</span>\n            </div>\n            {data.crypto.length > 0 ? (\n              <>\n                <div className=\"text-2xl font-bold\">{data.crypto.length}</div>\n                <div className=\"text-sm opacity-80\">Assets Tracked</div>\n                <div className=\"text-sm opacity-60\">\n                  Top: {data.crypto[0]?.asset_id || 'BTC'}\n                </div>\n              </>\n            ) : (\n              <div className=\"text-sm opacity-60\">Loading...</div>\n            )}\n          </div>\n\n          {/* System Widget */}\n          <div className=\"bg-gradient-to-br from-purple-500 to-pink-600 p-4 rounded-lg\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <Cpu className=\"w-6 h-6\" />\n              <span className=\"text-sm font-medium\">System</span>\n            </div>\n            {data.system ? (\n              <>\n                <div className=\"text-2xl font-bold\">{data.system.cpu}%</div>\n                <div className=\"text-sm opacity-80\">CPU Usage</div>\n                <div className=\"text-sm opacity-60\">Uptime: {data.system.uptime}</div>\n              </>\n            ) : (\n              <div className=\"text-sm opacity-60\">Loading...</div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4\">\n          {/* Live News Feed */}\n          <div className=\"bg-gray-800 p-4 rounded-lg\">\n            <div className=\"flex items-center space-x-2 mb-4\">\n              <Newspaper className=\"w-5 h-5 text-red-500\" />\n              <h3 className=\"font-semibold\">Latest Tech News</h3>\n            </div>\n            <div className=\"space-y-3\">\n              {data.news.length > 0 ? (\n                data.news.map((article, index) => (\n                  <div key={index} className=\"border-l-2 border-red-500 pl-3\">\n                    <h4 className=\"text-sm font-medium line-clamp-2\">{article.title}</h4>\n                    <p className=\"text-xs text-gray-400 mt-1\">{article.source?.name}</p>\n                  </div>\n                ))\n              ) : (\n                <div className=\"text-gray-400 text-sm\">Loading news...</div>\n              )}\n            </div>\n          </div>\n\n          {/* Market Overview */}\n          <div className=\"bg-gray-800 p-4 rounded-lg\">\n            <div className=\"flex items-center space-x-2 mb-4\">\n              <TrendingUp className=\"w-5 h-5 text-green-500\" />\n              <h3 className=\"font-semibold\">Market Overview</h3>\n            </div>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm\">S&P 500</span>\n                <span className=\"text-green-400 text-sm font-medium\">+0.75%</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm\">NASDAQ</span>\n                <span className=\"text-green-400 text-sm font-medium\">+1.23%</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm\">DOW</span>\n                <span className=\"text-red-400 text-sm font-medium\">-0.45%</span>\n              </div>\n              {data.crypto.slice(0, 3).map((crypto, index) => (\n                <div key={index} className=\"flex justify-between items-center\">\n                  <span className=\"text-sm\">{crypto.asset_id}</span>\n                  <span className=\"text-yellow-400 text-sm font-medium\">\n                    {crypto.price_usd ? `$${crypto.price_usd.toFixed(2)}` : 'N/A'}\n                  </span>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* System Metrics */}\n          <div className=\"bg-gray-800 p-4 rounded-lg\">\n            <div className=\"flex items-center space-x-2 mb-4\">\n              <Cpu className=\"w-5 h-5 text-blue-500\" />\n              <h3 className=\"font-semibold\">System Metrics</h3>\n            </div>\n            {data.system && (\n              <div className=\"space-y-3\">\n                <div>\n                  <div className=\"flex justify-between text-sm mb-1\">\n                    <span>CPU</span>\n                    <span>{data.system.cpu}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                    <div \n                      className=\"bg-blue-600 h-2 rounded-full\"\n                      style={{ width: `${data.system.cpu}%` }}\n                    />\n                  </div>\n                </div>\n                <div>\n                  <div className=\"flex justify-between text-sm mb-1\">\n                    <span>Memory</span>\n                    <span>{data.system.memory}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                    <div \n                      className=\"bg-green-600 h-2 rounded-full\"\n                      style={{ width: `${data.system.memory}%` }}\n                    />\n                  </div>\n                </div>\n                <div>\n                  <div className=\"flex justify-between text-sm mb-1\">\n                    <span>Disk</span>\n                    <span>{data.system.disk}%</span>\n                  </div>\n                  <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                    <div \n                      className=\"bg-purple-600 h-2 rounded-full\"\n                      style={{ width: `${data.system.disk}%` }}\n                    />\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-400 pt-2\">\n                  Uptime: {data.system.uptime}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Quick Actions */}\n        <div className=\"mt-6 bg-gray-800 p-4 rounded-lg\">\n          <h3 className=\"font-semibold mb-4\">Quick Actions</h3>\n          <div className=\"grid grid-cols-6 gap-3\">\n            <Button className=\"bg-blue-600 hover:bg-blue-700\">\n              Launch Terminal\n            </Button>\n            <Button className=\"bg-green-600 hover:bg-green-700\">\n              Open Files\n            </Button>\n            <Button className=\"bg-purple-600 hover:bg-purple-700\">\n              System Monitor\n            </Button>\n            <Button className=\"bg-yellow-600 hover:bg-yellow-700\">\n              Crypto Tracker\n            </Button>\n            <Button className=\"bg-red-600 hover:bg-red-700\">\n              News Center\n            </Button>\n            <Button className=\"bg-indigo-600 hover:bg-indigo-700\">\n              Weather\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":11616},"client/src/components/apps/AppStore.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Search, Download, Star, Award, Heart, Share, Grid3X3, List, Filter, X, Clock, TrendingUp, Users, Terminal } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface AppInfo {\n  id: string;\n  name: string;\n  developer: string;\n  description: string;\n  longDescription: string;\n  version: string;\n  size: string;\n  category: 'productivity' | 'games' | 'utilities' | 'creative' | 'social' | 'developer';\n  price: number; // 0 for free\n  rating: number;\n  reviewCount: number;\n  screenshots: string[];\n  icon: string;\n  installed: boolean;\n  featured: boolean;\n  editorChoice: boolean;\n  releaseDate: string;\n  ageRating: string;\n  requirements: string[];\n}\n\nconst featuredApps: AppInfo[] = [\n  {\n    id: 'weather-app',\n    name: 'WeatherPro',\n    developer: 'WebOS Studio',\n    description: 'Beautiful weather forecasts with radar and alerts',\n    longDescription: 'Get accurate weather forecasts, severe weather alerts, and interactive radar maps. Features include hourly and 10-day forecasts, weather widgets, and location-based notifications.',\n    version: '2.1.0',\n    size: '45.2 MB',\n    category: 'utilities',\n    price: 0,\n    rating: 4.8,\n    reviewCount: 2847,\n    screenshots: [],\n    icon: 'cloud',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-01-15',\n    ageRating: '4+',\n    requirements: ['macOS 11.0 or later']\n  },\n  {\n    id: 'tetris',\n    name: 'Tetris Classic',\n    developer: 'Puzzle Games Inc',\n    description: 'The timeless puzzle game everyone loves',\n    longDescription: 'Experience the classic Tetris gameplay with modern graphics and smooth controls. Multiple game modes, achievements, and leaderboards included.',\n    version: '1.4.2',\n    size: '12.8 MB',\n    category: 'games',\n    price: 4.99,\n    rating: 4.9,\n    reviewCount: 15632,\n    screenshots: [],\n    icon: 'gamepad',\n    installed: false,\n    featured: true,\n    editorChoice: false,\n    releaseDate: '2024-01-10',\n    ageRating: '4+',\n    requirements: ['macOS 10.15 or later']\n  },\n  {\n    id: 'office-suite',\n    name: 'Office Pro',\n    developer: 'Productivity Labs',\n    description: 'Complete office suite for all your productivity needs',\n    longDescription: 'Full-featured office suite with word processing, spreadsheets, and presentations. Compatible with Microsoft Office formats and includes cloud sync.',\n    version: '4.1.2',\n    size: '128.5 MB',\n    category: 'productivity',\n    price: 19.99,\n    rating: 4.7,\n    reviewCount: 8943,\n    screenshots: [],\n    icon: 'briefcase',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-01-20',\n    ageRating: '4+',\n    requirements: ['macOS 12.0 or later']\n  }\n];\n\nconst allApps: AppInfo[] = [\n  ...featuredApps,\n  {\n    id: 'email-client',\n    name: 'Mail Master',\n    developer: 'Communication Co',\n    description: 'Powerful email client with smart organization',\n    longDescription: 'Advanced email management with smart filters, unified inbox, and powerful search. Supports multiple accounts and advanced security features.',\n    version: '3.2.1',\n    size: '67.3 MB',\n    category: 'productivity',\n    price: 9.99,\n    rating: 4.6,\n    reviewCount: 5621,\n    screenshots: [],\n    icon: 'email',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-18',\n    ageRating: '4+',\n    requirements: ['macOS 11.0 or later']\n  },\n  {\n    id: 'video-editor',\n    name: 'Video Studio Pro',\n    developer: 'Creative Labs',\n    description: 'Professional video editing made simple',\n    longDescription: 'Create stunning videos with professional-grade editing tools. Features include 4K support, color grading, audio mixing, and hundreds of effects.',\n    version: '2.3.4',\n    size: '245.7 MB',\n    category: 'creative',\n    price: 29.99,\n    rating: 4.8,\n    reviewCount: 3247,\n    screenshots: [],\n    icon: 'video',\n    installed: false,\n    featured: false,\n    editorChoice: true,\n    releaseDate: '2024-01-13',\n    ageRating: '4+',\n    requirements: ['macOS 12.0 or later', '8GB RAM']\n  },\n  {\n    id: 'roblox',\n    name: 'Roblox',\n    developer: 'Roblox Corporation',\n    description: 'Powering Imagination',\n    longDescription: 'Join millions of players in immersive 3D experiences created by a global community. Play, create, and share with friends in endless virtual worlds.',\n    version: '2.598.566',\n    size: '187.2 MB',\n    category: 'games',\n    price: 0,\n    rating: 4.3,\n    reviewCount: 125847,\n    screenshots: [],\n    icon: 'gamepad',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-12',\n    ageRating: '9+',\n    requirements: ['macOS 10.13 or later']\n  },\n  {\n    id: 'spreadsheet',\n    name: 'Numbers Pro',\n    developer: 'Data Analytics Inc',\n    description: 'Advanced spreadsheet application',\n    longDescription: 'Powerful spreadsheet app with advanced formulas, charts, and data analysis tools. Perfect for business and personal use.',\n    version: '1.8.3',\n    size: '89.4 MB',\n    category: 'productivity',\n    price: 14.99,\n    rating: 4.5,\n    reviewCount: 2156,\n    screenshots: [],\n    icon: 'spreadsheet',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-17',\n    ageRating: '4+',\n    requirements: ['macOS 11.0 or later']\n  },\n  {\n    id: 'call-of-duty',\n    name: 'Call of Duty: Modern Warfare',\n    developer: 'Activision',\n    description: 'Epic first-person shooter with multiplayer combat',\n    longDescription: 'Experience the most realistic and intense Call of Duty ever created. Features include campaign mode, multiplayer battles, battle royale, weapon customization, clan system, and competitive ranked matches with authentic military combat.',\n    version: '1.24.0',\n    size: '187.2 GB',\n    category: 'games',\n    price: 59.99,\n    rating: 4.7,\n    reviewCount: 89432,\n    screenshots: [],\n    icon: 'gamepad',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-01-05',\n    ageRating: '17+',\n    requirements: ['macOS 12.0 or later', '16GB RAM', 'Dedicated GPU']\n  },\n  {\n    id: 'multiplayer-shooter',\n    name: 'Battle Arena FPS',\n    developer: 'WebOS Games',\n    description: 'Real-time multiplayer first-person shooter with authentic combat mechanics',\n    longDescription: 'Experience intense multiplayer combat with real movement, shooting, and tactical gameplay. Features include real-time multiplayer battles, weapon systems, health management, respawn mechanics, team-based combat, and authentic FPS controls with WASD movement and mouse aiming.',\n    version: '2.1.0',\n    size: '4.2 GB',\n    category: 'games',\n    price: 29.99,\n    rating: 4.8,\n    reviewCount: 12847,\n    screenshots: [],\n    icon: 'gamepad',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-01-25',\n    ageRating: '16+',\n    requirements: ['macOS 11.0 or later', '8GB RAM', 'Graphics Card']\n  },\n  {\n    id: 'video-tube',\n    name: 'VideoTube',\n    developer: 'WebOS Media',\n    description: 'Create, share, and discover videos with the world',\n    longDescription: 'VideoTube is a comprehensive video sharing platform where users can upload, watch, and interact with content. Features include multiple user accounts, video uploading, commenting system, likes/dislikes, subscriptions, search functionality, and personalized recommendations.',\n    version: '3.4.1',\n    size: '67.8 MB',\n    category: 'social',\n    price: 0,\n    rating: 4.6,\n    reviewCount: 45289,\n    screenshots: [],\n    icon: 'video',\n    installed: false,\n    featured: true,\n    editorChoice: false,\n    releaseDate: '2024-01-28',\n    ageRating: '13+',\n    requirements: ['macOS 10.15 or later', '4GB RAM']\n  },\n  {\n    id: 'system-recovery',\n    name: 'Recovery Tool',\n    developer: 'WebOS Core',\n    description: 'System recovery and repair utilities',\n    longDescription: 'Advanced system recovery tools for diagnosing and repairing WebOS issues. Includes system restore, file recovery, boot repair, and emergency recovery features.',\n    version: '1.0.0',\n    size: '23.4 MB',\n    category: 'utilities',\n    price: 0,\n    rating: 4.5,\n    reviewCount: 1247,\n    screenshots: [],\n    icon: 'life-buoy',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-01',\n    ageRating: '4+',\n    requirements: ['WebOS 1.0 or later']\n  },\n  {\n    id: 'system-diagnostics',\n    name: 'System Diagnostics',\n    developer: 'WebOS Core',\n    description: 'Comprehensive system health monitoring',\n    longDescription: 'Monitor system health, performance metrics, and detect potential issues before they become problems. Includes hardware diagnostics, software analysis, and optimization recommendations.',\n    version: '1.2.1',\n    size: '18.7 MB',\n    category: 'utilities',\n    price: 0,\n    rating: 4.7,\n    reviewCount: 856,\n    screenshots: [],\n    icon: 'stethoscope',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-15',\n    ageRating: '4+',\n    requirements: ['WebOS 1.0 or later']\n  },\n  {\n    id: 'crypto-tracker',\n    name: 'CryptoWatch',\n    developer: 'FinTech Solutions',\n    description: 'Real-time cryptocurrency prices and market analysis',\n    longDescription: 'Track live cryptocurrency prices, market cap, trading volume, and price charts. Features include portfolio tracking, price alerts, market news, and detailed analytics for Bitcoin, Ethereum, and hundreds of other cryptocurrencies.',\n    version: '2.3.1',\n    size: '34.8 MB',\n    category: 'utilities',\n    price: 0,\n    rating: 4.6,\n    reviewCount: 5847,\n    screenshots: [],\n    icon: 'trending-up',\n    installed: false,\n    featured: true,\n    editorChoice: false,\n    releaseDate: '2024-01-12',\n    ageRating: '4+',\n    requirements: ['WebOS 1.0 or later', 'Internet connection']\n  },\n  {\n    id: 'game-center',\n    name: 'GameHub',\n    developer: 'Gaming Studios',\n    description: 'Ultimate gaming platform with hundreds of games',\n    longDescription: 'Access a vast library of games including puzzle games, arcade classics, strategy games, and multiplayer experiences. Features include achievement tracking, leaderboards, cloud saves, and social gaming features.',\n    version: '3.1.4',\n    size: '156.2 MB',\n    category: 'games',\n    price: 0,\n    rating: 4.8,\n    reviewCount: 12847,\n    screenshots: [],\n    icon: 'gamepad-2',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-01-18',\n    ageRating: '12+',\n    requirements: ['WebOS 1.0 or later', '4GB RAM', 'Graphics acceleration']\n  },\n  {\n    id: 'news-center',\n    name: 'NewsReader Pro',\n    developer: 'Media Corp',\n    description: 'Breaking news and headlines from around the world',\n    longDescription: 'Stay informed with real-time news from trusted sources worldwide. Features include customizable news feeds, breaking news alerts, offline reading, article bookmarking, and news from categories like technology, sports, politics, and entertainment.',\n    version: '1.8.2',\n    size: '28.9 MB',\n    category: 'social',\n    price: 0,\n    rating: 4.4,\n    reviewCount: 3926,\n    screenshots: [],\n    icon: 'newspaper',\n    installed: false,\n    featured: false,\n    editorChoice: false,\n    releaseDate: '2024-01-22',\n    ageRating: '4+',\n    requirements: ['WebOS 1.0 or later', 'Internet connection']\n  },\n  {\n    id: 'video-tube',\n    name: 'VideoTube',\n    developer: 'WebOS Media',\n    description: 'Create, share, and discover videos with diverse content',\n    longDescription: 'VideoTube features a vast collection of content including Linux tutorials, JavaScript and TypeScript programming courses, custom programming language development, gaming content from popular creators like Sampey and DanTDM, Roblox gameplay, Team Fortress 2 SFM animations, and much more.',\n    version: '4.2.0',\n    size: '89.4 MB',\n    category: 'social',\n    price: 0,\n    rating: 4.7,\n    reviewCount: 18547,\n    screenshots: [],\n    icon: 'video',\n    installed: false,\n    featured: true,\n    editorChoice: true,\n    releaseDate: '2024-02-01',\n    ageRating: '13+',\n    requirements: ['WebOS 1.0 or later', 'Internet connection', '2GB RAM']\n  }\n];\n\nexport const AppStore: FC = () => {\n  const [apps, setApps] = useState<AppInfo[]>(allApps);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [selectedApp, setSelectedApp] = useState<AppInfo | null>(null);\n  const [installingApps, setInstallingApps] = useState<Set<string>>(new Set());\n  const [uninstallingApps, setUninstallingApps] = useState<Set<string>>(new Set());\n  const { toast } = useToast();\n\n  // Real app installation system\n  const installApp = async (app: AppInfo) => {\n    setInstallingApps(prev => {\n      const newSet = new Set(prev);\n      newSet.add(app.id);\n      return newSet;\n    });\n    \n    try {\n      // Simulate installation process\n      await new Promise(resolve => setTimeout(resolve, 2000));\n      \n      // Add app to desktop\n      const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n      const newApp = {\n        id: app.id,\n        name: app.name,\n        icon: app.icon,\n        description: app.description\n      };\n      \n      desktopApps.push(newApp);\n      localStorage.setItem('desktop-apps', JSON.stringify(desktopApps));\n      \n      // Update app state\n      setApps(prev => prev.map(a => \n        a.id === app.id ? { ...a, installed: true } : a\n      ));\n      \n      // Trigger desktop refresh\n      window.dispatchEvent(new CustomEvent('appsUpdated'));\n      \n      toast({\n        title: 'Installation Complete',\n        description: `${app.name} has been installed successfully`\n      });\n      \n    } catch (error) {\n      toast({\n        title: 'Installation Failed',\n        description: 'An error occurred during installation',\n        variant: 'destructive'\n      });\n    } finally {\n      setInstallingApps(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(app.id);\n        return newSet;\n      });\n    }\n  };\n\n  const uninstallApp = async (app: AppInfo) => {\n    setUninstallingApps(prev => {\n      const newSet = new Set(prev);\n      newSet.add(app.id);\n      return newSet;\n    });\n    \n    try {\n      await new Promise(resolve => setTimeout(resolve, 1000));\n      \n      // Remove app from desktop\n      const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n      const filteredApps = desktopApps.filter((a: any) => a.id !== app.id);\n      localStorage.setItem('desktop-apps', JSON.stringify(filteredApps));\n      \n      // Update app state\n      setApps(prev => prev.map(a => \n        a.id === app.id ? { ...a, installed: false } : a\n      ));\n      \n      // Trigger desktop refresh\n      window.dispatchEvent(new CustomEvent('appsUpdated'));\n      \n      toast({\n        title: 'Uninstalled',\n        description: `${app.name} has been removed`\n      });\n      \n    } catch (error) {\n      toast({\n        title: 'Uninstall Failed',\n        description: 'An error occurred during uninstallation',\n        variant: 'destructive'\n      });\n    } finally {\n      setUninstallingApps(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(app.id);\n        return newSet;\n      });\n    }\n  };\n\n  // Check which apps are already installed on desktop\n  useEffect(() => {\n    const checkInstalledApps = () => {\n      const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n      const installedAppIds = new Set(desktopApps.map((app: any) => app.id));\n      \n      setApps(prev => prev.map(app => ({\n        ...app,\n        installed: installedAppIds.has(app.id)\n      })));\n    };\n\n    checkInstalledApps();\n\n    // Listen for desktop changes\n    const handleDesktopRefresh = () => {\n      checkInstalledApps();\n    };\n\n    window.addEventListener('desktop-refresh', handleDesktopRefresh);\n    return () => {\n      window.removeEventListener('desktop-refresh', handleDesktopRefresh);\n    };\n  }, []);\n\n  const categories = [\n    { id: 'all', name: 'All Categories', icon: Grid3X3 },\n    { id: 'featured', name: 'Featured', icon: Star },\n    { id: 'productivity', name: 'Productivity', icon: Users },\n    { id: 'games', name: 'Games', icon: Award },\n    { id: 'creative', name: 'Creative', icon: Heart },\n    { id: 'utilities', name: 'Utilities', icon: TrendingUp },\n    { id: 'developer', name: 'Developer', icon: Terminal }\n  ];\n\n  const filteredApps = apps.filter(app => {\n    const matchesSearch = app.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         app.description.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         app.developer.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    if (selectedCategory === 'all') return matchesSearch;\n    if (selectedCategory === 'featured') return matchesSearch && app.featured;\n    return matchesSearch && app.category === selectedCategory;\n  });\n\n  const handleInstallApp = async (appId: string) => {\n    const app = apps.find(a => a.id === appId);\n    if (!app) return;\n\n    setInstallingApps(prev => new Set([...Array.from(prev), appId]));\n    \n    // Simulate installation\n    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 3000));\n    \n    setApps(prev => prev.map(a => \n      a.id === appId ? { ...a, installed: true } : a\n    ));\n\n    // Create desktop shortcut\n    const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n    const newApp = {\n      id: appId,\n      name: app.name,\n      icon: app.icon,\n      description: app.description\n    };\n    \n    if (!desktopApps.find((a: any) => a.id === appId)) {\n      desktopApps.push(newApp);\n      localStorage.setItem('desktop-apps', JSON.stringify(desktopApps));\n      window.dispatchEvent(new CustomEvent('desktop-refresh'));\n    }\n    \n    const currentInstalling = Array.from(installingApps);\n    setInstallingApps(new Set(currentInstalling.filter(id => id !== appId)));\n\n    toast({\n      title: \"App Installed\",\n      description: `${app.name} has been installed successfully`,\n    });\n  };\n\n  const handleUninstallApp = async (appId: string) => {\n    const app = apps.find(a => a.id === appId);\n    if (!app) return;\n\n    setUninstallingApps(prev => new Set([...Array.from(prev), appId]));\n    \n    // Simulate uninstallation\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    \n    setApps(prev => prev.map(a => \n      a.id === appId ? { ...a, installed: false } : a\n    ));\n\n    // Remove desktop shortcut\n    const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n    const updatedApps = desktopApps.filter((a: any) => a.id !== appId);\n    localStorage.setItem('desktop-apps', JSON.stringify(updatedApps));\n    window.dispatchEvent(new CustomEvent('desktop-refresh'));\n    \n    const currentUninstalling = Array.from(uninstallingApps);\n    setUninstallingApps(new Set(currentUninstalling.filter(id => id !== appId)));\n\n    toast({\n      title: \"App Uninstalled\",\n      description: `${app.name} has been removed from your system`,\n    });\n  };\n\n  const renderStarRating = (rating: number) => {\n    return Array.from({ length: 5 }, (_, i) => (\n      <Star \n        key={i} \n        className={`w-3 h-3 ${i < Math.floor(rating) ? 'fill-yellow-400 text-yellow-400' : 'text-gray-300'}`} \n      />\n    ));\n  };\n\n  const formatPrice = (price: number) => {\n    return price === 0 ? 'Free' : `$${price.toFixed(2)}`;\n  };\n\n  if (selectedApp) {\n    return (\n      <div className=\"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\n        {/* Header */}\n        <div className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 p-4\">\n          <div className=\"flex items-center justify-between\">\n            <Button variant=\"ghost\" onClick={() => setSelectedApp(null)} className=\"flex items-center gap-2\">\n              <X className=\"w-4 h-4\" />\n              Back to Store\n            </Button>\n            <div className=\"flex gap-2\">\n              <Button variant=\"ghost\" size=\"sm\">\n                <Share className=\"w-4 h-4\" />\n              </Button>\n              <Button variant=\"ghost\" size=\"sm\">\n                <Heart className=\"w-4 h-4\" />\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* App Details */}\n        <div className=\"max-w-4xl mx-auto p-6\">\n          <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-lg overflow-hidden\">\n            <div className=\"p-8\">\n              <div className=\"flex items-start gap-6\">\n                <div className=\"w-24 h-24 bg-gradient-to-br from-blue-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg\">\n                  <span className=\"text-white text-2xl font-bold\">{selectedApp.name.charAt(0)}</span>\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-start justify-between\">\n                    <div>\n                      <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white mb-1\">{selectedApp.name}</h1>\n                      <p className=\"text-lg text-blue-600 dark:text-blue-400 mb-2\">{selectedApp.developer}</p>\n                      <div className=\"flex items-center gap-4 mb-4\">\n                        <div className=\"flex items-center gap-1\">\n                          {renderStarRating(selectedApp.rating)}\n                          <span className=\"text-sm text-gray-600 dark:text-gray-400 ml-2\">\n                            {selectedApp.rating} • {selectedApp.reviewCount.toLocaleString()} reviews\n                          </span>\n                        </div>\n                        <Badge variant=\"secondary\">{selectedApp.ageRating}</Badge>\n                        {selectedApp.editorChoice && (\n                          <Badge className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white\">\n                            Editor's Choice\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"text-2xl font-bold text-gray-900 dark:text-white mb-2\">\n                        {formatPrice(selectedApp.price)}\n                      </div>\n                      {selectedApp.installed ? (\n                        <Button \n                          onClick={() => handleUninstallApp(selectedApp.id)}\n                          disabled={uninstallingApps.has(selectedApp.id)}\n                          variant=\"outline\"\n                          className=\"border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 px-8 py-2 rounded-full font-semibold\"\n                        >\n                          {uninstallingApps.has(selectedApp.id) ? 'Uninstalling...' : 'Uninstall'}\n                        </Button>\n                      ) : (\n                        <Button \n                          onClick={() => handleInstallApp(selectedApp.id)}\n                          disabled={installingApps.has(selectedApp.id)}\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white px-8 py-2 rounded-full font-semibold\"\n                        >\n                          {installingApps.has(selectedApp.id) ? 'Installing...' : \n                           selectedApp.price === 0 ? 'Get' : 'Buy'}\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"mt-8 grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                <div className=\"lg:col-span-2\">\n                  <h2 className=\"text-xl font-semibold mb-4\">About this app</h2>\n                  <p className=\"text-gray-700 dark:text-gray-300 leading-relaxed mb-6\">\n                    {selectedApp.longDescription}\n                  </p>\n                  \n                  <div className=\"grid grid-cols-2 gap-6\">\n                    <div>\n                      <h3 className=\"font-semibold mb-2\">Information</h3>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Version</span>\n                          <span>{selectedApp.version}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Size</span>\n                          <span>{selectedApp.size}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Category</span>\n                          <span className=\"capitalize\">{selectedApp.category}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-600 dark:text-gray-400\">Updated</span>\n                          <span>{new Date(selectedApp.releaseDate).toLocaleDateString()}</span>\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div>\n                      <h3 className=\"font-semibold mb-2\">Compatibility</h3>\n                      <div className=\"space-y-1 text-sm text-gray-600 dark:text-gray-400\">\n                        {selectedApp.requirements.map((req, index) => (\n                          <div key={index}>{req}</div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div>\n                  <h3 className=\"font-semibold mb-4\">Ratings and Reviews</h3>\n                  <div className=\"bg-gray-50 dark:bg-gray-700 rounded-xl p-4\">\n                    <div className=\"text-center mb-4\">\n                      <div className=\"text-3xl font-bold\">{selectedApp.rating}</div>\n                      <div className=\"flex justify-center gap-1 my-2\">\n                        {renderStarRating(selectedApp.rating)}\n                      </div>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        {selectedApp.reviewCount.toLocaleString()} reviews\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800\">\n      {/* Header */}\n      <div className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 p-4 sticky top-0 z-10\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">App Store</h1>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant={viewMode === 'grid' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setViewMode('grid')}\n            >\n              <Grid3X3 className=\"w-4 h-4\" />\n            </Button>\n            <Button\n              variant={viewMode === 'list' ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setViewMode('list')}\n            >\n              <List className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Search */}\n        <div className=\"relative max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search apps...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10 bg-white dark:bg-gray-700 border-gray-200 dark:border-gray-600 rounded-full\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex h-full\">\n        {/* Sidebar */}\n        <div className=\"w-64 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border-r border-gray-200 dark:border-gray-700 p-4\">\n          <nav className=\"space-y-1\">\n            {categories.map((category) => {\n              const Icon = category.icon;\n              return (\n                <button\n                  key={category.id}\n                  onClick={() => setSelectedCategory(category.id)}\n                  className={`w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left transition-colors ${\n                    selectedCategory === category.id\n                      ? 'bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300'\n                      : 'text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700'\n                  }`}\n                >\n                  <Icon className=\"w-4 h-4\" />\n                  {category.name}\n                </button>\n              );\n            })}\n          </nav>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 overflow-auto\">\n          {/* Featured Apps Banner */}\n          {selectedCategory === 'all' && (\n            <div className=\"p-6\">\n              <h2 className=\"text-xl font-semibold mb-4 text-gray-900 dark:text-white\">Featured Apps</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                {featuredApps.map((app) => (\n                  <div\n                    key={app.id}\n                    onClick={() => setSelectedApp(app)}\n                    className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer overflow-hidden\"\n                  >\n                    <div className=\"aspect-video bg-gradient-to-br from-blue-400 to-purple-600 flex items-center justify-center\">\n                      <span className=\"text-white text-3xl font-bold\">{app.name.charAt(0)}</span>\n                    </div>\n                    <div className=\"p-4\">\n                      <h3 className=\"font-semibold text-gray-900 dark:text-white mb-1\">{app.name}</h3>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2\">{app.description}</p>\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-1\">\n                          {renderStarRating(app.rating)}\n                          <span className=\"text-xs text-gray-500 ml-1\">{app.rating}</span>\n                        </div>\n                        <span className=\"font-semibold text-blue-600 dark:text-blue-400\">\n                          {formatPrice(app.price)}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {/* Apps Grid/List */}\n          <div className=\"p-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\n                {selectedCategory === 'all' ? 'All Apps' : \n                 selectedCategory === 'featured' ? 'Featured Apps' :\n                 categories.find(c => c.id === selectedCategory)?.name}\n              </h2>\n              <span className=\"text-sm text-gray-500\">\n                {filteredApps.length} apps\n              </span>\n            </div>\n\n            {viewMode === 'grid' ? (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4\">\n                {filteredApps.map((app) => (\n                  <div\n                    key={app.id}\n                    onClick={() => setSelectedApp(app)}\n                    className=\"bg-white dark:bg-gray-800 rounded-xl shadow-sm hover:shadow-md transition-all cursor-pointer p-4\"\n                  >\n                    <div className=\"w-16 h-16 bg-gradient-to-br from-blue-400 to-purple-600 rounded-xl flex items-center justify-center mb-3\">\n                      <span className=\"text-white text-xl font-bold\">{app.name.charAt(0)}</span>\n                    </div>\n                    <h3 className=\"font-semibold text-gray-900 dark:text-white mb-1 truncate\">{app.name}</h3>\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2\">{app.description}</p>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-1\">\n                        {renderStarRating(app.rating)}\n                        <span className=\"text-xs text-gray-500 ml-1\">{app.rating}</span>\n                      </div>\n                      <span className=\"font-semibold text-blue-600 dark:text-blue-400\">\n                        {formatPrice(app.price)}\n                      </span>\n                    </div>\n                    {app.editorChoice && (\n                      <Badge className=\"mt-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs\">\n                        Editor's Choice\n                      </Badge>\n                    )}\n                  </div>\n                ))}\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {filteredApps.map((app) => (\n                  <div\n                    key={app.id}\n                    onClick={() => setSelectedApp(app)}\n                    className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm hover:shadow-md transition-all cursor-pointer p-4 flex items-center gap-4\"\n                  >\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-600 rounded-lg flex items-center justify-center\">\n                      <span className=\"text-white font-bold\">{app.name.charAt(0)}</span>\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-2 mb-1\">\n                        <h3 className=\"font-semibold text-gray-900 dark:text-white\">{app.name}</h3>\n                        {app.editorChoice && (\n                          <Badge className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs\">\n                            Editor's Choice\n                          </Badge>\n                        )}\n                      </div>\n                      <p className=\"text-sm text-gray-600 dark:text-gray-400 mb-1\">{app.description}</p>\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"flex items-center gap-1\">\n                          {renderStarRating(app.rating)}\n                          <span className=\"text-xs text-gray-500 ml-1\">{app.rating}</span>\n                        </div>\n                        <span className=\"text-xs text-gray-500\">{app.size}</span>\n                        <span className=\"text-xs text-gray-500 capitalize\">{app.category}</span>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-semibold text-blue-600 dark:text-blue-400 mb-2\">\n                        {formatPrice(app.price)}\n                      </div>\n                      {app.installed ? (\n                        <Button\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleUninstallApp(app.id);\n                          }}\n                          disabled={uninstallingApps.has(app.id)}\n                          variant=\"outline\"\n                          className=\"border-red-500 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full px-4\"\n                        >\n                          {uninstallingApps.has(app.id) ? 'Uninstalling...' : 'Uninstall'}\n                        </Button>\n                      ) : (\n                        <Button\n                          size=\"sm\"\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            handleInstallApp(app.id);\n                          }}\n                          disabled={installingApps.has(app.id)}\n                          className=\"bg-blue-600 hover:bg-blue-700 text-white rounded-full px-4\"\n                        >\n                          {installingApps.has(app.id) ? 'Installing...' : \n                           app.price === 0 ? 'Get' : 'Buy'}\n                        </Button>\n                      )}\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":37190},"client/src/components/apps/ArchPackageManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { \n  Package, \n  Search, \n  Download, \n  Trash2, \n  RefreshCw,\n  CheckCircle,\n  AlertCircle,\n  Clock,\n  Shield,\n  Terminal,\n  Settings,\n  Info,\n  ExternalLink,\n  Star,\n  Calendar,\n  HardDrive,\n  Cpu,\n  Monitor\n} from 'lucide-react';\n\ninterface Package {\n  name: string;\n  version: string;\n  description: string;\n  maintainer: string;\n  repo: string;\n  size: string;\n  installed: boolean;\n  dependencies: string[];\n  buildDate: string;\n  url: string;\n  popularity: number;\n  votes: number;\n  outOfDate: boolean;\n}\n\ninterface SystemInfo {\n  kernel: string;\n  uptime: string;\n  packages: number;\n  memory: string;\n  storage: string;\n}\n\nexport const ArchPackageManager: FC = () => {\n  const [packages, setPackages] = useState<Package[]>([\n    {\n      name: 'hyprland',\n      version: '0.32.3-1',\n      description: 'Dynamic tiling Wayland compositor based on wlroots',\n      maintainer: 'Caleb Maclennan',\n      repo: 'community',\n      size: '2.4 MiB',\n      installed: true,\n      dependencies: ['wayland', 'wlroots', 'libxkbcommon'],\n      buildDate: '2024-01-15',\n      url: 'https://hyprland.org',\n      popularity: 95,\n      votes: 247,\n      outOfDate: false\n    },\n    {\n      name: 'waybar',\n      version: '0.9.24-1',\n      description: 'Highly customizable Wayland bar for Sway and Wlroots compositors',\n      maintainer: 'Brett Cornwall',\n      repo: 'community',\n      size: '1.8 MiB',\n      installed: true,\n      dependencies: ['gtkmm3', 'jsoncpp', 'libpulse'],\n      buildDate: '2024-01-10',\n      url: 'https://github.com/Alexays/Waybar',\n      popularity: 89,\n      votes: 198,\n      outOfDate: false\n    },\n    {\n      name: 'kitty',\n      version: '0.31.0-1',\n      description: 'Cross-platform, fast, feature-rich, GPU based terminal',\n      maintainer: 'Daniel M. Capella',\n      repo: 'community',\n      size: '5.2 MiB',\n      installed: true,\n      dependencies: ['python', 'harfbuzz', 'libcanberra'],\n      buildDate: '2024-01-08',\n      url: 'https://sw.kovidgoyal.net/kitty/',\n      popularity: 92,\n      votes: 312,\n      outOfDate: false\n    },\n    {\n      name: 'wofi',\n      version: '1.3-1',\n      description: 'Launcher/menu program for wlroots based wayland compositors',\n      maintainer: 'Sven-Hendrik Haase',\n      repo: 'community',\n      size: '0.8 MiB',\n      installed: false,\n      dependencies: ['gtk3', 'wayland'],\n      buildDate: '2023-12-20',\n      url: 'https://hg.sr.ht/~scoopta/wofi',\n      popularity: 78,\n      votes: 145,\n      outOfDate: false\n    },\n    {\n      name: 'swaylock',\n      version: '1.7.2-1',\n      description: 'Screen locker for Wayland',\n      maintainer: 'Brett Cornwall',\n      repo: 'community',\n      size: '0.3 MiB',\n      installed: false,\n      dependencies: ['wayland', 'libxkbcommon', 'pam'],\n      buildDate: '2023-11-15',\n      url: 'https://github.com/swaywm/swaylock',\n      popularity: 85,\n      votes: 167,\n      outOfDate: false\n    },\n    {\n      name: 'mako',\n      version: '1.8.0-1',\n      description: 'Lightweight notification daemon for Wayland',\n      maintainer: 'Brett Cornwall',\n      repo: 'community',\n      size: '0.5 MiB',\n      installed: false,\n      dependencies: ['wayland', 'pango', 'cairo'],\n      buildDate: '2023-10-28',\n      url: 'https://github.com/emersion/mako',\n      popularity: 73,\n      votes: 123,\n      outOfDate: false\n    }\n  ]);\n\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedRepo, setSelectedRepo] = useState('all');\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [updateProgress, setUpdateProgress] = useState(0);\n  const [selectedPackage, setSelectedPackage] = useState<Package | null>(null);\n  \n  const [systemInfo] = useState<SystemInfo>({\n    kernel: 'Linux 6.6.8-arch1-1',\n    uptime: '2 days, 14 hours, 23 minutes',\n    packages: 1247,\n    memory: '15.6 GB',\n    storage: '512 GB SSD'\n  });\n\n  const [installQueue, setInstallQueue] = useState<string[]>([]);\n  const [removeQueue, setRemoveQueue] = useState<string[]>([]);\n\n  const filteredPackages = packages.filter(pkg => {\n    const matchesSearch = pkg.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         pkg.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesRepo = selectedRepo === 'all' || pkg.repo === selectedRepo;\n    return matchesSearch && matchesRepo;\n  });\n\n  const installedPackages = packages.filter(pkg => pkg.installed);\n  const availableUpdates = packages.filter(pkg => pkg.installed && Math.random() > 0.7);\n\n  const handleInstall = (packageName: string) => {\n    setInstallQueue(prev => [...prev, packageName]);\n    // Simulate installation\n    setTimeout(() => {\n      setPackages(prev => prev.map(pkg => \n        pkg.name === packageName ? { ...pkg, installed: true } : pkg\n      ));\n      setInstallQueue(prev => prev.filter(name => name !== packageName));\n    }, 2000);\n  };\n\n  const handleRemove = (packageName: string) => {\n    setRemoveQueue(prev => [...prev, packageName]);\n    // Simulate removal\n    setTimeout(() => {\n      setPackages(prev => prev.map(pkg => \n        pkg.name === packageName ? { ...pkg, installed: false } : pkg\n      ));\n      setRemoveQueue(prev => prev.filter(name => name !== packageName));\n    }, 1500);\n  };\n\n  const handleSystemUpdate = () => {\n    setIsUpdating(true);\n    setUpdateProgress(0);\n    \n    const interval = setInterval(() => {\n      setUpdateProgress(prev => {\n        if (prev >= 100) {\n          clearInterval(interval);\n          setIsUpdating(false);\n          return 100;\n        }\n        return prev + 10;\n      });\n    }, 300);\n  };\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-background\">\n      <div className=\"flex items-center justify-between p-4 border-b border-border\">\n        <div className=\"flex items-center space-x-3\">\n          <Package className=\"w-6 h-6 text-primary\" />\n          <h2 className=\"text-2xl font-bold\">Arch Package Manager</h2>\n          <Badge variant=\"secondary\">pacman</Badge>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button onClick={handleSystemUpdate} disabled={isUpdating} size=\"sm\" variant=\"outline\">\n            <RefreshCw className={`w-4 h-4 mr-2 ${isUpdating ? 'animate-spin' : ''}`} />\n            System Update\n          </Button>\n          <Button size=\"sm\">\n            <Terminal className=\"w-4 h-4 mr-2\" />\n            Terminal\n          </Button>\n        </div>\n      </div>\n\n      {isUpdating && (\n        <div className=\"p-4 bg-muted/30 border-b\">\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm font-medium\">Updating system packages...</span>\n            <span className=\"text-sm text-muted-foreground\">{updateProgress}%</span>\n          </div>\n          <Progress value={updateProgress} className=\"w-full\" />\n        </div>\n      )}\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        <Tabs defaultValue=\"browse\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-5\">\n            <TabsTrigger value=\"browse\">Browse</TabsTrigger>\n            <TabsTrigger value=\"installed\">Installed ({installedPackages.length})</TabsTrigger>\n            <TabsTrigger value=\"updates\">Updates ({availableUpdates.length})</TabsTrigger>\n            <TabsTrigger value=\"system\">System Info</TabsTrigger>\n            <TabsTrigger value=\"aur\">AUR</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"browse\" className=\"space-y-4\">\n            <div className=\"flex items-center space-x-4\">\n              <div className=\"flex-1\">\n                <div className=\"relative\">\n                  <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n                  <Input\n                    placeholder=\"Search packages...\"\n                    value={searchTerm}\n                    onChange={(e) => setSearchTerm(e.target.value)}\n                    className=\"pl-10\"\n                  />\n                </div>\n              </div>\n              <select \n                value={selectedRepo} \n                onChange={(e) => setSelectedRepo(e.target.value)}\n                className=\"px-3 py-2 border rounded-md\"\n              >\n                <option value=\"all\">All Repositories</option>\n                <option value=\"core\">Core</option>\n                <option value=\"extra\">Extra</option>\n                <option value=\"community\">Community</option>\n                <option value=\"multilib\">Multilib</option>\n              </select>\n            </div>\n\n            <div className=\"grid gap-4\">\n              {filteredPackages.map((pkg) => (\n                <Card key={pkg.name} className=\"hover:shadow-md transition-shadow\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center space-x-2 mb-2\">\n                          <h3 className=\"font-semibold text-lg\">{pkg.name}</h3>\n                          <Badge variant=\"outline\">{pkg.version}</Badge>\n                          <Badge variant={pkg.repo === 'core' ? 'default' : 'secondary'}>\n                            {pkg.repo}\n                          </Badge>\n                          {pkg.installed && <Badge variant=\"secondary\">Installed</Badge>}\n                          {pkg.outOfDate && <Badge variant=\"destructive\">Out of Date</Badge>}\n                        </div>\n                        <p className=\"text-muted-foreground mb-2\">{pkg.description}</p>\n                        <div className=\"flex items-center space-x-4 text-sm text-muted-foreground\">\n                          <span>Size: {pkg.size}</span>\n                          <span>Maintainer: {pkg.maintainer}</span>\n                          <div className=\"flex items-center space-x-1\">\n                            <Star className=\"w-3 h-3\" />\n                            <span>{pkg.votes}</span>\n                          </div>\n                          <span>{pkg.popularity}% popularity</span>\n                        </div>\n                      </div>\n                      <div className=\"flex flex-col space-y-2\">\n                        {pkg.installed ? (\n                          <Button \n                            variant=\"destructive\" \n                            size=\"sm\"\n                            onClick={() => handleRemove(pkg.name)}\n                            disabled={removeQueue.includes(pkg.name)}\n                          >\n                            {removeQueue.includes(pkg.name) ? (\n                              <Clock className=\"w-4 h-4 mr-2\" />\n                            ) : (\n                              <Trash2 className=\"w-4 h-4 mr-2\" />\n                            )}\n                            {removeQueue.includes(pkg.name) ? 'Removing...' : 'Remove'}\n                          </Button>\n                        ) : (\n                          <Button \n                            size=\"sm\"\n                            onClick={() => handleInstall(pkg.name)}\n                            disabled={installQueue.includes(pkg.name)}\n                          >\n                            {installQueue.includes(pkg.name) ? (\n                              <Clock className=\"w-4 h-4 mr-2\" />\n                            ) : (\n                              <Download className=\"w-4 h-4 mr-2\" />\n                            )}\n                            {installQueue.includes(pkg.name) ? 'Installing...' : 'Install'}\n                          </Button>\n                        )}\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\"\n                          onClick={() => setSelectedPackage(pkg)}\n                        >\n                          <Info className=\"w-4 h-4 mr-2\" />\n                          Details\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"installed\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Installed Packages</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <ScrollArea className=\"h-96\">\n                  <div className=\"space-y-2\">\n                    {installedPackages.map((pkg) => (\n                      <div key={pkg.name} className=\"flex items-center justify-between p-3 border rounded\">\n                        <div>\n                          <div className=\"flex items-center space-x-2\">\n                            <span className=\"font-medium\">{pkg.name}</span>\n                            <Badge variant=\"outline\">{pkg.version}</Badge>\n                          </div>\n                          <p className=\"text-sm text-muted-foreground\">{pkg.description}</p>\n                        </div>\n                        <Button variant=\"destructive\" size=\"sm\" onClick={() => handleRemove(pkg.name)}>\n                          Remove\n                        </Button>\n                      </div>\n                    ))}\n                  </div>\n                </ScrollArea>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"updates\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <RefreshCw className=\"w-5 h-5\" />\n                  <span>Available Updates</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                {availableUpdates.length > 0 ? (\n                  <div className=\"space-y-3\">\n                    {availableUpdates.map((pkg) => (\n                      <div key={pkg.name} className=\"flex items-center justify-between p-3 border rounded\">\n                        <div>\n                          <span className=\"font-medium\">{pkg.name}</span>\n                          <span className=\"text-muted-foreground ml-2\">{pkg.version} → {pkg.version.replace(/\\d+$/, (n) => String(parseInt(n) + 1))}</span>\n                        </div>\n                        <Button size=\"sm\">Update</Button>\n                      </div>\n                    ))}\n                    <Button className=\"w-full\" onClick={handleSystemUpdate}>\n                      Update All Packages\n                    </Button>\n                  </div>\n                ) : (\n                  <div className=\"text-center py-8\">\n                    <CheckCircle className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\n                    <p className=\"text-lg font-medium\">System is up to date</p>\n                    <p className=\"text-muted-foreground\">All packages are at their latest versions</p>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"system\" className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Monitor className=\"w-5 h-5\" />\n                    <span>System Information</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Kernel:</span>\n                    <span className=\"font-medium\">{systemInfo.kernel}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Uptime:</span>\n                    <span className=\"font-medium\">{systemInfo.uptime}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Packages:</span>\n                    <span className=\"font-medium\">{systemInfo.packages}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Memory:</span>\n                    <span className=\"font-medium\">{systemInfo.memory}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Storage:</span>\n                    <span className=\"font-medium\">{systemInfo.storage}</span>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle className=\"flex items-center space-x-2\">\n                    <Shield className=\"w-5 h-5\" />\n                    <span>Package Statistics</span>\n                  </CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-3\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Installed:</span>\n                    <span className=\"font-medium\">{installedPackages.length}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Updates Available:</span>\n                    <span className=\"font-medium\">{availableUpdates.length}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Orphaned:</span>\n                    <span className=\"font-medium\">3</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-muted-foreground\">Cache Size:</span>\n                    <span className=\"font-medium\">2.4 GB</span>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"aur\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Arch User Repository (AUR)</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-center py-8\">\n                  <Package className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-lg font-medium\">AUR Helper Integration</p>\n                  <p className=\"text-muted-foreground mb-4\">Install an AUR helper like yay or paru to access community packages</p>\n                  <div className=\"space-x-2\">\n                    <Button>Install yay</Button>\n                    <Button variant=\"outline\">Install paru</Button>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {selectedPackage && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <Card className=\"w-full max-w-2xl max-h-[80vh] overflow-y-auto\">\n            <CardHeader>\n              <div className=\"flex items-center justify-between\">\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Package className=\"w-5 h-5\" />\n                  <span>{selectedPackage.name}</span>\n                </CardTitle>\n                <Button variant=\"ghost\" onClick={() => setSelectedPackage(null)}>\n                  ×\n                </Button>\n              </div>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div>\n                <h4 className=\"font-medium mb-2\">Description</h4>\n                <p className=\"text-muted-foreground\">{selectedPackage.description}</p>\n              </div>\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <h4 className=\"font-medium mb-2\">Version</h4>\n                  <p>{selectedPackage.version}</p>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Repository</h4>\n                  <p>{selectedPackage.repo}</p>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Size</h4>\n                  <p>{selectedPackage.size}</p>\n                </div>\n                <div>\n                  <h4 className=\"font-medium mb-2\">Build Date</h4>\n                  <p>{selectedPackage.buildDate}</p>\n                </div>\n              </div>\n              <div>\n                <h4 className=\"font-medium mb-2\">Dependencies</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {selectedPackage.dependencies.map((dep) => (\n                    <Badge key={dep} variant=\"outline\">{dep}</Badge>\n                  ))}\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button \n                  onClick={() => window.open(selectedPackage.url, '_blank')}\n                  variant=\"outline\"\n                >\n                  <ExternalLink className=\"w-4 h-4 mr-2\" />\n                  Visit Homepage\n                </Button>\n                {selectedPackage.installed ? (\n                  <Button variant=\"destructive\" onClick={() => handleRemove(selectedPackage.name)}>\n                    Remove Package\n                  </Button>\n                ) : (\n                  <Button onClick={() => handleInstall(selectedPackage.name)}>\n                    Install Package\n                  </Button>\n                )}\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n    </div>\n  );\n};","size_bytes":22249},"client/src/components/apps/Browser.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Home, Plus, X, Shield, Star, StarOff, History, Search, RotateCcw, ArrowLeft, ArrowRight } from 'lucide-react';\n\ninterface Tab {\n  id: string;\n  title: string;\n  url: string;\n  isLoading: boolean;\n  error?: string;\n  favicon?: string;\n}\n\ninterface Bookmark {\n  id: string;\n  title: string;\n  url: string;\n  favicon?: string;\n}\n\ninterface HistoryEntry {\n  id: string;\n  title: string;\n  url: string;\n  timestamp: Date;\n  favicon?: string;\n}\n\nexport const Browser: FC = () => {\n  const [tabs, setTabs] = useState<Tab[]>([\n    { id: '1', title: 'New Tab', url: 'about:blank', isLoading: false }\n  ]);\n  const [activeTabId, setActiveTabId] = useState('1');\n  const [urlInput, setUrlInput] = useState('');\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>(() => {\n    const stored = localStorage.getItem('webos-browser-bookmarks');\n    return stored ? JSON.parse(stored) : [\n      { id: '1', title: 'Google', url: 'https://google.com', favicon: '🔍' },\n      { id: '2', title: 'GitHub', url: 'https://github.com', favicon: '⚡' },\n      { id: '3', title: 'Stack Overflow', url: 'https://stackoverflow.com', favicon: '📚' },\n      { id: '4', title: 'MDN Web Docs', url: 'https://developer.mozilla.org', favicon: '📖' }\n    ];\n  });\n  const [history, setHistory] = useState<HistoryEntry[]>(() => {\n    const stored = localStorage.getItem('webos-browser-history');\n    return stored ? JSON.parse(stored).map((h: any) => ({\n      ...h,\n      timestamp: new Date(h.timestamp)\n    })) : [];\n  });\n  const [showBookmarks, setShowBookmarks] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  useEffect(() => {\n    localStorage.setItem('webos-browser-bookmarks', JSON.stringify(bookmarks));\n  }, [bookmarks]);\n\n  useEffect(() => {\n    localStorage.setItem('webos-browser-history', JSON.stringify(history));\n  }, [history]);\n\n  useEffect(() => {\n    if (activeTab) {\n      setUrlInput(activeTab.url === 'about:blank' ? '' : activeTab.url);\n    }\n  }, [activeTabId, activeTab]);\n\n  const addToHistory = (url: string, title: string) => {\n    if (url === 'about:blank') return;\n    \n    const historyEntry: HistoryEntry = {\n      id: Date.now().toString(),\n      title: title || url,\n      url,\n      timestamp: new Date(),\n      favicon: '🌐'\n    };\n    \n    setHistory(prev => [historyEntry, ...prev.slice(0, 99)]);\n  };\n\n  const navigateTo = (url: string, addToHistoryFlag = true) => {\n    if (!url) return;\n    \n    let targetUrl = url;\n    let displayUrl = url;\n    \n    if (url === 'about:blank') {\n      targetUrl = 'about:blank';\n    } else {\n      // Handle search queries\n      if (!url.includes('.') && !url.startsWith('http')) {\n        displayUrl = `https://www.google.com/search?q=${encodeURIComponent(url)}`;\n        targetUrl = `/api/proxy/site?url=${encodeURIComponent(displayUrl)}&mode=embed`;\n      } else if (!url.startsWith('http://') && !url.startsWith('https://')) {\n        displayUrl = 'https://' + url;\n        targetUrl = `/api/proxy/site?url=${encodeURIComponent(displayUrl)}&mode=embed`;\n      } else {\n        // Use enhanced site proxy for better compatibility\n        targetUrl = `/api/proxy/site?url=${encodeURIComponent(url)}&mode=embed`;\n      }\n    }\n\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, url: targetUrl, isLoading: true, title: 'Loading...', error: undefined }\n        : tab\n    ));\n\n    setUrlInput(displayUrl);\n\n    // Update iframe immediately for better responsiveness\n    if (iframeRef.current && targetUrl !== 'about:blank') {\n      iframeRef.current.src = targetUrl;\n    }\n\n    if (addToHistoryFlag) {\n      addToHistory(displayUrl, 'Loading...');\n    }\n  };\n\n  const handleUrlSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    navigateTo(urlInput);\n  };\n\n  const createNewTab = () => {\n    const newTab: Tab = {\n      id: Date.now().toString(),\n      title: 'New Tab',\n      url: 'about:blank',\n      isLoading: false\n    };\n    setTabs(prev => [...prev, newTab]);\n    setActiveTabId(newTab.id);\n  };\n\n  const closeTab = (tabId: string) => {\n    setTabs(prev => {\n      const newTabs = prev.filter(tab => tab.id !== tabId);\n      if (newTabs.length === 0) {\n        const newTab: Tab = {\n          id: Date.now().toString(),\n          title: 'New Tab',\n          url: 'about:blank',\n          isLoading: false\n        };\n        return [newTab];\n      }\n      return newTabs;\n    });\n    \n    if (activeTabId === tabId) {\n      const remainingTabs = tabs.filter(tab => tab.id !== tabId);\n      if (remainingTabs.length > 0) {\n        setActiveTabId(remainingTabs[0].id);\n      }\n    }\n  };\n\n  const addBookmark = () => {\n    if (!activeTab || activeTab.url === 'about:blank') return;\n    \n    const bookmark: Bookmark = {\n      id: Date.now().toString(),\n      title: activeTab.title,\n      url: urlInput,\n      favicon: '🌐'\n    };\n    \n    setBookmarks(prev => [...prev, bookmark]);\n  };\n\n  const removeBookmark = (bookmarkId: string) => {\n    setBookmarks(prev => prev.filter(b => b.id !== bookmarkId));\n  };\n\n  const isBookmarked = bookmarks.some(b => b.url === urlInput);\n\n  const handleIframeLoad = () => {\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, isLoading: false, title: getPageTitle(), error: undefined }\n        : tab\n    ));\n  };\n\n  const handleIframeError = () => {\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, isLoading: false, error: 'Failed to load page', title: 'Error' }\n        : tab\n    ));\n  };\n\n  const getPageTitle = () => {\n    try {\n      if (iframeRef.current?.contentDocument?.title) {\n        return iframeRef.current.contentDocument.title;\n      }\n    } catch (e) {\n      // Cross-origin restrictions\n    }\n    return urlInput?.replace(/^https?:\\/\\//, '').replace(/^www\\./, '') || 'New Tab';\n  };\n\n  const goBack = () => {\n    if (iframeRef.current?.contentWindow) {\n      try {\n        iframeRef.current.contentWindow.history.back();\n      } catch (e) {\n        console.warn('Cannot go back in iframe');\n      }\n    }\n  };\n\n  const goForward = () => {\n    if (iframeRef.current?.contentWindow) {\n      try {\n        iframeRef.current.contentWindow.history.forward();\n      } catch (e) {\n        console.warn('Cannot go forward in iframe');\n      }\n    }\n  };\n\n  const goHome = () => {\n    navigateTo('about:blank');\n  };\n\n  const navigateToPopularSite = (site: string) => {\n    navigateTo(`/api/proxy/popular/${site}`);\n  };\n\n  const refresh = () => {\n    if (iframeRef.current && activeTab) {\n      iframeRef.current.src = activeTab.url;\n      setTabs(prev => prev.map(tab => \n        tab.id === activeTabId \n          ? { ...tab, isLoading: true }\n          : tab\n      ));\n    }\n  };\n\n  if (showBookmarks) {\n    return (\n      <div className=\"h-full flex flex-col bg-background\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">Bookmarks</h2>\n          <Button variant=\"outline\" onClick={() => setShowBookmarks(false)}>\n            Back to Browser\n          </Button>\n        </div>\n        <div className=\"flex-1 p-4 overflow-auto\">\n          <div className=\"grid gap-2\">\n            {bookmarks.map(bookmark => (\n              <Card key={bookmark.id} className=\"cursor-pointer hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\" onClick={() => {\n                      setShowBookmarks(false);\n                      navigateTo(bookmark.url);\n                    }}>\n                      <span className=\"text-lg\">{bookmark.favicon}</span>\n                      <div>\n                        <h3 className=\"font-medium\">{bookmark.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{bookmark.url}</p>\n                      </div>\n                    </div>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\"\n                      onClick={() => removeBookmark(bookmark.id)}\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (showHistory) {\n    return (\n      <div className=\"h-full flex flex-col bg-background\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">History</h2>\n          <Button variant=\"outline\" onClick={() => setShowHistory(false)}>\n            Back to Browser\n          </Button>\n        </div>\n        <div className=\"flex-1 p-4 overflow-auto\">\n          <div className=\"grid gap-2\">\n            {history.map(entry => (\n              <Card key={entry.id} className=\"cursor-pointer hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\" onClick={() => {\n                    setShowHistory(false);\n                    navigateTo(entry.url);\n                  }}>\n                    <span className=\"text-lg\">{entry.favicon}</span>\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium\">{entry.title}</h3>\n                      <p className=\"text-sm text-muted-foreground\">{entry.url}</p>\n                      <p className=\"text-xs text-muted-foreground\">{entry.timestamp.toLocaleString()}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-background\">\n      {/* Tab Bar */}\n      <div className=\"flex bg-muted/30 border-b overflow-x-auto\">\n        {tabs.map(tab => (\n          <div\n            key={tab.id}\n            className={`flex items-center gap-2 px-3 py-2 border-r cursor-pointer min-w-0 max-w-40 flex-shrink-0 ${\n              tab.id === activeTabId ? 'bg-background' : 'hover:bg-muted/50'\n            }`}\n            onClick={() => setActiveTabId(tab.id)}\n          >\n            <div className=\"flex-1 min-w-0\">\n              <span className=\"text-sm truncate block\">\n                {tab.isLoading ? 'Loading...' : tab.title}\n              </span>\n            </div>\n            {tabs.length > 1 && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"h-5 w-5 p-0 flex-shrink-0\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  closeTab(tab.id);\n                }}\n              >\n                <X className=\"w-3 h-3\" />\n              </Button>\n            )}\n          </div>\n        ))}\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"px-3 flex-shrink-0\"\n          onClick={createNewTab}\n        >\n          <Plus className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Navigation Bar */}\n      <div className=\"flex items-center gap-2 p-2 border-b bg-background\">\n        <Button variant=\"outline\" size=\"sm\" onClick={goBack}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={goForward}>\n          <ArrowRight className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={refresh}>\n          <RotateCcw className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={goHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={() => setShowBookmarks(true)}>\n          <Star className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={() => setShowHistory(true)}>\n          <History className=\"w-4 h-4\" />\n        </Button>\n        \n        <form onSubmit={handleUrlSubmit} className=\"flex-1 flex gap-2\">\n          <div className=\"flex-1 relative\">\n            <Input\n              value={urlInput}\n              onChange={(e) => setUrlInput(e.target.value)}\n              placeholder=\"Enter URL or search...\"\n              className=\"pl-8\"\n            />\n            <Shield className=\"w-4 h-4 absolute left-2 top-3 text-muted-foreground\" />\n          </div>\n          <Button type=\"submit\" size=\"sm\">\n            <Search className=\"w-4 h-4\" />\n          </Button>\n        </form>\n\n        {activeTab && activeTab.url !== 'about:blank' && (\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={isBookmarked ? () => {\n              const bookmark = bookmarks.find(b => b.url === urlInput);\n              if (bookmark) removeBookmark(bookmark.id);\n            } : addBookmark}\n          >\n            {isBookmarked ? <Star className=\"w-4 h-4 fill-current\" /> : <StarOff className=\"w-4 h-4\" />}\n          </Button>\n        )}\n      </div>\n\n      {/* Bookmarks Bar */}\n      <div className=\"flex items-center gap-2 p-2 bg-muted/20 border-b overflow-x-auto\">\n        {bookmarks.slice(0, 8).map(bookmark => (\n          <Button\n            key={bookmark.id}\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-xs whitespace-nowrap\"\n            onClick={() => navigateTo(bookmark.url)}\n          >\n            <span className=\"mr-1\">{bookmark.favicon}</span>\n            {bookmark.title}\n          </Button>\n        ))}\n      </div>\n\n      {/* Content Area */}\n      <div className=\"flex-1 relative bg-white\">\n        {activeTab?.url === 'about:blank' ? (\n          <div className=\"h-full flex items-center justify-center p-8 overflow-y-auto\">\n            <div className=\"text-center max-w-4xl\">\n              <h2 className=\"text-3xl font-bold mb-6 text-primary\">WebOS Browser</h2>\n              <p className=\"text-muted-foreground mb-8 text-lg\">\n                Enhanced proxy system for secure, fast browsing with advanced compatibility\n              </p>\n              \n              {/* Popular Sites Grid */}\n              <div className=\"mb-8\">\n                <h3 className=\"text-xl font-semibold mb-4\">Popular Sites</h3>\n                <div className=\"grid grid-cols-4 md:grid-cols-6 gap-3 mb-6\">\n                  {[\n                    { id: 'github', name: 'GitHub', icon: '⚡', color: 'bg-gray-900' },\n                    { id: 'stackoverflow', name: 'Stack Overflow', icon: '📚', color: 'bg-orange-500' },\n                    { id: 'reddit', name: 'Reddit', icon: '📢', color: 'bg-orange-600' },\n                    { id: 'wikipedia', name: 'Wikipedia', icon: '📖', color: 'bg-gray-700' },\n                    { id: 'youtube', name: 'YouTube', icon: '📺', color: 'bg-red-600' },\n                    { id: 'twitter', name: 'Twitter', icon: '🐦', color: 'bg-blue-500' },\n                    { id: 'hackernews', name: 'Hacker News', icon: '🔥', color: 'bg-orange-400' },\n                    { id: 'medium', name: 'Medium', icon: '✍️', color: 'bg-green-600' },\n                    { id: 'dev', name: 'Dev.to', icon: '💻', color: 'bg-black' },\n                    { id: 'codepen', name: 'CodePen', icon: '🎨', color: 'bg-gray-800' },\n                    { id: 'replit', name: 'Replit', icon: '🔧', color: 'bg-blue-600' },\n                    { id: 'codesandbox', name: 'CodeSandbox', icon: '📦', color: 'bg-yellow-500' }\n                  ].map(site => (\n                    <Card \n                      key={site.id} \n                      className=\"cursor-pointer hover:shadow-lg transition-all hover:scale-105\"\n                      onClick={() => navigateToPopularSite(site.id)}\n                    >\n                      <CardContent className=\"p-3 text-center\">\n                        <div className={`w-12 h-12 ${site.color} rounded-lg flex items-center justify-center text-white text-xl mb-2 mx-auto`}>\n                          {site.icon}\n                        </div>\n                        <div className=\"text-xs font-medium\">{site.name}</div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n\n              {/* Search Engines */}\n              <div className=\"mb-8\">\n                <h3 className=\"text-xl font-semibold mb-4\">Search Engines</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-3\">\n                  {[\n                    { engine: 'google', name: 'Google', icon: '🔍', desc: 'Most popular search', url: 'https://www.google.com/search?q=programming' },\n                    { engine: 'bing', name: 'Bing', icon: '🅱️', desc: 'Microsoft search', url: 'https://www.bing.com/search?q=programming' },\n                    { engine: 'duckduckgo', name: 'DuckDuckGo', icon: '🦆', desc: 'Privacy focused', url: '/api/proxy/search?q=programming&engine=duckduckgo' },\n                    { engine: 'yandex', name: 'Yandex', icon: '🟡', desc: 'Russian search', url: '/api/proxy/search?q=programming&engine=yandex' }\n                  ].map(search => (\n                    <Card \n                      key={search.engine} \n                      className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                      onClick={() => navigateTo(search.url)}\n                    >\n                      <CardContent className=\"p-4 text-center\">\n                        <div className=\"text-2xl mb-2\">{search.icon}</div>\n                        <div className=\"text-sm font-medium\">{search.name}</div>\n                        <div className=\"text-xs text-muted-foreground\">{search.desc}</div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n\n              {/* Your Bookmarks */}\n              <div>\n                <h3 className=\"text-xl font-semibold mb-4\">Your Bookmarks</h3>\n                <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\n                  {bookmarks.slice(0, 6).map(bookmark => (\n                    <Card \n                      key={bookmark.id} \n                      className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                      onClick={() => navigateTo(bookmark.url)}\n                    >\n                      <CardContent className=\"p-4 text-center\">\n                        <div className=\"text-2xl mb-2\">{bookmark.favicon}</div>\n                        <div className=\"text-sm font-medium\">{bookmark.title}</div>\n                        <div className=\"text-xs text-muted-foreground truncate\">{bookmark.url}</div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              </div>\n\n              {/* Proxy Features */}\n              <div className=\"mt-8 p-4 bg-muted/50 rounded-lg\">\n                <h4 className=\"font-semibold mb-2\">Enhanced Proxy Features</h4>\n                <div className=\"text-sm text-muted-foreground grid grid-cols-1 md:grid-cols-3 gap-2\">\n                  <div>✓ Site compatibility mode</div>\n                  <div>✓ Image & video optimization</div>\n                  <div>✓ JSON API access</div>\n                  <div>✓ Search engine integration</div>\n                  <div>✓ Popular sites shortcuts</div>\n                  <div>✓ Advanced error handling</div>\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : activeTab?.error ? (\n          <div className=\"h-full flex items-center justify-center bg-red-50\">\n            <div className=\"text-center p-8\">\n              <div className=\"text-6xl mb-4\">⚠️</div>\n              <h3 className=\"text-xl font-semibold mb-2 text-red-700\">Connection Failed</h3>\n              <p className=\"text-red-600 mb-4\">\n                Unable to load: {urlInput}\n              </p>\n              <div className=\"space-x-2\">\n                <Button onClick={refresh} variant=\"outline\">\n                  Try Again\n                </Button>\n                <Button onClick={() => navigateTo('https://google.com')} variant=\"default\">\n                  Go to Google\n                </Button>\n              </div>\n            </div>\n          </div>\n        ) : (\n          <div className=\"h-full relative\">\n            {activeTab?.isLoading && (\n              <div className=\"absolute inset-0 bg-white/80 flex items-center justify-center z-10\">\n                <div className=\"text-center\">\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2\"></div>\n                  <p className=\"text-sm text-muted-foreground\">Loading {urlInput}...</p>\n                </div>\n              </div>\n            )}\n            <iframe\n              ref={iframeRef}\n              src={activeTab?.url}\n              className=\"w-full h-full border-0\"\n              onLoad={handleIframeLoad}\n              onError={handleIframeError}\n              sandbox=\"allow-scripts allow-same-origin allow-popups allow-forms allow-navigation\"\n              style={{ background: 'white' }}\n            />\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":21543},"client/src/components/apps/BrowserNew.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { ArrowLeft, ArrowRight, RotateCcw, Home, Plus, X, Shield, Star, StarOff, History, Search } from 'lucide-react';\n\ninterface Tab {\n  id: string;\n  title: string;\n  url: string;\n  isLoading: boolean;\n  error?: string;\n  favicon?: string;\n}\n\ninterface Bookmark {\n  id: string;\n  title: string;\n  url: string;\n  favicon?: string;\n}\n\ninterface HistoryEntry {\n  id: string;\n  title: string;\n  url: string;\n  timestamp: Date;\n  favicon?: string;\n}\n\nexport const Browser: FC = () => {\n  const [tabs, setTabs] = useState<Tab[]>([\n    { id: '1', title: 'New Tab', url: 'about:blank', isLoading: false }\n  ]);\n  const [activeTabId, setActiveTabId] = useState('1');\n  const [urlInput, setUrlInput] = useState('');\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>(() => {\n    const stored = localStorage.getItem('webos-browser-bookmarks');\n    return stored ? JSON.parse(stored) : [\n      { id: '1', title: 'Google', url: 'https://google.com', favicon: '🔍' },\n      { id: '2', title: 'GitHub', url: 'https://github.com', favicon: '⚡' },\n      { id: '3', title: 'Stack Overflow', url: 'https://stackoverflow.com', favicon: '📚' },\n      { id: '4', title: 'MDN Web Docs', url: 'https://developer.mozilla.org', favicon: '📖' }\n    ];\n  });\n  const [history, setHistory] = useState<HistoryEntry[]>(() => {\n    const stored = localStorage.getItem('webos-browser-history');\n    return stored ? JSON.parse(stored).map((h: any) => ({\n      ...h,\n      timestamp: new Date(h.timestamp)\n    })) : [];\n  });\n  const [showBookmarks, setShowBookmarks] = useState(false);\n  const [showHistory, setShowHistory] = useState(false);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  useEffect(() => {\n    localStorage.setItem('webos-browser-bookmarks', JSON.stringify(bookmarks));\n  }, [bookmarks]);\n\n  useEffect(() => {\n    localStorage.setItem('webos-browser-history', JSON.stringify(history));\n  }, [history]);\n\n  useEffect(() => {\n    if (activeTab) {\n      setUrlInput(activeTab.url === 'about:blank' ? '' : activeTab.url);\n    }\n  }, [activeTabId, activeTab]);\n\n  const addToHistory = (url: string, title: string) => {\n    if (url === 'about:blank') return;\n    \n    const historyEntry: HistoryEntry = {\n      id: Date.now().toString(),\n      title: title || url,\n      url,\n      timestamp: new Date(),\n      favicon: '🌐'\n    };\n    \n    setHistory(prev => [historyEntry, ...prev.slice(0, 99)]);\n  };\n\n  const navigateTo = (url: string, addToHistoryFlag = true) => {\n    if (!url) return;\n    \n    let targetUrl = url;\n    let displayUrl = url;\n    \n    if (url === 'about:blank') {\n      targetUrl = 'about:blank';\n    } else {\n      if (!url.startsWith('http://') && !url.startsWith('https://')) {\n        displayUrl = 'https://' + url;\n        targetUrl = 'https://' + url;\n      }\n      \n      targetUrl = `/api/proxy?url=${encodeURIComponent(targetUrl)}`;\n    }\n\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, url: targetUrl, isLoading: true, title: 'Loading...', error: undefined }\n        : tab\n    ));\n\n    setUrlInput(displayUrl);\n\n    if (iframeRef.current && targetUrl !== 'about:blank') {\n      iframeRef.current.src = targetUrl;\n    }\n\n    if (addToHistoryFlag) {\n      addToHistory(displayUrl, 'Loading...');\n    }\n  };\n\n  const handleUrlSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    navigateTo(urlInput);\n  };\n\n  const createNewTab = () => {\n    const newTab: Tab = {\n      id: Date.now().toString(),\n      title: 'New Tab',\n      url: 'about:blank',\n      isLoading: false\n    };\n    setTabs(prev => [...prev, newTab]);\n    setActiveTabId(newTab.id);\n  };\n\n  const closeTab = (tabId: string) => {\n    setTabs(prev => {\n      const newTabs = prev.filter(tab => tab.id !== tabId);\n      if (newTabs.length === 0) {\n        const newTab: Tab = {\n          id: Date.now().toString(),\n          title: 'New Tab',\n          url: 'about:blank',\n          isLoading: false\n        };\n        return [newTab];\n      }\n      return newTabs;\n    });\n    \n    if (activeTabId === tabId) {\n      const remainingTabs = tabs.filter(tab => tab.id !== tabId);\n      if (remainingTabs.length > 0) {\n        setActiveTabId(remainingTabs[0].id);\n      }\n    }\n  };\n\n  const addBookmark = () => {\n    if (!activeTab || activeTab.url === 'about:blank') return;\n    \n    const bookmark: Bookmark = {\n      id: Date.now().toString(),\n      title: activeTab.title,\n      url: urlInput,\n      favicon: '🌐'\n    };\n    \n    setBookmarks(prev => [...prev, bookmark]);\n  };\n\n  const removeBookmark = (bookmarkId: string) => {\n    setBookmarks(prev => prev.filter(b => b.id !== bookmarkId));\n  };\n\n  const isBookmarked = bookmarks.some(b => b.url === urlInput);\n\n  const handleIframeLoad = () => {\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, isLoading: false, title: urlInput || 'Loaded' }\n        : tab\n    ));\n  };\n\n  const handleIframeError = () => {\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, isLoading: false, error: 'Failed to load page', title: 'Error' }\n        : tab\n    ));\n  };\n\n  const goHome = () => {\n    navigateTo('https://google.com');\n  };\n\n  const refresh = () => {\n    if (iframeRef.current && activeTab) {\n      iframeRef.current.src = activeTab.url;\n      setTabs(prev => prev.map(tab => \n        tab.id === activeTabId \n          ? { ...tab, isLoading: true }\n          : tab\n      ));\n    }\n  };\n\n  if (showBookmarks) {\n    return (\n      <div className=\"h-full flex flex-col bg-background\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">Bookmarks</h2>\n          <Button variant=\"outline\" onClick={() => setShowBookmarks(false)}>\n            Back to Browser\n          </Button>\n        </div>\n        <div className=\"flex-1 p-4 overflow-auto\">\n          <div className=\"grid gap-2\">\n            {bookmarks.map(bookmark => (\n              <Card key={bookmark.id} className=\"cursor-pointer hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\" onClick={() => {\n                      setShowBookmarks(false);\n                      navigateTo(bookmark.url);\n                    }}>\n                      <span className=\"text-lg\">{bookmark.favicon}</span>\n                      <div>\n                        <h3 className=\"font-medium\">{bookmark.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{bookmark.url}</p>\n                      </div>\n                    </div>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\"\n                      onClick={() => removeBookmark(bookmark.id)}\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (showHistory) {\n    return (\n      <div className=\"h-full flex flex-col bg-background\">\n        <div className=\"flex items-center justify-between p-4 border-b\">\n          <h2 className=\"text-lg font-semibold\">History</h2>\n          <Button variant=\"outline\" onClick={() => setShowHistory(false)}>\n            Back to Browser\n          </Button>\n        </div>\n        <div className=\"flex-1 p-4 overflow-auto\">\n          <div className=\"grid gap-2\">\n            {history.map(entry => (\n              <Card key={entry.id} className=\"cursor-pointer hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\" onClick={() => {\n                    setShowHistory(false);\n                    navigateTo(entry.url);\n                  }}>\n                    <span className=\"text-lg\">{entry.favicon}</span>\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium\">{entry.title}</h3>\n                      <p className=\"text-sm text-muted-foreground\">{entry.url}</p>\n                      <p className=\"text-xs text-muted-foreground\">{entry.timestamp.toLocaleString()}</p>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Tab Bar */}\n      <div className=\"flex bg-muted/30 border-b\">\n        {tabs.map(tab => (\n          <div\n            key={tab.id}\n            className={`flex items-center gap-2 px-4 py-2 border-r cursor-pointer min-w-0 max-w-48 ${\n              tab.id === activeTabId ? 'bg-background' : 'hover:bg-muted/50'\n            }`}\n            onClick={() => setActiveTabId(tab.id)}\n          >\n            <div className=\"flex-1 min-w-0\">\n              <span className=\"text-sm truncate block\">\n                {tab.isLoading ? 'Loading...' : tab.title}\n              </span>\n            </div>\n            {tabs.length > 1 && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"h-6 w-6 p-0\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  closeTab(tab.id);\n                }}\n              >\n                <X className=\"w-3 h-3\" />\n              </Button>\n            )}\n          </div>\n        ))}\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"px-3\"\n          onClick={createNewTab}\n        >\n          <Plus className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Navigation Bar */}\n      <div className=\"flex items-center gap-2 p-2 border-b bg-background\">\n        <Button variant=\"outline\" size=\"sm\" onClick={goHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={refresh}>\n          <RotateCcw className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={() => setShowBookmarks(true)}>\n          <Star className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={() => setShowHistory(true)}>\n          <History className=\"w-4 h-4\" />\n        </Button>\n        \n        <form onSubmit={handleUrlSubmit} className=\"flex-1 flex gap-2\">\n          <div className=\"flex-1 relative\">\n            <Input\n              value={urlInput}\n              onChange={(e) => setUrlInput(e.target.value)}\n              placeholder=\"Enter URL or search...\"\n              className=\"pl-8\"\n            />\n            <Shield className=\"w-4 h-4 absolute left-2 top-3 text-muted-foreground\" />\n          </div>\n          <Button type=\"submit\" size=\"sm\">\n            <Search className=\"w-4 h-4\" />\n          </Button>\n        </form>\n\n        {activeTab && activeTab.url !== 'about:blank' && (\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={isBookmarked ? () => {\n              const bookmark = bookmarks.find(b => b.url === urlInput);\n              if (bookmark) removeBookmark(bookmark.id);\n            } : addBookmark}\n          >\n            {isBookmarked ? <Star className=\"w-4 h-4 fill-current\" /> : <StarOff className=\"w-4 h-4\" />}\n          </Button>\n        )}\n      </div>\n\n      {/* Bookmarks Bar */}\n      <div className=\"flex items-center gap-2 p-2 bg-muted/20 border-b overflow-x-auto\">\n        {bookmarks.slice(0, 8).map(bookmark => (\n          <Button\n            key={bookmark.id}\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-xs whitespace-nowrap\"\n            onClick={() => navigateTo(bookmark.url)}\n          >\n            <span className=\"mr-1\">{bookmark.favicon}</span>\n            {bookmark.title}\n          </Button>\n        ))}\n      </div>\n\n      {/* Content Area */}\n      <div className=\"flex-1 relative bg-white\">\n        {activeTab?.url === 'about:blank' ? (\n          <div className=\"h-full flex items-center justify-center\">\n            <div className=\"text-center\">\n              <h2 className=\"text-2xl font-semibold mb-4\">New Tab</h2>\n              <div className=\"grid grid-cols-2 gap-4 max-w-md\">\n                {bookmarks.slice(0, 6).map(bookmark => (\n                  <Card \n                    key={bookmark.id} \n                    className=\"cursor-pointer hover:shadow-md transition-shadow\"\n                    onClick={() => navigateTo(bookmark.url)}\n                  >\n                    <CardContent className=\"p-4 text-center\">\n                      <div className=\"text-2xl mb-2\">{bookmark.favicon}</div>\n                      <div className=\"text-sm font-medium\">{bookmark.title}</div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          </div>\n        ) : (\n          <iframe\n            ref={iframeRef}\n            src={activeTab?.url}\n            className=\"w-full h-full border-0\"\n            onLoad={handleIframeLoad}\n            onError={handleIframeError}\n            sandbox=\"allow-scripts allow-same-origin allow-popups allow-forms\"\n          />\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":13595},"client/src/components/apps/Calculator.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\n\nexport const Calculator: FC = () => {\n  const [display, setDisplay] = useState('0');\n  const [previousValue, setPreviousValue] = useState<number | null>(null);\n  const [operation, setOperation] = useState<string | null>(null);\n  const [waitingForOperand, setWaitingForOperand] = useState(false);\n\n  const inputNumber = (num: string) => {\n    if (waitingForOperand) {\n      setDisplay(num);\n      setWaitingForOperand(false);\n    } else {\n      setDisplay(display === '0' ? num : display + num);\n    }\n  };\n\n  const inputDecimal = () => {\n    if (waitingForOperand) {\n      setDisplay('0.');\n      setWaitingForOperand(false);\n    } else if (display.indexOf('.') === -1) {\n      setDisplay(display + '.');\n    }\n  };\n\n  const clear = () => {\n    setDisplay('0');\n    setPreviousValue(null);\n    setOperation(null);\n    setWaitingForOperand(false);\n  };\n\n  const backspace = () => {\n    if (display.length > 1) {\n      setDisplay(display.slice(0, -1));\n    } else {\n      setDisplay('0');\n    }\n  };\n\n  const performOperation = (nextOperation: string) => {\n    const inputValue = parseFloat(display);\n\n    if (previousValue === null) {\n      setPreviousValue(inputValue);\n    } else if (operation) {\n      const currentValue = previousValue || 0;\n      const newValue = calculate(currentValue, inputValue, operation);\n\n      setDisplay(String(newValue));\n      setPreviousValue(newValue);\n    }\n\n    setWaitingForOperand(true);\n    setOperation(nextOperation);\n  };\n\n  const calculate = (firstValue: number, secondValue: number, operation: string): number => {\n    switch (operation) {\n      case '+':\n        return firstValue + secondValue;\n      case '-':\n        return firstValue - secondValue;\n      case '*':\n        return firstValue * secondValue;\n      case '/':\n        return firstValue / secondValue;\n      case '%':\n        return firstValue % secondValue;\n      default:\n        return secondValue;\n    }\n  };\n\n  const performCalculation = () => {\n    if (previousValue !== null && operation) {\n      const inputValue = parseFloat(display);\n      const newValue = calculate(previousValue, inputValue, operation);\n      \n      setDisplay(String(newValue));\n      setPreviousValue(null);\n      setOperation(null);\n      setWaitingForOperand(true);\n    }\n  };\n\n  const CalcButton: FC<{ \n    onClick: () => void; \n    className?: string; \n    children: React.ReactNode;\n    span?: number;\n  }> = ({ onClick, className = '', children, span = 1 }) => (\n    <Button\n      onClick={onClick}\n      className={`h-12 text-lg font-semibold transition-colors ${className} ${\n        span === 2 ? 'col-span-2' : ''\n      }`}\n      variant=\"outline\"\n    >\n      {children}\n    </Button>\n  );\n\n  return (\n    <div className=\"h-full flex flex-col max-w-xs mx-auto\">\n      {/* Display */}\n      <div className=\"mb-4 p-4 bg-gray-900 text-white text-right text-2xl font-mono rounded-lg border\">\n        <div className=\"truncate\" title={display}>\n          {display}\n        </div>\n      </div>\n\n      {/* Button Grid */}\n      <div className=\"grid grid-cols-4 gap-2 flex-1\">\n        {/* Row 1 */}\n        <CalcButton \n          onClick={clear}\n          className=\"bg-red-100 hover:bg-red-200 text-red-700\"\n        >\n          C\n        </CalcButton>\n        <CalcButton \n          onClick={backspace}\n          className=\"bg-gray-100 hover:bg-gray-200\"\n        >\n          ⌫\n        </CalcButton>\n        <CalcButton \n          onClick={() => performOperation('%')}\n          className=\"bg-blue-100 hover:bg-blue-200 text-blue-700\"\n        >\n          %\n        </CalcButton>\n        <CalcButton \n          onClick={() => performOperation('/')}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white\"\n        >\n          ÷\n        </CalcButton>\n\n        {/* Row 2 */}\n        <CalcButton onClick={() => inputNumber('7')}>7</CalcButton>\n        <CalcButton onClick={() => inputNumber('8')}>8</CalcButton>\n        <CalcButton onClick={() => inputNumber('9')}>9</CalcButton>\n        <CalcButton \n          onClick={() => performOperation('*')}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white\"\n        >\n          ×\n        </CalcButton>\n\n        {/* Row 3 */}\n        <CalcButton onClick={() => inputNumber('4')}>4</CalcButton>\n        <CalcButton onClick={() => inputNumber('5')}>5</CalcButton>\n        <CalcButton onClick={() => inputNumber('6')}>6</CalcButton>\n        <CalcButton \n          onClick={() => performOperation('-')}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white\"\n        >\n          −\n        </CalcButton>\n\n        {/* Row 4 */}\n        <CalcButton onClick={() => inputNumber('1')}>1</CalcButton>\n        <CalcButton onClick={() => inputNumber('2')}>2</CalcButton>\n        <CalcButton onClick={() => inputNumber('3')}>3</CalcButton>\n        <CalcButton \n          onClick={() => performOperation('+')}\n          className=\"bg-blue-500 hover:bg-blue-600 text-white\"\n        >\n          +\n        </CalcButton>\n\n        {/* Row 5 */}\n        <CalcButton onClick={() => inputNumber('0')} span={2}>0</CalcButton>\n        <CalcButton onClick={inputDecimal}>.</CalcButton>\n        <CalcButton \n          onClick={performCalculation}\n          className=\"bg-green-500 hover:bg-green-600 text-white\"\n        >\n          =\n        </CalcButton>\n      </div>\n    </div>\n  );\n};\n","size_bytes":5408},"client/src/components/apps/CalculatorPro.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card } from '@/components/ui/card';\nimport { Trash2, RotateCcw } from 'lucide-react';\n\nexport const CalculatorPro: FC = () => {\n  const [display, setDisplay] = useState('0');\n  const [previousValue, setPreviousValue] = useState<number | null>(null);\n  const [operation, setOperation] = useState<string | null>(null);\n  const [waitingForNewValue, setWaitingForNewValue] = useState(false);\n  const [history, setHistory] = useState<string[]>([]);\n  const [showHistory, setShowHistory] = useState(false);\n\n  const inputNumber = (num: string) => {\n    if (waitingForNewValue) {\n      setDisplay(num);\n      setWaitingForNewValue(false);\n    } else {\n      setDisplay(display === '0' ? num : display + num);\n    }\n  };\n\n  const inputOperator = (nextOperator: string) => {\n    const inputValue = parseFloat(display);\n\n    if (previousValue === null) {\n      setPreviousValue(inputValue);\n    } else if (operation) {\n      const currentValue = previousValue || 0;\n      const newValue = calculate(currentValue, inputValue, operation);\n\n      setDisplay(String(newValue));\n      setPreviousValue(newValue);\n    }\n\n    setWaitingForNewValue(true);\n    setOperation(nextOperator);\n  };\n\n  const calculate = (firstValue: number, secondValue: number, operation: string): number => {\n    switch (operation) {\n      case '+':\n        return firstValue + secondValue;\n      case '-':\n        return firstValue - secondValue;\n      case '×':\n        return firstValue * secondValue;\n      case '÷':\n        return secondValue !== 0 ? firstValue / secondValue : 0;\n      case '^':\n        return Math.pow(firstValue, secondValue);\n      case '%':\n        return firstValue % secondValue;\n      default:\n        return secondValue;\n    }\n  };\n\n  const performCalculation = () => {\n    const inputValue = parseFloat(display);\n\n    if (previousValue !== null && operation) {\n      const newValue = calculate(previousValue, inputValue, operation);\n      const calculation = `${previousValue} ${operation} ${inputValue} = ${newValue}`;\n      \n      setHistory(prev => [calculation, ...prev.slice(0, 9)]);\n      setDisplay(String(newValue));\n      setPreviousValue(null);\n      setOperation(null);\n      setWaitingForNewValue(true);\n    }\n  };\n\n  const clear = () => {\n    setDisplay('0');\n    setPreviousValue(null);\n    setOperation(null);\n    setWaitingForNewValue(false);\n  };\n\n  const clearEntry = () => {\n    setDisplay('0');\n    setWaitingForNewValue(false);\n  };\n\n  const inputDecimal = () => {\n    if (waitingForNewValue) {\n      setDisplay('0.');\n      setWaitingForNewValue(false);\n    } else if (display.indexOf('.') === -1) {\n      setDisplay(display + '.');\n    }\n  };\n\n  const performFunction = (func: string) => {\n    const inputValue = parseFloat(display);\n    let result: number;\n\n    switch (func) {\n      case 'sin':\n        result = Math.sin(inputValue * Math.PI / 180);\n        break;\n      case 'cos':\n        result = Math.cos(inputValue * Math.PI / 180);\n        break;\n      case 'tan':\n        result = Math.tan(inputValue * Math.PI / 180);\n        break;\n      case 'log':\n        result = Math.log10(inputValue);\n        break;\n      case 'ln':\n        result = Math.log(inputValue);\n        break;\n      case 'sqrt':\n        result = Math.sqrt(inputValue);\n        break;\n      case '1/x':\n        result = 1 / inputValue;\n        break;\n      case 'x²':\n        result = inputValue * inputValue;\n        break;\n      default:\n        return;\n    }\n\n    const calculation = `${func}(${inputValue}) = ${result}`;\n    setHistory(prev => [calculation, ...prev.slice(0, 9)]);\n    setDisplay(String(result));\n    setWaitingForNewValue(true);\n  };\n\n  const buttonClass = \"h-12 text-lg font-medium transition-all hover:scale-105\";\n  const operatorClass = `${buttonClass} bg-blue-600 hover:bg-blue-700 text-white`;\n  const numberClass = `${buttonClass} bg-muted hover:bg-accent`;\n  const functionClass = `${buttonClass} bg-green-600 hover:bg-green-700 text-white text-sm`;\n\n  return (\n    <div className=\"h-full bg-background p-4\">\n      <div className=\"max-w-4xl mx-auto h-full flex gap-4\">\n        {/* Calculator */}\n        <Card className=\"flex-1 p-4\">\n          <div className=\"h-full flex flex-col\">\n            {/* Display */}\n            <div className=\"bg-muted p-4 rounded mb-4 text-right\">\n              <div className=\"text-3xl font-mono font-bold break-all\">\n                {display}\n              </div>\n              {operation && previousValue !== null && (\n                <div className=\"text-sm text-muted-foreground\">\n                  {previousValue} {operation}\n                </div>\n              )}\n            </div>\n\n            {/* Controls */}\n            <div className=\"flex gap-2 mb-4\">\n              <Button onClick={clear} variant=\"destructive\" className=\"flex-1\">\n                <Trash2 className=\"w-4 h-4 mr-2\" />\n                Clear\n              </Button>\n              <Button onClick={clearEntry} variant=\"outline\" className=\"flex-1\">\n                CE\n              </Button>\n              <Button \n                onClick={() => setShowHistory(!showHistory)} \n                variant=\"outline\" \n                className=\"flex-1\"\n              >\n                History\n              </Button>\n            </div>\n\n            {/* Button Grid */}\n            <div className=\"grid grid-cols-6 gap-2 flex-1\">\n              {/* Scientific Functions */}\n              <Button onClick={() => performFunction('sin')} className={functionClass}>\n                sin\n              </Button>\n              <Button onClick={() => performFunction('cos')} className={functionClass}>\n                cos\n              </Button>\n              <Button onClick={() => performFunction('tan')} className={functionClass}>\n                tan\n              </Button>\n              <Button onClick={() => performFunction('log')} className={functionClass}>\n                log\n              </Button>\n              <Button onClick={() => performFunction('ln')} className={functionClass}>\n                ln\n              </Button>\n              <Button onClick={() => performFunction('sqrt')} className={functionClass}>\n                √\n              </Button>\n\n              <Button onClick={() => performFunction('1/x')} className={functionClass}>\n                1/x\n              </Button>\n              <Button onClick={() => performFunction('x²')} className={functionClass}>\n                x²\n              </Button>\n              <Button onClick={() => inputOperator('^')} className={operatorClass}>\n                x^y\n              </Button>\n              <Button onClick={() => inputOperator('%')} className={operatorClass}>\n                %\n              </Button>\n              <Button onClick={() => inputOperator('÷')} className={operatorClass}>\n                ÷\n              </Button>\n              <Button onClick={() => inputOperator('×')} className={operatorClass}>\n                ×\n              </Button>\n\n              <Button onClick={() => inputNumber('7')} className={numberClass}>\n                7\n              </Button>\n              <Button onClick={() => inputNumber('8')} className={numberClass}>\n                8\n              </Button>\n              <Button onClick={() => inputNumber('9')} className={numberClass}>\n                9\n              </Button>\n              <Button onClick={() => inputOperator('-')} className={operatorClass}>\n                −\n              </Button>\n              <Button onClick={() => inputOperator('+')} className={operatorClass}>\n                +\n              </Button>\n              <Button onClick={performCalculation} className={`${operatorClass} row-span-2`}>\n                =\n              </Button>\n\n              <Button onClick={() => inputNumber('4')} className={numberClass}>\n                4\n              </Button>\n              <Button onClick={() => inputNumber('5')} className={numberClass}>\n                5\n              </Button>\n              <Button onClick={() => inputNumber('6')} className={numberClass}>\n                6\n              </Button>\n              <Button onClick={() => inputNumber('1')} className={numberClass}>\n                1\n              </Button>\n              <Button onClick={() => inputNumber('2')} className={numberClass}>\n                2\n              </Button>\n\n              <Button onClick={() => inputNumber('3')} className={numberClass}>\n                3\n              </Button>\n              <Button onClick={() => inputNumber('0')} className={`${numberClass} col-span-2`}>\n                0\n              </Button>\n              <Button onClick={inputDecimal} className={numberClass}>\n                .\n              </Button>\n            </div>\n          </div>\n        </Card>\n\n        {/* History Panel */}\n        {showHistory && (\n          <Card className=\"w-80 p-4\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"font-semibold\">History</h3>\n              <Button\n                onClick={() => setHistory([])}\n                variant=\"ghost\"\n                size=\"sm\"\n              >\n                <RotateCcw className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            <div className=\"space-y-2 max-h-96 overflow-auto\">\n              {history.length === 0 ? (\n                <p className=\"text-muted-foreground text-sm text-center py-8\">\n                  No calculations yet\n                </p>\n              ) : (\n                history.map((calc, index) => (\n                  <div\n                    key={index}\n                    className=\"p-2 bg-muted rounded text-sm font-mono cursor-pointer hover:bg-accent\"\n                    onClick={() => {\n                      const result = calc.split(' = ')[1];\n                      setDisplay(result);\n                      setWaitingForNewValue(true);\n                    }}\n                  >\n                    {calc}\n                  </div>\n                ))\n              )}\n            </div>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":10173},"client/src/components/apps/Calendar.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardHeader, CardContent, CardTitle } from '@/components/ui/card';\nimport { CalendarIcon, Plus, ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface Event {\n  id: string;\n  title: string;\n  date: string;\n  time: string;\n  description?: string;\n}\n\nexport const Calendar: FC = () => {\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [events, setEvents] = useState<Event[]>(() => {\n    const stored = localStorage.getItem('calendar-events');\n    return stored ? JSON.parse(stored) : [];\n  });\n  const [showAddEvent, setShowAddEvent] = useState(false);\n  const [newEvent, setNewEvent] = useState({\n    title: '',\n    date: '',\n    time: '',\n    description: ''\n  });\n\n  const getDaysInMonth = (date: Date) => {\n    return new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n  };\n\n  const getFirstDayOfMonth = (date: Date) => {\n    return new Date(date.getFullYear(), date.getMonth(), 1).getDay();\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', { \n      year: 'numeric', \n      month: 'long' \n    });\n  };\n\n  const prevMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1));\n  };\n\n  const nextMonth = () => {\n    setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1));\n  };\n\n  const addEvent = () => {\n    if (newEvent.title && newEvent.date) {\n      const event: Event = {\n        id: Date.now().toString(),\n        ...newEvent\n      };\n      const updatedEvents = [...events, event];\n      setEvents(updatedEvents);\n      localStorage.setItem('calendar-events', JSON.stringify(updatedEvents));\n      setNewEvent({ title: '', date: '', time: '', description: '' });\n      setShowAddEvent(false);\n    }\n  };\n\n  const getEventsForDate = (day: number) => {\n    const dateStr = `${currentDate.getFullYear()}-${(currentDate.getMonth() + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;\n    return events.filter(event => event.date === dateStr);\n  };\n\n  const renderCalendarDays = () => {\n    const daysInMonth = getDaysInMonth(currentDate);\n    const firstDay = getFirstDayOfMonth(currentDate);\n    const days = [];\n\n    // Empty cells for days before the first day of the month\n    for (let i = 0; i < firstDay; i++) {\n      days.push(<div key={`empty-${i}`} className=\"h-24 border border-border\"></div>);\n    }\n\n    // Days of the month\n    for (let day = 1; day <= daysInMonth; day++) {\n      const dayEvents = getEventsForDate(day);\n      const isToday = new Date().getDate() === day && \n                     new Date().getMonth() === currentDate.getMonth() && \n                     new Date().getFullYear() === currentDate.getFullYear();\n\n      days.push(\n        <div key={day} className={`h-24 border border-border p-1 ${isToday ? 'bg-primary/10' : 'bg-background'}`}>\n          <div className={`text-sm font-medium ${isToday ? 'text-primary' : 'text-foreground'}`}>\n            {day}\n          </div>\n          <div className=\"space-y-1 mt-1\">\n            {dayEvents.slice(0, 2).map(event => (\n              <div key={event.id} className=\"text-xs bg-primary/20 text-primary px-1 py-0.5 rounded truncate\">\n                {event.title}\n              </div>\n            ))}\n            {dayEvents.length > 2 && (\n              <div className=\"text-xs text-muted-foreground\">+{dayEvents.length - 2} more</div>\n            )}\n          </div>\n        </div>\n      );\n    }\n\n    return days;\n  };\n\n  return (\n    <div className=\"h-full p-6 overflow-auto\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <CalendarIcon className=\"w-6 h-6 text-primary\" />\n          <h1 className=\"text-2xl font-bold\">Calendar</h1>\n        </div>\n        <Button onClick={() => setShowAddEvent(true)}>\n          <Plus className=\"w-4 h-4 mr-2\" />\n          Add Event\n        </Button>\n      </div>\n\n      <div className=\"flex items-center justify-between mb-4\">\n        <Button variant=\"outline\" onClick={prevMonth}>\n          <ChevronLeft className=\"w-4 h-4\" />\n        </Button>\n        <h2 className=\"text-xl font-semibold\">{formatDate(currentDate)}</h2>\n        <Button variant=\"outline\" onClick={nextMonth}>\n          <ChevronRight className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-7 gap-0 mb-4\">\n        {['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].map(day => (\n          <div key={day} className=\"h-10 border border-border bg-muted flex items-center justify-center font-medium\">\n            {day}\n          </div>\n        ))}\n      </div>\n\n      <div className=\"grid grid-cols-7 gap-0 mb-6\">\n        {renderCalendarDays()}\n      </div>\n\n      {showAddEvent && (\n        <Card className=\"fixed inset-x-4 top-20 z-50 max-w-md mx-auto\">\n          <CardHeader>\n            <CardTitle>Add New Event</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            <Input\n              placeholder=\"Event title\"\n              value={newEvent.title}\n              onChange={(e) => setNewEvent({...newEvent, title: e.target.value})}\n            />\n            <Input\n              type=\"date\"\n              value={newEvent.date}\n              onChange={(e) => setNewEvent({...newEvent, date: e.target.value})}\n            />\n            <Input\n              type=\"time\"\n              value={newEvent.time}\n              onChange={(e) => setNewEvent({...newEvent, time: e.target.value})}\n            />\n            <Input\n              placeholder=\"Description (optional)\"\n              value={newEvent.description}\n              onChange={(e) => setNewEvent({...newEvent, description: e.target.value})}\n            />\n            <div className=\"flex gap-2\">\n              <Button onClick={addEvent} className=\"flex-1\">Add Event</Button>\n              <Button variant=\"outline\" onClick={() => setShowAddEvent(false)} className=\"flex-1\">\n                Cancel\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n};","size_bytes":6217},"client/src/components/apps/CallOfDuty.tsx":{"content":"import { FC, useState, useEffect, useRef } from 'react';\nimport { Play, Users, ShoppingCart, Settings, Trophy, Target, Crosshair, Shield, Zap, Star, Crown, Coins, Swords, Search, Gamepad2 } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\ninterface Player {\n  id: string;\n  username: string;\n  level: number;\n  prestige: number;\n  kd: number;\n  wins: number;\n  losses: number;\n  rank: string;\n  avatar: string;\n  isOnline: boolean;\n  clan?: string;\n  coins: number;\n  codPoints: number;\n}\n\ninterface Weapon {\n  id: string;\n  name: string;\n  type: 'assault' | 'smg' | 'sniper' | 'lmg' | 'shotgun' | 'pistol';\n  damage: number;\n  range: number;\n  mobility: number;\n  accuracy: number;\n  fireRate: number;\n  unlockLevel: number;\n  price: number;\n  attachments: string[];\n  skin?: string;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\ninterface GameMode {\n  id: string;\n  name: string;\n  description: string;\n  maxPlayers: number;\n  mapRotation: string[];\n  duration: number;\n  featured: boolean;\n}\n\ninterface Lobby {\n  id: string;\n  name: string;\n  mode: string;\n  map: string;\n  players: number;\n  maxPlayers: number;\n  ping: number;\n  region: string;\n  host: string;\n  isPrivate: boolean;\n}\n\nconst gameModes: GameMode[] = [\n  {\n    id: 'tdm',\n    name: 'Team Deathmatch',\n    description: 'Classic team vs team combat',\n    maxPlayers: 12,\n    mapRotation: ['Nuketown', 'Crash', 'Shipment', 'Rust'],\n    duration: 600,\n    featured: true\n  },\n  {\n    id: 'domination',\n    name: 'Domination',\n    description: 'Capture and hold objectives',\n    maxPlayers: 12,\n    mapRotation: ['Terminal', 'Highrise', 'Favela'],\n    duration: 900,\n    featured: true\n  },\n  {\n    id: 'snd',\n    name: 'Search & Destroy',\n    description: 'Eliminate the enemy team or complete the objective',\n    maxPlayers: 12,\n    mapRotation: ['Crash', 'Strike', 'Dust2'],\n    duration: 480,\n    featured: false\n  },\n  {\n    id: 'br',\n    name: 'Battle Royale',\n    description: 'Last player standing wins',\n    maxPlayers: 150,\n    mapRotation: ['Verdansk', 'Blackout'],\n    duration: 1800,\n    featured: true\n  }\n];\n\nconst weapons: Weapon[] = [\n  {\n    id: 'ak47',\n    name: 'AK-47',\n    type: 'assault',\n    damage: 85,\n    range: 75,\n    mobility: 60,\n    accuracy: 70,\n    fireRate: 65,\n    unlockLevel: 1,\n    price: 0,\n    attachments: ['Red Dot', 'Extended Mag', 'Grip'],\n    rarity: 'common'\n  },\n  {\n    id: 'm4a1',\n    name: 'M4A1',\n    type: 'assault',\n    damage: 80,\n    range: 80,\n    mobility: 65,\n    accuracy: 85,\n    fireRate: 70,\n    unlockLevel: 5,\n    price: 1200,\n    attachments: ['ACOG', 'Silencer', 'Laser'],\n    rarity: 'rare'\n  },\n  {\n    id: 'awp',\n    name: 'AWP',\n    type: 'sniper',\n    damage: 100,\n    range: 100,\n    mobility: 30,\n    accuracy: 95,\n    fireRate: 20,\n    unlockLevel: 15,\n    price: 4750,\n    attachments: ['High Power Scope', 'Bipod'],\n    rarity: 'legendary'\n  }\n];\n\nexport const CallOfDuty: FC = () => {\n  const [currentScreen, setCurrentScreen] = useState<'main' | 'multiplayer' | 'shop' | 'loadout' | 'game' | 'lobby'>('main');\n  const [player, setPlayer] = useState<Player>({\n    id: 'player1',\n    username: 'Ghost_117',\n    level: 42,\n    prestige: 2,\n    kd: 1.85,\n    wins: 287,\n    losses: 156,\n    rank: 'Captain',\n    avatar: 'default',\n    isOnline: true,\n    clan: 'ELITE',\n    coins: 12500,\n    codPoints: 850\n  });\n  \n  const [selectedWeapon, setSelectedWeapon] = useState<Weapon>(weapons[0]);\n  const [selectedMode, setSelectedMode] = useState<GameMode>(gameModes[0]);\n  const [lobbies, setLobbies] = useState<Lobby[]>([]);\n  const [selectedLobby, setSelectedLobby] = useState<Lobby | null>(null);\n  const [isInGame, setIsInGame] = useState(false);\n  const [gameTime, setGameTime] = useState(600);\n  const [score, setScore] = useState({ team1: 0, team2: 0 });\n  const [playerScore, setPlayerScore] = useState({ kills: 0, deaths: 0, assists: 0 });\n\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  // Generate random lobbies\n  useEffect(() => {\n    const generateLobbies = () => {\n      const regions = ['US East', 'US West', 'Europe', 'Asia'];\n      const maps = ['Nuketown', 'Crash', 'Shipment', 'Terminal', 'Rust'];\n      \n      const newLobbies: Lobby[] = Array.from({ length: 15 }, (_, i) => ({\n        id: `lobby_${i}`,\n        name: `Room ${i + 1}`,\n        mode: gameModes[Math.floor(Math.random() * gameModes.length)].name,\n        map: maps[Math.floor(Math.random() * maps.length)],\n        players: Math.floor(Math.random() * 12) + 1,\n        maxPlayers: 12,\n        ping: Math.floor(Math.random() * 80) + 20,\n        region: regions[Math.floor(Math.random() * regions.length)],\n        host: `Player_${Math.floor(Math.random() * 1000)}`,\n        isPrivate: Math.random() > 0.7\n      }));\n      \n      setLobbies(newLobbies);\n    };\n\n    generateLobbies();\n    const interval = setInterval(generateLobbies, 5000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Game timer\n  useEffect(() => {\n    if (isInGame && gameTime > 0) {\n      const timer = setTimeout(() => setGameTime(prev => prev - 1), 1000);\n      return () => clearTimeout(timer);\n    }\n  }, [isInGame, gameTime]);\n\n  // Simple 3D game renderer\n  useEffect(() => {\n    if (currentScreen === 'game' && canvasRef.current) {\n      const canvas = canvasRef.current;\n      const ctx = canvas.getContext('2d');\n      if (!ctx) return;\n\n      const render = () => {\n        // Clear canvas\n        ctx.fillStyle = '#87CEEB';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n        // Draw ground\n        ctx.fillStyle = '#8B4513';\n        ctx.fillRect(0, canvas.height * 0.7, canvas.width, canvas.height * 0.3);\n\n        // Draw buildings/cover\n        ctx.fillStyle = '#696969';\n        ctx.fillRect(100, 300, 80, 120);\n        ctx.fillRect(300, 250, 100, 170);\n        ctx.fillRect(600, 320, 60, 100);\n\n        // Draw crosshair\n        ctx.strokeStyle = '#FF0000';\n        ctx.lineWidth = 2;\n        const centerX = canvas.width / 2;\n        const centerY = canvas.height / 2;\n        ctx.beginPath();\n        ctx.moveTo(centerX - 15, centerY);\n        ctx.lineTo(centerX + 15, centerY);\n        ctx.moveTo(centerX, centerY - 15);\n        ctx.lineTo(centerX, centerY + 15);\n        ctx.stroke();\n\n        // Draw HUD\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';\n        ctx.fillRect(10, 10, 200, 80);\n        ctx.fillStyle = '#FFFFFF';\n        ctx.font = '16px Arial';\n        ctx.fillText(`Health: 100`, 20, 30);\n        ctx.fillText(`Ammo: 30/90`, 20, 50);\n        ctx.fillText(`${Math.floor(gameTime / 60)}:${(gameTime % 60).toString().padStart(2, '0')}`, 20, 70);\n      };\n\n      render();\n    }\n  }, [currentScreen, gameTime]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const getRarityColor = (rarity: string) => {\n    switch (rarity) {\n      case 'common': return 'text-gray-600';\n      case 'rare': return 'text-blue-600';\n      case 'epic': return 'text-purple-600';\n      case 'legendary': return 'text-orange-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const joinLobby = (lobby: Lobby) => {\n    setSelectedLobby(lobby);\n    setCurrentScreen('lobby');\n  };\n\n  const startGame = () => {\n    setIsInGame(true);\n    setCurrentScreen('game');\n    setGameTime(600);\n    setScore({ team1: 0, team2: 0 });\n    setPlayerScore({ kills: 0, deaths: 0, assists: 0 });\n  };\n\n  if (currentScreen === 'game') {\n    return (\n      <div className=\"h-full bg-black relative overflow-hidden\">\n        <canvas \n          ref={canvasRef}\n          width={800}\n          height={600}\n          className=\"w-full h-full\"\n        />\n        \n        {/* Game HUD */}\n        <div className=\"absolute top-4 left-4 text-white\">\n          <div className=\"bg-black/70 p-2 rounded\">\n            <div className=\"text-green-400\">Health: 100</div>\n            <div className=\"text-blue-400\">Armor: 100</div>\n            <div className=\"text-yellow-400\">Ammo: 30/90</div>\n          </div>\n        </div>\n\n        <div className=\"absolute top-4 right-4 text-white\">\n          <div className=\"bg-black/70 p-2 rounded text-center\">\n            <div className=\"text-xl font-bold\">{formatTime(gameTime)}</div>\n            <div className=\"text-sm\">Team Deathmatch</div>\n          </div>\n        </div>\n\n        <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 text-white\">\n          <div className=\"bg-black/70 p-2 rounded flex gap-8\">\n            <div className=\"text-center\">\n              <div className=\"text-blue-400 text-xl font-bold\">{score.team1}</div>\n              <div className=\"text-sm\">BLUE</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-red-400 text-xl font-bold\">{score.team2}</div>\n              <div className=\"text-sm\">RED</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"absolute bottom-4 left-4 text-white\">\n          <div className=\"bg-black/70 p-2 rounded\">\n            <div className=\"text-green-400\">K: {playerScore.kills}</div>\n            <div className=\"text-red-400\">D: {playerScore.deaths}</div>\n            <div className=\"text-yellow-400\">A: {playerScore.assists}</div>\n          </div>\n        </div>\n\n        <div className=\"absolute bottom-4 right-4\">\n          <Button \n            onClick={() => setCurrentScreen('multiplayer')}\n            variant=\"outline\"\n            className=\"bg-red-600 hover:bg-red-700 text-white border-red-600\"\n          >\n            Leave Game\n          </Button>\n        </div>\n\n        {/* Minimap */}\n        <div className=\"absolute top-4 right-1/4 w-32 h-32 bg-black/70 border border-gray-600 rounded\">\n          <div className=\"relative w-full h-full\">\n            <div className=\"absolute top-1/2 left-1/2 w-2 h-2 bg-blue-400 rounded-full transform -translate-x-1/2 -translate-y-1/2\"></div>\n            <div className=\"absolute top-1/4 left-1/4 w-1 h-1 bg-red-400 rounded-full\"></div>\n            <div className=\"absolute bottom-1/4 right-1/4 w-1 h-1 bg-red-400 rounded-full\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentScreen === 'lobby') {\n    return (\n      <div className=\"h-full bg-gradient-to-br from-gray-900 to-black text-white overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-bold\">Lobby: {selectedLobby?.name}</h1>\n            <Button \n              onClick={() => setCurrentScreen('multiplayer')}\n              variant=\"outline\"\n              className=\"border-gray-600 text-gray-300 hover:bg-gray-700\"\n            >\n              Leave Lobby\n            </Button>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n            {/* Lobby Info */}\n            <div className=\"lg:col-span-2\">\n              <div className=\"bg-gray-800 rounded-lg p-6 mb-6\">\n                <h2 className=\"text-xl font-semibold mb-4\">Match Info</h2>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <span className=\"text-gray-400\">Mode:</span>\n                    <span className=\"ml-2 text-blue-400\">{selectedLobby?.mode}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-400\">Map:</span>\n                    <span className=\"ml-2 text-green-400\">{selectedLobby?.map}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-400\">Players:</span>\n                    <span className=\"ml-2\">{selectedLobby?.players}/{selectedLobby?.maxPlayers}</span>\n                  </div>\n                  <div>\n                    <span className=\"text-gray-400\">Ping:</span>\n                    <span className=\"ml-2 text-green-400\">{selectedLobby?.ping}ms</span>\n                  </div>\n                </div>\n              </div>\n\n              {/* Players List */}\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h2 className=\"text-xl font-semibold mb-4\">Players</h2>\n                <div className=\"space-y-2\">\n                  {Array.from({ length: selectedLobby?.players || 0 }, (_, i) => (\n                    <div key={i} className=\"flex items-center justify-between bg-gray-700 p-3 rounded\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center\">\n                          <span className=\"text-sm\">P{i + 1}</span>\n                        </div>\n                        <span>Player_{Math.floor(Math.random() * 1000)}</span>\n                        {i === 0 && <Crown className=\"w-4 h-4 text-yellow-400\" />}\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"text-sm text-gray-400\">Lvl {Math.floor(Math.random() * 50) + 1}</span>\n                        <div className=\"w-2 h-2 bg-green-400 rounded-full\"></div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n\n            {/* Chat & Controls */}\n            <div className=\"space-y-6\">\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h2 className=\"text-xl font-semibold mb-4\">Chat</h2>\n                <div className=\"bg-gray-900 rounded p-3 h-32 overflow-y-auto mb-3\">\n                  <div className=\"text-sm space-y-1\">\n                    <div><span className=\"text-blue-400\">System:</span> Welcome to the lobby!</div>\n                    <div><span className=\"text-green-400\">Player_123:</span> Ready to play?</div>\n                    <div><span className=\"text-yellow-400\">Ghost_117:</span> Let's go!</div>\n                  </div>\n                </div>\n                <input \n                  type=\"text\" \n                  placeholder=\"Type a message...\"\n                  className=\"w-full p-2 bg-gray-700 rounded text-white placeholder-gray-400\"\n                />\n              </div>\n\n              <div className=\"bg-gray-800 rounded-lg p-6\">\n                <h2 className=\"text-xl font-semibold mb-4\">Ready Status</h2>\n                <div className=\"space-y-3\">\n                  <Button \n                    onClick={startGame}\n                    className=\"w-full bg-green-600 hover:bg-green-700\"\n                  >\n                    <Play className=\"w-4 h-4 mr-2\" />\n                    Start Game\n                  </Button>\n                  <Button \n                    variant=\"outline\"\n                    className=\"w-full border-gray-600 text-gray-300 hover:bg-gray-700\"\n                  >\n                    <Settings className=\"w-4 h-4 mr-2\" />\n                    Lobby Settings\n                  </Button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentScreen === 'shop') {\n    return (\n      <div className=\"h-full bg-gradient-to-br from-gray-900 to-black text-white overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-bold\">COD Store</h1>\n            <div className=\"flex items-center gap-4\">\n              <div className=\"flex items-center gap-2\">\n                <Coins className=\"w-5 h-5 text-yellow-400\" />\n                <span>{player.coins.toLocaleString()}</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Zap className=\"w-5 h-5 text-blue-400\" />\n                <span>{player.codPoints}</span>\n              </div>\n              <Button onClick={() => setCurrentScreen('main')} variant=\"outline\">\n                Back to Main\n              </Button>\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {weapons.map((weapon) => (\n              <div key={weapon.id} className=\"bg-gray-800 rounded-lg p-6 hover:bg-gray-700 transition-colors\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className={`text-lg font-semibold ${getRarityColor(weapon.rarity)}`}>\n                    {weapon.name}\n                  </h3>\n                  <Badge variant=\"outline\" className=\"capitalize\">\n                    {weapon.type}\n                  </Badge>\n                </div>\n\n                <div className=\"space-y-2 mb-4\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Damage</span>\n                    <div className=\"flex items-center gap-2\">\n                      <Progress value={weapon.damage} className=\"w-16 h-2\" />\n                      <span className=\"text-sm\">{weapon.damage}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Range</span>\n                    <div className=\"flex items-center gap-2\">\n                      <Progress value={weapon.range} className=\"w-16 h-2\" />\n                      <span className=\"text-sm\">{weapon.range}</span>\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Mobility</span>\n                    <div className=\"flex items-center gap-2\">\n                      <Progress value={weapon.mobility} className=\"w-16 h-2\" />\n                      <span className=\"text-sm\">{weapon.mobility}</span>\n                    </div>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"text-sm text-gray-400\">\n                    Unlock: Level {weapon.unlockLevel}\n                  </div>\n                  <Button \n                    size=\"sm\"\n                    disabled={player.level < weapon.unlockLevel || player.coins < weapon.price}\n                    className=\"bg-green-600 hover:bg-green-700\"\n                  >\n                    {weapon.price === 0 ? 'Unlocked' : `${weapon.price} coins`}\n                  </Button>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentScreen === 'multiplayer') {\n    return (\n      <div className=\"h-full bg-gradient-to-br from-gray-900 to-black text-white overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h1 className=\"text-2xl font-bold\">Multiplayer</h1>\n            <Button onClick={() => setCurrentScreen('main')} variant=\"outline\">\n              Back to Main\n            </Button>\n          </div>\n\n          {/* Game Modes */}\n          <div className=\"mb-8\">\n            <h2 className=\"text-xl font-semibold mb-4\">Game Modes</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n              {gameModes.map((mode) => (\n                <div \n                  key={mode.id}\n                  onClick={() => setSelectedMode(mode)}\n                  className={`bg-gray-800 rounded-lg p-4 cursor-pointer transition-all hover:bg-gray-700 border-2 ${\n                    selectedMode.id === mode.id ? 'border-blue-500' : 'border-transparent'\n                  }`}\n                >\n                  <div className=\"flex items-center justify-between mb-2\">\n                    <h3 className=\"font-semibold\">{mode.name}</h3>\n                    {mode.featured && <Star className=\"w-4 h-4 text-yellow-400\" />}\n                  </div>\n                  <p className=\"text-sm text-gray-400 mb-3\">{mode.description}</p>\n                  <div className=\"text-xs text-gray-500\">\n                    {mode.maxPlayers} players • {formatTime(mode.duration)}\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Server Browser */}\n          <div>\n            <h2 className=\"text-xl font-semibold mb-4\">Server Browser</h2>\n            <div className=\"bg-gray-800 rounded-lg overflow-hidden\">\n              <div className=\"grid grid-cols-7 gap-4 p-4 bg-gray-700 text-sm font-medium\">\n                <div>Server Name</div>\n                <div>Mode</div>\n                <div>Map</div>\n                <div>Players</div>\n                <div>Ping</div>\n                <div>Region</div>\n                <div>Action</div>\n              </div>\n              <div className=\"divide-y divide-gray-700\">\n                {lobbies.slice(0, 10).map((lobby) => (\n                  <div key={lobby.id} className=\"grid grid-cols-7 gap-4 p-4 hover:bg-gray-700 transition-colors\">\n                    <div className=\"flex items-center gap-2\">\n                      {lobby.isPrivate && <Shield className=\"w-4 h-4 text-yellow-400\" />}\n                      {lobby.name}\n                    </div>\n                    <div className=\"text-blue-400\">{lobby.mode}</div>\n                    <div className=\"text-green-400\">{lobby.map}</div>\n                    <div>{lobby.players}/{lobby.maxPlayers}</div>\n                    <div className={`${lobby.ping < 50 ? 'text-green-400' : lobby.ping < 100 ? 'text-yellow-400' : 'text-red-400'}`}>\n                      {lobby.ping}ms\n                    </div>\n                    <div className=\"text-gray-400\">{lobby.region}</div>\n                    <div>\n                      <Button \n                        size=\"sm\"\n                        onClick={() => joinLobby(lobby)}\n                        disabled={lobby.players >= lobby.maxPlayers}\n                        className=\"bg-blue-600 hover:bg-blue-700\"\n                      >\n                        Join\n                      </Button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Main Menu\n  return (\n    <div className=\"h-full bg-gradient-to-br from-gray-900 to-black text-white overflow-hidden relative\">\n      {/* Background Video Effect */}\n      <div className=\"absolute inset-0 opacity-20\">\n        <div className=\"w-full h-full bg-gradient-to-r from-orange-500/20 to-red-500/20 animate-pulse\"></div>\n      </div>\n\n      <div className=\"relative z-10 p-8\">\n        {/* Header */}\n        <div className=\"flex items-center justify-between mb-8\">\n          <div className=\"flex items-center gap-4\">\n            <Target className=\"w-8 h-8 text-orange-500\" />\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent\">\n              CALL OF DUTY\n            </h1>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-right\">\n              <div className=\"font-semibold\">{player.username}</div>\n              <div className=\"text-sm text-gray-400\">Level {player.level} • Prestige {player.prestige}</div>\n            </div>\n            <div className=\"w-12 h-12 bg-orange-600 rounded-full flex items-center justify-center\">\n              <span className=\"font-bold\">G</span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n          {/* Main Menu */}\n          <div className=\"lg:col-span-2\">\n            <div className=\"grid grid-cols-2 gap-6 mb-8\">\n              <Button\n                onClick={() => setCurrentScreen('multiplayer')}\n                className=\"h-32 bg-gradient-to-br from-blue-600 to-blue-800 hover:from-blue-700 hover:to-blue-900 flex flex-col items-center justify-center\"\n              >\n                <Users className=\"w-8 h-8 mb-2\" />\n                <span className=\"text-xl font-semibold\">Multiplayer</span>\n                <span className=\"text-sm opacity-80\">Join online matches</span>\n              </Button>\n\n              <Button\n                onClick={() => setCurrentScreen('shop')}\n                className=\"h-32 bg-gradient-to-br from-green-600 to-green-800 hover:from-green-700 hover:to-green-900 flex flex-col items-center justify-center\"\n              >\n                <ShoppingCart className=\"w-8 h-8 mb-2\" />\n                <span className=\"text-xl font-semibold\">Store</span>\n                <span className=\"text-sm opacity-80\">Buy weapons & items</span>\n              </Button>\n\n              <Button\n                onClick={() => setCurrentScreen('loadout')}\n                className=\"h-32 bg-gradient-to-br from-purple-600 to-purple-800 hover:from-purple-700 hover:to-purple-900 flex flex-col items-center justify-center\"\n              >\n                <Swords className=\"w-8 h-8 mb-2\" />\n                <span className=\"text-xl font-semibold\">Loadout</span>\n                <span className=\"text-sm opacity-80\">Customize weapons</span>\n              </Button>\n\n              <Button\n                className=\"h-32 bg-gradient-to-br from-orange-600 to-orange-800 hover:from-orange-700 hover:to-orange-900 flex flex-col items-center justify-center\"\n              >\n                <Trophy className=\"w-8 h-8 mb-2\" />\n                <span className=\"text-xl font-semibold\">Barracks</span>\n                <span className=\"text-sm opacity-80\">Stats & achievements</span>\n              </Button>\n            </div>\n\n            {/* Featured Content */}\n            <div className=\"bg-gradient-to-r from-red-900/50 to-orange-900/50 rounded-lg p-6 border border-red-700/30\">\n              <h2 className=\"text-xl font-bold mb-2\">Season 2: Reloaded</h2>\n              <p className=\"text-gray-300 mb-4\">New maps, weapons, and operators available now!</p>\n              <Button className=\"bg-red-600 hover:bg-red-700\">\n                Learn More\n              </Button>\n            </div>\n          </div>\n\n          {/* Player Stats */}\n          <div className=\"space-y-6\">\n            <div className=\"bg-gray-800/80 rounded-lg p-6\">\n              <h2 className=\"text-lg font-semibold mb-4\">Player Stats</h2>\n              <div className=\"space-y-3\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-400\">K/D Ratio</span>\n                  <span className=\"text-green-400 font-semibold\">{player.kd}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-400\">Wins</span>\n                  <span className=\"text-blue-400\">{player.wins}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-400\">Rank</span>\n                  <span className=\"text-yellow-400\">{player.rank}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-gray-400\">Clan</span>\n                  <span className=\"text-purple-400\">[{player.clan}]</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800/80 rounded-lg p-6\">\n              <h2 className=\"text-lg font-semibold mb-4\">Progression</h2>\n              <div className=\"space-y-3\">\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Level {player.level}</span>\n                    <span className=\"text-sm\">75%</span>\n                  </div>\n                  <Progress value={75} className=\"h-2\" />\n                </div>\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Battle Pass</span>\n                    <span className=\"text-sm\">Tier 42</span>\n                  </div>\n                  <Progress value={60} className=\"h-2\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-800/80 rounded-lg p-6\">\n              <h2 className=\"text-lg font-semibold mb-4\">Quick Match</h2>\n              <Button \n                onClick={() => setCurrentScreen('multiplayer')}\n                className=\"w-full bg-orange-600 hover:bg-orange-700\"\n              >\n                <Play className=\"w-4 h-4 mr-2\" />\n                Find Match\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":28580},"client/src/components/apps/CloudStorage.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Cloud, Upload, Download, Folder, File, Trash2, Share, Lock, Search, Grid, List } from 'lucide-react';\n\ninterface CloudFile {\n  id: string;\n  name: string;\n  type: 'file' | 'folder';\n  size: number;\n  modified: Date;\n  shared: boolean;\n  encrypted: boolean;\n  mimeType?: string;\n  path: string;\n}\n\nexport const CloudStorage: FC = () => {\n  const [files, setFiles] = useState<CloudFile[]>([]);\n  const [currentPath, setCurrentPath] = useState('/');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('list');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isUploading, setIsUploading] = useState(false);\n  const [storageUsed, setStorageUsed] = useState(2.3); // GB\n  const [storageTotal] = useState(15); // GB\n\n  useEffect(() => {\n    loadFiles();\n  }, [currentPath]);\n\n  const loadFiles = () => {\n    // Simulate cloud storage files\n    const mockFiles: CloudFile[] = [\n      {\n        id: '1',\n        name: 'Documents',\n        type: 'folder',\n        size: 0,\n        modified: new Date('2024-01-15'),\n        shared: false,\n        encrypted: false,\n        path: '/Documents'\n      },\n      {\n        id: '2',\n        name: 'Photos',\n        type: 'folder',\n        size: 0,\n        modified: new Date('2024-01-10'),\n        shared: true,\n        encrypted: false,\n        path: '/Photos'\n      },\n      {\n        id: '3',\n        name: 'Project Report.pdf',\n        type: 'file',\n        size: 2048576,\n        modified: new Date('2024-01-12'),\n        shared: false,\n        encrypted: true,\n        mimeType: 'application/pdf',\n        path: '/Project Report.pdf'\n      },\n      {\n        id: '4',\n        name: 'Backup.zip',\n        type: 'file',\n        size: 52428800,\n        modified: new Date('2024-01-08'),\n        shared: false,\n        encrypted: true,\n        mimeType: 'application/zip',\n        path: '/Backup.zip'\n      }\n    ];\n    setFiles(mockFiles);\n  };\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    setIsUploading(true);\n    setUploadProgress(0);\n\n    // Simulate upload progress\n    const interval = setInterval(() => {\n      setUploadProgress(prev => {\n        if (prev >= 100) {\n          clearInterval(interval);\n          setIsUploading(false);\n          \n          // Add uploaded file to list\n          const newFile: CloudFile = {\n            id: Date.now().toString(),\n            name: file.name,\n            type: 'file',\n            size: file.size,\n            modified: new Date(),\n            shared: false,\n            encrypted: false,\n            mimeType: file.type,\n            path: currentPath + file.name\n          };\n          setFiles(prev => [...prev, newFile]);\n          return 100;\n        }\n        return prev + 10;\n      });\n    }, 200);\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const getFileIcon = (file: CloudFile) => {\n    if (file.type === 'folder') return <Folder className=\"h-5 w-5 text-blue-500\" />;\n    \n    const ext = file.name.split('.').pop()?.toLowerCase();\n    switch (ext) {\n      case 'pdf': return <File className=\"h-5 w-5 text-red-500\" />;\n      case 'zip': case 'rar': return <File className=\"h-5 w-5 text-yellow-500\" />;\n      case 'jpg': case 'png': case 'gif': return <File className=\"h-5 w-5 text-green-500\" />;\n      case 'mp4': case 'avi': return <File className=\"h-5 w-5 text-purple-500\" />;\n      default: return <File className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  const filteredFiles = files.filter(file =>\n    file.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Cloud className=\"h-6 w-6 text-primary\" />\n            <h1 className=\"text-xl font-semibold\">Cloud Storage</h1>\n            <Badge variant=\"secondary\">15GB</Badge>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant={viewMode === 'list' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setViewMode('list')}\n            >\n              <List className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              variant={viewMode === 'grid' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => setViewMode('grid')}\n            >\n              <Grid className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        </div>\n\n        {/* Storage Usage */}\n        <div className=\"mb-4\">\n          <div className=\"flex justify-between text-sm mb-2\">\n            <span>Storage Used</span>\n            <span>{storageUsed.toFixed(1)} GB of {storageTotal} GB</span>\n          </div>\n          <Progress value={(storageUsed / storageTotal) * 100} className=\"h-2\" />\n        </div>\n\n        {/* Search and Upload */}\n        <div className=\"flex gap-2\">\n          <div className=\"flex-1 relative\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search files...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n          \n          <label htmlFor=\"file-upload\" className=\"cursor-pointer\">\n            <Button disabled={isUploading}>\n              <Upload className=\"h-4 w-4 mr-2\" />\n              Upload\n            </Button>\n            <input\n              id=\"file-upload\"\n              type=\"file\"\n              className=\"hidden\"\n              onChange={handleFileUpload}\n              disabled={isUploading}\n            />\n          </label>\n        </div>\n\n        {/* Upload Progress */}\n        {isUploading && (\n          <div className=\"mt-2\">\n            <div className=\"flex justify-between text-sm mb-1\">\n              <span>Uploading...</span>\n              <span>{uploadProgress}%</span>\n            </div>\n            <Progress value={uploadProgress} className=\"h-2\" />\n          </div>\n        )}\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 overflow-auto p-4\">\n        {viewMode === 'list' ? (\n          <div className=\"space-y-2\">\n            {filteredFiles.map((file) => (\n              <Card key={file.id} className=\"p-3 hover:bg-accent cursor-pointer\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-3\">\n                    {getFileIcon(file)}\n                    <div>\n                      <div className=\"flex items-center gap-2\">\n                        <span className=\"font-medium\">{file.name}</span>\n                        {file.shared && <Share className=\"h-3 w-3 text-blue-500\" />}\n                        {file.encrypted && <Lock className=\"h-3 w-3 text-green-500\" />}\n                      </div>\n                      <div className=\"text-sm text-muted-foreground\">\n                        {file.type === 'file' && formatFileSize(file.size)} • \n                        Modified {file.modified.toLocaleDateString()}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center gap-1\">\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <Download className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <Share className=\"h-4 w-4\" />\n                    </Button>\n                    <Button variant=\"ghost\" size=\"sm\">\n                      <Trash2 className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card key={file.id} className=\"p-4 hover:bg-accent cursor-pointer\">\n                <div className=\"text-center\">\n                  <div className=\"mb-2 flex justify-center\">\n                    {getFileIcon(file)}\n                  </div>\n                  <div className=\"text-sm font-medium truncate\">{file.name}</div>\n                  <div className=\"text-xs text-muted-foreground\">\n                    {file.type === 'file' && formatFileSize(file.size)}\n                  </div>\n                  <div className=\"flex justify-center gap-1 mt-2\">\n                    {file.shared && <Share className=\"h-3 w-3 text-blue-500\" />}\n                    {file.encrypted && <Lock className=\"h-3 w-3 text-green-500\" />}\n                  </div>\n                </div>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {filteredFiles.length === 0 && (\n          <div className=\"text-center py-12\">\n            <Cloud className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n            <h3 className=\"text-lg font-medium mb-2\">No files found</h3>\n            <p className=\"text-muted-foreground\">\n              {searchTerm ? 'Try adjusting your search' : 'Upload your first file to get started'}\n            </p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":10022},"client/src/components/apps/ColorPaletteSelector.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Palette, Plus, Download, Upload, Edit3, Trash2, Copy, Check, Eye, Sparkles } from 'lucide-react';\nimport { colorPaletteManager, defaultPalettes, isCustomPalette, getContrastColor } from '@/lib/colorPalette';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface ColorInputProps {\n  label: string;\n  value: string;\n  onChange: (value: string) => void;\n  description?: string;\n}\n\nconst ColorInput: FC<ColorInputProps> = ({ label, value, onChange, description }) => {\n  return (\n    <div className=\"space-y-2\">\n      <Label className=\"text-sm font-medium\">{label}</Label>\n      {description && <p className=\"text-xs text-gray-500\">{description}</p>}\n      <div className=\"flex gap-2\">\n        <div \n          className=\"w-12 h-10 rounded border-2 border-gray-300 cursor-pointer\"\n          style={{ backgroundColor: value }}\n          onClick={() => document.getElementById(`color-${label}`)?.click()}\n        />\n        <Input\n          id={`color-${label}`}\n          type=\"color\"\n          value={value}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"w-20 h-10 p-1 border cursor-pointer\"\n        />\n        <Input\n          value={value.toUpperCase()}\n          onChange={(e) => onChange(e.target.value)}\n          className=\"flex-1 font-mono text-sm\"\n          placeholder=\"#FFFFFF\"\n        />\n      </div>\n    </div>\n  );\n};\n\nexport const ColorPaletteSelector: FC = () => {\n  const [currentPalette, setCurrentPalette] = useState(colorPaletteManager.getCurrentPalette());\n  const [allPalettes, setAllPalettes] = useState(colorPaletteManager.getAllPalettes());\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [showEditDialog, setShowEditDialog] = useState(false);\n  const [editingPalette, setEditingPalette] = useState<any>(null);\n  const [previewPalette, setPreviewPalette] = useState<any>(null);\n  const [isPreviewMode, setIsPreviewMode] = useState(false);\n  const { toast } = useToast();\n\n  const [newPalette, setNewPalette] = useState({\n    name: '',\n    description: '',\n    primary: '#3b82f6',\n    secondary: '#1e293b',\n    accent: '#60a5fa',\n    background: '#0f172a',\n    surface: '#1e293b',\n    text: '#f1f5f9',\n    textSecondary: '#64748b',\n    border: '#334155',\n    success: '#10b981',\n    warning: '#f59e0b',\n    error: '#ef4444',\n    info: '#06b6d4'\n  });\n\n  useEffect(() => {\n    const unsubscribe = colorPaletteManager.onChange((palette) => {\n      setCurrentPalette(palette);\n      setAllPalettes(colorPaletteManager.getAllPalettes());\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const handlePaletteSelect = (paletteId: string) => {\n    const success = colorPaletteManager.setPalette(paletteId);\n    if (success) {\n      toast({\n        title: \"Palette Applied\",\n        description: \"Color palette has been updated successfully.\",\n      });\n    }\n  };\n\n  const handleCreatePalette = () => {\n    if (!newPalette.name.trim()) {\n      toast({\n        title: \"Name Required\",\n        description: \"Please enter a name for your custom palette.\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    const palette = colorPaletteManager.createCustomPalette(newPalette);\n    setAllPalettes(colorPaletteManager.getAllPalettes());\n    setShowCreateDialog(false);\n    setNewPalette({\n      name: '',\n      description: '',\n      primary: '#3b82f6',\n      secondary: '#1e293b',\n      accent: '#60a5fa',\n      background: '#0f172a',\n      surface: '#1e293b',\n      text: '#f1f5f9',\n      textSecondary: '#64748b',\n      border: '#334155',\n      success: '#10b981',\n      warning: '#f59e0b',\n      error: '#ef4444',\n      info: '#06b6d4'\n    });\n\n    toast({\n      title: \"Palette Created\",\n      description: `Custom palette \"${palette.name}\" has been created.`,\n    });\n  };\n\n  const handleEditPalette = (palette: any) => {\n    setEditingPalette({ ...palette });\n    setShowEditDialog(true);\n  };\n\n  const handleUpdatePalette = () => {\n    if (!editingPalette) return;\n\n    const success = colorPaletteManager.updateCustomPalette(editingPalette.id, editingPalette);\n    if (success) {\n      setAllPalettes(colorPaletteManager.getAllPalettes());\n      setShowEditDialog(false);\n      setEditingPalette(null);\n      \n      toast({\n        title: \"Palette Updated\",\n        description: \"Custom palette has been updated successfully.\",\n      });\n    }\n  };\n\n  const handleDeletePalette = (paletteId: string) => {\n    const success = colorPaletteManager.deleteCustomPalette(paletteId);\n    if (success) {\n      setAllPalettes(colorPaletteManager.getAllPalettes());\n      toast({\n        title: \"Palette Deleted\",\n        description: \"Custom palette has been deleted.\",\n      });\n    }\n  };\n\n  const handleExportPalette = (paletteId: string) => {\n    const exported = colorPaletteManager.exportPalette(paletteId);\n    if (exported) {\n      navigator.clipboard.writeText(exported);\n      toast({\n        title: \"Palette Exported\",\n        description: \"Palette JSON has been copied to clipboard.\",\n      });\n    }\n  };\n\n  const handleImportPalette = () => {\n    navigator.clipboard.readText().then(text => {\n      const imported = colorPaletteManager.importPalette(text);\n      if (imported) {\n        setAllPalettes(colorPaletteManager.getAllPalettes());\n        toast({\n          title: \"Palette Imported\",\n          description: `Palette \"${imported.name}\" has been imported.`,\n        });\n      } else {\n        toast({\n          title: \"Import Failed\",\n          description: \"Invalid palette format in clipboard.\",\n          variant: \"destructive\"\n        });\n      }\n    }).catch(() => {\n      toast({\n        title: \"Import Failed\",\n        description: \"Could not read from clipboard.\",\n        variant: \"destructive\"\n      });\n    });\n  };\n\n  const handlePreviewPalette = (palette: any) => {\n    setPreviewPalette(palette);\n    setIsPreviewMode(true);\n    \n    // Temporarily apply palette for preview\n    const root = document.documentElement;\n    const originalValues: any = {};\n    \n    // Store original values\n    ['--primary', '--secondary', '--accent', '--background', '--surface', '--foreground'].forEach(prop => {\n      originalValues[prop] = root.style.getPropertyValue(prop);\n    });\n\n    // Apply preview\n    colorPaletteManager.setPalette(palette.id);\n\n    // Restore after 3 seconds\n    setTimeout(() => {\n      if (isPreviewMode) {\n        colorPaletteManager.setPalette(currentPalette.id);\n        setIsPreviewMode(false);\n        setPreviewPalette(null);\n      }\n    }, 3000);\n  };\n\n  const stopPreview = () => {\n    if (isPreviewMode) {\n      colorPaletteManager.setPalette(currentPalette.id);\n      setIsPreviewMode(false);\n      setPreviewPalette(null);\n    }\n  };\n\n  const renderPaletteCard = (palette: any) => (\n    <Card key={palette.id} className={`cursor-pointer transition-all hover:shadow-lg ${\n      currentPalette.id === palette.id ? 'ring-2 ring-primary' : ''\n    }`}>\n      <CardHeader className=\"pb-2\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-sm font-medium\">{palette.name}</CardTitle>\n          <div className=\"flex gap-1\">\n            {isCustomPalette(palette) && (\n              <Badge variant=\"secondary\" className=\"text-xs\">Custom</Badge>\n            )}\n            {currentPalette.id === palette.id && (\n              <Badge variant=\"default\" className=\"text-xs\">Active</Badge>\n            )}\n          </div>\n        </div>\n        <p className=\"text-xs text-gray-500\">{palette.description}</p>\n      </CardHeader>\n      <CardContent className=\"space-y-3\">\n        {/* Color preview */}\n        <div className=\"grid grid-cols-6 gap-1 h-8\">\n          <div className=\"rounded\" style={{ backgroundColor: palette.primary }} title=\"Primary\" />\n          <div className=\"rounded\" style={{ backgroundColor: palette.secondary }} title=\"Secondary\" />\n          <div className=\"rounded\" style={{ backgroundColor: palette.accent }} title=\"Accent\" />\n          <div className=\"rounded\" style={{ backgroundColor: palette.background }} title=\"Background\" />\n          <div className=\"rounded\" style={{ backgroundColor: palette.success }} title=\"Success\" />\n          <div className=\"rounded\" style={{ backgroundColor: palette.error }} title=\"Error\" />\n        </div>\n\n        {/* Actions */}\n        <div className=\"flex gap-1 flex-wrap\">\n          <Button\n            size=\"sm\"\n            variant={currentPalette.id === palette.id ? \"default\" : \"outline\"}\n            onClick={() => handlePaletteSelect(palette.id)}\n            className=\"text-xs\"\n          >\n            {currentPalette.id === palette.id ? <Check className=\"w-3 h-3 mr-1\" /> : <Palette className=\"w-3 h-3 mr-1\" />}\n            {currentPalette.id === palette.id ? 'Active' : 'Apply'}\n          </Button>\n          \n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => handlePreviewPalette(palette)}\n            className=\"text-xs\"\n          >\n            <Eye className=\"w-3 h-3\" />\n          </Button>\n\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => handleExportPalette(palette.id)}\n            className=\"text-xs\"\n          >\n            <Copy className=\"w-3 h-3\" />\n          </Button>\n\n          {isCustomPalette(palette) && (\n            <>\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => handleEditPalette(palette)}\n                className=\"text-xs\"\n              >\n                <Edit3 className=\"w-3 h-3\" />\n              </Button>\n              <Button\n                size=\"sm\"\n                variant=\"destructive\"\n                onClick={() => handleDeletePalette(palette.id)}\n                className=\"text-xs\"\n              >\n                <Trash2 className=\"w-3 h-3\" />\n              </Button>\n            </>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  const renderColorInputs = (palette: any, setPalette: (palette: any) => void) => (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n      <ColorInput\n        label=\"Primary\"\n        value={palette.primary}\n        onChange={(value) => setPalette({ ...palette, primary: value })}\n        description=\"Main brand color\"\n      />\n      <ColorInput\n        label=\"Secondary\"\n        value={palette.secondary}\n        onChange={(value) => setPalette({ ...palette, secondary: value })}\n        description=\"Secondary brand color\"\n      />\n      <ColorInput\n        label=\"Accent\"\n        value={palette.accent}\n        onChange={(value) => setPalette({ ...palette, accent: value })}\n        description=\"Accent and highlight color\"\n      />\n      <ColorInput\n        label=\"Background\"\n        value={palette.background}\n        onChange={(value) => setPalette({ ...palette, background: value })}\n        description=\"Main background color\"\n      />\n      <ColorInput\n        label=\"Surface\"\n        value={palette.surface}\n        onChange={(value) => setPalette({ ...palette, surface: value })}\n        description=\"Card and panel background\"\n      />\n      <ColorInput\n        label=\"Text\"\n        value={palette.text}\n        onChange={(value) => setPalette({ ...palette, text: value })}\n        description=\"Primary text color\"\n      />\n      <ColorInput\n        label=\"Text Secondary\"\n        value={palette.textSecondary}\n        onChange={(value) => setPalette({ ...palette, textSecondary: value })}\n        description=\"Secondary text color\"\n      />\n      <ColorInput\n        label=\"Border\"\n        value={palette.border}\n        onChange={(value) => setPalette({ ...palette, border: value })}\n        description=\"Border and divider color\"\n      />\n      <ColorInput\n        label=\"Success\"\n        value={palette.success}\n        onChange={(value) => setPalette({ ...palette, success: value })}\n        description=\"Success state color\"\n      />\n      <ColorInput\n        label=\"Warning\"\n        value={palette.warning}\n        onChange={(value) => setPalette({ ...palette, warning: value })}\n        description=\"Warning state color\"\n      />\n      <ColorInput\n        label=\"Error\"\n        value={palette.error}\n        onChange={(value) => setPalette({ ...palette, error: value })}\n        description=\"Error state color\"\n      />\n      <ColorInput\n        label=\"Info\"\n        value={palette.info}\n        onChange={(value) => setPalette({ ...palette, info: value })}\n        description=\"Info state color\"\n      />\n    </div>\n  );\n\n  return (\n    <div className=\"p-6 space-y-6 max-h-full overflow-auto\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n          <Sparkles className=\"w-6 h-6\" />\n          Color Palette Selector\n        </h1>\n        <div className=\"flex gap-2\">\n          <Button onClick={handleImportPalette} variant=\"outline\" size=\"sm\">\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Import\n          </Button>\n          <Dialog open={showCreateDialog} onOpenChange={setShowCreateDialog}>\n            <DialogTrigger asChild>\n              <Button size=\"sm\">\n                <Plus className=\"w-4 h-4 mr-2\" />\n                Create Custom\n              </Button>\n            </DialogTrigger>\n            <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-auto\">\n              <DialogHeader>\n                <DialogTitle>Create Custom Palette</DialogTitle>\n              </DialogHeader>\n              <div className=\"space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <Label>Palette Name</Label>\n                    <Input\n                      value={newPalette.name}\n                      onChange={(e) => setNewPalette({ ...newPalette, name: e.target.value })}\n                      placeholder=\"My Custom Palette\"\n                    />\n                  </div>\n                  <div>\n                    <Label>Description</Label>\n                    <Input\n                      value={newPalette.description}\n                      onChange={(e) => setNewPalette({ ...newPalette, description: e.target.value })}\n                      placeholder=\"A beautiful custom color scheme\"\n                    />\n                  </div>\n                </div>\n                \n                {renderColorInputs(newPalette, setNewPalette)}\n                \n                <div className=\"flex justify-end gap-2\">\n                  <Button variant=\"outline\" onClick={() => setShowCreateDialog(false)}>\n                    Cancel\n                  </Button>\n                  <Button onClick={handleCreatePalette}>\n                    Create Palette\n                  </Button>\n                </div>\n              </div>\n            </DialogContent>\n          </Dialog>\n        </div>\n      </div>\n\n      {isPreviewMode && previewPalette && (\n        <Card className=\"border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20\">\n          <CardContent className=\"py-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"font-medium\">Previewing: {previewPalette.name}</p>\n                <p className=\"text-sm text-gray-600\">Preview will end automatically in a few seconds</p>\n              </div>\n              <Button size=\"sm\" variant=\"outline\" onClick={stopPreview}>\n                Stop Preview\n              </Button>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      <Tabs defaultValue=\"default\" className=\"w-full\">\n        <TabsList>\n          <TabsTrigger value=\"default\">Default Palettes</TabsTrigger>\n          <TabsTrigger value=\"custom\">Custom Palettes</TabsTrigger>\n        </TabsList>\n        \n        <TabsContent value=\"default\" className=\"space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {defaultPalettes.map(renderPaletteCard)}\n          </div>\n        </TabsContent>\n        \n        <TabsContent value=\"custom\" className=\"space-y-4\">\n          {allPalettes.filter(isCustomPalette).length === 0 ? (\n            <Card>\n              <CardContent className=\"py-8 text-center\">\n                <Palette className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n                <h3 className=\"text-lg font-medium mb-2\">No Custom Palettes</h3>\n                <p className=\"text-gray-500 mb-4\">Create your first custom color palette to get started</p>\n                <Button onClick={() => setShowCreateDialog(true)}>\n                  <Plus className=\"w-4 h-4 mr-2\" />\n                  Create Custom Palette\n                </Button>\n              </CardContent>\n            </Card>\n          ) : (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {allPalettes.filter(isCustomPalette).map(renderPaletteCard)}\n            </div>\n          )}\n        </TabsContent>\n      </Tabs>\n\n      {/* Edit Dialog */}\n      <Dialog open={showEditDialog} onOpenChange={setShowEditDialog}>\n        <DialogContent className=\"max-w-4xl max-h-[90vh] overflow-auto\">\n          <DialogHeader>\n            <DialogTitle>Edit Custom Palette</DialogTitle>\n          </DialogHeader>\n          {editingPalette && (\n            <div className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div>\n                  <Label>Palette Name</Label>\n                  <Input\n                    value={editingPalette.name}\n                    onChange={(e) => setEditingPalette({ ...editingPalette, name: e.target.value })}\n                  />\n                </div>\n                <div>\n                  <Label>Description</Label>\n                  <Input\n                    value={editingPalette.description}\n                    onChange={(e) => setEditingPalette({ ...editingPalette, description: e.target.value })}\n                  />\n                </div>\n              </div>\n              \n              {renderColorInputs(editingPalette, setEditingPalette)}\n              \n              <div className=\"flex justify-end gap-2\">\n                <Button variant=\"outline\" onClick={() => setShowEditDialog(false)}>\n                  Cancel\n                </Button>\n                <Button onClick={handleUpdatePalette}>\n                  Update Palette\n                </Button>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};","size_bytes":19097},"client/src/components/apps/CryptoTracker.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { X, TrendingUp, TrendingDown, DollarSign, RefreshCw, Search } from 'lucide-react';\n\ninterface CryptoAsset {\n  asset_id: string;\n  name: string;\n  price_usd?: number;\n  volume_1day_usd?: number;\n  data_start?: string;\n  data_end?: string;\n}\n\nexport const CryptoTracker: FC = () => {\n  const [cryptos, setCryptos] = useState<CryptoAsset[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCrypto, setSelectedCrypto] = useState<CryptoAsset | null>(null);\n\n  useEffect(() => {\n    fetchCryptoData();\n  }, []);\n\n  const fetchCryptoData = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch('/api/crypto');\n      if (response.ok) {\n        const data = await response.json();\n        setCryptos(data);\n      } else {\n        console.error('Failed to fetch crypto data');\n      }\n    } catch (error) {\n      console.error('Crypto API error:', error);\n    }\n    setLoading(false);\n  };\n\n  const filteredCryptos = cryptos.filter(crypto =>\n    crypto.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    crypto.asset_id?.toLowerCase().includes(searchTerm.toLowerCase())\n  ).slice(0, 50);\n\n  const formatPrice = (price?: number) => {\n    if (!price) return 'N/A';\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 6\n    }).format(price);\n  };\n\n  const formatVolume = (volume?: number) => {\n    if (!volume) return 'N/A';\n    if (volume >= 1e9) return `$${(volume / 1e9).toFixed(2)}B`;\n    if (volume >= 1e6) return `$${(volume / 1e6).toFixed(2)}M`;\n    if (volume >= 1e3) return `$${(volume / 1e3).toFixed(2)}K`;\n    return `$${volume.toFixed(2)}`;\n  };\n\n  const getCryptoIcon = (assetId: string) => {\n    const icons: { [key: string]: string } = {\n      'BTC': '₿',\n      'ETH': 'Ξ',\n      'ADA': '₳',\n      'DOT': '●',\n      'SOL': '◎',\n      'MATIC': '◇',\n      'AVAX': '△',\n      'ATOM': '⚛',\n      'LINK': '🔗',\n      'UNI': '🦄'\n    };\n    return icons[assetId] || '🪙';\n  };\n\n  return (\n    <div className=\"bg-gray-900 text-white rounded-lg shadow-2xl w-full max-w-6xl h-[700px] flex flex-col\">\n      <div className=\"bg-gradient-to-r from-yellow-600 to-orange-600 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <DollarSign className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Crypto Tracker</span>\n        </div>\n        <Button \n          onClick={fetchCryptoData} \n          size=\"sm\" \n          variant=\"ghost\" \n          className=\"text-white hover:bg-white/20\"\n          disabled={loading}\n        >\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n        </Button>\n      </div>\n\n      <div className=\"p-4 border-b border-gray-700\">\n        <div className=\"flex space-x-4 items-center\">\n          <div className=\"relative flex-1\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search cryptocurrencies...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10 bg-gray-800 border-gray-600 text-white\"\n            />\n          </div>\n          <div className=\"text-sm text-gray-400\">\n            Showing {filteredCryptos.length} of {cryptos.length} assets\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <div className=\"w-2/3 overflow-auto\">\n          <div className=\"p-4\">\n            <div className=\"grid gap-2\">\n              {loading ? (\n                <div className=\"flex items-center justify-center py-12\">\n                  <RefreshCw className=\"w-8 h-8 animate-spin text-yellow-500\" />\n                  <span className=\"ml-2\">Loading cryptocurrency data...</span>\n                </div>\n              ) : (\n                <>\n                  <div className=\"grid grid-cols-6 gap-4 p-3 bg-gray-800 rounded font-medium text-sm\">\n                    <div>Asset</div>\n                    <div>Name</div>\n                    <div>Price</div>\n                    <div>Volume (24h)</div>\n                    <div>Market Cap</div>\n                    <div>Change</div>\n                  </div>\n                  {filteredCryptos.map((crypto, index) => (\n                    <div\n                      key={crypto.asset_id}\n                      onClick={() => setSelectedCrypto(crypto)}\n                      className=\"grid grid-cols-6 gap-4 p-3 hover:bg-gray-800 rounded cursor-pointer transition-colors\"\n                    >\n                      <div className=\"flex items-center space-x-2\">\n                        <span className=\"text-xl\">{getCryptoIcon(crypto.asset_id)}</span>\n                        <span className=\"font-mono font-bold\">{crypto.asset_id}</span>\n                      </div>\n                      <div className=\"text-gray-300 truncate\">{crypto.name}</div>\n                      <div className=\"font-bold text-green-400\">\n                        {formatPrice(crypto.price_usd)}\n                      </div>\n                      <div className=\"text-gray-400\">\n                        {formatVolume(crypto.volume_1day_usd)}\n                      </div>\n                      <div className=\"text-gray-400\">\n                        {crypto.price_usd && crypto.volume_1day_usd \n                          ? formatVolume(crypto.price_usd * 1000000) \n                          : 'N/A'}\n                      </div>\n                      <div className=\"flex items-center\">\n                        {Math.random() > 0.5 ? (\n                          <div className=\"flex items-center text-green-400\">\n                            <TrendingUp className=\"w-4 h-4 mr-1\" />\n                            +{(Math.random() * 10).toFixed(2)}%\n                          </div>\n                        ) : (\n                          <div className=\"flex items-center text-red-400\">\n                            <TrendingDown className=\"w-4 h-4 mr-1\" />\n                            -{(Math.random() * 10).toFixed(2)}%\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"w-1/3 border-l border-gray-700 p-4\">\n          {selectedCrypto ? (\n            <div className=\"space-y-4\">\n              <div className=\"text-center\">\n                <div className=\"text-4xl mb-2\">{getCryptoIcon(selectedCrypto.asset_id)}</div>\n                <h3 className=\"text-xl font-bold\">{selectedCrypto.asset_id}</h3>\n                <p className=\"text-gray-400\">{selectedCrypto.name}</p>\n                <div className=\"text-2xl font-bold text-green-400 mt-2\">\n                  {formatPrice(selectedCrypto.price_usd)}\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 p-4 rounded space-y-3\">\n                <h4 className=\"font-medium\">Asset Details</h4>\n                <div className=\"space-y-2 text-sm\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Symbol:</span>\n                    <span className=\"font-mono\">{selectedCrypto.asset_id}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">24h Volume:</span>\n                    <span>{formatVolume(selectedCrypto.volume_1day_usd)}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Data Start:</span>\n                    <span>{selectedCrypto.data_start?.slice(0, 10) || 'N/A'}</span>\n                  </div>\n                  <div className=\"flex justify-between\">\n                    <span className=\"text-gray-400\">Last Update:</span>\n                    <span>{selectedCrypto.data_end?.slice(0, 10) || 'N/A'}</span>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-800 p-4 rounded\">\n                <h4 className=\"font-medium mb-3\">Price Chart</h4>\n                <div className=\"h-32 bg-gray-700 rounded flex items-center justify-center\">\n                  <div className=\"text-gray-400 text-sm\">\n                    Chart visualization would appear here\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Button className=\"w-full bg-green-600 hover:bg-green-700\">\n                  Buy {selectedCrypto.asset_id}\n                </Button>\n                <Button variant=\"outline\" className=\"w-full border-gray-600 text-white hover:bg-gray-800\">\n                  Add to Watchlist\n                </Button>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-full text-gray-400\">\n              <div className=\"text-center\">\n                <DollarSign className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                <p>Select a cryptocurrency to view details</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"bg-gray-800 px-4 py-2 text-sm text-gray-400 border-t border-gray-700\">\n        Live data powered by CoinAPI • Last updated: {new Date().toLocaleTimeString()}\n      </div>\n    </div>\n  );\n};","size_bytes":9725},"client/src/components/apps/DevTools.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Code, Terminal, Database, Globe, Cpu, Monitor, GitBranch, Bug } from 'lucide-react';\n\nexport const DevTools: FC = () => {\n  const [activeTab, setActiveTab] = useState('console');\n  const [logs, setLogs] = useState<string[]>([]);\n  const [command, setCommand] = useState('');\n\n  useEffect(() => {\n    // Capture console logs\n    const originalLog = console.log;\n    const originalError = console.error;\n    const originalWarn = console.warn;\n\n    console.log = (...args) => {\n      setLogs(prev => [...prev, `[LOG] ${args.join(' ')}`].slice(-100));\n      originalLog(...args);\n    };\n\n    console.error = (...args) => {\n      setLogs(prev => [...prev, `[ERROR] ${args.join(' ')}`].slice(-100));\n      originalError(...args);\n    };\n\n    console.warn = (...args) => {\n      setLogs(prev => [...prev, `[WARN] ${args.join(' ')}`].slice(-100));\n      originalWarn(...args);\n    };\n\n    return () => {\n      console.log = originalLog;\n      console.error = originalError;\n      console.warn = originalWarn;\n    };\n  }, []);\n\n  const executeCommand = () => {\n    if (!command.trim()) return;\n\n    try {\n      const result = eval(command);\n      setLogs(prev => [...prev, `> ${command}`, `< ${JSON.stringify(result)}`].slice(-100));\n    } catch (error) {\n      setLogs(prev => [...prev, `> ${command}`, `< Error: ${error}`].slice(-100));\n    }\n\n    setCommand('');\n  };\n\n  const getSystemInfo = () => {\n    return {\n      userAgent: navigator.userAgent,\n      platform: navigator.platform,\n      language: navigator.language,\n      cookieEnabled: navigator.cookieEnabled,\n      onLine: navigator.onLine,\n      screenResolution: `${screen.width}x${screen.height}`,\n      colorDepth: screen.colorDepth,\n      timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n      memory: (performance as any).memory ? {\n        used: Math.round((performance as any).memory.usedJSHeapSize / 1048576),\n        total: Math.round((performance as any).memory.totalJSHeapSize / 1048576),\n        limit: Math.round((performance as any).memory.jsHeapSizeLimit / 1048576)\n      } : null\n    };\n  };\n\n  const getNetworkInfo = () => {\n    const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection;\n    return connection ? {\n      effectiveType: connection.effectiveType,\n      downlink: connection.downlink,\n      rtt: connection.rtt,\n      saveData: connection.saveData\n    } : null;\n  };\n\n  const getStorageInfo = () => {\n    return {\n      localStorage: {\n        used: JSON.stringify(localStorage).length,\n        keys: Object.keys(localStorage).length\n      },\n      sessionStorage: {\n        used: JSON.stringify(sessionStorage).length,\n        keys: Object.keys(sessionStorage).length\n      }\n    };\n  };\n\n  const systemInfo = getSystemInfo();\n  const networkInfo = getNetworkInfo();\n  const storageInfo = getStorageInfo();\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center gap-2\">\n          <Code className=\"h-6 w-6 text-primary\" />\n          <h1 className=\"text-xl font-semibold\">Developer Tools</h1>\n          <Badge variant=\"secondary\">WebOS Debug</Badge>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-1 flex flex-col\">\n        <TabsList className=\"w-full justify-start\">\n          <TabsTrigger value=\"console\">Console</TabsTrigger>\n          <TabsTrigger value=\"network\">Network</TabsTrigger>\n          <TabsTrigger value=\"storage\">Storage</TabsTrigger>\n          <TabsTrigger value=\"performance\">Performance</TabsTrigger>\n          <TabsTrigger value=\"system\">System</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"console\" className=\"flex-1 p-4 space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Terminal className=\"h-5 w-5\" />\n                JavaScript Console\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"bg-black text-green-400 p-4 rounded font-mono text-sm h-64 overflow-auto\">\n                  {logs.map((log, index) => (\n                    <div key={index} className={\n                      log.includes('[ERROR]') ? 'text-red-400' :\n                      log.includes('[WARN]') ? 'text-yellow-400' :\n                      log.startsWith('>') ? 'text-blue-400' :\n                      'text-green-400'\n                    }>\n                      {log}\n                    </div>\n                  ))}\n                </div>\n                \n                <div className=\"flex gap-2\">\n                  <Input\n                    value={command}\n                    onChange={(e) => setCommand(e.target.value)}\n                    placeholder=\"Type JavaScript command...\"\n                    onKeyPress={(e) => e.key === 'Enter' && executeCommand()}\n                    className=\"font-mono\"\n                  />\n                  <Button onClick={executeCommand}>Execute</Button>\n                  <Button variant=\"outline\" onClick={() => setLogs([])}>Clear</Button>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"network\" className=\"flex-1 p-4 space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Globe className=\"h-5 w-5\" />\n                  Connection Info\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Status:</span>\n                  <Badge variant={navigator.onLine ? \"default\" : \"destructive\"}>\n                    {navigator.onLine ? \"Online\" : \"Offline\"}\n                  </Badge>\n                </div>\n                {networkInfo && (\n                  <>\n                    <div className=\"flex justify-between\">\n                      <span>Type:</span>\n                      <span>{networkInfo.effectiveType}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Downlink:</span>\n                      <span>{networkInfo.downlink} Mbps</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>RTT:</span>\n                      <span>{networkInfo.rtt} ms</span>\n                    </div>\n                  </>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Monitor className=\"h-5 w-5\" />\n                  WebOS Proxy Status\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Proxy Server:</span>\n                  <Badge variant=\"default\">Active</Badge>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Version:</span>\n                  <span>2.0.0</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Features:</span>\n                  <span className=\"text-xs\">Caching, Security, WebSocket</span>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"storage\" className=\"flex-1 p-4 space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Database className=\"h-5 w-5\" />\n                  Local Storage\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Used:</span>\n                  <span>{(storageInfo.localStorage.used / 1024).toFixed(1)} KB</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Keys:</span>\n                  <span>{storageInfo.localStorage.keys}</span>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\">\n                  View Details\n                </Button>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Database className=\"h-5 w-5\" />\n                  Session Storage\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <div className=\"flex justify-between\">\n                  <span>Used:</span>\n                  <span>{(storageInfo.sessionStorage.used / 1024).toFixed(1)} KB</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span>Keys:</span>\n                  <span>{storageInfo.sessionStorage.keys}</span>\n                </div>\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full mt-2\">\n                  View Details\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"performance\" className=\"flex-1 p-4 space-y-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Cpu className=\"h-5 w-5\" />\n                  Memory Usage\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                {systemInfo.memory ? (\n                  <>\n                    <div className=\"flex justify-between\">\n                      <span>Used:</span>\n                      <span>{systemInfo.memory.used} MB</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Total:</span>\n                      <span>{systemInfo.memory.total} MB</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span>Limit:</span>\n                      <span>{systemInfo.memory.limit} MB</span>\n                    </div>\n                  </>\n                ) : (\n                  <p className=\"text-muted-foreground\">Memory info not available</p>\n                )}\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Monitor className=\"h-5 w-5\" />\n                  Performance Metrics\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-2\">\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                  Run Performance Test\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                  Clear Cache\n                </Button>\n                <Button variant=\"outline\" size=\"sm\" className=\"w-full\">\n                  Force Garbage Collection\n                </Button>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"system\" className=\"flex-1 p-4 space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <Monitor className=\"h-5 w-5\" />\n                System Information\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-3\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Platform:</span>\n                    <span>{systemInfo.platform}</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Language:</span>\n                    <span>{systemInfo.language}</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Timezone:</span>\n                    <span>{systemInfo.timezone}</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Cookies:</span>\n                    <Badge variant={systemInfo.cookieEnabled ? \"default\" : \"destructive\"}>\n                      {systemInfo.cookieEnabled ? \"Enabled\" : \"Disabled\"}\n                    </Badge>\n                  </div>\n                </div>\n                <div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Resolution:</span>\n                    <span>{systemInfo.screenResolution}</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Color Depth:</span>\n                    <span>{systemInfo.colorDepth} bits</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">WebOS Version:</span>\n                    <span>2.0.0</span>\n                  </div>\n                  <div className=\"flex justify-between py-1\">\n                    <span className=\"font-medium\">Build:</span>\n                    <span>Production</span>\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"mt-4\">\n                <span className=\"font-medium\">User Agent:</span>\n                <p className=\"text-xs text-muted-foreground mt-1 break-all\">\n                  {systemInfo.userAgent}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};","size_bytes":14740},"client/src/components/apps/DownloadManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Download, Pause, Play, X, FileText, Image, Video, Music, Archive, Code, Folder } from 'lucide-react';\nimport { playSounds } from '@/lib/soundManager';\n\ninterface DownloadItem {\n  id: string;\n  filename: string;\n  url: string;\n  size: number;\n  downloaded: number;\n  status: 'downloading' | 'paused' | 'completed' | 'error' | 'queued';\n  speed: number;\n  timeRemaining: number;\n  type: 'document' | 'image' | 'video' | 'audio' | 'archive' | 'code' | 'other';\n  createdAt: Date;\n}\n\nexport const DownloadManager: FC = () => {\n  const [downloads, setDownloads] = useState<DownloadItem[]>([]);\n  const [downloadUrl, setDownloadUrl] = useState('');\n  const [downloadPath, setDownloadPath] = useState('/home/html/Downloads');\n  const [activeTab, setActiveTab] = useState('active');\n  const [systemInfo, setSystemInfo] = useState({\n    os: 'Arch Linux',\n    kernel: '6.1.0-webos',\n    architecture: 'x86_64',\n    desktop: 'WebOS',\n    downloadPath: '/home/html/Downloads'\n  });\n\n  // Sample download items for demonstration\n  useEffect(() => {\n    const sampleDownloads: DownloadItem[] = [\n      {\n        id: '1',\n        filename: 'ubuntu-22.04.3-desktop-amd64.iso',\n        url: 'https://releases.ubuntu.com/22.04.3/ubuntu-22.04.3-desktop-amd64.iso',\n        size: 4896235520, // ~4.6GB\n        downloaded: 2147483648, // ~2GB\n        status: 'downloading',\n        speed: 1048576, // 1MB/s\n        timeRemaining: 2550, // seconds\n        type: 'archive',\n        createdAt: new Date(Date.now() - 30 * 60 * 1000) // 30 min ago\n      },\n      {\n        id: '2',\n        filename: 'nodejs-20.10.0-linux-x64.tar.xz',\n        url: 'https://nodejs.org/dist/v20.10.0/node-v20.10.0-linux-x64.tar.xz',\n        size: 52428800, // ~50MB\n        downloaded: 52428800,\n        status: 'completed',\n        speed: 0,\n        timeRemaining: 0,\n        type: 'archive',\n        createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000) // 2 hours ago\n      },\n      {\n        id: '3',\n        filename: 'sample-presentation.pdf',\n        url: 'https://example.com/sample-presentation.pdf',\n        size: 2097152, // 2MB\n        downloaded: 1048576, // 1MB\n        status: 'paused',\n        speed: 0,\n        timeRemaining: 0,\n        type: 'document',\n        createdAt: new Date(Date.now() - 10 * 60 * 1000) // 10 min ago\n      }\n    ];\n\n    setDownloads(sampleDownloads);\n  }, []);\n\n  const getFileIcon = (type: string) => {\n    switch (type) {\n      case 'document': return <FileText className=\"w-5 h-5 text-blue-500\" />;\n      case 'image': return <Image className=\"w-5 h-5 text-green-500\" />;\n      case 'video': return <Video className=\"w-5 h-5 text-purple-500\" />;\n      case 'audio': return <Music className=\"w-5 h-5 text-orange-500\" />;\n      case 'archive': return <Archive className=\"w-5 h-5 text-yellow-500\" />;\n      case 'code': return <Code className=\"w-5 h-5 text-cyan-500\" />;\n      default: return <FileText className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatSpeed = (bytesPerSecond: number) => {\n    return formatFileSize(bytesPerSecond) + '/s';\n  };\n\n  const formatTimeRemaining = (seconds: number) => {\n    if (seconds === 0) return '--';\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    \n    if (hours > 0) {\n      return `${hours}h ${minutes}m ${secs}s`;\n    } else if (minutes > 0) {\n      return `${minutes}m ${secs}s`;\n    } else {\n      return `${secs}s`;\n    }\n  };\n\n  const getFileTypeFromUrl = (url: string): DownloadItem['type'] => {\n    const extension = url.split('.').pop()?.toLowerCase() || '';\n    \n    if (['pdf', 'doc', 'docx', 'txt', 'rtf'].includes(extension)) return 'document';\n    if (['jpg', 'jpeg', 'png', 'gif', 'bmp', 'svg', 'webp'].includes(extension)) return 'image';\n    if (['mp4', 'avi', 'mkv', 'webm', 'mov', 'wmv'].includes(extension)) return 'video';\n    if (['mp3', 'wav', 'flac', 'ogg', 'aac'].includes(extension)) return 'audio';\n    if (['zip', 'rar', 'tar', 'gz', 'xz', '7z', 'iso'].includes(extension)) return 'archive';\n    if (['js', 'ts', 'py', 'cpp', 'c', 'java', 'html', 'css'].includes(extension)) return 'code';\n    \n    return 'other';\n  };\n\n  const addDownload = () => {\n    if (!downloadUrl.trim()) return;\n\n    playSounds.buttonClick();\n    \n    const filename = downloadUrl.split('/').pop() || 'unknown_file';\n    const newDownload: DownloadItem = {\n      id: Date.now().toString(),\n      filename,\n      url: downloadUrl,\n      size: Math.floor(Math.random() * 100000000) + 1000000, // Random size for demo\n      downloaded: 0,\n      status: 'queued',\n      speed: 0,\n      timeRemaining: 0,\n      type: getFileTypeFromUrl(downloadUrl),\n      createdAt: new Date()\n    };\n\n    setDownloads(prev => [newDownload, ...prev]);\n    setDownloadUrl('');\n\n    // Simulate download start\n    setTimeout(() => {\n      setDownloads(prev => prev.map(d => \n        d.id === newDownload.id ? { ...d, status: 'downloading' as const } : d\n      ));\n    }, 1000);\n  };\n\n  const pauseDownload = (id: string) => {\n    playSounds.buttonClick();\n    setDownloads(prev => prev.map(d => \n      d.id === id ? { ...d, status: 'paused' as const, speed: 0 } : d\n    ));\n  };\n\n  const resumeDownload = (id: string) => {\n    playSounds.buttonClick();\n    setDownloads(prev => prev.map(d => \n      d.id === id ? { ...d, status: 'downloading' as const } : d\n    ));\n  };\n\n  const cancelDownload = (id: string) => {\n    playSounds.buttonClick();\n    setDownloads(prev => prev.filter(d => d.id !== id));\n  };\n\n  const openDownloadFolder = () => {\n    playSounds.folderOpen();\n    // Simulate opening file manager to downloads folder\n    const event = new CustomEvent('open-app', { detail: { app: 'file-manager', path: downloadPath } });\n    window.dispatchEvent(event);\n  };\n\n  const activeDownloads = downloads.filter(d => d.status === 'downloading' || d.status === 'queued');\n  const completedDownloads = downloads.filter(d => d.status === 'completed');\n  const pausedDownloads = downloads.filter(d => d.status === 'paused' || d.status === 'error');\n\n  // Simulate download progress\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setDownloads(prev => prev.map(download => {\n        if (download.status === 'downloading' && download.downloaded < download.size) {\n          const increment = Math.floor(Math.random() * 1048576) + 102400; // Random progress\n          const newDownloaded = Math.min(download.downloaded + increment, download.size);\n          const isComplete = newDownloaded >= download.size;\n          \n          return {\n            ...download,\n            downloaded: newDownloaded,\n            status: isComplete ? 'completed' as const : download.status,\n            speed: isComplete ? 0 : Math.floor(Math.random() * 2097152) + 524288, // Random speed\n            timeRemaining: isComplete ? 0 : Math.floor((download.size - newDownloaded) / 1048576)\n          };\n        }\n        return download;\n      }));\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Header */}\n      <div className=\"border-b p-4\">\n        <h2 className=\"text-xl font-semibold mb-4\">Download Manager</h2>\n        \n        {/* System Info */}\n        <div className=\"grid grid-cols-2 gap-4 mb-4 text-sm\">\n          <div>\n            <span className=\"font-medium\">OS:</span> {systemInfo.os}\n          </div>\n          <div>\n            <span className=\"font-medium\">Architecture:</span> {systemInfo.architecture}\n          </div>\n          <div>\n            <span className=\"font-medium\">Kernel:</span> {systemInfo.kernel}\n          </div>\n          <div>\n            <span className=\"font-medium\">Desktop:</span> {systemInfo.desktop}\n          </div>\n        </div>\n\n        {/* Add Download */}\n        <div className=\"space-y-4\">\n          <div className=\"grid grid-cols-4 gap-2\">\n            <div className=\"col-span-2\">\n              <Label htmlFor=\"url\">Download URL</Label>\n              <Input\n                id=\"url\"\n                value={downloadUrl}\n                onChange={(e) => setDownloadUrl(e.target.value)}\n                placeholder=\"https://example.com/file.zip\"\n                onKeyPress={(e) => e.key === 'Enter' && addDownload()}\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"path\">Download Path</Label>\n              <Select value={downloadPath} onValueChange={setDownloadPath}>\n                <SelectTrigger>\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"/home/html/Downloads\">~/Downloads</SelectItem>\n                  <SelectItem value=\"/home/html/Desktop\">~/Desktop</SelectItem>\n                  <SelectItem value=\"/home/html/Documents\">~/Documents</SelectItem>\n                  <SelectItem value=\"/tmp\">Temporary</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n            <div className=\"flex items-end gap-2\">\n              <Button onClick={addDownload} className=\"flex-1\">\n                <Download className=\"w-4 h-4 mr-2\" />\n                Download\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Downloads List */}\n      <div className=\"flex-1 p-4\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <div className=\"flex items-center justify-between mb-4\">\n            <TabsList>\n              <TabsTrigger value=\"active\">\n                Active ({activeDownloads.length})\n              </TabsTrigger>\n              <TabsTrigger value=\"completed\">\n                Completed ({completedDownloads.length})\n              </TabsTrigger>\n              <TabsTrigger value=\"paused\">\n                Paused ({pausedDownloads.length})\n              </TabsTrigger>\n            </TabsList>\n            \n            <Button variant=\"outline\" onClick={openDownloadFolder}>\n              <Folder className=\"w-4 h-4 mr-2\" />\n              Open Folder\n            </Button>\n          </div>\n\n          <TabsContent value=\"active\" className=\"space-y-2\">\n            {activeDownloads.map(download => (\n              <Card key={download.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    {getFileIcon(download.type)}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-medium truncate\">{download.filename}</h4>\n                        <div className=\"flex items-center gap-2\">\n                          {download.status === 'downloading' ? (\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => pauseDownload(download.id)}>\n                              <Pause className=\"w-3 h-3\" />\n                            </Button>\n                          ) : (\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => resumeDownload(download.id)}>\n                              <Play className=\"w-3 h-3\" />\n                            </Button>\n                          )}\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => cancelDownload(download.id)}>\n                            <X className=\"w-3 h-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <Progress \n                          value={(download.downloaded / download.size) * 100} \n                          className=\"h-2\"\n                        />\n                        <div className=\"flex justify-between text-xs text-muted-foreground\">\n                          <span>\n                            {formatFileSize(download.downloaded)} / {formatFileSize(download.size)}\n                          </span>\n                          <span>\n                            {download.status === 'downloading' && `${formatSpeed(download.speed)} • ${formatTimeRemaining(download.timeRemaining)}`}\n                            {download.status === 'queued' && 'Queued'}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            {activeDownloads.length === 0 && (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                No active downloads\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"completed\" className=\"space-y-2\">\n            {completedDownloads.map(download => (\n              <Card key={download.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    {getFileIcon(download.type)}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between\">\n                        <h4 className=\"font-medium truncate\">{download.filename}</h4>\n                        <div className=\"text-xs text-muted-foreground\">\n                          {formatFileSize(download.size)}\n                        </div>\n                      </div>\n                      <div className=\"text-xs text-muted-foreground mt-1\">\n                        Completed {download.createdAt.toLocaleString()}\n                      </div>\n                    </div>\n                    <Button variant=\"outline\" size=\"sm\" onClick={() => cancelDownload(download.id)}>\n                      <X className=\"w-3 h-3\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            {completedDownloads.length === 0 && (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                No completed downloads\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"paused\" className=\"space-y-2\">\n            {pausedDownloads.map(download => (\n              <Card key={download.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    {getFileIcon(download.type)}\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <h4 className=\"font-medium truncate\">{download.filename}</h4>\n                        <div className=\"flex items-center gap-2\">\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => resumeDownload(download.id)}>\n                            <Play className=\"w-3 h-3\" />\n                          </Button>\n                          <Button variant=\"outline\" size=\"sm\" onClick={() => cancelDownload(download.id)}>\n                            <X className=\"w-3 h-3\" />\n                          </Button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"space-y-2\">\n                        <Progress \n                          value={(download.downloaded / download.size) * 100} \n                          className=\"h-2\"\n                        />\n                        <div className=\"flex justify-between text-xs text-muted-foreground\">\n                          <span>\n                            {formatFileSize(download.downloaded)} / {formatFileSize(download.size)}\n                          </span>\n                          <span className=\"text-orange-500\">\n                            {download.status === 'paused' ? 'Paused' : 'Error'}\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n            {pausedDownloads.length === 0 && (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                No paused downloads\n              </div>\n            )}\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":17075},"client/src/components/apps/EmailClient.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Card, CardHeader, CardContent, CardTitle } from '@/components/ui/card';\nimport { Mail, Send, Inbox, Edit, Search } from 'lucide-react';\n\ninterface Email {\n  id: string;\n  from: string;\n  to: string;\n  subject: string;\n  body: string;\n  timestamp: Date;\n  read: boolean;\n}\n\nexport const EmailClient: FC = () => {\n  const [emails, setEmails] = useState<Email[]>(() => {\n    const stored = localStorage.getItem('email-messages');\n    return stored ? JSON.parse(stored).map((e: any) => ({\n      ...e,\n      timestamp: new Date(e.timestamp)\n    })) : [\n      {\n        id: '1',\n        from: 'team@webos.dev',\n        to: 'user@webos.local',\n        subject: 'Welcome to WebOS Email',\n        body: 'Thank you for installing the email client. This is a sample email to demonstrate functionality.',\n        timestamp: new Date(),\n        read: false\n      }\n    ];\n  });\n\n  const [selectedEmail, setSelectedEmail] = useState<Email | null>(null);\n  const [showCompose, setShowCompose] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [composeData, setComposeData] = useState({\n    to: '',\n    subject: '',\n    body: ''\n  });\n\n  const filteredEmails = emails.filter(email =>\n    email.subject.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    email.from.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    email.body.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const handleEmailSelect = (email: Email) => {\n    if (!email.read) {\n      const updatedEmails = emails.map(e =>\n        e.id === email.id ? { ...e, read: true } : e\n      );\n      setEmails(updatedEmails);\n      localStorage.setItem('email-messages', JSON.stringify(updatedEmails));\n    }\n    setSelectedEmail(email);\n    setShowCompose(false);\n  };\n\n  const handleSendEmail = () => {\n    if (composeData.to && composeData.subject) {\n      const newEmail: Email = {\n        id: Date.now().toString(),\n        from: 'user@webos.local',\n        to: composeData.to,\n        subject: composeData.subject,\n        body: composeData.body,\n        timestamp: new Date(),\n        read: true\n      };\n\n      const updatedEmails = [newEmail, ...emails];\n      setEmails(updatedEmails);\n      localStorage.setItem('email-messages', JSON.stringify(updatedEmails));\n      \n      setComposeData({ to: '', subject: '', body: '' });\n      setShowCompose(false);\n      setSelectedEmail(newEmail);\n    }\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString('en-US', {\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Sidebar */}\n      <div className=\"w-1/3 border-r border-border bg-muted/30\">\n        <div className=\"p-4 border-b border-border\">\n          <div className=\"flex items-center gap-2 mb-4\">\n            <Mail className=\"w-5 h-5 text-primary\" />\n            <span className=\"font-semibold\">Email</span>\n          </div>\n          \n          <div className=\"relative mb-4\">\n            <Search className=\"w-4 h-4 absolute left-3 top-3 text-muted-foreground\" />\n            <Input\n              placeholder=\"Search emails...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10\"\n            />\n          </div>\n\n          <Button \n            onClick={() => { setShowCompose(true); setSelectedEmail(null); }}\n            className=\"w-full\"\n          >\n            <Edit className=\"w-4 h-4 mr-2\" />\n            Compose\n          </Button>\n        </div>\n\n        <div className=\"overflow-auto\">\n          {filteredEmails.map(email => (\n            <div\n              key={email.id}\n              onClick={() => handleEmailSelect(email)}\n              className={`p-4 border-b border-border cursor-pointer hover:bg-muted/50 ${\n                selectedEmail?.id === email.id ? 'bg-primary/10' : ''\n              } ${!email.read ? 'font-semibold' : ''}`}\n            >\n              <div className=\"flex justify-between items-start mb-1\">\n                <span className=\"text-sm font-medium truncate\">{email.from}</span>\n                <span className=\"text-xs text-muted-foreground\">{formatDate(email.timestamp)}</span>\n              </div>\n              <div className=\"text-sm truncate mb-1\">{email.subject}</div>\n              <div className=\"text-xs text-muted-foreground truncate\">{email.body}</div>\n              {!email.read && (\n                <div className=\"w-2 h-2 bg-primary rounded-full mt-2\"></div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        {showCompose ? (\n          <div className=\"p-6\">\n            <h2 className=\"text-lg font-semibold mb-4\">Compose Email</h2>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"To:\"\n                value={composeData.to}\n                onChange={(e) => setComposeData({...composeData, to: e.target.value})}\n              />\n              <Input\n                placeholder=\"Subject:\"\n                value={composeData.subject}\n                onChange={(e) => setComposeData({...composeData, subject: e.target.value})}\n              />\n              <Textarea\n                placeholder=\"Message:\"\n                value={composeData.body}\n                onChange={(e) => setComposeData({...composeData, body: e.target.value})}\n                className=\"min-h-64\"\n              />\n              <div className=\"flex gap-2\">\n                <Button onClick={handleSendEmail}>\n                  <Send className=\"w-4 h-4 mr-2\" />\n                  Send\n                </Button>\n                <Button variant=\"outline\" onClick={() => setShowCompose(false)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </div>\n        ) : selectedEmail ? (\n          <div className=\"p-6\">\n            <div className=\"mb-4\">\n              <h2 className=\"text-lg font-semibold\">{selectedEmail.subject}</h2>\n              <div className=\"text-sm text-muted-foreground mt-1\">\n                From: {selectedEmail.from} | To: {selectedEmail.to}\n              </div>\n              <div className=\"text-sm text-muted-foreground\">\n                {formatDate(selectedEmail.timestamp)}\n              </div>\n            </div>\n            <div className=\"prose prose-sm\">\n              {selectedEmail.body.split('\\n').map((line, index) => (\n                <p key={index}>{line}</p>\n              ))}\n            </div>\n          </div>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center text-muted-foreground\">\n            <div className=\"text-center\">\n              <Inbox className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n              <p>Select an email to read or compose a new message</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":7148},"client/src/components/apps/EnhancedTerminal.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { X, Terminal as TerminalIcon, Activity, Cpu, HardDrive, Wifi } from 'lucide-react';\n\ninterface TerminalLine {\n  type: 'command' | 'output' | 'error' | 'success' | 'system';\n  content: string;\n  timestamp: Date;\n}\n\nexport const EnhancedTerminal: FC = () => {\n  const [lines, setLines] = useState<TerminalLine[]>([\n    {\n      type: 'system',\n      content: 'WebOS Enhanced Terminal v5.0 - Real-time System Interface',\n      timestamp: new Date()\n    },\n    {\n      type: 'system',\n      content: 'Type \"help\" for commands, \"system-status\" for real-time monitoring',\n      timestamp: new Date()\n    }\n  ]);\n  const [currentCommand, setCurrentCommand] = useState('');\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [lines]);\n\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isMonitoring) {\n      interval = setInterval(() => {\n        const timestamp = new Date();\n        const cpu = Math.floor(Math.random() * 100);\n        const memory = Math.floor(Math.random() * 100);\n        const disk = 78;\n        \n        setLines(prev => [...prev, {\n          type: 'system',\n          content: `[${timestamp.toLocaleTimeString()}] CPU: ${cpu}% | Memory: ${memory}% | Disk: ${disk}% | Network: ${Math.floor(Math.random() * 50)}MB/s`,\n          timestamp\n        }]);\n      }, 3000);\n    }\n    return () => {\n      if (interval) clearInterval(interval);\n    };\n  }, [isMonitoring]);\n\n  const executeCommand = async (cmd: string) => {\n    const trimmedCmd = cmd.trim();\n    if (!trimmedCmd) return;\n\n    const commandLine: TerminalLine = {\n      type: 'command',\n      content: `user@webos:~$ ${trimmedCmd}`,\n      timestamp: new Date()\n    };\n\n    let output = '';\n    let outputType: 'output' | 'error' | 'success' = 'output';\n\n    if (trimmedCmd === 'help') {\n      output = `Enhanced WebOS Terminal Commands:\n======================================\nSYSTEM MONITORING:\n  system-status         - Real-time system monitoring toggle\n  process-monitor       - Show running processes\n  network-monitor       - Network activity monitoring\n  performance-test      - Run performance benchmarks\n  disk-analyzer         - Analyze disk usage patterns\n\nLIVE DATA SERVICES:\n  check-apis           - Test external API connectivity\n  weather [location]   - Get weather data (requires API key)\n  crypto-prices        - Cryptocurrency market data\n  stock-quote [symbol] - Stock market quotes\n  news-feed [category] - Latest news headlines\n\nADVANCED SYSTEM:\n  gpu-info             - Graphics card information\n  thermal-status       - CPU/GPU temperature monitoring\n  power-management     - Battery and power statistics\n  security-scan        - System security audit\n  backup-status        - Backup and recovery status\n\nDEVELOPMENT TOOLS:\n  docker-status        - Container management\n  git-projects         - Git repository management\n  database-connect     - Database connectivity\n  api-endpoints        - Available API endpoints\n  log-analyzer         - System log analysis\n\nType any command for detailed help or usage examples.`;\n    } else if (trimmedCmd === 'system-status') {\n      setIsMonitoring(!isMonitoring);\n      output = isMonitoring ? 'Real-time monitoring stopped' : 'Real-time monitoring started';\n      outputType = 'success';\n    } else if (trimmedCmd === 'process-monitor') {\n      output = `Process Monitor - Active Processes:\n=====================================\nPID    NAME              CPU%   MEM%   STATUS\n1      systemd           0.1    0.2    Running\n789    gnome-shell       8.5    12.3   Running\n1024   firefox           15.2   25.8   Running\n1156   webos-terminal    3.4    5.1    Running\n2048   nodejs            12.8   18.6   Running\n3072   docker-daemon     2.1    8.9    Running\n4096   postgresql        1.8    15.2   Running\n5120   nginx             0.5    2.3    Running\n6144   redis-server      0.8    4.7    Running\n7168   elasticsearch     5.3    22.1   Running\n\nTotal Processes: 247 | Running: 189 | Sleeping: 58`;\n    } else if (trimmedCmd === 'network-monitor') {\n      output = `Network Activity Monitor:\n========================\nInterface: enp0s3\n  IP Address: 192.168.1.100/24\n  Gateway: 192.168.1.1\n  DNS Servers: 8.8.8.8, 1.1.1.1\n  \nCurrent Activity:\n  Download: ${Math.floor(Math.random() * 100)}MB/s\n  Upload: ${Math.floor(Math.random() * 50)}MB/s\n  Packets In: ${Math.floor(Math.random() * 10000)}/sec\n  Packets Out: ${Math.floor(Math.random() * 5000)}/sec\n  \nActive Connections: 45\nListening Ports: 22, 80, 443, 3000, 5432, 6379`;\n    } else if (trimmedCmd === 'performance-test') {\n      output = `System Performance Benchmark:\n============================\nCPU Performance Test... ⚡ 8,432 MIPS\nMemory Bandwidth Test... 📊 15.6 GB/s\nDisk I/O Test... 💾 542 MB/s read, 387 MB/s write\nNetwork Latency Test... 🌐 12ms avg\nGraphics Performance... 🎮 9,847 FPS\n\nOverall Performance Score: 8.7/10\nSystem Classification: High Performance Workstation`;\n      outputType = 'success';\n    } else if (trimmedCmd === 'disk-analyzer') {\n      output = `Disk Usage Analysis:\n==================\n/ (root)          20GB  Used: 14.2GB (71%)  Available: 5.8GB\n/home             50GB  Used: 32.1GB (64%)  Available: 17.9GB\n/var              10GB  Used: 3.8GB (38%)   Available: 6.2GB\n/tmp              2GB   Used: 0.3GB (15%)   Available: 1.7GB\n\nLargest Directories:\n/home/user/Documents    8.5GB\n/var/log               2.1GB\n/usr/share             4.3GB\n/opt/applications      6.7GB\n\nDisk Health: ✓ Good\nSSD Wear Level: 12%\nEstimated Lifespan: 8.2 years`;\n    } else if (trimmedCmd === 'check-apis') {\n      // Test API connectivity\n      try {\n        const responses = await Promise.allSettled([\n          fetch('/api/weather?location=test'),\n          fetch('/api/crypto'),\n          fetch('/api/news'),\n          fetch('/api/stocks?symbol=AAPL')\n        ]);\n        \n        output = `API Connectivity Status:\n=======================\nWeather API: ${responses[0].status === 'fulfilled' ? '✓ Connected' : '✗ Authentication Error'}\nCrypto API: ${responses[1].status === 'fulfilled' ? '✓ Connected' : '✗ Authentication Error'}\nNews API: ${responses[2].status === 'fulfilled' ? '✓ Connected' : '✗ Authentication Error'}\nStock API: ${responses[3].status === 'fulfilled' ? '✓ Connected' : '✗ Authentication Error'}\n\nNote: API errors typically indicate invalid or expired API keys.\nUse valid credentials for live data access.`;\n      } catch (error) {\n        output = 'Error testing API connectivity';\n        outputType = 'error';\n      }\n    } else if (trimmedCmd.startsWith('weather ')) {\n      const location = trimmedCmd.split(' ').slice(1).join(' ') || 'London';\n      output = `Weather Service Integration:\n============================\nAttempting to fetch weather data for: ${location}\n\nNote: Live weather data requires valid OpenWeatherMap API key.\nConfigure API credentials for real-time weather information.\n\nWeather service features:\n• Current conditions and forecasts\n• Temperature, humidity, wind data  \n• 5-day weather predictions\n• Severe weather alerts`;\n    } else if (trimmedCmd === 'crypto-prices') {\n      output = `Cryptocurrency Market Integration:\n=================================\nConnecting to CoinAPI for live market data...\n\nNote: Live crypto data requires valid CoinAPI key.\nConfigure API credentials for real-time pricing.\n\nFeatures available with API access:\n• Real-time cryptocurrency prices\n• Market capitalization data\n• 24-hour trading volumes\n• Price change percentages\n• Historical data analysis`;\n    } else if (trimmedCmd.startsWith('stock-quote ')) {\n      const symbol = trimmedCmd.split(' ')[1] || 'AAPL';\n      output = `Stock Market Integration:\n========================\nFetching quote for: ${symbol.toUpperCase()}\n\nNote: Live stock data requires valid Alpha Vantage API key.\nConfigure API credentials for real-time market data.\n\nFeatures available with API access:\n• Real-time stock quotes\n• Intraday and historical data\n• Company fundamentals\n• Technical indicators\n• Market analysis tools`;\n    } else if (trimmedCmd.startsWith('news-feed ')) {\n      const category = trimmedCmd.split(' ')[1] || 'technology';\n      output = `News Feed Integration:\n=====================\nFetching ${category} news headlines...\n\nNote: Live news data requires valid NewsAPI key.\nConfigure API credentials for real-time news feeds.\n\nFeatures available with API access:\n• Breaking news headlines\n• Category-specific feeds\n• Source filtering\n• Search functionality\n• Article summaries`;\n    } else if (trimmedCmd === 'gpu-info') {\n      output = `Graphics Processing Unit Information:\n=====================================\nGPU Model: NVIDIA GeForce RTX 4080\nDriver Version: 545.29.06\nCUDA Version: 12.3\nMemory: 16GB GDDR6X\nMemory Clock: 1188 MHz\nCore Clock: 2505 MHz\nTemperature: ${35 + Math.floor(Math.random() * 25)}°C\nPower Usage: ${150 + Math.floor(Math.random() * 170)}W\nPerformance State: P0 (Maximum Performance)\n\nOpenGL Version: 4.6.0\nVulkan Support: 1.3.0\nDirectX Support: 12 Ultimate`;\n    } else if (trimmedCmd === 'thermal-status') {\n      output = `Thermal Monitoring System:\n=========================\nCPU Temperature: ${45 + Math.floor(Math.random() * 25)}°C (Normal)\nGPU Temperature: ${40 + Math.floor(Math.random() * 30)}°C (Normal)\nMotherboard: ${35 + Math.floor(Math.random() * 15)}°C\nStorage SSD: ${32 + Math.floor(Math.random() * 18)}°C\n\nFan Speeds:\nCPU Cooler: ${800 + Math.floor(Math.random() * 800)} RPM\nGPU Fans: ${1200 + Math.floor(Math.random() * 1000)} RPM\nCase Fans: ${600 + Math.floor(Math.random() * 400)} RPM\n\nThermal Status: ✓ All components within safe operating temperatures`;\n    } else if (trimmedCmd === 'clear') {\n      setLines([]);\n      return;\n    } else {\n      output = `Command not found: ${trimmedCmd}\nType 'help' for available commands or 'check-apis' to test live data services.`;\n      outputType = 'error';\n    }\n\n    const outputLine: TerminalLine = {\n      type: outputType,\n      content: output,\n      timestamp: new Date()\n    };\n\n    setLines(prev => [...prev, commandLine, outputLine]);\n    setCommandHistory(prev => [...prev, trimmedCmd]);\n    setCurrentCommand('');\n    setHistoryIndex(-1);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      executeCommand(currentCommand);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        const newIndex = historyIndex === -1 ? commandHistory.length - 1 : Math.max(0, historyIndex - 1);\n        setHistoryIndex(newIndex);\n        setCurrentCommand(commandHistory[newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex !== -1) {\n        const newIndex = historyIndex + 1;\n        if (newIndex >= commandHistory.length) {\n          setHistoryIndex(-1);\n          setCurrentCommand('');\n        } else {\n          setHistoryIndex(newIndex);\n          setCurrentCommand(commandHistory[newIndex]);\n        }\n      }\n    }\n  };\n\n  return (\n    <div className=\"bg-black rounded-lg shadow-2xl overflow-hidden border border-green-500/20 w-full h-full\">\n      <div className=\"bg-gray-900 px-4 py-2 flex items-center justify-between border-b border-green-500/20\">\n        <div className=\"flex items-center space-x-2\">\n          <TerminalIcon className=\"w-4 h-4 text-green-400\" />\n          <span className=\"text-green-400 font-medium\">Enhanced Terminal</span>\n          {isMonitoring && (\n            <div className=\"flex items-center space-x-1\">\n              <Activity className=\"w-3 h-3 text-yellow-400 animate-pulse\" />\n              <span className=\"text-yellow-400 text-xs\">MONITORING</span>\n            </div>\n          )}\n        </div>\n        <div className=\"flex items-center space-x-2 text-xs text-gray-400\">\n          <Cpu className=\"w-3 h-3\" />\n          <span>{Math.floor(Math.random() * 100)}%</span>\n          <HardDrive className=\"w-3 h-3\" />\n          <span>78%</span>\n          <Wifi className=\"w-3 h-3\" />\n          <span>{Math.floor(Math.random() * 50)}MB/s</span>\n        </div>\n      </div>\n\n      <div \n        ref={terminalRef}\n        className=\"bg-black text-green-400 p-4 h-96 overflow-y-auto font-mono text-sm\"\n      >\n        {lines.map((line, index) => (\n          <div key={index} className=\"mb-1\">\n            <span className=\"text-gray-500 text-xs mr-2\">\n              {line.timestamp.toLocaleTimeString()}\n            </span>\n            <span className={\n              line.type === 'command' ? 'text-yellow-400' :\n              line.type === 'error' ? 'text-red-400' :\n              line.type === 'success' ? 'text-green-400' :\n              line.type === 'system' ? 'text-cyan-400' :\n              'text-green-400'\n            }>\n              {line.content.split('\\n').map((subLine, subIndex) => (\n                <div key={subIndex}>{subLine}</div>\n              ))}\n            </span>\n          </div>\n        ))}\n        \n        <div className=\"flex items-center\">\n          <span className=\"text-yellow-400 mr-2\">\n            {new Date().toLocaleTimeString()} user@webos:~$\n          </span>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={currentCommand}\n            onChange={(e) => setCurrentCommand(e.target.value)}\n            onKeyDown={handleKeyDown}\n            className=\"bg-transparent text-green-400 outline-none flex-1 font-mono\"\n            autoFocus\n          />\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":13955},"client/src/components/apps/FileManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, Home, Folder, FileText, Plus, \n  Trash2, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [files, setFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  const saveFiles = (fileList: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(fileList));\n    setFiles(fileList);\n  };\n\n  const loadFiles = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  const createFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const currentFiles = loadFiles();\n    const updatedFiles = [...currentFiles, newFile];\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const currentFiles = loadFiles();\n    const filteredFiles = currentFiles.filter(file => file.id !== id && file.parentId !== id);\n    saveFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const currentFiles = loadFiles();\n    const updatedFiles = currentFiles.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setFiles(loadFiles());\n    } else {\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = files.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = files\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('grid')}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('list')}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n            <Trash2 className=\"w-4 h-4 mr-2\" />\n            Delete ({selectedFiles.size})\n          </Button>\n        )}\n      </div>\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":16136},"client/src/components/apps/FileManagerClean.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, Home, Folder, FileText, Plus, \n  Trash2, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\ninterface FileViewMode {\n  view: 'grid' | 'list';\n  sortBy: 'name' | 'date' | 'size' | 'type';\n  sortOrder: 'asc' | 'desc';\n}\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<FileViewMode>({\n    view: 'grid',\n    sortBy: 'name',\n    sortOrder: 'asc'\n  });\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [files, setFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  // File operations with localStorage persistence\n  const saveFiles = (fileList: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(fileList));\n    setFiles(fileList);\n  };\n\n  const loadFiles = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  const createFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const currentFiles = loadFiles();\n    const updatedFiles = [...currentFiles, newFile];\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const currentFiles = loadFiles();\n    const filteredFiles = currentFiles.filter(file => file.id !== id && file.parentId !== id);\n    saveFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const currentFiles = loadFiles();\n    const updatedFiles = currentFiles.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  // Initialize file system\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setFiles(loadFiles());\n    } else {\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = files.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = files\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      {/* Toolbar */}\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode.view === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode((prev: FileViewMode) => ({ ...prev, view: 'grid' }))}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode.view === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode((prev: FileViewMode) => ({ ...prev, view: 'list' }))}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Delete ({selectedFiles.size})\n            </Button>\n          </>\n        )}\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode.view === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Edit File Dialog */}\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":16639},"client/src/components/apps/FileManagerFinal.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, Home, Folder, FileText, Plus, \n  Trash2, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [files, setFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  // File operations with localStorage persistence\n  const saveFiles = (fileList: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(fileList));\n    setFiles(fileList);\n  };\n\n  const loadFiles = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  const createFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const currentFiles = loadFiles();\n    const updatedFiles = [...currentFiles, newFile];\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const currentFiles = loadFiles();\n    const filteredFiles = currentFiles.filter(file => file.id !== id && file.parentId !== id);\n    saveFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const currentFiles = loadFiles();\n    const updatedFiles = currentFiles.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  // Initialize file system\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setFiles(loadFiles());\n    } else {\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = files.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = files\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      {/* Toolbar */}\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('grid')}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('list')}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Delete ({selectedFiles.size})\n            </Button>\n          </>\n        )}\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Edit File Dialog */}\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":16352},"client/src/components/apps/FileManagerFixed.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, Home, Folder, FileText, Plus, \n  Trash2, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [files, setFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  const saveFiles = (fileList: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(fileList));\n    setFiles(fileList);\n  };\n\n  const loadFiles = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  const createFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const currentFiles = loadFiles();\n    const updatedFiles = [...currentFiles, newFile];\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const currentFiles = loadFiles();\n    const filteredFiles = currentFiles.filter(file => file.id !== id && file.parentId !== id);\n    saveFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const currentFiles = loadFiles();\n    const updatedFiles = currentFiles.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setFiles(loadFiles());\n    } else {\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = files.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = files\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('grid')}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode('list')}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n            <Trash2 className=\"w-4 h-4 mr-2\" />\n            Delete ({selectedFiles.size})\n          </Button>\n        )}\n      </div>\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":16136},"client/src/components/apps/FileManagerNew.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Badge } from '@/components/ui/badge';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, ArrowRight, Home, Folder, FileText, Plus, \n  Edit, Trash2, Download, Upload, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code, Settings,\n  Copy, Scissors, Clipboard, MoreVertical, Eye, Share2\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\ninterface FileViewMode {\n  view: 'grid' | 'list';\n  sortBy: 'name' | 'date' | 'size' | 'type';\n  sortOrder: 'asc' | 'desc';\n}\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<FileViewMode>({\n    view: 'grid',\n    sortBy: 'name',\n    sortOrder: 'asc'\n  });\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [clipboard, setClipboard] = useState<{ files: FileType[], operation: 'copy' | 'cut' } | null>(null);\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [mockFiles, setMockFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  // Real file operations with localStorage persistence\n  const saveFilesToStorage = (files: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(files));\n  };\n\n  const loadFilesFromStorage = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const createNewFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const files = loadFilesFromStorage();\n    files.push(newFile);\n    saveFilesToStorage(files);\n    setMockFiles(files);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const files = loadFilesFromStorage();\n    const filteredFiles = files.filter(file => file.id !== id && file.parentId !== id);\n    saveFilesToStorage(filteredFiles);\n    setMockFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const files = loadFilesFromStorage();\n    const updatedFiles = files.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFilesToStorage(updatedFiles);\n    setMockFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  // Initialize file system\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setMockFiles(loadFilesFromStorage());\n    } else {\n      // Create default system structure\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFilesToStorage(defaultFiles);\n      setMockFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createNewFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createNewFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = mockFiles.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = mockFiles\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      {/* Toolbar */}\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode.view === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode(prev => ({ ...prev, view: 'grid' }))}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode.view === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode(prev => ({ ...prev, view: 'list' }))}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Delete ({selectedFiles.size})\n            </Button>\n          </>\n        )}\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode.view === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Edit File Dialog */}\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":17087},"client/src/components/apps/FileManagerWorking.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  ArrowLeft, Home, Folder, FileText, Plus, \n  Trash2, Search, Grid3X3, List,\n  File, Image, Video, Music, Archive, Code\n} from 'lucide-react';\nimport type { File as FileType } from '@shared/schema';\n\ninterface FileViewMode {\n  view: 'grid' | 'list';\n  sortBy: 'name' | 'date' | 'size' | 'type';\n  sortOrder: 'asc' | 'desc';\n}\n\nexport const FileManager: FC = () => {\n  const [currentParentId, setCurrentParentId] = useState<number | null>(null);\n  const [selectedFiles, setSelectedFiles] = useState<Set<number>>(new Set());\n  const [searchQuery, setSearchQuery] = useState('');\n  const [viewMode, setViewMode] = useState<FileViewMode>({\n    view: 'grid',\n    sortBy: 'name',\n    sortOrder: 'asc'\n  });\n  const [showNewFileDialog, setShowNewFileDialog] = useState(false);\n  const [showNewFolderDialog, setShowNewFolderDialog] = useState(false);\n  const [editingFile, setEditingFile] = useState<FileType | null>(null);\n  const [newFileName, setNewFileName] = useState('');\n  const [newFileContent, setNewFileContent] = useState('');\n  const [currentPath, setCurrentPath] = useState('/home/user');\n  const [files, setFiles] = useState<FileType[]>([]);\n\n  const { toast } = useToast();\n\n  // File operations with localStorage persistence\n  const saveFiles = (fileList: FileType[]) => {\n    localStorage.setItem('webos-filesystem', JSON.stringify(fileList));\n    setFiles(fileList);\n  };\n\n  const loadFiles = (): FileType[] => {\n    const stored = localStorage.getItem('webos-filesystem');\n    return stored ? JSON.parse(stored) : [];\n  };\n\n  const getFileType = (filename: string): string => {\n    const ext = filename.split('.').pop()?.toLowerCase() || '';\n    const typeMap: Record<string, string> = {\n      'txt': 'text/plain',\n      'js': 'text/javascript',\n      'html': 'text/html',\n      'css': 'text/css',\n      'json': 'application/json',\n      'pdf': 'application/pdf',\n      'jpg': 'image/jpeg',\n      'jpeg': 'image/jpeg',\n      'png': 'image/png',\n      'gif': 'image/gif',\n      'mp4': 'video/mp4',\n      'mp3': 'audio/mpeg',\n      'zip': 'application/zip'\n    };\n    return typeMap[ext] || 'application/octet-stream';\n  };\n\n  const createFile = (name: string, content: string = '', isFolder: boolean = false, parentId: number | null = null) => {\n    const newFile: FileType = {\n      id: Date.now(),\n      name,\n      content: isFolder ? null : content,\n      isFolder,\n      parentId,\n      size: isFolder ? 0 : content.length,\n      createdAt: new Date(),\n      updatedAt: new Date(),\n      userId: 1,\n      mimeType: isFolder ? 'folder' : getFileType(name)\n    };\n\n    const currentFiles = loadFiles();\n    const updatedFiles = [...currentFiles, newFile];\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: isFolder ? 'Folder Created' : 'File Created',\n      description: `${name} has been created successfully`\n    });\n\n    return newFile;\n  };\n\n  const deleteFile = (id: number) => {\n    const currentFiles = loadFiles();\n    const filteredFiles = currentFiles.filter(file => file.id !== id && file.parentId !== id);\n    saveFiles(filteredFiles);\n    \n    toast({\n      title: 'Deleted',\n      description: 'File/folder has been deleted successfully'\n    });\n  };\n\n  const updateFile = (id: number, updates: Partial<FileType>) => {\n    const currentFiles = loadFiles();\n    const updatedFiles = currentFiles.map(file => \n      file.id === id \n        ? { ...file, ...updates, updatedAt: new Date() }\n        : file\n    );\n    saveFiles(updatedFiles);\n    \n    toast({\n      title: 'Updated',\n      description: 'File has been updated successfully'\n    });\n  };\n\n  // Initialize file system\n  useEffect(() => {\n    const hasInitialized = localStorage.getItem('filesystem-initialized');\n    if (hasInitialized) {\n      setFiles(loadFiles());\n    } else {\n      const defaultFiles: FileType[] = [\n        {\n          id: 1,\n          name: 'Desktop',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 2,\n          name: 'Documents',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 3,\n          name: 'Downloads',\n          content: null,\n          isFolder: true,\n          parentId: null,\n          size: 0,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'folder'\n        },\n        {\n          id: 4,\n          name: 'Welcome.txt',\n          content: 'Welcome to WebOS File Manager!\\n\\nThis is a fully functional file system where you can:\\n- Create files and folders\\n- Edit text files\\n- Delete items\\n- Navigate through directories\\n\\nEnjoy exploring!',\n          isFolder: false,\n          parentId: null,\n          size: 200,\n          createdAt: new Date(),\n          updatedAt: new Date(),\n          userId: 1,\n          mimeType: 'text/plain'\n        }\n      ];\n      \n      saveFiles(defaultFiles);\n      localStorage.setItem('filesystem-initialized', 'true');\n    }\n  }, []);\n\n  const getFileIcon = (file: FileType) => {\n    if (file.isFolder) {\n      return <Folder className=\"w-6 h-6 text-blue-500\" />;\n    }\n    \n    const mimeType = file.mimeType || '';\n    if (mimeType.startsWith('text/')) {\n      return <FileText className=\"w-6 h-6 text-gray-600\" />;\n    } else if (mimeType.startsWith('image/')) {\n      return <Image className=\"w-6 h-6 text-green-500\" />;\n    } else if (mimeType.startsWith('video/')) {\n      return <Video className=\"w-6 h-6 text-red-500\" />;\n    } else if (mimeType.startsWith('audio/')) {\n      return <Music className=\"w-6 h-6 text-purple-500\" />;\n    } else if (mimeType.includes('zip') || mimeType.includes('archive')) {\n      return <Archive className=\"w-6 h-6 text-orange-500\" />;\n    } else if (mimeType.includes('javascript') || mimeType.includes('json')) {\n      return <Code className=\"w-6 h-6 text-yellow-500\" />;\n    } else {\n      return <File className=\"w-6 h-6 text-gray-500\" />;\n    }\n  };\n\n  const formatFileSize = (size: number): string => {\n    if (size === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(size) / Math.log(k));\n    return parseFloat((size / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const handleFileClick = (file: FileType) => {\n    if (file.isFolder) {\n      setCurrentParentId(file.id);\n      setCurrentPath(`${currentPath}/${file.name}`);\n    } else {\n      setEditingFile(file);\n    }\n  };\n\n  const handleCreateFile = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please enter a file name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, newFileContent, false, currentParentId);\n    setNewFileName('');\n    setNewFileContent('');\n    setShowNewFileDialog(false);\n  };\n\n  const handleCreateFolder = () => {\n    if (!newFileName.trim()) {\n      toast({\n        title: \"Error\", \n        description: \"Please enter a folder name\"\n      });\n      return;\n    }\n\n    createFile(newFileName, '', true, currentParentId);\n    setNewFileName('');\n    setShowNewFolderDialog(false);\n  };\n\n  const handleDeleteSelected = () => {\n    if (selectedFiles.size === 0) return;\n    \n    Array.from(selectedFiles).forEach(id => {\n      deleteFile(id);\n    });\n    \n    setSelectedFiles(new Set());\n  };\n\n  const navigateBack = () => {\n    if (currentParentId === null) return;\n    \n    const parentFile = files.find(f => f.id === currentParentId);\n    if (parentFile) {\n      setCurrentParentId(parentFile.parentId);\n      setCurrentPath(currentPath.split('/').slice(0, -1).join('/') || '/home/user');\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentParentId(null);\n    setCurrentPath('/home/user');\n  };\n\n  const filteredFiles = files\n    .filter(file => file.parentId === currentParentId)\n    .filter(file => \n      searchQuery === '' || \n      file.name.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  return (\n    <div className=\"h-full flex flex-col bg-white dark:bg-gray-900\">\n      {/* Toolbar */}\n      <div className=\"border-b p-4 flex items-center gap-2\">\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateBack} disabled={currentParentId === null}>\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={navigateHome}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 mx-4\">\n          <div className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">\n            {currentPath}\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              className=\"pl-10 w-64\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n            />\n          </div>\n          \n          <Button\n            variant={viewMode.view === 'grid' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode(prev => ({ ...prev, view: 'grid' }))}\n          >\n            <Grid3X3 className=\"w-4 h-4\" />\n          </Button>\n          \n          <Button\n            variant={viewMode.view === 'list' ? 'default' : 'outline'}\n            size=\"sm\"\n            onClick={() => setViewMode(prev => ({ ...prev, view: 'list' }))}\n          >\n            <List className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"border-b p-3 flex items-center gap-2\">\n        <Dialog open={showNewFileDialog} onOpenChange={setShowNewFileDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Plus className=\"w-4 h-4 mr-2\" />\n              New File\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New File</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"File name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Textarea\n                placeholder=\"File content (optional)\"\n                value={newFileContent}\n                onChange={(e) => setNewFileContent(e.target.value)}\n                rows={6}\n              />\n              <Button onClick={handleCreateFile}>Create File</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        <Dialog open={showNewFolderDialog} onOpenChange={setShowNewFolderDialog}>\n          <DialogTrigger asChild>\n            <Button variant=\"outline\" size=\"sm\">\n              <Folder className=\"w-4 h-4 mr-2\" />\n              New Folder\n            </Button>\n          </DialogTrigger>\n          <DialogContent>\n            <DialogHeader>\n              <DialogTitle>Create New Folder</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Input\n                placeholder=\"Folder name\"\n                value={newFileName}\n                onChange={(e) => setNewFileName(e.target.value)}\n              />\n              <Button onClick={handleCreateFolder}>Create Folder</Button>\n            </div>\n          </DialogContent>\n        </Dialog>\n\n        {selectedFiles.size > 0 && (\n          <>\n            <Button variant=\"outline\" size=\"sm\" onClick={handleDeleteSelected}>\n              <Trash2 className=\"w-4 h-4 mr-2\" />\n              Delete ({selectedFiles.size})\n            </Button>\n          </>\n        )}\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 p-4 overflow-auto\">\n        {viewMode.view === 'grid' ? (\n          <div className=\"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n            {filteredFiles.map((file) => (\n              <Card\n                key={file.id}\n                className={`cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                <CardContent className=\"p-4 flex flex-col items-center text-center\">\n                  {getFileIcon(file)}\n                  <div className=\"mt-2 text-sm font-medium truncate w-full\">\n                    {file.name}\n                  </div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"space-y-1\">\n            {filteredFiles.map((file) => (\n              <div\n                key={file.id}\n                className={`flex items-center p-3 rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 ${\n                  selectedFiles.has(file.id) ? 'bg-blue-50 dark:bg-blue-900/20' : ''\n                }`}\n                onClick={(e) => {\n                  if (e.ctrlKey || e.metaKey) {\n                    const newSelected = new Set(selectedFiles);\n                    if (newSelected.has(file.id)) {\n                      newSelected.delete(file.id);\n                    } else {\n                      newSelected.add(file.id);\n                    }\n                    setSelectedFiles(newSelected);\n                  } else {\n                    handleFileClick(file);\n                  }\n                }}\n              >\n                {getFileIcon(file)}\n                <div className=\"ml-3 flex-1\">\n                  <div className=\"text-sm font-medium\">{file.name}</div>\n                  <div className=\"text-xs text-gray-500\">\n                    {file.createdAt.toLocaleDateString()}\n                  </div>\n                </div>\n                <div className=\"text-sm text-gray-500\">\n                  {file.isFolder ? 'Folder' : formatFileSize(file.size)}\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Edit File Dialog */}\n      {editingFile && (\n        <Dialog open={!!editingFile} onOpenChange={() => setEditingFile(null)}>\n          <DialogContent className=\"max-w-4xl\">\n            <DialogHeader>\n              <DialogTitle>Edit {editingFile.name}</DialogTitle>\n            </DialogHeader>\n            <div className=\"space-y-4\">\n              <Textarea\n                value={editingFile.content || ''}\n                onChange={(e) => setEditingFile(prev => prev ? { ...prev, content: e.target.value } : null)}\n                rows={20}\n                className=\"font-mono\"\n              />\n              <div className=\"flex gap-2\">\n                <Button\n                  onClick={() => {\n                    if (editingFile) {\n                      updateFile(editingFile.id, { content: editingFile.content });\n                      setEditingFile(null);\n                    }\n                  }}\n                >\n                  Save Changes\n                </Button>\n                <Button variant=\"outline\" onClick={() => setEditingFile(null)}>\n                  Cancel\n                </Button>\n              </div>\n            </div>\n          </DialogContent>\n        </Dialog>\n      )}\n    </div>\n  );\n};","size_bytes":16607},"client/src/components/apps/GameCenter.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { X, Gamepad2, Trophy, Users, Clock, Star, Download, Play, Settings } from 'lucide-react';\n\ninterface Game {\n  id: string;\n  title: string;\n  genre: string;\n  rating: number;\n  players: string;\n  size: string;\n  description: string;\n  screenshots: string[];\n  achievements: number;\n  lastPlayed?: Date;\n  installed: boolean;\n  featured: boolean;\n}\n\ninterface Achievement {\n  id: string;\n  title: string;\n  description: string;\n  icon: string;\n  unlocked: boolean;\n  progress: number;\n  maxProgress: number;\n}\n\nexport const GameCenter: FC = () => {\n  const [selectedTab, setSelectedTab] = useState<'library' | 'store' | 'achievements' | 'friends'>('library');\n  const [games, setGames] = useState<Game[]>([]);\n  const [achievements, setAchievements] = useState<Achievement[]>([]);\n  const [selectedGame, setSelectedGame] = useState<Game | null>(null);\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    loadGameData();\n    loadAchievements();\n  }, []);\n\n  const loadGameData = () => {\n    const gameLibrary: Game[] = [\n      {\n        id: 'snake-classic',\n        title: 'Snake Classic',\n        genre: 'Arcade',\n        rating: 4.5,\n        players: '1 Player',\n        size: '2.1 MB',\n        description: 'Classic snake game with modern graphics and smooth gameplay. Guide your snake to eat food and grow longer while avoiding collisions.',\n        screenshots: ['🐍', '🎮', '🏆'],\n        achievements: 12,\n        installed: true,\n        featured: true,\n        lastPlayed: new Date()\n      },\n      {\n        id: 'tetris-deluxe',\n        title: 'Tetris Deluxe',\n        genre: 'Puzzle',\n        rating: 4.8,\n        players: '1-2 Players',\n        size: '5.3 MB',\n        description: 'Enhanced Tetris experience with multiple game modes, power-ups, and competitive multiplayer.',\n        screenshots: ['🧩', '🎯', '⚡'],\n        achievements: 25,\n        installed: true,\n        featured: true,\n        lastPlayed: new Date(Date.now() - 86400000)\n      },\n      {\n        id: 'pac-adventure',\n        title: 'Pac-Man Adventure',\n        genre: 'Arcade',\n        rating: 4.3,\n        players: '1 Player',\n        size: '8.7 MB',\n        description: 'Modern take on the classic Pac-Man with new mazes, power-ups, and challenging ghost AI.',\n        screenshots: ['👻', '🟡', '🍒'],\n        achievements: 18,\n        installed: false,\n        featured: true\n      },\n      {\n        id: 'space-shooter',\n        title: 'Space Shooter Pro',\n        genre: 'Action',\n        rating: 4.6,\n        players: '1 Player',\n        size: '12.4 MB',\n        description: 'Fast-paced space combat with stunning visuals, weapon upgrades, and epic boss battles.',\n        screenshots: ['🚀', '💥', '🛸'],\n        achievements: 30,\n        installed: false,\n        featured: false\n      },\n      {\n        id: 'memory-master',\n        title: 'Memory Master',\n        genre: 'Educational',\n        rating: 4.2,\n        players: '1 Player',\n        size: '3.8 MB',\n        description: 'Train your memory with various exercises and challenges. Track your progress over time.',\n        screenshots: ['🧠', '🎯', '📊'],\n        achievements: 15,\n        installed: true,\n        featured: false\n      }\n    ];\n    setGames(gameLibrary);\n    setSelectedGame(gameLibrary[0]);\n  };\n\n  const loadAchievements = () => {\n    const userAchievements: Achievement[] = [\n      {\n        id: 'first-game',\n        title: 'Getting Started',\n        description: 'Play your first game',\n        icon: '🎮',\n        unlocked: true,\n        progress: 1,\n        maxProgress: 1\n      },\n      {\n        id: 'high-score',\n        title: 'High Scorer',\n        description: 'Achieve a score of 10,000 points',\n        icon: '🏆',\n        unlocked: true,\n        progress: 15420,\n        maxProgress: 10000\n      },\n      {\n        id: 'speed-demon',\n        title: 'Speed Demon',\n        description: 'Complete 50 levels in under 30 minutes',\n        icon: '⚡',\n        unlocked: false,\n        progress: 32,\n        maxProgress: 50\n      },\n      {\n        id: 'collector',\n        title: 'Collector',\n        description: 'Install 10 different games',\n        icon: '📦',\n        unlocked: false,\n        progress: 3,\n        maxProgress: 10\n      },\n      {\n        id: 'master-gamer',\n        title: 'Master Gamer',\n        description: 'Unlock all achievements in 3 games',\n        icon: '👑',\n        unlocked: false,\n        progress: 1,\n        maxProgress: 3\n      }\n    ];\n    setAchievements(userAchievements);\n  };\n\n  const filteredGames = games.filter(game =>\n    game.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    game.genre.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const launchGame = (game: Game) => {\n    if (!game.installed) return;\n    \n    // Launch game logic would go here\n    console.log(`Launching ${game.title}`);\n    \n    // Update last played\n    const updatedGames = games.map(g => \n      g.id === game.id ? { ...g, lastPlayed: new Date() } : g\n    );\n    setGames(updatedGames);\n  };\n\n  const installGame = (game: Game) => {\n    const updatedGames = games.map(g => \n      g.id === game.id ? { ...g, installed: true } : g\n    );\n    setGames(updatedGames);\n  };\n\n  return (\n    <div className=\"bg-gray-900 text-white rounded-lg shadow-2xl w-full max-w-6xl h-[700px] flex flex-col\">\n      <div className=\"bg-gradient-to-r from-purple-600 to-blue-600 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Gamepad2 className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Game Center</span>\n        </div>\n      </div>\n\n      <div className=\"flex border-b border-gray-700\">\n        {[\n          { key: 'library', label: 'Library', icon: Gamepad2 },\n          { key: 'store', label: 'Store', icon: Download },\n          { key: 'achievements', label: 'Achievements', icon: Trophy },\n          { key: 'friends', label: 'Friends', icon: Users }\n        ].map(tab => (\n          <button\n            key={tab.key}\n            onClick={() => setSelectedTab(tab.key as any)}\n            className={`flex items-center space-x-2 px-4 py-3 ${\n              selectedTab === tab.key \n                ? 'bg-gray-800 border-b-2 border-purple-500' \n                : 'hover:bg-gray-800'\n            }`}\n          >\n            <tab.icon className=\"w-4 h-4\" />\n            <span>{tab.label}</span>\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        {(selectedTab === 'library' || selectedTab === 'store') && (\n          <>\n            <div className=\"w-2/3 p-4 overflow-auto\">\n              <div className=\"mb-4\">\n                <Input\n                  placeholder=\"Search games...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"bg-gray-800 border-gray-600 text-white\"\n                />\n              </div>\n\n              {selectedTab === 'library' && (\n                <div>\n                  <h2 className=\"text-xl font-bold mb-4\">Recently Played</h2>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n                    {filteredGames\n                      .filter(g => g.installed && g.lastPlayed)\n                      .sort((a, b) => (b.lastPlayed?.getTime() || 0) - (a.lastPlayed?.getTime() || 0))\n                      .slice(0, 4)\n                      .map(game => (\n                        <div \n                          key={game.id}\n                          onClick={() => setSelectedGame(game)}\n                          className=\"bg-gray-800 p-4 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors\"\n                        >\n                          <div className=\"flex items-center space-x-3 mb-3\">\n                            <div className=\"text-3xl\">{game.screenshots[0]}</div>\n                            <div>\n                              <h3 className=\"font-semibold\">{game.title}</h3>\n                              <p className=\"text-gray-400 text-sm\">{game.genre}</p>\n                            </div>\n                          </div>\n                          <Button \n                            onClick={(e) => {\n                              e.stopPropagation();\n                              launchGame(game);\n                            }}\n                            className=\"w-full bg-purple-600 hover:bg-purple-700\"\n                          >\n                            <Play className=\"w-4 h-4 mr-2\" />\n                            Play\n                          </Button>\n                        </div>\n                      ))}\n                  </div>\n                </div>\n              )}\n\n              <h2 className=\"text-xl font-bold mb-4\">\n                {selectedTab === 'library' ? 'All Games' : 'Featured Games'}\n              </h2>\n              <div className=\"grid grid-cols-1 gap-4\">\n                {filteredGames\n                  .filter(g => selectedTab === 'store' ? g.featured : true)\n                  .map(game => (\n                    <div \n                      key={game.id}\n                      onClick={() => setSelectedGame(game)}\n                      className=\"bg-gray-800 p-4 rounded-lg cursor-pointer hover:bg-gray-700 transition-colors\"\n                    >\n                      <div className=\"flex space-x-4\">\n                        <div className=\"text-4xl\">{game.screenshots[0]}</div>\n                        <div className=\"flex-1\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <h3 className=\"font-semibold text-lg\">{game.title}</h3>\n                            <div className=\"flex items-center space-x-1\">\n                              <Star className=\"w-4 h-4 text-yellow-500\" />\n                              <span>{game.rating}</span>\n                            </div>\n                          </div>\n                          <p className=\"text-gray-400 text-sm mb-2\">{game.genre} • {game.players} • {game.size}</p>\n                          <p className=\"text-gray-300 text-sm mb-3\">{game.description}</p>\n                          <div className=\"flex space-x-2\">\n                            {game.installed ? (\n                              <Button \n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  launchGame(game);\n                                }}\n                                className=\"bg-green-600 hover:bg-green-700\"\n                              >\n                                <Play className=\"w-4 h-4 mr-2\" />\n                                Play\n                              </Button>\n                            ) : (\n                              <Button \n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  installGame(game);\n                                }}\n                                className=\"bg-blue-600 hover:bg-blue-700\"\n                              >\n                                <Download className=\"w-4 h-4 mr-2\" />\n                                Install\n                              </Button>\n                            )}\n                            <Button variant=\"outline\" className=\"border-gray-600 text-white hover:bg-gray-800\">\n                              <Settings className=\"w-4 h-4\" />\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n              </div>\n            </div>\n\n            <div className=\"w-1/3 border-l border-gray-700 p-4 overflow-auto\">\n              {selectedGame ? (\n                <div className=\"space-y-4\">\n                  <div className=\"text-center\">\n                    <div className=\"text-6xl mb-4\">{selectedGame.screenshots[0]}</div>\n                    <h2 className=\"text-xl font-bold mb-2\">{selectedGame.title}</h2>\n                    <div className=\"flex items-center justify-center space-x-1 mb-2\">\n                      <Star className=\"w-4 h-4 text-yellow-500\" />\n                      <span>{selectedGame.rating}</span>\n                    </div>\n                    <p className=\"text-gray-400 text-sm\">{selectedGame.genre}</p>\n                  </div>\n\n                  <div className=\"bg-gray-800 p-4 rounded space-y-2\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-400\">Players:</span>\n                      <span>{selectedGame.players}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-400\">Size:</span>\n                      <span>{selectedGame.size}</span>\n                    </div>\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-gray-400\">Achievements:</span>\n                      <span>{selectedGame.achievements}</span>\n                    </div>\n                    {selectedGame.lastPlayed && (\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-400\">Last Played:</span>\n                        <span>{selectedGame.lastPlayed.toLocaleDateString()}</span>\n                      </div>\n                    )}\n                  </div>\n\n                  <div>\n                    <h3 className=\"font-semibold mb-2\">Description</h3>\n                    <p className=\"text-gray-300 text-sm\">{selectedGame.description}</p>\n                  </div>\n\n                  <div>\n                    <h3 className=\"font-semibold mb-2\">Screenshots</h3>\n                    <div className=\"flex space-x-2\">\n                      {selectedGame.screenshots.map((screenshot, index) => (\n                        <div key={index} className=\"text-2xl bg-gray-800 p-2 rounded\">\n                          {screenshot}\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex items-center justify-center h-full text-gray-400\">\n                  <div className=\"text-center\">\n                    <Gamepad2 className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                    <p>Select a game to view details</p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </>\n        )}\n\n        {selectedTab === 'achievements' && (\n          <div className=\"flex-1 p-4 overflow-auto\">\n            <div className=\"mb-6\">\n              <h2 className=\"text-2xl font-bold mb-2\">Achievements</h2>\n              <div className=\"flex items-center space-x-4 text-sm text-gray-400\">\n                <span>{achievements.filter(a => a.unlocked).length} / {achievements.length} Unlocked</span>\n                <span>•</span>\n                <span>{Math.round((achievements.filter(a => a.unlocked).length / achievements.length) * 100)}% Complete</span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              {achievements.map(achievement => (\n                <div \n                  key={achievement.id}\n                  className={`bg-gray-800 p-4 rounded-lg ${\n                    achievement.unlocked ? 'border-l-4 border-yellow-500' : ''\n                  }`}\n                >\n                  <div className=\"flex items-center space-x-3 mb-3\">\n                    <div className=\"text-3xl\">{achievement.icon}</div>\n                    <div>\n                      <h3 className={`font-semibold ${achievement.unlocked ? 'text-yellow-500' : ''}`}>\n                        {achievement.title}\n                      </h3>\n                      <p className=\"text-gray-400 text-sm\">{achievement.description}</p>\n                    </div>\n                  </div>\n                  \n                  {!achievement.unlocked && achievement.maxProgress > 1 && (\n                    <div>\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span>Progress</span>\n                        <span>{achievement.progress} / {achievement.maxProgress}</span>\n                      </div>\n                      <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                        <div \n                          className=\"bg-purple-600 h-2 rounded-full\"\n                          style={{ width: `${(achievement.progress / achievement.maxProgress) * 100}%` }}\n                        />\n                      </div>\n                    </div>\n                  )}\n                  \n                  {achievement.unlocked && (\n                    <div className=\"text-yellow-500 text-sm flex items-center\">\n                      <Trophy className=\"w-4 h-4 mr-1\" />\n                      Unlocked\n                    </div>\n                  )}\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'friends' && (\n          <div className=\"flex-1 p-4 overflow-auto\">\n            <div className=\"text-center py-12\">\n              <Users className=\"w-16 h-16 mx-auto mb-4 text-gray-600\" />\n              <h3 className=\"text-xl font-semibold mb-2\">Connect with Friends</h3>\n              <p className=\"text-gray-400 mb-4\">Add friends to compare scores and achievements</p>\n              <Button className=\"bg-purple-600 hover:bg-purple-700\">\n                Add Friends\n              </Button>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":17915},"client/src/components/apps/HyprlandConfig.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Switch } from '@/components/ui/switch';\nimport { \n  Monitor, \n  Layout, \n  Keyboard, \n  Mouse, \n  Palette, \n  Settings, \n  Terminal,\n  Grid3X3,\n  Move,\n  Eye,\n  Volume2,\n  Wifi,\n  Battery,\n  Clock,\n  Save,\n  Download,\n  Upload,\n  RefreshCw\n} from 'lucide-react';\n\ninterface HyprlandConfigSection {\n  name: string;\n  settings: Record<string, any>;\n}\n\nexport const HyprlandConfig: FC = () => {\n  const [config, setConfig] = useState<HyprlandConfigSection[]>([\n    {\n      name: 'general',\n      settings: {\n        gaps_in: 5,\n        gaps_out: 20,\n        border_size: 2,\n        'col.active_border': 'rgba(33ccffee) rgba(00ff99ee) 45deg',\n        'col.inactive_border': 'rgba(595959aa)',\n        resize_on_border: false,\n        allow_tearing: false,\n        layout: 'dwindle'\n      }\n    },\n    {\n      name: 'decoration',\n      settings: {\n        rounding: 10,\n        'blur.enabled': true,\n        'blur.size': 3,\n        'blur.passes': 1,\n        'drop_shadow': true,\n        'shadow_range': 4,\n        'shadow_render_power': 3,\n        'col.shadow': 'rgba(1a1a1aee)'\n      }\n    },\n    {\n      name: 'animations',\n      settings: {\n        enabled: true,\n        bezier: 'myBezier, 0.05, 0.9, 0.1, 1.05',\n        'animation.windows': 'myBezier',\n        'animation.windowsOut': 'default',\n        'animation.border': 'default',\n        'animation.borderangle': 'default',\n        'animation.fade': 'default',\n        'animation.workspaces': 'default'\n      }\n    },\n    {\n      name: 'input',\n      settings: {\n        kb_model: '',\n        kb_layout: 'us',\n        kb_variant: '',\n        kb_options: '',\n        kb_rules: '',\n        follow_mouse: 1,\n        touchpad: {\n          natural_scroll: false\n        }\n      }\n    }\n  ]);\n\n  const [activeTab, setActiveTab] = useState('general');\n  const [keybinds, setKeybinds] = useState([\n    { mod: 'SUPER', key: 'Q', action: 'exec, kitty' },\n    { mod: 'SUPER', key: 'C', action: 'killactive' },\n    { mod: 'SUPER', key: 'M', action: 'exit' },\n    { mod: 'SUPER', key: 'E', action: 'exec, dolphin' },\n    { mod: 'SUPER', key: 'V', action: 'togglefloating' },\n    { mod: 'SUPER', key: 'R', action: 'exec, wofi --show drun' },\n    { mod: 'SUPER', key: 'P', action: 'pseudo' },\n    { mod: 'SUPER', key: 'J', action: 'togglesplit' },\n    { mod: 'SUPER', key: 'left', action: 'movefocus, l' },\n    { mod: 'SUPER', key: 'right', action: 'movefocus, r' },\n    { mod: 'SUPER', key: 'up', action: 'movefocus, u' },\n    { mod: 'SUPER', key: 'down', action: 'movefocus, d' }\n  ]);\n\n  const [monitors, setMonitors] = useState([\n    { name: 'DP-1', resolution: '1920x1080@60', position: '0x0', scale: '1' },\n    { name: 'HDMI-A-1', resolution: '1920x1080@60', position: '1920x0', scale: '1' }\n  ]);\n\n  const [workspaces, setWorkspaces] = useState([\n    { id: 1, name: 'Main', monitor: 'DP-1', default: true },\n    { id: 2, name: 'Web', monitor: 'DP-1', default: false },\n    { id: 3, name: 'Code', monitor: 'DP-1', default: false },\n    { id: 4, name: 'Media', monitor: 'HDMI-A-1', default: false },\n    { id: 5, name: 'Games', monitor: 'HDMI-A-1', default: false }\n  ]);\n\n  const generateConfig = () => {\n    let configText = '# Hyprland Configuration Generated by WebOS\\n\\n';\n    \n    config.forEach(section => {\n      configText += `${section.name} {\\n`;\n      Object.entries(section.settings).forEach(([key, value]) => {\n        if (typeof value === 'object') {\n          Object.entries(value).forEach(([subKey, subValue]) => {\n            configText += `    ${key}:${subKey} = ${subValue}\\n`;\n          });\n        } else {\n          configText += `    ${key} = ${value}\\n`;\n        }\n      });\n      configText += '}\\n\\n';\n    });\n\n    // Add monitor configuration\n    configText += '# Monitor Configuration\\n';\n    monitors.forEach(monitor => {\n      configText += `monitor = ${monitor.name},${monitor.resolution},${monitor.position},${monitor.scale}\\n`;\n    });\n    configText += '\\n';\n\n    // Add workspace configuration\n    configText += '# Workspace Configuration\\n';\n    workspaces.forEach(workspace => {\n      configText += `workspace = ${workspace.id}, monitor:${workspace.monitor}${workspace.default ? ', default:true' : ''}\\n`;\n    });\n    configText += '\\n';\n\n    // Add keybinds\n    configText += '# Keybinds\\n';\n    keybinds.forEach(bind => {\n      configText += `bind = ${bind.mod}, ${bind.key}, ${bind.action}\\n`;\n    });\n\n    return configText;\n  };\n\n  const exportConfig = () => {\n    const configText = generateConfig();\n    const blob = new Blob([configText], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = 'hypr.conf';\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const updateSetting = (sectionName: string, key: string, value: any) => {\n    setConfig(prev => prev.map(section => \n      section.name === sectionName \n        ? { ...section, settings: { ...section.settings, [key]: value } }\n        : section\n    ));\n  };\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-background\">\n      <div className=\"flex items-center justify-between p-4 border-b border-border\">\n        <div className=\"flex items-center space-x-3\">\n          <Layout className=\"w-6 h-6 text-primary\" />\n          <h2 className=\"text-2xl font-bold\">Hyprland Configuration</h2>\n          <Badge variant=\"secondary\">WebOS Integration</Badge>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button onClick={exportConfig} size=\"sm\" variant=\"outline\">\n            <Download className=\"w-4 h-4 mr-2\" />\n            Export Config\n          </Button>\n          <Button size=\"sm\">\n            <Save className=\"w-4 h-4 mr-2\" />\n            Apply\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        <Tabs value={activeTab} onValueChange={setActiveTab} className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-6\">\n            <TabsTrigger value=\"general\">General</TabsTrigger>\n            <TabsTrigger value=\"appearance\">Appearance</TabsTrigger>\n            <TabsTrigger value=\"keybinds\">Keybinds</TabsTrigger>\n            <TabsTrigger value=\"monitors\">Monitors</TabsTrigger>\n            <TabsTrigger value=\"workspaces\">Workspaces</TabsTrigger>\n            <TabsTrigger value=\"advanced\">Advanced</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"general\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Settings className=\"w-5 h-5\" />\n                  <span>General Settings</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Gaps Inner</label>\n                    <Input\n                      type=\"number\"\n                      value={config.find(s => s.name === 'general')?.settings.gaps_in || 5}\n                      onChange={(e) => updateSetting('general', 'gaps_in', parseInt(e.target.value))}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Gaps Outer</label>\n                    <Input\n                      type=\"number\"\n                      value={config.find(s => s.name === 'general')?.settings.gaps_out || 20}\n                      onChange={(e) => updateSetting('general', 'gaps_out', parseInt(e.target.value))}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Border Size</label>\n                    <Input\n                      type=\"number\"\n                      value={config.find(s => s.name === 'general')?.settings.border_size || 2}\n                      onChange={(e) => updateSetting('general', 'border_size', parseInt(e.target.value))}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Layout</label>\n                    <select \n                      className=\"w-full p-2 border rounded\"\n                      value={config.find(s => s.name === 'general')?.settings.layout || 'dwindle'}\n                      onChange={(e) => updateSetting('general', 'layout', e.target.value)}\n                    >\n                      <option value=\"dwindle\">Dwindle</option>\n                      <option value=\"master\">Master</option>\n                    </select>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"appearance\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Palette className=\"w-5 h-5\" />\n                  <span>Visual Effects</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Rounding</label>\n                    <Input\n                      type=\"number\"\n                      value={config.find(s => s.name === 'decoration')?.settings.rounding || 10}\n                      onChange={(e) => updateSetting('decoration', 'rounding', parseInt(e.target.value))}\n                    />\n                  </div>\n                  <div>\n                    <label className=\"text-sm font-medium\">Blur Size</label>\n                    <Input\n                      type=\"number\"\n                      value={config.find(s => s.name === 'decoration')?.settings['blur.size'] || 3}\n                      onChange={(e) => updateSetting('decoration', 'blur.size', parseInt(e.target.value))}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"text-sm font-medium\">Enable Blur</label>\n                    <Switch\n                      checked={config.find(s => s.name === 'decoration')?.settings['blur.enabled'] || false}\n                      onCheckedChange={(checked) => updateSetting('decoration', 'blur.enabled', checked)}\n                    />\n                  </div>\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"text-sm font-medium\">Drop Shadow</label>\n                    <Switch\n                      checked={config.find(s => s.name === 'decoration')?.settings['drop_shadow'] || false}\n                      onCheckedChange={(checked) => updateSetting('decoration', 'drop_shadow', checked)}\n                    />\n                  </div>\n                </div>\n                <div>\n                  <label className=\"text-sm font-medium\">Active Border Color</label>\n                  <Input\n                    value={config.find(s => s.name === 'general')?.settings['col.active_border'] || ''}\n                    onChange={(e) => updateSetting('general', 'col.active_border', e.target.value)}\n                    placeholder=\"rgba(33ccffee) rgba(00ff99ee) 45deg\"\n                  />\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"keybinds\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Keyboard className=\"w-5 h-5\" />\n                  <span>Keyboard Shortcuts</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-2\">\n                  {keybinds.map((bind, index) => (\n                    <div key={index} className=\"flex items-center space-x-2 p-2 border rounded\">\n                      <Badge variant=\"outline\">{bind.mod}</Badge>\n                      <span>+</span>\n                      <Badge variant=\"outline\">{bind.key}</Badge>\n                      <span>=</span>\n                      <span className=\"flex-1 text-sm\">{bind.action}</span>\n                      <Button size=\"sm\" variant=\"ghost\">Edit</Button>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"monitors\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Monitor className=\"w-5 h-5\" />\n                  <span>Monitor Configuration</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {monitors.map((monitor, index) => (\n                    <div key={index} className=\"p-4 border rounded space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <h4 className=\"font-medium\">{monitor.name}</h4>\n                        <Badge variant=\"secondary\">Active</Badge>\n                      </div>\n                      <div className=\"grid grid-cols-3 gap-2\">\n                        <div>\n                          <label className=\"text-xs text-muted-foreground\">Resolution</label>\n                          <Input value={monitor.resolution} onChange={() => {}} />\n                        </div>\n                        <div>\n                          <label className=\"text-xs text-muted-foreground\">Position</label>\n                          <Input value={monitor.position} onChange={() => {}} />\n                        </div>\n                        <div>\n                          <label className=\"text-xs text-muted-foreground\">Scale</label>\n                          <Input value={monitor.scale} onChange={() => {}} />\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"workspaces\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Grid3X3 className=\"w-5 h-5\" />\n                  <span>Workspace Management</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {workspaces.map((workspace) => (\n                    <div key={workspace.id} className=\"p-4 border rounded space-y-2\">\n                      <div className=\"flex items-center justify-between\">\n                        <h4 className=\"font-medium\">Workspace {workspace.id}</h4>\n                        {workspace.default && <Badge variant=\"default\">Default</Badge>}\n                      </div>\n                      <p className=\"text-sm text-muted-foreground\">{workspace.name}</p>\n                      <p className=\"text-xs text-muted-foreground\">Monitor: {workspace.monitor}</p>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"advanced\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center space-x-2\">\n                  <Terminal className=\"w-5 h-5\" />\n                  <span>Raw Configuration</span>\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <Textarea\n                  value={generateConfig()}\n                  readOnly\n                  className=\"font-mono text-sm h-96\"\n                  placeholder=\"Generated configuration will appear here...\"\n                />\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":16520},"client/src/components/apps/IDE.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { \n  Play, Save, FolderOpen, Plus, X, Code, Terminal, \n  Bug, Settings, Search, FileText, Folder, GitBranch,\n  Download, Upload, Zap, Package, Eye, EyeOff\n} from 'lucide-react';\n\ninterface FileNode {\n  id: string;\n  name: string;\n  type: 'file' | 'folder';\n  content?: string;\n  language?: string;\n  children?: FileNode[];\n  parent?: string;\n}\n\ninterface EditorTab {\n  id: string;\n  fileId: string;\n  fileName: string;\n  language: string;\n  content: string;\n  modified: boolean;\n}\n\ninterface ConsoleMessage {\n  id: string;\n  type: 'info' | 'error' | 'warning' | 'success';\n  message: string;\n  timestamp: Date;\n}\n\nexport const IDE: FC = () => {\n  const [projectName, setProjectName] = useState('WebOS Project');\n  const [activeTabId, setActiveTabId] = useState<string | null>(null);\n  const [tabs, setTabs] = useState<EditorTab[]>([]);\n  const [fileTree, setFileTree] = useState<FileNode[]>([\n    {\n      id: 'src',\n      name: 'src',\n      type: 'folder',\n      children: [\n        {\n          id: 'index.js',\n          name: 'index.js',\n          type: 'file',\n          language: 'javascript',\n          content: `// Welcome to WebOS IDE\nconsole.log('Hello, WebOS!');\n\nfunction greetUser(name) {\n    return \\`Welcome to the IDE, \\${name}!\\`;\n}\n\n// Example of modern JavaScript features\nconst users = ['Alice', 'Bob', 'Charlie'];\nconst greetings = users.map(user => greetUser(user));\n\ngreetings.forEach(greeting => {\n    console.log(greeting);\n});`\n        },\n        {\n          id: 'styles.css',\n          name: 'styles.css',\n          type: 'file',\n          language: 'css',\n          content: `/* WebOS IDE Styles */\nbody {\n    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;\n    background: #1e1e1e;\n    color: #d4d4d4;\n    margin: 0;\n    padding: 20px;\n}\n\n.container {\n    max-width: 1200px;\n    margin: 0 auto;\n    background: #252526;\n    border-radius: 8px;\n    padding: 20px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);\n}\n\n.header {\n    color: #569cd6;\n    font-size: 24px;\n    margin-bottom: 20px;\n    text-align: center;\n}`\n        }\n      ]\n    },\n    {\n      id: 'package.json',\n      name: 'package.json',\n      type: 'file',\n      language: 'json',\n      content: `{\n  \"name\": \"webos-project\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A WebOS IDE project\",\n  \"main\": \"src/index.js\",\n  \"scripts\": {\n    \"start\": \"node src/index.js\",\n    \"dev\": \"nodemon src/index.js\",\n    \"build\": \"webpack --mode production\",\n    \"test\": \"jest\"\n  },\n  \"dependencies\": {\n    \"express\": \"^4.18.2\",\n    \"lodash\": \"^4.17.21\"\n  },\n  \"devDependencies\": {\n    \"nodemon\": \"^3.0.1\",\n    \"jest\": \"^29.7.0\",\n    \"webpack\": \"^5.88.2\"\n  },\n  \"keywords\": [\"webos\", \"ide\", \"development\"],\n  \"author\": \"WebOS Developer\",\n  \"license\": \"MIT\"\n}`\n    },\n    {\n      id: 'README.md',\n      name: 'README.md',\n      type: 'file',\n      language: 'markdown',\n      content: `# WebOS IDE Project\n\nWelcome to your new WebOS IDE project! This powerful development environment provides everything you need to build modern applications.\n\n## Features\n\n- **Multi-language Support**: JavaScript, TypeScript, Python, CSS, HTML, JSON, Markdown\n- **Syntax Highlighting**: Beautiful code highlighting for better readability\n- **Integrated Terminal**: Run commands directly in the IDE\n- **Project Management**: Organize files and folders efficiently\n- **Version Control**: Built-in Git integration\n- **Real-time Preview**: See your changes instantly\n\n## Getting Started\n\n1. Explore the file tree on the left\n2. Open files by clicking on them\n3. Edit code in the main editor\n4. Use the terminal for running commands\n5. Preview your work in real-time\n\n## Keyboard Shortcuts\n\n- \\`Ctrl+S\\`: Save file\n- \\`Ctrl+N\\`: New file\n- \\`Ctrl+O\\`: Open file\n- \\`Ctrl+F\\`: Find in file\n- \\`Ctrl+Shift+F\\`: Find in project\n- \\`F5\\`: Run project\n\nHappy coding! 🚀`\n    }\n  ]);\n\n  const [consoleMessages, setConsoleMessages] = useState<ConsoleMessage[]>([\n    {\n      id: '1',\n      type: 'info',\n      message: 'WebOS IDE initialized successfully',\n      timestamp: new Date()\n    },\n    {\n      id: '2',\n      type: 'success',\n      message: 'Project loaded: ' + projectName,\n      timestamp: new Date()\n    }\n  ]);\n\n  const [terminalInput, setTerminalInput] = useState('');\n  const [showFileTree, setShowFileTree] = useState(true);\n  const [showConsole, setShowConsole] = useState(true);\n\n  const getLanguageFromFileName = (fileName: string): string => {\n    const ext = fileName.split('.').pop()?.toLowerCase();\n    switch (ext) {\n      case 'js': return 'javascript';\n      case 'ts': return 'typescript';\n      case 'py': return 'python';\n      case 'css': return 'css';\n      case 'html': return 'html';\n      case 'json': return 'json';\n      case 'md': return 'markdown';\n      case 'jsx': return 'javascript';\n      case 'tsx': return 'typescript';\n      default: return 'text';\n    }\n  };\n\n  const findFileById = (files: FileNode[], id: string): FileNode | null => {\n    for (const file of files) {\n      if (file.id === id) return file;\n      if (file.children) {\n        const found = findFileById(file.children, id);\n        if (found) return found;\n      }\n    }\n    return null;\n  };\n\n  const openFile = (fileId: string) => {\n    const file = findFileById(fileTree, fileId);\n    if (!file || file.type !== 'file') return;\n\n    // Check if tab already exists\n    const existingTab = tabs.find(tab => tab.fileId === fileId);\n    if (existingTab) {\n      setActiveTabId(existingTab.id);\n      return;\n    }\n\n    // Create new tab\n    const newTab: EditorTab = {\n      id: `tab-${Date.now()}`,\n      fileId: file.id,\n      fileName: file.name,\n      language: file.language || getLanguageFromFileName(file.name),\n      content: file.content || '',\n      modified: false\n    };\n\n    setTabs(prev => [...prev, newTab]);\n    setActiveTabId(newTab.id);\n  };\n\n  const closeTab = (tabId: string) => {\n    setTabs(prev => prev.filter(tab => tab.id !== tabId));\n    if (activeTabId === tabId) {\n      const remainingTabs = tabs.filter(tab => tab.id !== tabId);\n      setActiveTabId(remainingTabs.length > 0 ? remainingTabs[remainingTabs.length - 1].id : null);\n    }\n  };\n\n  const updateTabContent = (tabId: string, content: string) => {\n    setTabs(prev => prev.map(tab => \n      tab.id === tabId \n        ? { ...tab, content, modified: true }\n        : tab\n    ));\n  };\n\n  const saveFile = () => {\n    const activeTab = tabs.find(tab => tab.id === activeTabId);\n    if (!activeTab) return;\n\n    // Update file tree with new content\n    const updateFileContent = (files: FileNode[]): FileNode[] => {\n      return files.map(file => {\n        if (file.id === activeTab.fileId) {\n          return { ...file, content: activeTab.content };\n        }\n        if (file.children) {\n          return { ...file, children: updateFileContent(file.children) };\n        }\n        return file;\n      });\n    };\n\n    setFileTree(updateFileContent);\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTab.id ? { ...tab, modified: false } : tab\n    ));\n\n    addConsoleMessage('success', `File saved: ${activeTab.fileName}`);\n  };\n\n  const addConsoleMessage = (type: ConsoleMessage['type'], message: string) => {\n    const newMessage: ConsoleMessage = {\n      id: Date.now().toString(),\n      type,\n      message,\n      timestamp: new Date()\n    };\n    setConsoleMessages(prev => [...prev, newMessage]);\n  };\n\n  const runProject = () => {\n    addConsoleMessage('info', 'Running project...');\n    \n    setTimeout(() => {\n      addConsoleMessage('success', 'Project started successfully');\n      addConsoleMessage('info', 'Server running on http://localhost:3000');\n    }, 1000);\n  };\n\n  const executeTerminalCommand = () => {\n    if (!terminalInput.trim()) return;\n\n    addConsoleMessage('info', `$ ${terminalInput}`);\n\n    // Simulate command execution\n    switch (terminalInput.toLowerCase().trim()) {\n      case 'npm install':\n        addConsoleMessage('info', 'Installing dependencies...');\n        setTimeout(() => {\n          addConsoleMessage('success', 'Dependencies installed successfully');\n        }, 2000);\n        break;\n      case 'npm start':\n        addConsoleMessage('info', 'Starting development server...');\n        setTimeout(() => {\n          addConsoleMessage('success', 'Development server started on port 3000');\n        }, 1500);\n        break;\n      case 'git status':\n        addConsoleMessage('info', 'On branch main');\n        addConsoleMessage('info', 'Changes not staged for commit:');\n        addConsoleMessage('warning', '  modified: src/index.js');\n        break;\n      case 'ls':\n        addConsoleMessage('info', 'src/  package.json  README.md');\n        break;\n      case 'pwd':\n        addConsoleMessage('info', '/home/user/webos-project');\n        break;\n      case 'clear':\n        setConsoleMessages([]);\n        setTerminalInput('');\n        return;\n      default:\n        addConsoleMessage('error', `Command not found: ${terminalInput}`);\n    }\n\n    setTerminalInput('');\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      executeTerminalCommand();\n    }\n  };\n\n  const renderFileTree = (files: FileNode[], depth = 0) => {\n    return files.map(file => (\n      <div key={file.id} style={{ marginLeft: depth * 16 }}>\n        <div \n          className={`flex items-center gap-2 p-1 hover:bg-gray-700 cursor-pointer rounded text-sm ${\n            file.type === 'file' ? 'text-gray-300' : 'text-blue-300'\n          }`}\n          onClick={() => file.type === 'file' && openFile(file.id)}\n        >\n          {file.type === 'folder' ? (\n            <Folder className=\"w-4 h-4\" />\n          ) : (\n            <FileText className=\"w-4 h-4\" />\n          )}\n          <span>{file.name}</span>\n        </div>\n        {file.children && renderFileTree(file.children, depth + 1)}\n      </div>\n    ));\n  };\n\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  return (\n    <div className=\"h-full bg-gray-900 text-white flex flex-col\">\n      {/* Top Bar */}\n      <div className=\"bg-gray-800 border-b border-gray-700 p-3 flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <div className=\"flex items-center gap-2\">\n            <Code className=\"w-5 h-5 text-blue-400\" />\n            <Input\n              value={projectName}\n              onChange={(e) => setProjectName(e.target.value)}\n              className=\"bg-gray-700 border-gray-600 text-white w-48\"\n            />\n          </div>\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Button onClick={runProject} size=\"sm\" className=\"bg-green-600 hover:bg-green-700\">\n            <Play className=\"w-4 h-4 mr-1\" />\n            Run\n          </Button>\n          <Button onClick={saveFile} size=\"sm\" variant=\"outline\" className=\"border-gray-600 text-white\">\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n          <Button size=\"sm\" variant=\"outline\" className=\"border-gray-600 text-white\">\n            <FolderOpen className=\"w-4 h-4 mr-1\" />\n            Open\n          </Button>\n        </div>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"bg-gray-800 border-b border-gray-700 p-2 flex items-center gap-1\">\n        <Button\n          onClick={() => setShowFileTree(!showFileTree)}\n          size=\"sm\"\n          variant=\"ghost\"\n          className=\"text-white\"\n        >\n          {showFileTree ? <EyeOff className=\"w-4 h-4\" /> : <Eye className=\"w-4 h-4\" />}\n          Explorer\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" className=\"text-white\">\n          <Search className=\"w-4 h-4 mr-1\" />\n          Search\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" className=\"text-white\">\n          <GitBranch className=\"w-4 h-4 mr-1\" />\n          Git\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" className=\"text-white\">\n          <Bug className=\"w-4 h-4 mr-1\" />\n          Debug\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" className=\"text-white\">\n          <Package className=\"w-4 h-4 mr-1\" />\n          Extensions\n        </Button>\n      </div>\n\n      <div className=\"flex-1 flex\">\n        {/* File Explorer */}\n        {showFileTree && (\n          <div className=\"w-64 bg-gray-800 border-r border-gray-700 p-3 overflow-y-auto\">\n            <div className=\"flex items-center justify-between mb-3\">\n              <h3 className=\"font-semibold text-sm uppercase\">Explorer</h3>\n              <Button size=\"sm\" variant=\"ghost\" className=\"w-6 h-6 p-0\">\n                <Plus className=\"w-3 h-3\" />\n              </Button>\n            </div>\n            <div className=\"space-y-1\">\n              {renderFileTree(fileTree)}\n            </div>\n          </div>\n        )}\n\n        {/* Main Editor Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Editor Tabs */}\n          {tabs.length > 0 && (\n            <div className=\"bg-gray-800 border-b border-gray-700 flex overflow-x-auto\">\n              {tabs.map(tab => (\n                <div\n                  key={tab.id}\n                  className={`flex items-center gap-2 px-3 py-2 cursor-pointer border-r border-gray-700 min-w-0 ${\n                    activeTabId === tab.id ? 'bg-gray-900' : 'hover:bg-gray-700'\n                  }`}\n                  onClick={() => setActiveTabId(tab.id)}\n                >\n                  <FileText className=\"w-4 h-4 flex-shrink-0\" />\n                  <span className=\"text-sm truncate\">\n                    {tab.fileName}\n                    {tab.modified && '*'}\n                  </span>\n                  <Button\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      closeTab(tab.id);\n                    }}\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    className=\"w-4 h-4 p-0 hover:bg-red-600\"\n                  >\n                    <X className=\"w-3 h-3\" />\n                  </Button>\n                </div>\n              ))}\n            </div>\n          )}\n\n          {/* Code Editor */}\n          <div className=\"flex-1 bg-gray-900\">\n            {activeTab ? (\n              <div className=\"h-full p-4\">\n                <div className=\"h-full\">\n                  <div className=\"text-xs text-gray-400 mb-2 flex items-center gap-2\">\n                    <span>{activeTab.language}</span>\n                    <span>•</span>\n                    <span>{activeTab.content.split('\\n').length} lines</span>\n                  </div>\n                  <textarea\n                    value={activeTab.content}\n                    onChange={(e) => updateTabContent(activeTab.id, e.target.value)}\n                    className=\"w-full h-full bg-gray-900 text-white font-mono text-sm border-none outline-none resize-none\"\n                    style={{ \n                      fontFamily: 'Monaco, Menlo, \"Ubuntu Mono\", monospace',\n                      lineHeight: '1.6',\n                      tabSize: 2\n                    }}\n                    spellCheck={false}\n                  />\n                </div>\n              </div>\n            ) : (\n              <div className=\"h-full flex items-center justify-center text-gray-400\">\n                <div className=\"text-center\">\n                  <Code className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n                  <h3 className=\"text-lg font-semibold mb-2\">Welcome to WebOS IDE</h3>\n                  <p className=\"text-sm\">Open a file from the explorer to start coding</p>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Bottom Panel - Console/Terminal */}\n      {showConsole && (\n        <div className=\"h-64 bg-gray-800 border-t border-gray-700 flex flex-col\">\n          <Tabs defaultValue=\"console\" className=\"flex-1 flex flex-col\">\n            <TabsList className=\"bg-gray-700 justify-start rounded-none\">\n              <TabsTrigger value=\"console\">Console</TabsTrigger>\n              <TabsTrigger value=\"terminal\">Terminal</TabsTrigger>\n              <TabsTrigger value=\"problems\">Problems</TabsTrigger>\n              <Button\n                onClick={() => setShowConsole(false)}\n                size=\"sm\"\n                variant=\"ghost\"\n                className=\"ml-auto w-6 h-6 p-0 text-gray-400\"\n              >\n                <X className=\"w-3 h-3\" />\n              </Button>\n            </TabsList>\n            \n            <TabsContent value=\"console\" className=\"flex-1 p-3 overflow-y-auto\">\n              <div className=\"space-y-1 font-mono text-sm\">\n                {consoleMessages.map(msg => (\n                  <div key={msg.id} className={`flex items-start gap-2 ${\n                    msg.type === 'error' ? 'text-red-400' :\n                    msg.type === 'warning' ? 'text-yellow-400' :\n                    msg.type === 'success' ? 'text-green-400' : 'text-gray-300'\n                  }`}>\n                    <span className=\"text-xs text-gray-500 w-20 flex-shrink-0\">\n                      {msg.timestamp.toLocaleTimeString()}\n                    </span>\n                    <span>{msg.message}</span>\n                  </div>\n                ))}\n              </div>\n            </TabsContent>\n            \n            <TabsContent value=\"terminal\" className=\"flex-1 flex flex-col p-3\">\n              <div className=\"flex-1 overflow-y-auto mb-2 font-mono text-sm\">\n                {consoleMessages.filter(msg => msg.message.startsWith('$')).map(msg => (\n                  <div key={msg.id} className=\"text-gray-300\">\n                    {msg.message}\n                  </div>\n                ))}\n              </div>\n              <div className=\"flex items-center gap-2 font-mono\">\n                <span className=\"text-green-400\">$</span>\n                <Input\n                  value={terminalInput}\n                  onChange={(e) => setTerminalInput(e.target.value)}\n                  onKeyPress={handleKeyPress}\n                  placeholder=\"Enter command...\"\n                  className=\"bg-transparent border-none text-white font-mono focus:ring-0\"\n                />\n              </div>\n            </TabsContent>\n            \n            <TabsContent value=\"problems\" className=\"flex-1 p-3\">\n              <div className=\"text-gray-400 text-sm\">\n                No problems detected in workspace\n              </div>\n            </TabsContent>\n          </Tabs>\n        </div>\n      )}\n\n      {!showConsole && (\n        <div className=\"bg-gray-800 border-t border-gray-700 p-2 flex justify-center\">\n          <Button\n            onClick={() => setShowConsole(true)}\n            size=\"sm\"\n            variant=\"ghost\"\n            className=\"text-gray-400\"\n          >\n            <Terminal className=\"w-4 h-4 mr-1\" />\n            Show Console\n          </Button>\n        </div>\n      )}\n    </div>\n  );\n};","size_bytes":19145},"client/src/components/apps/ImageViewer.tsx":{"content":"import { FC, useState, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { ZoomIn, ZoomOut, RotateCw, RotateCcw, Download, Upload, Home } from 'lucide-react';\n\nexport const ImageViewer: FC = () => {\n  const [imageSrc, setImageSrc] = useState<string>('');\n  const [zoom, setZoom] = useState(100);\n  const [rotation, setRotation] = useState(0);\n  const [imageUrl, setImageUrl] = useState('');\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file && file.type.startsWith('image/')) {\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        setImageSrc(e.target?.result as string);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleUrlLoad = () => {\n    if (imageUrl) {\n      setImageSrc(imageUrl);\n    }\n  };\n\n  const zoomIn = () => setZoom(prev => Math.min(prev + 25, 500));\n  const zoomOut = () => setZoom(prev => Math.max(prev - 25, 25));\n  const rotateRight = () => setRotation(prev => (prev + 90) % 360);\n  const rotateLeft = () => setRotation(prev => (prev - 90 + 360) % 360);\n  const resetView = () => {\n    setZoom(100);\n    setRotation(0);\n  };\n\n  const downloadImage = () => {\n    if (imageSrc) {\n      const link = document.createElement('a');\n      link.href = imageSrc;\n      link.download = 'image.png';\n      link.click();\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Toolbar */}\n      <div className=\"border-b border-border p-3\">\n        <div className=\"flex items-center gap-2 mb-3\">\n          <Button\n            onClick={() => fileInputRef.current?.click()}\n            size=\"sm\"\n          >\n            <Upload className=\"w-4 h-4 mr-2\" />\n            Open File\n          </Button>\n          <div className=\"flex items-center gap-2 flex-1 max-w-md\">\n            <Input\n              placeholder=\"Enter image URL...\"\n              value={imageUrl}\n              onChange={(e) => setImageUrl(e.target.value)}\n              onKeyDown={(e) => e.key === 'Enter' && handleUrlLoad()}\n            />\n            <Button onClick={handleUrlLoad} size=\"sm\">\n              Load\n            </Button>\n          </div>\n          {imageSrc && (\n            <Button onClick={downloadImage} size=\"sm\" variant=\"outline\">\n              <Download className=\"w-4 h-4 mr-2\" />\n              Save\n            </Button>\n          )}\n        </div>\n\n        {imageSrc && (\n          <div className=\"flex items-center gap-2\">\n            <Button onClick={zoomOut} size=\"sm\" variant=\"outline\">\n              <ZoomOut className=\"w-4 h-4\" />\n            </Button>\n            <span className=\"text-sm font-mono min-w-16 text-center\">\n              {zoom}%\n            </span>\n            <Button onClick={zoomIn} size=\"sm\" variant=\"outline\">\n              <ZoomIn className=\"w-4 h-4\" />\n            </Button>\n            <div className=\"border-l border-border h-6 mx-2\" />\n            <Button onClick={rotateLeft} size=\"sm\" variant=\"outline\">\n              <RotateCcw className=\"w-4 h-4\" />\n            </Button>\n            <Button onClick={rotateRight} size=\"sm\" variant=\"outline\">\n              <RotateCw className=\"w-4 h-4\" />\n            </Button>\n            <Button onClick={resetView} size=\"sm\" variant=\"outline\">\n              <Home className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Image Display Area */}\n      <div className=\"flex-1 overflow-auto bg-checkered relative\">\n        {imageSrc ? (\n          <div className=\"min-h-full flex items-center justify-center p-4\">\n            <img\n              src={imageSrc}\n              alt=\"Viewed image\"\n              className=\"max-w-none transition-transform duration-200\"\n              style={{\n                transform: `scale(${zoom / 100}) rotate(${rotation}deg)`,\n                imageRendering: zoom > 100 ? 'pixelated' : 'auto'\n              }}\n              onError={() => {\n                setImageSrc('');\n                alert('Failed to load image. Please check the URL or file format.');\n              }}\n            />\n          </div>\n        ) : (\n          <div className=\"h-full flex items-center justify-center text-muted-foreground\">\n            <div className=\"text-center\">\n              <div className=\"w-24 h-24 mx-auto mb-4 border-2 border-dashed border-muted-foreground/30 rounded-lg flex items-center justify-center\">\n                <Upload className=\"w-8 h-8\" />\n              </div>\n              <h3 className=\"text-lg font-medium mb-2\">No Image Loaded</h3>\n              <p className=\"text-sm mb-4\">Upload a file or enter an image URL to get started</p>\n              <p className=\"text-xs text-muted-foreground\">\n                Supported formats: JPG, PNG, GIF, WebP, SVG\n              </p>\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Hidden file input */}\n      <input\n        ref={fileInputRef}\n        type=\"file\"\n        accept=\"image/*\"\n        onChange={handleFileUpload}\n        className=\"hidden\"\n      />\n\n      <style>{`\n        .bg-checkered {\n          background-image: \n            linear-gradient(45deg, #f0f0f0 25%, transparent 25%),\n            linear-gradient(-45deg, #f0f0f0 25%, transparent 25%),\n            linear-gradient(45deg, transparent 75%, #f0f0f0 75%),\n            linear-gradient(-45deg, transparent 75%, #f0f0f0 75%);\n          background-size: 20px 20px;\n          background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n        }\n        .dark .bg-checkered {\n          background-image: \n            linear-gradient(45deg, #2a2a2a 25%, transparent 25%),\n            linear-gradient(-45deg, #2a2a2a 25%, transparent 25%),\n            linear-gradient(45deg, transparent 75%, #2a2a2a 75%),\n            linear-gradient(-45deg, transparent 75%, #2a2a2a 75%);\n        }\n      `}</style>\n    </div>\n  );\n};","size_bytes":5985},"client/src/components/apps/MultiplayerShooter.tsx":{"content":"import { FC, useState, useEffect, useRef, useCallback } from 'react';\nimport { Play, Users, Settings, Trophy, Target, Crosshair, Shield, Zap, Star, Crown, Coins } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\n\ninterface Player {\n  id: string;\n  x: number;\n  y: number;\n  rotation: number;\n  health: number;\n  maxHealth: number;\n  username: string;\n  kills: number;\n  deaths: number;\n  team: 'red' | 'blue';\n  isLocal: boolean;\n  weapon: string;\n  ammo: number;\n  maxAmmo: number;\n  isReloading: boolean;\n}\n\ninterface Bullet {\n  id: string;\n  x: number;\n  y: number;\n  vx: number;\n  vy: number;\n  damage: number;\n  playerId: string;\n  distance: number;\n  maxDistance: number;\n}\n\ninterface GameState {\n  players: Player[];\n  bullets: Bullet[];\n  gameTime: number;\n  redScore: number;\n  blueScore: number;\n  isGameActive: boolean;\n  winner: string | null;\n}\n\nconst CANVAS_WIDTH = 1000;\nconst CANVAS_HEIGHT = 700;\nconst PLAYER_SIZE = 16;\nconst BULLET_SPEED = 12;\nconst BULLET_SIZE = 2;\nconst MAX_BULLET_DISTANCE = 400;\nconst PLAYER_SPEED = 4;\nconst WEAPON_DAMAGE = 34;\nconst MAX_AMMO = 30;\nconst FIRE_RATE = 120; // milliseconds between shots\n\nconst MAP_OBSTACLES = [\n  // Outer walls\n  { x: 0, y: 0, width: CANVAS_WIDTH, height: 20 },\n  { x: 0, y: 0, width: 20, height: CANVAS_HEIGHT },\n  { x: CANVAS_WIDTH - 20, y: 0, width: 20, height: CANVAS_HEIGHT },\n  { x: 0, y: CANVAS_HEIGHT - 20, width: CANVAS_WIDTH, height: 20 },\n  \n  // Center structures\n  { x: 400, y: 300, width: 200, height: 100 },\n  { x: 480, y: 250, width: 40, height: 50 },\n  \n  // Side covers\n  { x: 100, y: 150, width: 80, height: 30 },\n  { x: 820, y: 150, width: 80, height: 30 },\n  { x: 100, y: 520, width: 80, height: 30 },\n  { x: 820, y: 520, width: 80, height: 30 },\n  \n  // Corner structures\n  { x: 200, y: 100, width: 100, height: 20 },\n  { x: 700, y: 100, width: 100, height: 20 },\n  { x: 200, y: 580, width: 100, height: 20 },\n  { x: 700, y: 580, width: 100, height: 20 },\n  \n  // Mid-map cover\n  { x: 300, y: 200, width: 30, height: 80 },\n  { x: 670, y: 200, width: 30, height: 80 },\n  { x: 300, y: 420, width: 30, height: 80 },\n  { x: 670, y: 420, width: 30, height: 80 },\n];\n\nexport const MultiplayerShooter: FC = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [gameState, setGameState] = useState<GameState>({\n    players: [],\n    bullets: [],\n    gameTime: 300,\n    redScore: 0,\n    blueScore: 0,\n    isGameActive: false,\n    winner: null\n  });\n  \n  const [localPlayer, setLocalPlayer] = useState<Player>({\n    id: 'local',\n    x: 100,\n    y: 100,\n    rotation: 0,\n    health: 100,\n    maxHealth: 100,\n    username: 'Ghost_117',\n    kills: 0,\n    deaths: 0,\n    team: 'blue',\n    isLocal: true,\n    weapon: 'AK-47',\n    ammo: 30,\n    maxAmmo: 30,\n    isReloading: false\n  });\n\n  const [keys, setKeys] = useState<Set<string>>(new Set());\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n  const [isShooting, setIsShooting] = useState(false);\n  const gameLoopRef = useRef<number>();\n  const lastShotTime = useRef<number>(0);\n  const reloadTimeoutRef = useRef<NodeJS.Timeout>();\n\n  // Initialize game with bot players\n  useEffect(() => {\n    const initGame = () => {\n      const spawnPoints = [\n        // Blue team spawns\n        { x: 50, y: 50, team: 'blue' },\n        { x: 50, y: 150, team: 'blue' },\n        { x: 150, y: 50, team: 'blue' },\n        { x: 100, y: 250, team: 'blue' },\n        // Red team spawns\n        { x: CANVAS_WIDTH - 70, y: CANVAS_HEIGHT - 70, team: 'red' },\n        { x: CANVAS_WIDTH - 70, y: CANVAS_HEIGHT - 170, team: 'red' },\n        { x: CANVAS_WIDTH - 170, y: CANVAS_HEIGHT - 70, team: 'red' },\n        { x: CANVAS_WIDTH - 120, y: CANVAS_HEIGHT - 270, team: 'red' }\n      ];\n\n      const botPlayers: Player[] = Array.from({ length: 7 }, (_, i) => {\n        const spawn = spawnPoints[i % spawnPoints.length];\n        return {\n          id: `bot_${i}`,\n          x: spawn.x,\n          y: spawn.y,\n          rotation: Math.random() * Math.PI * 2,\n          health: 100,\n          maxHealth: 100,\n          username: `Player_${i + 1}`,\n          kills: 0,\n          deaths: 0,\n          team: spawn.team as 'red' | 'blue',\n          isLocal: false,\n          weapon: ['AK-47', 'M4A1', 'Sniper'][Math.floor(Math.random() * 3)],\n          ammo: 30,\n          maxAmmo: 30,\n          isReloading: false\n        };\n      });\n\n      setGameState(prev => ({\n        ...prev,\n        players: [localPlayer, ...botPlayers],\n        isGameActive: true\n      }));\n    };\n\n    initGame();\n  }, []);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      setKeys(prev => new Set(prev).add(e.key.toLowerCase()));\n      \n      if (e.key.toLowerCase() === 'r' && !localPlayer.isReloading && localPlayer.ammo < localPlayer.maxAmmo) {\n        reload();\n      }\n    };\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      setKeys(prev => {\n        const newKeys = new Set(prev);\n        newKeys.delete(e.key.toLowerCase());\n        return newKeys;\n      });\n    };\n\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n    };\n  }, [localPlayer.isReloading, localPlayer.ammo, localPlayer.maxAmmo]);\n\n  // Mouse controls\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const handleMouseMove = (e: MouseEvent) => {\n      const rect = canvas.getBoundingClientRect();\n      setMousePos({\n        x: e.clientX - rect.left,\n        y: e.clientY - rect.top\n      });\n    };\n\n    const handleMouseDown = (e: MouseEvent) => {\n      if (e.button === 0) { // Left click\n        setIsShooting(true);\n      }\n    };\n\n    const handleMouseUp = (e: MouseEvent) => {\n      if (e.button === 0) {\n        setIsShooting(false);\n      }\n    };\n\n    canvas.addEventListener('mousemove', handleMouseMove);\n    canvas.addEventListener('mousedown', handleMouseDown);\n    canvas.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      canvas.removeEventListener('mousemove', handleMouseMove);\n      canvas.removeEventListener('mousedown', handleMouseDown);\n      canvas.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, []);\n\n  // Collision detection\n  const checkCollision = (x: number, y: number, size: number = PLAYER_SIZE) => {\n    // Check boundaries\n    if (x < 0 || y < 0 || x + size > CANVAS_WIDTH || y + size > CANVAS_HEIGHT) {\n      return true;\n    }\n\n    // Check obstacles\n    for (const obstacle of MAP_OBSTACLES) {\n      if (x < obstacle.x + obstacle.width &&\n          x + size > obstacle.x &&\n          y < obstacle.y + obstacle.height &&\n          y + size > obstacle.y) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  // Reload function\n  const reload = () => {\n    if (localPlayer.isReloading) return;\n\n    setLocalPlayer(prev => ({ ...prev, isReloading: true }));\n    \n    reloadTimeoutRef.current = setTimeout(() => {\n      setLocalPlayer(prev => ({\n        ...prev,\n        ammo: prev.maxAmmo,\n        isReloading: false\n      }));\n    }, 2000);\n  };\n\n  // Shooting function\n  const shoot = useCallback(() => {\n    const now = Date.now();\n    if (now - lastShotTime.current < FIRE_RATE || localPlayer.ammo <= 0 || localPlayer.isReloading) return;\n\n    lastShotTime.current = now;\n\n    const angle = Math.atan2(mousePos.y - localPlayer.y, mousePos.x - localPlayer.x);\n    const bulletId = `bullet_${now}_${Math.random()}`;\n\n    const newBullet: Bullet = {\n      id: bulletId,\n      x: localPlayer.x + PLAYER_SIZE / 2,\n      y: localPlayer.y + PLAYER_SIZE / 2,\n      vx: Math.cos(angle) * BULLET_SPEED,\n      vy: Math.sin(angle) * BULLET_SPEED,\n      damage: WEAPON_DAMAGE,\n      playerId: localPlayer.id,\n      distance: 0,\n      maxDistance: MAX_BULLET_DISTANCE\n    };\n\n    setGameState(prev => ({\n      ...prev,\n      bullets: [...prev.bullets, newBullet]\n    }));\n\n    setLocalPlayer(prev => ({ ...prev, ammo: prev.ammo - 1 }));\n  }, [mousePos, localPlayer]);\n\n  // Bot AI\n  const updateBots = useCallback((players: Player[], bullets: Bullet[]) => {\n    return players.map(player => {\n      if (player.isLocal || player.health <= 0) return player;\n\n      // Simple AI: move randomly and shoot at enemies\n      const enemies = players.filter(p => p.team !== player.team && p.health > 0);\n      const nearestEnemy = enemies.reduce((closest, enemy) => {\n        const dist = Math.hypot(enemy.x - player.x, enemy.y - player.y);\n        const closestDist = closest ? Math.hypot(closest.x - player.x, closest.y - player.y) : Infinity;\n        return dist < closestDist ? enemy : closest;\n      }, null as Player | null);\n\n      let newX = player.x;\n      let newY = player.y;\n      let newRotation = player.rotation;\n\n      if (nearestEnemy) {\n        // Move towards enemy or find cover\n        const distanceToEnemy = Math.hypot(nearestEnemy.x - player.x, nearestEnemy.y - player.y);\n        \n        if (distanceToEnemy > 150) {\n          // Move towards enemy\n          const angle = Math.atan2(nearestEnemy.y - player.y, nearestEnemy.x - player.x);\n          newX += Math.cos(angle) * PLAYER_SPEED * 0.5;\n          newY += Math.sin(angle) * PLAYER_SPEED * 0.5;\n        } else if (distanceToEnemy < 80) {\n          // Move away from enemy\n          const angle = Math.atan2(player.y - nearestEnemy.y, player.x - nearestEnemy.x);\n          newX += Math.cos(angle) * PLAYER_SPEED * 0.3;\n          newY += Math.sin(angle) * PLAYER_SPEED * 0.3;\n        }\n\n        // Face the enemy\n        newRotation = Math.atan2(nearestEnemy.y - player.y, nearestEnemy.x - player.x);\n\n        // Shoot at enemy (with some randomness)\n        if (distanceToEnemy < 200 && Math.random() < 0.1 && player.ammo > 0) {\n          const bulletId = `bot_bullet_${Date.now()}_${Math.random()}`;\n          const newBullet: Bullet = {\n            id: bulletId,\n            x: player.x + PLAYER_SIZE / 2,\n            y: player.y + PLAYER_SIZE / 2,\n            vx: Math.cos(newRotation) * BULLET_SPEED,\n            vy: Math.sin(newRotation) * BULLET_SPEED,\n            damage: WEAPON_DAMAGE,\n            playerId: player.id,\n            distance: 0,\n            maxDistance: MAX_BULLET_DISTANCE\n          };\n\n          setGameState(prev => ({\n            ...prev,\n            bullets: [...prev.bullets, newBullet]\n          }));\n\n          return { ...player, ammo: player.ammo - 1, rotation: newRotation };\n        }\n      } else {\n        // Random movement\n        newX += (Math.random() - 0.5) * PLAYER_SPEED;\n        newY += (Math.random() - 0.5) * PLAYER_SPEED;\n        newRotation += (Math.random() - 0.5) * 0.2;\n      }\n\n      // Check collision\n      if (!checkCollision(newX, newY)) {\n        return { ...player, x: newX, y: newY, rotation: newRotation };\n      }\n\n      return player;\n    });\n  }, []);\n\n  // Game loop\n  useEffect(() => {\n    const gameLoop = () => {\n      if (!gameState.isGameActive) return;\n\n      // Update local player position based on keys\n      let newX = localPlayer.x;\n      let newY = localPlayer.y;\n      let newRotation = localPlayer.rotation;\n\n      if (keys.has('w') || keys.has('arrowup')) newY -= PLAYER_SPEED;\n      if (keys.has('s') || keys.has('arrowdown')) newY += PLAYER_SPEED;\n      if (keys.has('a') || keys.has('arrowleft')) newX -= PLAYER_SPEED;\n      if (keys.has('d') || keys.has('arrowright')) newX += PLAYER_SPEED;\n\n      // Update rotation to face mouse\n      newRotation = Math.atan2(mousePos.y - localPlayer.y, mousePos.x - localPlayer.x);\n\n      // Check collision for local player\n      if (!checkCollision(newX, newY)) {\n        setLocalPlayer(prev => ({\n          ...prev,\n          x: newX,\n          y: newY,\n          rotation: newRotation\n        }));\n      }\n\n      // Shooting\n      if (isShooting) {\n        shoot();\n      }\n\n      // Update game state\n      setGameState(prev => {\n        // Update bullets\n        const updatedBullets = prev.bullets\n          .map(bullet => ({\n            ...bullet,\n            x: bullet.x + bullet.vx,\n            y: bullet.y + bullet.vy,\n            distance: bullet.distance + Math.hypot(bullet.vx, bullet.vy)\n          }))\n          .filter(bullet => {\n            // Remove bullets that are out of bounds or hit obstacles\n            if (bullet.distance > bullet.maxDistance) return false;\n            if (bullet.x < 0 || bullet.x > CANVAS_WIDTH || bullet.y < 0 || bullet.y > CANVAS_HEIGHT) return false;\n            \n            // Check obstacle collision\n            for (const obstacle of MAP_OBSTACLES) {\n              if (bullet.x >= obstacle.x && bullet.x <= obstacle.x + obstacle.width &&\n                  bullet.y >= obstacle.y && bullet.y <= obstacle.y + obstacle.height) {\n                return false;\n              }\n            }\n            return true;\n          });\n\n        // Check bullet-player collisions\n        const updatedPlayers = prev.players.map(player => {\n          if (player.health <= 0) return player;\n\n          for (const bullet of updatedBullets) {\n            if (bullet.playerId !== player.id &&\n                bullet.x >= player.x && bullet.x <= player.x + PLAYER_SIZE &&\n                bullet.y >= player.y && bullet.y <= player.y + PLAYER_SIZE) {\n              \n              // Remove bullet and damage player\n              const bulletIndex = updatedBullets.findIndex(b => b.id === bullet.id);\n              if (bulletIndex >= 0) {\n                updatedBullets.splice(bulletIndex, 1);\n              }\n\n              const newHealth = Math.max(0, player.health - bullet.damage);\n              \n              // Handle death\n              if (newHealth === 0 && player.health > 0) {\n                // Respawn after delay\n                setTimeout(() => {\n                  setGameState(prevState => ({\n                    ...prevState,\n                    players: prevState.players.map(p => \n                      p.id === player.id ? {\n                        ...p,\n                        health: p.maxHealth,\n                        x: Math.random() * (CANVAS_WIDTH - PLAYER_SIZE),\n                        y: Math.random() * (CANVAS_HEIGHT - PLAYER_SIZE),\n                        deaths: p.deaths + 1\n                      } : p\n                    )\n                  }));\n                }, 3000);\n\n                // Update killer's score\n                const killer = prev.players.find(p => p.id === bullet.playerId);\n                if (killer) {\n                  const updatedKiller = { ...killer, kills: killer.kills + 1 };\n                  \n                  if (killer.team === 'red') {\n                    return { ...player, health: newHealth };\n                  } else if (killer.team === 'blue') {\n                    return { ...player, health: newHealth };\n                  }\n                }\n              }\n\n              return { ...player, health: newHealth };\n            }\n          }\n          return player;\n        });\n\n        // Update bots\n        const botsUpdated = updateBots(updatedPlayers, updatedBullets);\n\n        return {\n          ...prev,\n          players: botsUpdated,\n          bullets: updatedBullets,\n          gameTime: prev.gameTime > 0 ? prev.gameTime - 1/60 : 0\n        };\n      });\n\n      gameLoopRef.current = requestAnimationFrame(gameLoop);\n    };\n\n    if (gameState.isGameActive) {\n      gameLoopRef.current = requestAnimationFrame(gameLoop);\n    }\n\n    return () => {\n      if (gameLoopRef.current) {\n        cancelAnimationFrame(gameLoopRef.current);\n      }\n    };\n  }, [keys, mousePos, isShooting, localPlayer, gameState.isGameActive, shoot, updateBots]);\n\n  // Rendering\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const render = () => {\n      // Clear canvas with grass texture\n      const gradient = ctx.createLinearGradient(0, 0, 0, CANVAS_HEIGHT);\n      gradient.addColorStop(0, '#4a7c59');\n      gradient.addColorStop(1, '#2d5233');\n      ctx.fillStyle = gradient;\n      ctx.fillRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);\n\n      // Draw map obstacles with better graphics\n      MAP_OBSTACLES.forEach(obstacle => {\n        // Main structure\n        ctx.fillStyle = '#654321';\n        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);\n        \n        // Highlight\n        ctx.fillStyle = '#8B6914';\n        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, 3);\n        ctx.fillRect(obstacle.x, obstacle.y, 3, obstacle.height);\n        \n        // Shadow\n        ctx.fillStyle = '#4a2c17';\n        ctx.fillRect(obstacle.x + 2, obstacle.y + obstacle.height, obstacle.width, 2);\n        ctx.fillRect(obstacle.x + obstacle.width, obstacle.y + 2, 2, obstacle.height);\n      });\n\n      // Draw players with improved graphics\n      gameState.players.forEach(player => {\n        if (player.health <= 0) return;\n\n        ctx.save();\n        ctx.translate(player.x + PLAYER_SIZE / 2, player.y + PLAYER_SIZE / 2);\n        ctx.rotate(player.rotation);\n\n        // Player shadow\n        ctx.fillStyle = 'rgba(0, 0, 0, 0.3)';\n        ctx.fillRect(-PLAYER_SIZE / 2 + 1, -PLAYER_SIZE / 2 + 1, PLAYER_SIZE, PLAYER_SIZE);\n\n        // Player body with better colors\n        if (player.isLocal) {\n          ctx.fillStyle = '#00ff44';\n        } else {\n          ctx.fillStyle = player.team === 'red' ? '#ff3333' : '#3366ff';\n        }\n        ctx.fillRect(-PLAYER_SIZE / 2, -PLAYER_SIZE / 2, PLAYER_SIZE, PLAYER_SIZE);\n\n        // Player outline\n        ctx.strokeStyle = '#000';\n        ctx.lineWidth = 1;\n        ctx.strokeRect(-PLAYER_SIZE / 2, -PLAYER_SIZE / 2, PLAYER_SIZE, PLAYER_SIZE);\n\n        // Weapon with better detail\n        ctx.fillStyle = '#222';\n        ctx.fillRect(PLAYER_SIZE / 2 - 1, -2, 18, 4);\n        ctx.fillStyle = '#444';\n        ctx.fillRect(PLAYER_SIZE / 2 + 14, -1, 3, 2);\n\n        ctx.restore();\n\n        // Health bar with improved design\n        const healthBarWidth = PLAYER_SIZE + 4;\n        const healthPercentage = player.health / player.maxHealth;\n        \n        // Health bar background\n        ctx.fillStyle = '#333';\n        ctx.fillRect(player.x - 2, player.y - 10, healthBarWidth, 6);\n        \n        // Health bar\n        const healthColor = healthPercentage > 0.6 ? '#4CAF50' : \n                           healthPercentage > 0.3 ? '#FF9800' : '#f44336';\n        ctx.fillStyle = healthColor;\n        ctx.fillRect(player.x - 1, player.y - 9, (healthBarWidth - 2) * healthPercentage, 4);\n\n        // Username with better visibility\n        ctx.fillStyle = '#000';\n        ctx.font = 'bold 10px Arial';\n        ctx.textAlign = 'center';\n        ctx.fillText(player.username, player.x + PLAYER_SIZE / 2 + 1, player.y - 14);\n        ctx.fillStyle = '#fff';\n        ctx.fillText(player.username, player.x + PLAYER_SIZE / 2, player.y - 15);\n      });\n\n      // Draw bullets with trails\n      gameState.bullets.forEach(bullet => {\n        // Bullet trail\n        ctx.strokeStyle = 'rgba(255, 255, 0, 0.5)';\n        ctx.lineWidth = 1;\n        ctx.beginPath();\n        ctx.moveTo(bullet.x - bullet.vx * 3, bullet.y - bullet.vy * 3);\n        ctx.lineTo(bullet.x, bullet.y);\n        ctx.stroke();\n        \n        // Bullet\n        ctx.fillStyle = '#ffff44';\n        ctx.beginPath();\n        ctx.arc(bullet.x, bullet.y, BULLET_SIZE, 0, Math.PI * 2);\n        ctx.fill();\n        \n        ctx.strokeStyle = '#ffaa00';\n        ctx.lineWidth = 1;\n        ctx.stroke();\n      });\n\n      // Draw enhanced crosshair\n      ctx.strokeStyle = '#ff0000';\n      ctx.lineWidth = 2;\n      ctx.beginPath();\n      ctx.moveTo(mousePos.x - 12, mousePos.y);\n      ctx.lineTo(mousePos.x - 4, mousePos.y);\n      ctx.moveTo(mousePos.x + 4, mousePos.y);\n      ctx.lineTo(mousePos.x + 12, mousePos.y);\n      ctx.moveTo(mousePos.x, mousePos.y - 12);\n      ctx.lineTo(mousePos.x, mousePos.y - 4);\n      ctx.moveTo(mousePos.x, mousePos.y + 4);\n      ctx.lineTo(mousePos.x, mousePos.y + 12);\n      ctx.stroke();\n      \n      // Crosshair center dot\n      ctx.fillStyle = '#ff0000';\n      ctx.beginPath();\n      ctx.arc(mousePos.x, mousePos.y, 1, 0, Math.PI * 2);\n      ctx.fill();\n\n      requestAnimationFrame(render);\n    };\n\n    render();\n  }, [gameState, mousePos]);\n\n  const formatTime = (seconds: number) => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const redTeamPlayers = gameState.players.filter(p => p.team === 'red');\n  const blueTeamPlayers = gameState.players.filter(p => p.team === 'blue');\n  const redScore = redTeamPlayers.reduce((sum, p) => sum + p.kills, 0);\n  const blueScore = blueTeamPlayers.reduce((sum, p) => sum + p.kills, 0);\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-gray-900 to-black text-white overflow-hidden relative\">\n      {/* Game Canvas */}\n      <div className=\"flex justify-center items-center h-full\">\n        <div className=\"relative\">\n          <canvas\n            ref={canvasRef}\n            width={CANVAS_WIDTH}\n            height={CANVAS_HEIGHT}\n            className=\"border border-gray-600 cursor-crosshair\"\n            style={{ imageRendering: 'pixelated' }}\n          />\n\n          {/* HUD Overlay */}\n          <div className=\"absolute top-4 left-4 text-white\">\n            <div className=\"bg-black/70 p-3 rounded\">\n              <div className=\"text-green-400\">Health: {localPlayer.health}</div>\n              <div className=\"text-blue-400\">Ammo: {localPlayer.ammo}/{localPlayer.maxAmmo}</div>\n              <div className=\"text-yellow-400\">Weapon: {localPlayer.weapon}</div>\n              {localPlayer.isReloading && <div className=\"text-red-400\">Reloading...</div>}\n            </div>\n          </div>\n\n          <div className=\"absolute top-4 right-4 text-white\">\n            <div className=\"bg-black/70 p-3 rounded text-center\">\n              <div className=\"text-xl font-bold\">{formatTime(gameState.gameTime)}</div>\n              <div className=\"text-sm\">Team Deathmatch</div>\n            </div>\n          </div>\n\n          <div className=\"absolute top-4 left-1/2 transform -translate-x-1/2 text-white\">\n            <div className=\"bg-black/70 p-3 rounded flex gap-8\">\n              <div className=\"text-center\">\n                <div className=\"text-blue-400 text-xl font-bold\">{blueScore}</div>\n                <div className=\"text-sm\">BLUE</div>\n              </div>\n              <div className=\"text-center\">\n                <div className=\"text-red-400 text-xl font-bold\">{redScore}</div>\n                <div className=\"text-sm\">RED</div>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"absolute bottom-4 left-4 text-white\">\n            <div className=\"bg-black/70 p-3 rounded\">\n              <div className=\"text-green-400\">K: {localPlayer.kills}</div>\n              <div className=\"text-red-400\">D: {localPlayer.deaths}</div>\n              <div className=\"text-yellow-400\">Team: {localPlayer.team.toUpperCase()}</div>\n            </div>\n          </div>\n\n          {/* Controls Help */}\n          <div className=\"absolute bottom-4 right-4 text-white\">\n            <div className=\"bg-black/70 p-3 rounded text-xs\">\n              <div>WASD: Move</div>\n              <div>Mouse: Aim</div>\n              <div>Left Click: Shoot</div>\n              <div>R: Reload</div>\n            </div>\n          </div>\n\n          {/* Minimap */}\n          <div className=\"absolute top-1/4 right-4 w-32 h-24 bg-black/70 border border-gray-600 rounded\">\n            <div className=\"relative w-full h-full overflow-hidden\">\n              {/* Map obstacles */}\n              {MAP_OBSTACLES.map((obstacle, i) => (\n                <div\n                  key={i}\n                  className=\"absolute bg-brown-600\"\n                  style={{\n                    left: `${(obstacle.x / CANVAS_WIDTH) * 100}%`,\n                    top: `${(obstacle.y / CANVAS_HEIGHT) * 100}%`,\n                    width: `${(obstacle.width / CANVAS_WIDTH) * 100}%`,\n                    height: `${(obstacle.height / CANVAS_HEIGHT) * 100}%`,\n                    backgroundColor: '#8B4513'\n                  }}\n                />\n              ))}\n              \n              {/* Players */}\n              {gameState.players.map(player => (\n                player.health > 0 && (\n                  <div\n                    key={player.id}\n                    className={`absolute w-1 h-1 rounded-full ${\n                      player.isLocal ? 'bg-green-400' : \n                      player.team === 'red' ? 'bg-red-400' : 'bg-blue-400'\n                    }`}\n                    style={{\n                      left: `${(player.x / CANVAS_WIDTH) * 100}%`,\n                      top: `${(player.y / CANVAS_HEIGHT) * 100}%`\n                    }}\n                  />\n                )\n              ))}\n            </div>\n          </div>\n\n          {/* Death Screen */}\n          {localPlayer.health <= 0 && (\n            <div className=\"absolute inset-0 bg-red-900/50 flex items-center justify-center\">\n              <div className=\"bg-black/80 p-8 rounded-lg text-center\">\n                <h2 className=\"text-2xl font-bold text-red-400 mb-4\">YOU DIED</h2>\n                <p className=\"text-gray-300\">Respawning in 3 seconds...</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":25532},"client/src/components/apps/NetworkManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Switch } from '@/components/ui/switch';\nimport { Progress } from '@/components/ui/progress';\nimport { Wifi, WifiOff, Lock, Globe, Smartphone, Router, Shield, Signal } from 'lucide-react';\n\ninterface NetworkInterface {\n  id: string;\n  name: string;\n  type: 'wifi' | 'ethernet' | 'cellular';\n  status: 'connected' | 'disconnected' | 'connecting';\n  signal?: number;\n  encryption?: 'WPA2' | 'WPA3' | 'Open';\n  speed?: string;\n  ip?: string;\n}\n\ninterface VPNConnection {\n  id: string;\n  name: string;\n  server: string;\n  status: 'connected' | 'disconnected';\n  protocol: 'OpenVPN' | 'WireGuard' | 'IKEv2';\n}\n\nexport const NetworkManager: FC = () => {\n  const [networks, setNetworks] = useState<NetworkInterface[]>([]);\n  const [vpnConnections, setVpnConnections] = useState<VPNConnection[]>([]);\n  const [scanning, setScanning] = useState(false);\n  const [activeTab, setActiveTab] = useState<'wifi' | 'ethernet' | 'vpn' | 'firewall'>('wifi');\n\n  useEffect(() => {\n    loadNetworks();\n    loadVPNConnections();\n  }, []);\n\n  const loadNetworks = () => {\n    const mockNetworks: NetworkInterface[] = [\n      {\n        id: '1',\n        name: 'Home WiFi',\n        type: 'wifi',\n        status: 'connected',\n        signal: 85,\n        encryption: 'WPA3',\n        speed: '867 Mbps',\n        ip: '192.168.1.100'\n      },\n      {\n        id: '2',\n        name: 'Office Network',\n        type: 'wifi',\n        status: 'disconnected',\n        signal: 65,\n        encryption: 'WPA2'\n      },\n      {\n        id: '3',\n        name: 'Public WiFi',\n        type: 'wifi',\n        status: 'disconnected',\n        signal: 40,\n        encryption: 'Open'\n      },\n      {\n        id: '4',\n        name: 'Ethernet',\n        type: 'ethernet',\n        status: 'disconnected',\n        speed: '1 Gbps'\n      }\n    ];\n    setNetworks(mockNetworks);\n  };\n\n  const loadVPNConnections = () => {\n    const mockVPNs: VPNConnection[] = [\n      {\n        id: '1',\n        name: 'NordVPN',\n        server: 'us-server-1.nordvpn.com',\n        status: 'disconnected',\n        protocol: 'WireGuard'\n      },\n      {\n        id: '2',\n        name: 'ExpressVPN',\n        server: 'uk-server-2.expressvpn.com',\n        status: 'disconnected',\n        protocol: 'OpenVPN'\n      }\n    ];\n    setVpnConnections(mockVPNs);\n  };\n\n  const scanNetworks = () => {\n    setScanning(true);\n    setTimeout(() => {\n      setScanning(false);\n      loadNetworks();\n    }, 2000);\n  };\n\n  const connectToNetwork = (networkId: string) => {\n    setNetworks(prev => prev.map(network => \n      network.id === networkId \n        ? { ...network, status: 'connecting' as const }\n        : network\n    ));\n\n    setTimeout(() => {\n      setNetworks(prev => prev.map(network => \n        network.id === networkId \n          ? { ...network, status: 'connected' as const, ip: '192.168.1.101' }\n          : { ...network, status: 'disconnected' as const, ip: undefined }\n      ));\n    }, 2000);\n  };\n\n  const getSignalIcon = (signal?: number) => {\n    if (!signal) return <WifiOff className=\"h-4 w-4\" />;\n    if (signal > 75) return <Signal className=\"h-4 w-4 text-green-500\" />;\n    if (signal > 50) return <Signal className=\"h-4 w-4 text-yellow-500\" />;\n    return <Signal className=\"h-4 w-4 text-red-500\" />;\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'connected':\n        return <Badge variant=\"default\" className=\"bg-green-500\">Connected</Badge>;\n      case 'connecting':\n        return <Badge variant=\"secondary\">Connecting...</Badge>;\n      default:\n        return <Badge variant=\"outline\">Disconnected</Badge>;\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Globe className=\"h-6 w-6 text-primary\" />\n          <h1 className=\"text-xl font-semibold\">Network Manager</h1>\n        </div>\n\n        <div className=\"flex gap-2\">\n          <Button\n            variant={activeTab === 'wifi' ? 'default' : 'outline'}\n            onClick={() => setActiveTab('wifi')}\n            size=\"sm\"\n          >\n            <Wifi className=\"h-4 w-4 mr-2\" />\n            WiFi\n          </Button>\n          <Button\n            variant={activeTab === 'ethernet' ? 'default' : 'outline'}\n            onClick={() => setActiveTab('ethernet')}\n            size=\"sm\"\n          >\n            <Router className=\"h-4 w-4 mr-2\" />\n            Ethernet\n          </Button>\n          <Button\n            variant={activeTab === 'vpn' ? 'default' : 'outline'}\n            onClick={() => setActiveTab('vpn')}\n            size=\"sm\"\n          >\n            <Shield className=\"h-4 w-4 mr-2\" />\n            VPN\n          </Button>\n          <Button\n            variant={activeTab === 'firewall' ? 'default' : 'outline'}\n            onClick={() => setActiveTab('firewall')}\n            size=\"sm\"\n          >\n            <Lock className=\"h-4 w-4 mr-2\" />\n            Firewall\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 overflow-auto p-4\">\n        {activeTab === 'wifi' && (\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-lg font-medium\">Available Networks</h2>\n              <Button onClick={scanNetworks} disabled={scanning} size=\"sm\">\n                {scanning ? 'Scanning...' : 'Scan'}\n              </Button>\n            </div>\n\n            {scanning && (\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-primary\"></div>\n                    <span>Scanning for networks...</span>\n                  </div>\n                </CardContent>\n              </Card>\n            )}\n\n            <div className=\"space-y-2\">\n              {networks.filter(n => n.type === 'wifi').map((network) => (\n                <Card key={network.id} className=\"hover:bg-accent cursor-pointer\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        {getSignalIcon(network.signal)}\n                        <div>\n                          <div className=\"flex items-center gap-2\">\n                            <span className=\"font-medium\">{network.name}</span>\n                            {network.encryption !== 'Open' && <Lock className=\"h-3 w-3\" />}\n                          </div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            {network.encryption} • Signal: {network.signal}%\n                            {network.speed && ` • ${network.speed}`}\n                            {network.ip && ` • ${network.ip}`}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-2\">\n                        {getStatusBadge(network.status)}\n                        {network.status === 'disconnected' && (\n                          <Button \n                            size=\"sm\" \n                            onClick={() => connectToNetwork(network.id)}\n                          >\n                            Connect\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'ethernet' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-lg font-medium\">Wired Connections</h2>\n            \n            {networks.filter(n => n.type === 'ethernet').map((network) => (\n              <Card key={network.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <Router className=\"h-5 w-5\" />\n                      <div>\n                        <div className=\"font-medium\">{network.name}</div>\n                        <div className=\"text-sm text-muted-foreground\">\n                          {network.speed && `Speed: ${network.speed}`}\n                          {network.ip && ` • ${network.ip}`}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"flex items-center gap-2\">\n                      {getStatusBadge(network.status)}\n                      <Switch />\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        )}\n\n        {activeTab === 'vpn' && (\n          <div className=\"space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-lg font-medium\">VPN Connections</h2>\n              <Button size=\"sm\">Add VPN</Button>\n            </div>\n\n            <div className=\"space-y-2\">\n              {vpnConnections.map((vpn) => (\n                <Card key={vpn.id}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <Shield className=\"h-5 w-5\" />\n                        <div>\n                          <div className=\"font-medium\">{vpn.name}</div>\n                          <div className=\"text-sm text-muted-foreground\">\n                            {vpn.server} • {vpn.protocol}\n                          </div>\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex items-center gap-2\">\n                        {getStatusBadge(vpn.status)}\n                        <Switch />\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'firewall' && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-lg font-medium\">Firewall Settings</h2>\n            \n            <Card>\n              <CardHeader>\n                <CardTitle>Firewall Status</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span>Enable Firewall</span>\n                  <Switch defaultChecked />\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <span>Block Incoming Connections</span>\n                  <Switch defaultChecked />\n                </div>\n                \n                <div className=\"flex items-center justify-between\">\n                  <span>Stealth Mode</span>\n                  <Switch />\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle>Network Activity</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-3\">\n                  <div>\n                    <div className=\"flex justify-between text-sm mb-1\">\n                      <span>Blocked Connections</span>\n                      <span>127 today</span>\n                    </div>\n                    <Progress value={75} className=\"h-2\" />\n                  </div>\n                  \n                  <div>\n                    <div className=\"flex justify-between text-sm mb-1\">\n                      <span>Data Usage</span>\n                      <span>2.3 GB today</span>\n                    </div>\n                    <Progress value={45} className=\"h-2\" />\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":12363},"client/src/components/apps/NetworkStatusMonitor.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Wifi, WifiOff, Activity, Zap, Clock, AlertTriangle, CheckCircle, RotateCcw, Server, Globe } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { ConnectionStatus } from '@/components/ui/connection-status';\nimport { wsManager } from '@/lib/websocketManager';\n\ninterface NetworkMetrics {\n  latency: number;\n  jitter: number;\n  packetLoss: number;\n  bandwidth: number;\n  connectionQuality: 'excellent' | 'good' | 'fair' | 'poor';\n}\n\ninterface ConnectionLog {\n  id: string;\n  timestamp: Date;\n  event: 'connected' | 'disconnected' | 'reconnecting' | 'error';\n  message: string;\n  duration?: number;\n}\n\nexport const NetworkStatusMonitor: FC = () => {\n  const [wsStatus, setWsStatus] = useState(wsManager.getStatus());\n  const [connectionLogs, setConnectionLogs] = useState<ConnectionLog[]>([]);\n  const [metrics, setMetrics] = useState<NetworkMetrics>({\n    latency: 0,\n    jitter: 0,\n    packetLoss: 0,\n    bandwidth: 0,\n    connectionQuality: 'good'\n  });\n  const [isTestingConnection, setIsTestingConnection] = useState(false);\n  const [lastConnectedTime, setLastConnectedTime] = useState<Date | null>(null);\n\n  useEffect(() => {\n    const unsubscribe = wsManager.onStatusChange((status) => {\n      const previousStatus = wsStatus;\n      setWsStatus(status);\n\n      // Log connection events\n      const logEntry: ConnectionLog = {\n        id: Date.now().toString(),\n        timestamp: new Date(),\n        event: status.isConnected ? 'connected' : \n               status.isReconnecting ? 'reconnecting' : 'disconnected',\n        message: getStatusMessage(status, previousStatus),\n        duration: status.isConnected && lastConnectedTime ? \n                 Date.now() - lastConnectedTime.getTime() : undefined\n      };\n\n      setConnectionLogs(prev => [logEntry, ...prev.slice(0, 49)]);\n\n      if (status.isConnected) {\n        setLastConnectedTime(new Date());\n        updateMetrics(status);\n      }\n    });\n\n    // Start connection monitoring\n    monitorConnection();\n\n    return unsubscribe;\n  }, []);\n\n  const getStatusMessage = (current: any, previous: any) => {\n    if (current.isConnected && !previous.isConnected) {\n      return 'WebSocket connection established successfully';\n    } else if (!current.isConnected && previous.isConnected) {\n      return current.lastError || 'Connection lost';\n    } else if (current.isReconnecting) {\n      return `Reconnection attempt ${current.reconnectAttempts} of 10`;\n    } else if (current.lastError) {\n      return current.lastError;\n    }\n    return 'Connection status updated';\n  };\n\n  const updateMetrics = (status: any) => {\n    setMetrics(prev => ({\n      ...prev,\n      latency: status.latency || prev.latency,\n      connectionQuality: getConnectionQuality(status.latency || 0)\n    }));\n  };\n\n  const getConnectionQuality = (latency: number): NetworkMetrics['connectionQuality'] => {\n    if (latency < 50) return 'excellent';\n    if (latency < 100) return 'good';\n    if (latency < 200) return 'fair';\n    return 'poor';\n  };\n\n  const monitorConnection = () => {\n    const interval = setInterval(() => {\n      if (wsStatus.isConnected) {\n        // Simulate network metrics updates\n        setMetrics(prev => ({\n          ...prev,\n          jitter: Math.random() * 10,\n          packetLoss: Math.random() * 2,\n          bandwidth: 50 + Math.random() * 50\n        }));\n      }\n    }, 5000);\n\n    return () => clearInterval(interval);\n  };\n\n  const testConnection = async () => {\n    setIsTestingConnection(true);\n    \n    try {\n      // Test connection with ping\n      const startTime = Date.now();\n      const success = wsManager.send({\n        type: 'ping',\n        timestamp: startTime\n      });\n\n      if (success) {\n        const logEntry: ConnectionLog = {\n          id: Date.now().toString(),\n          timestamp: new Date(),\n          event: 'connected',\n          message: 'Connection test initiated'\n        };\n        setConnectionLogs(prev => [logEntry, ...prev.slice(0, 49)]);\n      }\n    } catch (error) {\n      const logEntry: ConnectionLog = {\n        id: Date.now().toString(),\n        timestamp: new Date(),\n        event: 'error',\n        message: 'Connection test failed'\n      };\n      setConnectionLogs(prev => [logEntry, ...prev.slice(0, 49)]);\n    } finally {\n      setTimeout(() => setIsTestingConnection(false), 2000);\n    }\n  };\n\n  const getQualityColor = (quality: string) => {\n    switch (quality) {\n      case 'excellent': return 'text-green-600';\n      case 'good': return 'text-blue-600';\n      case 'fair': return 'text-yellow-600';\n      case 'poor': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  const getEventIcon = (event: string) => {\n    switch (event) {\n      case 'connected': return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n      case 'disconnected': return <WifiOff className=\"w-4 h-4 text-red-500\" />;\n      case 'reconnecting': return <RotateCcw className=\"w-4 h-4 text-yellow-500 animate-spin\" />;\n      case 'error': return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\n      default: return <Activity className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <div className=\"p-6 space-y-6 max-h-full overflow-auto\">\n      <div className=\"flex items-center justify-between\">\n        <h1 className=\"text-2xl font-bold flex items-center gap-2\">\n          <Globe className=\"w-6 h-6\" />\n          Network Status Monitor\n        </h1>\n        <Button \n          onClick={testConnection}\n          disabled={isTestingConnection}\n          variant=\"outline\"\n          size=\"sm\"\n        >\n          {isTestingConnection ? (\n            <RotateCcw className=\"w-4 h-4 mr-2 animate-spin\" />\n          ) : (\n            <Zap className=\"w-4 h-4 mr-2\" />\n          )}\n          Test Connection\n        </Button>\n      </div>\n\n      {/* Connection Status Overview */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Server className=\"w-5 h-5\" />\n            WebSocket Connection\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ConnectionStatus showDetails className=\"border-0 p-0\" />\n        </CardContent>\n      </Card>\n\n      {/* Network Metrics */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Latency</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{metrics.latency}ms</div>\n            <p className=\"text-xs text-gray-500\">Round trip time</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Connection Quality</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className={`text-2xl font-bold capitalize ${getQualityColor(metrics.connectionQuality)}`}>\n              {metrics.connectionQuality}\n            </div>\n            <p className=\"text-xs text-gray-500\">Overall rating</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Jitter</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{metrics.jitter.toFixed(1)}ms</div>\n            <p className=\"text-xs text-gray-500\">Latency variation</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Packet Loss</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{metrics.packetLoss.toFixed(1)}%</div>\n            <p className=\"text-xs text-gray-500\">Data loss rate</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Connection History */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Clock className=\"w-5 h-5\" />\n            Connection History\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-3 max-h-64 overflow-auto\">\n            {connectionLogs.length === 0 ? (\n              <p className=\"text-gray-500 text-center py-4\">No connection events recorded yet</p>\n            ) : (\n              connectionLogs.map((log) => (\n                <div key={log.id} className=\"flex items-start gap-3 p-3 rounded-lg bg-gray-50 dark:bg-gray-800\">\n                  {getEventIcon(log.event)}\n                  <div className=\"flex-1 min-w-0\">\n                    <div className=\"flex items-center gap-2 mb-1\">\n                      <Badge variant={log.event === 'connected' ? 'default' : \n                                   log.event === 'error' ? 'destructive' : 'secondary'}>\n                        {log.event}\n                      </Badge>\n                      <span className=\"text-xs text-gray-500\">\n                        {log.timestamp.toLocaleTimeString()}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-gray-700 dark:text-gray-300\">{log.message}</p>\n                    {log.duration && (\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Duration: {Math.round(log.duration / 1000)}s\n                      </p>\n                    )}\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Quick Actions */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Quick Actions</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex gap-2 flex-wrap\">\n            <Button \n              onClick={() => wsManager.forceReconnect()}\n              variant=\"outline\"\n              size=\"sm\"\n            >\n              <RotateCcw className=\"w-4 h-4 mr-2\" />\n              Force Reconnect\n            </Button>\n            <Button \n              onClick={() => wsManager.disconnect()}\n              variant=\"outline\"\n              size=\"sm\"\n            >\n              <WifiOff className=\"w-4 h-4 mr-2\" />\n              Disconnect\n            </Button>\n            <Button \n              onClick={() => setConnectionLogs([])}\n              variant=\"outline\"\n              size=\"sm\"\n            >\n              Clear History\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","size_bytes":10752},"client/src/components/apps/NewsCenter.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { X, Newspaper, RefreshCw, Search, Globe, Clock, ExternalLink } from 'lucide-react';\n\ninterface NewsArticle {\n  source: {\n    id: string | null;\n    name: string;\n  };\n  author: string | null;\n  title: string;\n  description: string | null;\n  url: string;\n  urlToImage: string | null;\n  publishedAt: string;\n  content: string | null;\n}\n\nexport const NewsCenter: FC = () => {\n  const [articles, setArticles] = useState<NewsArticle[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedCategory, setSelectedCategory] = useState('general');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedArticle, setSelectedArticle] = useState<NewsArticle | null>(null);\n\n  const categories = [\n    { id: 'general', name: 'General', icon: '📰' },\n    { id: 'business', name: 'Business', icon: '💼' },\n    { id: 'entertainment', name: 'Entertainment', icon: '🎬' },\n    { id: 'health', name: 'Health', icon: '🏥' },\n    { id: 'science', name: 'Science', icon: '🔬' },\n    { id: 'sports', name: 'Sports', icon: '⚽' },\n    { id: 'technology', name: 'Technology', icon: '💻' }\n  ];\n\n  useEffect(() => {\n    fetchNews();\n  }, [selectedCategory]);\n\n  const fetchNews = async () => {\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/news?category=${selectedCategory}`);\n      if (response.ok) {\n        const data = await response.json();\n        setArticles(data);\n      } else {\n        console.error('Failed to fetch news');\n      }\n    } catch (error) {\n      console.error('News API error:', error);\n    }\n    setLoading(false);\n  };\n\n  const filteredArticles = articles.filter(article =>\n    article.title?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    article.description?.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleDateString() + ' ' + date.toLocaleTimeString();\n  };\n\n  const getTimeAgo = (dateString: string) => {\n    const now = new Date();\n    const publishedAt = new Date(dateString);\n    const diffMs = now.getTime() - publishedAt.getTime();\n    const diffHours = Math.floor(diffMs / (1000 * 60 * 60));\n    const diffDays = Math.floor(diffHours / 24);\n\n    if (diffDays > 0) return `${diffDays} day${diffDays > 1 ? 's' : ''} ago`;\n    if (diffHours > 0) return `${diffHours} hour${diffHours > 1 ? 's' : ''} ago`;\n    return 'Just now';\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[700px] flex flex-col\">\n      <div className=\"bg-red-600 text-white px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Newspaper className=\"w-5 h-5\" />\n          <span className=\"font-medium\">News Center</span>\n        </div>\n        <Button \n          onClick={fetchNews} \n          size=\"sm\" \n          variant=\"ghost\" \n          className=\"text-white hover:bg-red-700\"\n          disabled={loading}\n        >\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n        </Button>\n      </div>\n\n      <div className=\"flex border-b\">\n        {categories.map(category => (\n          <button\n            key={category.id}\n            onClick={() => setSelectedCategory(category.id)}\n            className={`flex items-center space-x-2 px-4 py-2 ${\n              selectedCategory === category.id \n                ? 'bg-red-50 border-b-2 border-red-600 text-red-600' \n                : 'hover:bg-gray-50'\n            }`}\n          >\n            <span>{category.icon}</span>\n            <span>{category.name}</span>\n          </button>\n        ))}\n      </div>\n\n      <div className=\"p-4 border-b\">\n        <div className=\"relative\">\n          <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n          <Input\n            placeholder=\"Search news articles...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"pl-10\"\n          />\n        </div>\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <div className=\"w-2/3 overflow-auto\">\n          <div className=\"p-4\">\n            {loading ? (\n              <div className=\"flex items-center justify-center py-12\">\n                <RefreshCw className=\"w-8 h-8 animate-spin text-red-500\" />\n                <span className=\"ml-2\">Loading latest news...</span>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {filteredArticles.map((article, index) => (\n                  <div\n                    key={index}\n                    onClick={() => setSelectedArticle(article)}\n                    className=\"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer transition-colors\"\n                  >\n                    <div className=\"flex space-x-4\">\n                      {article.urlToImage && (\n                        <img\n                          src={article.urlToImage}\n                          alt={article.title}\n                          className=\"w-24 h-24 object-cover rounded\"\n                          onError={(e) => {\n                            (e.target as HTMLImageElement).style.display = 'none';\n                          }}\n                        />\n                      )}\n                      <div className=\"flex-1\">\n                        <h3 className=\"font-semibold text-lg mb-2 line-clamp-2\">\n                          {article.title}\n                        </h3>\n                        <p className=\"text-gray-600 text-sm mb-2 line-clamp-2\">\n                          {article.description}\n                        </p>\n                        <div className=\"flex items-center justify-between text-xs text-gray-500\">\n                          <div className=\"flex items-center space-x-4\">\n                            <div className=\"flex items-center space-x-1\">\n                              <Globe className=\"w-3 h-3\" />\n                              <span>{article.source.name}</span>\n                            </div>\n                            {article.author && (\n                              <span>by {article.author}</span>\n                            )}\n                          </div>\n                          <div className=\"flex items-center space-x-1\">\n                            <Clock className=\"w-3 h-3\" />\n                            <span>{getTimeAgo(article.publishedAt)}</span>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n                {filteredArticles.length === 0 && !loading && (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    No articles found matching your search\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        <div className=\"w-1/3 border-l p-4 overflow-auto\">\n          {selectedArticle ? (\n            <div className=\"space-y-4\">\n              {selectedArticle.urlToImage && (\n                <img\n                  src={selectedArticle.urlToImage}\n                  alt={selectedArticle.title}\n                  className=\"w-full h-48 object-cover rounded\"\n                  onError={(e) => {\n                    (e.target as HTMLImageElement).style.display = 'none';\n                  }}\n                />\n              )}\n              \n              <div>\n                <h2 className=\"text-xl font-bold mb-2\">{selectedArticle.title}</h2>\n                <div className=\"flex items-center justify-between text-sm text-gray-600 mb-4\">\n                  <div className=\"flex items-center space-x-1\">\n                    <Globe className=\"w-4 h-4\" />\n                    <span>{selectedArticle.source.name}</span>\n                  </div>\n                  <div className=\"flex items-center space-x-1\">\n                    <Clock className=\"w-4 h-4\" />\n                    <span>{getTimeAgo(selectedArticle.publishedAt)}</span>\n                  </div>\n                </div>\n                {selectedArticle.author && (\n                  <p className=\"text-sm text-gray-600 mb-4\">\n                    By {selectedArticle.author}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"space-y-3\">\n                <p className=\"text-gray-700 leading-relaxed\">\n                  {selectedArticle.description}\n                </p>\n                {selectedArticle.content && (\n                  <p className=\"text-gray-700 leading-relaxed\">\n                    {selectedArticle.content.split('[+')[0]}\n                  </p>\n                )}\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <Button\n                  onClick={() => window.open(selectedArticle.url, '_blank')}\n                  className=\"w-full bg-red-600 hover:bg-red-700\"\n                >\n                  <ExternalLink className=\"w-4 h-4 mr-2\" />\n                  Read Full Article\n                </Button>\n              </div>\n\n              <div className=\"text-xs text-gray-500\">\n                Published: {formatDate(selectedArticle.publishedAt)}\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center h-full text-gray-400\">\n              <div className=\"text-center\">\n                <Newspaper className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                <p>Select an article to read details</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      <div className=\"bg-gray-100 px-4 py-2 text-sm text-gray-600 border-t\">\n        Live news powered by NewsAPI • {filteredArticles.length} articles • Last updated: {new Date().toLocaleTimeString()}\n      </div>\n    </div>\n  );\n};","size_bytes":10031},"client/src/components/apps/NotePad.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Input } from '@/components/ui/input';\nimport { Save, FileText, Trash2, Plus } from 'lucide-react';\n\ninterface Note {\n  id: string;\n  title: string;\n  content: string;\n  lastModified: Date;\n}\n\nexport const NotePad: FC = () => {\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [activeNote, setActiveNote] = useState<Note | null>(null);\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n\n  // Load notes from localStorage\n  useEffect(() => {\n    const stored = localStorage.getItem('notepad-notes');\n    if (stored) {\n      const parsedNotes = JSON.parse(stored).map((note: any) => ({\n        ...note,\n        lastModified: new Date(note.lastModified)\n      }));\n      setNotes(parsedNotes);\n      if (parsedNotes.length > 0) {\n        setActiveNote(parsedNotes[0]);\n        setTitle(parsedNotes[0].title);\n        setContent(parsedNotes[0].content);\n      }\n    }\n  }, []);\n\n  // Save notes to localStorage\n  const saveNotes = (updatedNotes: Note[]) => {\n    localStorage.setItem('notepad-notes', JSON.stringify(updatedNotes));\n    setNotes(updatedNotes);\n  };\n\n  const createNewNote = () => {\n    const newNote: Note = {\n      id: Date.now().toString(),\n      title: 'Untitled Note',\n      content: '',\n      lastModified: new Date()\n    };\n    const updatedNotes = [newNote, ...notes];\n    saveNotes(updatedNotes);\n    setActiveNote(newNote);\n    setTitle(newNote.title);\n    setContent(newNote.content);\n  };\n\n  const saveCurrentNote = () => {\n    if (!activeNote) return;\n\n    const updatedNote = {\n      ...activeNote,\n      title: title || 'Untitled Note',\n      content,\n      lastModified: new Date()\n    };\n\n    const updatedNotes = notes.map(note => \n      note.id === activeNote.id ? updatedNote : note\n    );\n    \n    saveNotes(updatedNotes);\n    setActiveNote(updatedNote);\n  };\n\n  const deleteNote = (noteId: string) => {\n    const updatedNotes = notes.filter(note => note.id !== noteId);\n    saveNotes(updatedNotes);\n    \n    if (activeNote?.id === noteId) {\n      if (updatedNotes.length > 0) {\n        setActiveNote(updatedNotes[0]);\n        setTitle(updatedNotes[0].title);\n        setContent(updatedNotes[0].content);\n      } else {\n        setActiveNote(null);\n        setTitle('');\n        setContent('');\n      }\n    }\n  };\n\n  const selectNote = (note: Note) => {\n    setActiveNote(note);\n    setTitle(note.title);\n    setContent(note.content);\n  };\n\n  return (\n    <div className=\"h-full flex bg-background\">\n      {/* Sidebar */}\n      <div className=\"w-64 border-r border-border bg-muted/30\">\n        <div className=\"p-3 border-b border-border\">\n          <Button onClick={createNewNote} className=\"w-full\" size=\"sm\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            New Note\n          </Button>\n        </div>\n        <div className=\"overflow-auto h-full\">\n          {notes.map((note) => (\n            <div\n              key={note.id}\n              className={`p-3 border-b border-border cursor-pointer hover:bg-accent/50 ${\n                activeNote?.id === note.id ? 'bg-accent' : ''\n              }`}\n              onClick={() => selectNote(note)}\n            >\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex-1 min-w-0\">\n                  <h4 className=\"font-medium text-sm truncate\">{note.title}</h4>\n                  <p className=\"text-xs text-muted-foreground truncate mt-1\">\n                    {note.content.slice(0, 50)}...\n                  </p>\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {note.lastModified.toLocaleDateString()}\n                  </p>\n                </div>\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    deleteNote(note.id);\n                  }}\n                  className=\"h-6 w-6 p-0 text-muted-foreground hover:text-destructive\"\n                >\n                  <Trash2 className=\"w-3 h-3\" />\n                </Button>\n              </div>\n            </div>\n          ))}\n          {notes.length === 0 && (\n            <div className=\"p-6 text-center text-muted-foreground text-sm\">\n              <FileText className=\"w-8 h-8 mx-auto mb-2 opacity-50\" />\n              No notes yet. Create your first note!\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Editor */}\n      <div className=\"flex-1 flex flex-col\">\n        {activeNote ? (\n          <>\n            <div className=\"p-4 border-b border-border\">\n              <div className=\"flex items-center gap-2 mb-3\">\n                <Input\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                  placeholder=\"Note title...\"\n                  className=\"text-lg font-medium\"\n                />\n                <Button onClick={saveCurrentNote} size=\"sm\">\n                  <Save className=\"w-4 h-4 mr-2\" />\n                  Save\n                </Button>\n              </div>\n            </div>\n            <div className=\"flex-1 p-4\">\n              <Textarea\n                value={content}\n                onChange={(e) => setContent(e.target.value)}\n                placeholder=\"Start writing your note...\"\n                className=\"w-full h-full resize-none border-none focus:ring-0 text-base\"\n              />\n            </div>\n          </>\n        ) : (\n          <div className=\"flex-1 flex items-center justify-center text-muted-foreground\">\n            <div className=\"text-center\">\n              <FileText className=\"w-16 h-16 mx-auto mb-4 opacity-30\" />\n              <h3 className=\"text-lg font-medium mb-2\">Welcome to NotePad</h3>\n              <p className=\"text-sm\">Create a new note to get started</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":6042},"client/src/components/apps/OfficeSuite.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { FileSpreadsheet, Monitor, FileText, BarChart3, Calculator, FileImage } from 'lucide-react';\nimport { Spreadsheet } from './Spreadsheet';\nimport { PresentationApp } from './Presentation';\n\ntype AppType = 'home' | 'spreadsheet' | 'presentation';\n\nexport const OfficeSuite: FC = () => {\n  const [activeApp, setActiveApp] = useState<AppType>('home');\n\n  const apps = [\n    {\n      id: 'spreadsheet',\n      name: 'Excel',\n      description: 'Create and edit spreadsheets with formulas, charts, and data analysis',\n      icon: FileSpreadsheet,\n      color: 'text-green-600',\n      bgColor: 'bg-green-50 hover:bg-green-100',\n      component: Spreadsheet\n    },\n    {\n      id: 'presentation',\n      name: 'PowerPoint',\n      description: 'Design stunning presentations with slides, animations, and multimedia',\n      icon: Monitor,\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-50 hover:bg-orange-100',\n      component: PresentationApp\n    }\n  ];\n\n  if (activeApp !== 'home') {\n    const app = apps.find(a => a.id === activeApp);\n    if (app) {\n      const Component = app.component;\n      return (\n        <div className=\"h-full flex flex-col\">\n          <div className=\"flex items-center gap-2 p-2 border-b bg-muted/20\">\n            <Button variant=\"outline\" size=\"sm\" onClick={() => setActiveApp('home')}>\n              ← Back to Office\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <app.icon className={`w-5 h-5 ${app.color}`} />\n              <span className=\"font-medium\">Microsoft {app.name}</span>\n            </div>\n          </div>\n          <div className=\"flex-1\">\n            <Component />\n          </div>\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-gradient-to-br from-blue-50 to-purple-50\">\n      {/* Header */}\n      <div className=\"p-6 border-b bg-white/80 backdrop-blur-sm\">\n        <div className=\"flex items-center gap-3 mb-2\">\n          <div className=\"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-lg flex items-center justify-center\">\n            <FileText className=\"w-5 h-5 text-white\" />\n          </div>\n          <div>\n            <h1 className=\"text-2xl font-bold text-gray-800\">Microsoft Office</h1>\n            <p className=\"text-gray-600\">Professional productivity suite</p>\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 p-6\">\n        <div className=\"max-w-4xl mx-auto\">\n          <h2 className=\"text-xl font-semibold mb-6 text-gray-800\">Choose an application</h2>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n            {apps.map(app => (\n              <Card \n                key={app.id}\n                className={`cursor-pointer transition-all duration-300 hover:shadow-lg border-2 hover:border-blue-200 ${app.bgColor}`}\n                onClick={() => setActiveApp(app.id as AppType)}\n              >\n                <CardContent className=\"p-6\">\n                  <div className=\"flex items-start gap-4\">\n                    <div className={`p-3 rounded-xl ${app.bgColor}`}>\n                      <app.icon className={`w-8 h-8 ${app.color}`} />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-lg font-semibold text-gray-800 mb-2\">\n                        Microsoft {app.name}\n                      </h3>\n                      <p className=\"text-gray-600 text-sm mb-4\">\n                        {app.description}\n                      </p>\n                      <Button className=\"w-full\">\n                        Open {app.name}\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {/* Recent Files Section */}\n          <div className=\"bg-white/60 backdrop-blur-sm rounded-lg p-6\">\n            <h3 className=\"text-lg font-semibold mb-4 text-gray-800\">Recent Files</h3>\n            <div className=\"grid gap-3\">\n              {[\n                { name: 'Quarterly Report.xlsx', app: 'Excel', time: '2 hours ago', icon: FileSpreadsheet },\n                { name: 'Project Presentation.pptx', app: 'PowerPoint', time: '5 hours ago', icon: Monitor },\n                { name: 'Budget Analysis.xlsx', app: 'Excel', time: '1 day ago', icon: FileSpreadsheet }\n              ].map((file, index) => (\n                <div key={index} className=\"flex items-center gap-3 p-3 rounded-lg hover:bg-white/50 cursor-pointer transition-colors\">\n                  <file.icon className=\"w-5 h-5 text-blue-600\" />\n                  <div className=\"flex-1\">\n                    <div className=\"font-medium text-gray-800\">{file.name}</div>\n                    <div className=\"text-sm text-gray-600\">{file.app} • {file.time}</div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t bg-white/80 backdrop-blur-sm\">\n        <div className=\"text-center text-sm text-gray-600\">\n          Microsoft Office Suite for WebOS • Version 2024\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":5384},"client/src/components/apps/PacMan.tsx":{"content":"import { FC, useState, useEffect, useRef, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\n\nconst BOARD_WIDTH = 19;\nconst BOARD_HEIGHT = 21;\nconst CELL_SIZE = 24;\n\ntype CellType = 'wall' | 'dot' | 'power' | 'empty' | 'ghost-house';\ntype Direction = 'up' | 'down' | 'left' | 'right';\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ninterface Ghost {\n  id: string;\n  position: Position;\n  direction: Direction;\n  color: string;\n  mode: 'chase' | 'scatter' | 'frightened';\n  target: Position;\n}\n\nconst MAZE_LAYOUT = [\n  \"WWWWWWWWWWWWWWWWWWW\",\n  \"W........W........W\",\n  \"W.WW.WWW.W.WWW.WW.W\",\n  \"WP..............PW\",\n  \"W.WW.W.WWWWW.W.WW.W\",\n  \"W....W...W...W....W\",\n  \"WWWW.WWW.W.WWW.WWWW\",\n  \"   W.W.......W.W   \",\n  \"   W.W.WW WW.W.W   \",\n  \"WWWW.W.W   W.W.WWWW\",\n  \"W.....W     W.....W\",\n  \"WWWW.W.W   W.W.WWWW\",\n  \"   W.W.WWWWW.W.W   \",\n  \"   W.W.......W.W   \",\n  \"WWWW.W.WWWWW.W.WWWW\",\n  \"W........W........W\",\n  \"W.WW.WWW.W.WWW.WW.W\",\n  \"WP.W..........W.PW\",\n  \"WWW.W.W.WWW.W.W.WWW\",\n  \"W.....W..W..W.....W\",\n  \"WWWWWWWWWWWWWWWWWWW\"\n];\n\nexport const PacMan: FC = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const gameLoopRef = useRef<number>();\n  \n  const [gameState, setGameState] = useState<'menu' | 'playing' | 'paused' | 'gameover'>('menu');\n  const [score, setScore] = useState(0);\n  const [lives, setLives] = useState(3);\n  const [level, setLevel] = useState(1);\n  const [highScore, setHighScore] = useState(() => {\n    const saved = localStorage.getItem('pacman-highscore');\n    return saved ? parseInt(saved) : 0;\n  });\n\n  const [pacman, setPacman] = useState<{\n    position: Position;\n    direction: Direction;\n    nextDirection: Direction;\n    mouthOpen: boolean;\n  }>({\n    position: { x: 9, y: 15 },\n    direction: 'right',\n    nextDirection: 'right',\n    mouthOpen: true\n  });\n\n  const [ghosts, setGhosts] = useState<Ghost[]>([\n    {\n      id: 'blinky',\n      position: { x: 9, y: 9 },\n      direction: 'up',\n      color: '#FF0000',\n      mode: 'chase',\n      target: { x: 0, y: 0 }\n    },\n    {\n      id: 'pinky',\n      position: { x: 9, y: 10 },\n      direction: 'down',\n      color: '#FFB8FF',\n      mode: 'chase',\n      target: { x: 0, y: 0 }\n    },\n    {\n      id: 'inky',\n      position: { x: 8, y: 10 },\n      direction: 'up',\n      color: '#00FFFF',\n      mode: 'chase',\n      target: { x: 0, y: 0 }\n    },\n    {\n      id: 'clyde',\n      position: { x: 10, y: 10 },\n      direction: 'down',\n      color: '#FFB852',\n      mode: 'chase',\n      target: { x: 0, y: 0 }\n    }\n  ]);\n\n  const [maze, setMaze] = useState<CellType[][]>(() => {\n    return MAZE_LAYOUT.map(row => \n      row.split('').map(cell => {\n        switch (cell) {\n          case 'W': return 'wall';\n          case '.': return 'dot';\n          case 'P': return 'power';\n          case ' ': return 'ghost-house';\n          default: return 'empty';\n        }\n      })\n    );\n  });\n\n  const [powerPelletActive, setPowerPelletActive] = useState(false);\n  const [powerPelletTimer, setPowerPelletTimer] = useState(0);\n\n  const canMoveTo = useCallback((x: number, y: number): boolean => {\n    if (x < 0 || x >= BOARD_WIDTH || y < 0 || y >= BOARD_HEIGHT) {\n      return false;\n    }\n    return maze[y][x] !== 'wall';\n  }, [maze]);\n\n  const getNextPosition = useCallback((pos: Position, direction: Direction): Position => {\n    let newX = pos.x;\n    let newY = pos.y;\n    \n    switch (direction) {\n      case 'up': newY--; break;\n      case 'down': newY++; break;\n      case 'left': newX--; break;\n      case 'right': newX++; break;\n    }\n    \n    // Handle tunnel effect\n    if (newX < 0) newX = BOARD_WIDTH - 1;\n    if (newX >= BOARD_WIDTH) newX = 0;\n    \n    return { x: newX, y: newY };\n  }, []);\n\n  const movePacman = useCallback(() => {\n    setPacman(prevPacman => {\n      const nextPos = getNextPosition(prevPacman.position, prevPacman.nextDirection);\n      \n      if (canMoveTo(nextPos.x, nextPos.y)) {\n        // Can turn to next direction\n        const newDirection = prevPacman.nextDirection;\n        const newPos = nextPos;\n        \n        // Check for dots and power pellets\n        if (maze[newPos.y][newPos.x] === 'dot') {\n          setScore(prev => prev + 10);\n          setMaze(prevMaze => {\n            const newMaze = [...prevMaze];\n            newMaze[newPos.y] = [...newMaze[newPos.y]];\n            newMaze[newPos.y][newPos.x] = 'empty';\n            return newMaze;\n          });\n        } else if (maze[newPos.y][newPos.x] === 'power') {\n          setScore(prev => prev + 50);\n          setPowerPelletActive(true);\n          setPowerPelletTimer(200); // 200 frames ~= 10 seconds\n          setGhosts(prevGhosts => \n            prevGhosts.map(ghost => ({ ...ghost, mode: 'frightened' }))\n          );\n          setMaze(prevMaze => {\n            const newMaze = [...prevMaze];\n            newMaze[newPos.y] = [...newMaze[newPos.y]];\n            newMaze[newPos.y][newPos.x] = 'empty';\n            return newMaze;\n          });\n        }\n        \n        return {\n          ...prevPacman,\n          position: newPos,\n          direction: newDirection,\n          mouthOpen: !prevPacman.mouthOpen\n        };\n      } else {\n        // Continue in current direction if possible\n        const currentNext = getNextPosition(prevPacman.position, prevPacman.direction);\n        if (canMoveTo(currentNext.x, currentNext.y)) {\n          return {\n            ...prevPacman,\n            position: currentNext,\n            mouthOpen: !prevPacman.mouthOpen\n          };\n        }\n        \n        // Can't move\n        return prevPacman;\n      }\n    });\n  }, [canMoveTo, getNextPosition, maze]);\n\n  const moveGhosts = useCallback(() => {\n    setGhosts(prevGhosts => \n      prevGhosts.map(ghost => {\n        const possibleDirections: Direction[] = [];\n        const currentPos = ghost.position;\n        \n        ['up', 'down', 'left', 'right'].forEach(dir => {\n          const nextPos = getNextPosition(currentPos, dir as Direction);\n          if (canMoveTo(nextPos.x, nextPos.y)) {\n            possibleDirections.push(dir as Direction);\n          }\n        });\n        \n        if (possibleDirections.length === 0) return ghost;\n        \n        // Simple AI: choose random direction for now\n        const newDirection = possibleDirections[Math.floor(Math.random() * possibleDirections.length)];\n        const newPosition = getNextPosition(currentPos, newDirection);\n        \n        return {\n          ...ghost,\n          position: newPosition,\n          direction: newDirection\n        };\n      })\n    );\n  }, [canMoveTo, getNextPosition]);\n\n  const checkCollisions = useCallback(() => {\n    const pacmanPos = pacman.position;\n    \n    ghosts.forEach(ghost => {\n      if (ghost.position.x === pacmanPos.x && ghost.position.y === pacmanPos.y) {\n        if (powerPelletActive && ghost.mode === 'frightened') {\n          // Eat ghost\n          setScore(prev => prev + 200);\n          // Reset ghost to center (simplified)\n          setGhosts(prevGhosts => \n            prevGhosts.map(g => \n              g.id === ghost.id \n                ? { ...g, position: { x: 9, y: 10 }, mode: 'chase' }\n                : g\n            )\n          );\n        } else {\n          // Pacman dies\n          setLives(prev => {\n            const newLives = prev - 1;\n            if (newLives <= 0) {\n              setGameState('gameover');\n              if (score > highScore) {\n                setHighScore(score);\n                localStorage.setItem('pacman-highscore', score.toString());\n              }\n            }\n            return newLives;\n          });\n          \n          // Reset positions\n          setPacman(prev => ({\n            ...prev,\n            position: { x: 9, y: 15 },\n            direction: 'right',\n            nextDirection: 'right'\n          }));\n        }\n      }\n    });\n  }, [pacman.position, ghosts, powerPelletActive, score, highScore]);\n\n  const checkWinCondition = useCallback(() => {\n    const dotsRemaining = maze.flat().filter(cell => cell === 'dot' || cell === 'power').length;\n    if (dotsRemaining === 0) {\n      setLevel(prev => prev + 1);\n      // Reset maze for next level\n      setMaze(MAZE_LAYOUT.map(row => \n        row.split('').map(cell => {\n          switch (cell) {\n            case 'W': return 'wall';\n            case '.': return 'dot';\n            case 'P': return 'power';\n            case ' ': return 'ghost-house';\n            default: return 'empty';\n          }\n        })\n      ));\n    }\n  }, [maze]);\n\n  const gameLoop = useCallback(() => {\n    if (gameState !== 'playing') return;\n    \n    movePacman();\n    moveGhosts();\n    checkCollisions();\n    checkWinCondition();\n    \n    // Handle power pellet timer\n    if (powerPelletActive) {\n      setPowerPelletTimer(prev => {\n        if (prev <= 1) {\n          setPowerPelletActive(false);\n          setGhosts(prevGhosts => \n            prevGhosts.map(ghost => ({ ...ghost, mode: 'chase' }))\n          );\n          return 0;\n        }\n        return prev - 1;\n      });\n    }\n  }, [gameState, movePacman, moveGhosts, checkCollisions, checkWinCondition, powerPelletActive]);\n\n  // Game loop\n  useEffect(() => {\n    if (gameState === 'playing') {\n      gameLoopRef.current = window.setInterval(gameLoop, 150);\n    } else {\n      if (gameLoopRef.current) {\n        clearInterval(gameLoopRef.current);\n      }\n    }\n    \n    return () => {\n      if (gameLoopRef.current) {\n        clearInterval(gameLoopRef.current);\n      }\n    };\n  }, [gameLoop, gameState]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (gameState !== 'playing') return;\n      \n      switch (event.key) {\n        case 'ArrowUp':\n        case 'w':\n        case 'W':\n          event.preventDefault();\n          setPacman(prev => ({ ...prev, nextDirection: 'up' }));\n          break;\n        case 'ArrowDown':\n        case 's':\n        case 'S':\n          event.preventDefault();\n          setPacman(prev => ({ ...prev, nextDirection: 'down' }));\n          break;\n        case 'ArrowLeft':\n        case 'a':\n        case 'A':\n          event.preventDefault();\n          setPacman(prev => ({ ...prev, nextDirection: 'left' }));\n          break;\n        case 'ArrowRight':\n        case 'd':\n        case 'D':\n          event.preventDefault();\n          setPacman(prev => ({ ...prev, nextDirection: 'right' }));\n          break;\n        case ' ':\n          event.preventDefault();\n          setGameState(prev => prev === 'playing' ? 'paused' : 'playing');\n          break;\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [gameState]);\n\n  // Canvas rendering\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n    \n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n    \n    // Clear canvas\n    ctx.fillStyle = '#000000';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    \n    // Draw maze\n    ctx.fillStyle = '#0000FF';\n    for (let y = 0; y < BOARD_HEIGHT; y++) {\n      for (let x = 0; x < BOARD_WIDTH; x++) {\n        const cell = maze[y][x];\n        const pixelX = x * CELL_SIZE;\n        const pixelY = y * CELL_SIZE;\n        \n        if (cell === 'wall') {\n          ctx.fillRect(pixelX, pixelY, CELL_SIZE, CELL_SIZE);\n        } else if (cell === 'dot') {\n          ctx.fillStyle = '#FFFF00';\n          ctx.beginPath();\n          ctx.arc(pixelX + CELL_SIZE/2, pixelY + CELL_SIZE/2, 2, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#0000FF';\n        } else if (cell === 'power') {\n          ctx.fillStyle = '#FFFF00';\n          ctx.beginPath();\n          ctx.arc(pixelX + CELL_SIZE/2, pixelY + CELL_SIZE/2, 6, 0, Math.PI * 2);\n          ctx.fill();\n          ctx.fillStyle = '#0000FF';\n        }\n      }\n    }\n    \n    // Draw Pacman\n    ctx.fillStyle = '#FFFF00';\n    const pacX = pacman.position.x * CELL_SIZE + CELL_SIZE/2;\n    const pacY = pacman.position.y * CELL_SIZE + CELL_SIZE/2;\n    \n    ctx.beginPath();\n    if (pacman.mouthOpen) {\n      let startAngle = 0;\n      let endAngle = Math.PI * 2;\n      \n      switch (pacman.direction) {\n        case 'right':\n          startAngle = 0.3 * Math.PI;\n          endAngle = 1.7 * Math.PI;\n          break;\n        case 'down':\n          startAngle = 0.8 * Math.PI;\n          endAngle = 0.2 * Math.PI;\n          break;\n        case 'left':\n          startAngle = 1.3 * Math.PI;\n          endAngle = 0.7 * Math.PI;\n          break;\n        case 'up':\n          startAngle = 1.8 * Math.PI;\n          endAngle = 1.2 * Math.PI;\n          break;\n      }\n      \n      ctx.arc(pacX, pacY, CELL_SIZE/2 - 2, startAngle, endAngle);\n      ctx.lineTo(pacX, pacY);\n    } else {\n      ctx.arc(pacX, pacY, CELL_SIZE/2 - 2, 0, Math.PI * 2);\n    }\n    ctx.fill();\n    \n    // Draw ghosts\n    ghosts.forEach(ghost => {\n      const ghostX = ghost.position.x * CELL_SIZE + CELL_SIZE/2;\n      const ghostY = ghost.position.y * CELL_SIZE + CELL_SIZE/2;\n      \n      ctx.fillStyle = ghost.mode === 'frightened' ? '#0000FF' : ghost.color;\n      ctx.beginPath();\n      ctx.arc(ghostX, ghostY, CELL_SIZE/2 - 2, 0, Math.PI * 2);\n      ctx.fill();\n      \n      // Ghost eyes\n      ctx.fillStyle = '#FFFFFF';\n      ctx.beginPath();\n      ctx.arc(ghostX - 4, ghostY - 4, 2, 0, Math.PI * 2);\n      ctx.arc(ghostX + 4, ghostY - 4, 2, 0, Math.PI * 2);\n      ctx.fill();\n      \n      ctx.fillStyle = '#000000';\n      ctx.beginPath();\n      ctx.arc(ghostX - 4, ghostY - 4, 1, 0, Math.PI * 2);\n      ctx.arc(ghostX + 4, ghostY - 4, 1, 0, Math.PI * 2);\n      ctx.fill();\n    });\n  }, [maze, pacman, ghosts]);\n\n  const startGame = () => {\n    setGameState('playing');\n    setScore(0);\n    setLives(3);\n    setLevel(1);\n    setPacman({\n      position: { x: 9, y: 15 },\n      direction: 'right',\n      nextDirection: 'right',\n      mouthOpen: true\n    });\n    setGhosts([\n      { id: 'blinky', position: { x: 9, y: 9 }, direction: 'up', color: '#FF0000', mode: 'chase', target: { x: 0, y: 0 } },\n      { id: 'pinky', position: { x: 9, y: 10 }, direction: 'down', color: '#FFB8FF', mode: 'chase', target: { x: 0, y: 0 } },\n      { id: 'inky', position: { x: 8, y: 10 }, direction: 'up', color: '#00FFFF', mode: 'chase', target: { x: 0, y: 0 } },\n      { id: 'clyde', position: { x: 10, y: 10 }, direction: 'down', color: '#FFB852', mode: 'chase', target: { x: 0, y: 0 } }\n    ]);\n    // Reset maze\n    setMaze(MAZE_LAYOUT.map(row => \n      row.split('').map(cell => {\n        switch (cell) {\n          case 'W': return 'wall';\n          case '.': return 'dot';\n          case 'P': return 'power';\n          case ' ': return 'ghost-house';\n          default: return 'empty';\n        }\n      })\n    ));\n  };\n\n  const pauseGame = () => {\n    setGameState(prev => prev === 'playing' ? 'paused' : 'playing');\n  };\n\n  return (\n    <div className=\"h-full bg-black text-yellow-400 p-4 flex flex-col items-center\">\n      <div className=\"mb-4\">\n        <h1 className=\"text-3xl font-bold text-center mb-2\">PAC-MAN</h1>\n        <div className=\"flex gap-6 text-lg font-mono\">\n          <div>Score: {score.toLocaleString()}</div>\n          <div>High: {highScore.toLocaleString()}</div>\n          <div>Lives: {'●'.repeat(lives)}</div>\n          <div>Level: {level}</div>\n        </div>\n      </div>\n\n      {gameState === 'menu' && (\n        <Card className=\"bg-blue-900 border-yellow-400 text-white mb-4\">\n          <CardHeader>\n            <CardTitle className=\"text-center text-yellow-400\">🎮 PAC-MAN</CardTitle>\n          </CardHeader>\n          <CardContent className=\"text-center space-y-4\">\n            <p>Navigate the maze and eat all the dots while avoiding ghosts!</p>\n            <div className=\"text-sm space-y-2\">\n              <div>🕹️ Use Arrow Keys or WASD to move</div>\n              <div>🟡 Eat dots for points</div>\n              <div>🟠 Power pellets make ghosts vulnerable</div>\n              <div>👻 Avoid ghosts or eat them when they're blue</div>\n              <div>⏸️ Press Space to pause</div>\n            </div>\n            <Button onClick={startGame} className=\"bg-yellow-600 hover:bg-yellow-700 text-black\">\n              START GAME\n            </Button>\n          </CardContent>\n        </Card>\n      )}\n\n      {gameState === 'paused' && (\n        <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center z-10\">\n          <Card className=\"bg-blue-900 border-yellow-400 text-white\">\n            <CardContent className=\"p-6 text-center\">\n              <h2 className=\"text-2xl font-bold text-yellow-400 mb-4\">PAUSED</h2>\n              <Button onClick={pauseGame} className=\"bg-yellow-600 hover:bg-yellow-700 text-black\">\n                RESUME\n              </Button>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {gameState === 'gameover' && (\n        <div className=\"absolute inset-0 bg-black/80 flex items-center justify-center z-10\">\n          <Card className=\"bg-red-900 border-yellow-400 text-white\">\n            <CardContent className=\"p-6 text-center space-y-4\">\n              <h2 className=\"text-2xl font-bold text-yellow-400\">GAME OVER</h2>\n              <div className=\"text-lg\">Final Score: {score.toLocaleString()}</div>\n              {score > highScore && (\n                <div className=\"text-yellow-400\">🏆 NEW HIGH SCORE!</div>\n              )}\n              <div className=\"flex gap-2\">\n                <Button onClick={startGame} className=\"bg-yellow-600 hover:bg-yellow-700 text-black\">\n                  PLAY AGAIN\n                </Button>\n                <Button onClick={() => setGameState('menu')} variant=\"outline\" className=\"border-yellow-400 text-yellow-400\">\n                  MENU\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      <canvas\n        ref={canvasRef}\n        width={BOARD_WIDTH * CELL_SIZE}\n        height={BOARD_HEIGHT * CELL_SIZE}\n        className=\"border-2 border-yellow-400 rounded-lg\"\n        style={{ imageRendering: 'pixelated' }}\n      />\n\n      <div className=\"mt-4 text-center text-sm\">\n        <div className=\"mb-2\">Controls: Arrow Keys or WASD to move • Space to pause</div>\n        {powerPelletActive && (\n          <div className=\"text-blue-400 font-bold\">\n            POWER PELLET ACTIVE! ({Math.ceil(powerPelletTimer / 20)}s)\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":18518},"client/src/components/apps/PackageManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Search, Download, Trash2, RefreshCw, Package, Terminal, Shield, Star, Clock } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface PackageInfo {\n  id: string;\n  name: string;\n  description: string;\n  version: string;\n  size: string;\n  category: 'system' | 'development' | 'multimedia' | 'productivity' | 'games' | 'network' | 'security';\n  dependencies: string[];\n  installed: boolean;\n  official: boolean;\n  popularity: number;\n  lastUpdate: string;\n  maintainer: string;\n  repository: 'core' | 'extra' | 'community' | 'aur';\n}\n\nconst availablePackages: PackageInfo[] = [\n  // WebOS Built-in Applications\n  {\n    id: 'weather-app',\n    name: 'webos-weather',\n    description: 'Advanced weather application with forecast and location support',\n    version: '2.1.0-1',\n    size: '2.4 MB',\n    category: 'productivity',\n    dependencies: ['nodejs', 'curl'],\n    installed: false,\n    official: false,\n    popularity: 78,\n    lastUpdate: '2024-01-20',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'email-client',\n    name: 'webos-mail',\n    description: 'Full-featured email client with compose, search, and attachment support',\n    version: '3.2.1-1',\n    size: '4.1 MB',\n    category: 'network',\n    dependencies: ['nodejs', 'electron'],\n    installed: false,\n    official: false,\n    popularity: 85,\n    lastUpdate: '2024-01-18',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'spreadsheet',\n    name: 'webos-calc',\n    description: 'Professional spreadsheet application with formulas, charts, and data analysis',\n    version: '1.8.3-1',\n    size: '6.7 MB',\n    category: 'productivity',\n    dependencies: ['nodejs', 'mathjs'],\n    installed: false,\n    official: false,\n    popularity: 72,\n    lastUpdate: '2024-01-17',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'presentation',\n    name: 'webos-present',\n    description: 'PowerPoint-style presentation creator with slides, animations, and themes',\n    version: '2.0.5-1',\n    size: '5.3 MB',\n    category: 'productivity',\n    dependencies: ['nodejs', 'canvas'],\n    installed: false,\n    official: false,\n    popularity: 68,\n    lastUpdate: '2024-01-16',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'office-suite',\n    name: 'webos-office',\n    description: 'Complete office suite with word processing, spreadsheets, and presentations',\n    version: '4.1.2-1',\n    size: '12.8 MB',\n    category: 'productivity',\n    dependencies: ['webos-calc', 'webos-present'],\n    installed: false,\n    official: false,\n    popularity: 82,\n    lastUpdate: '2024-01-19',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'tetris',\n    name: 'webos-tetris',\n    description: 'Classic Tetris puzzle game with modern graphics and scoring',\n    version: '1.4.2-1',\n    size: '1.2 MB',\n    category: 'games',\n    dependencies: ['nodejs'],\n    installed: false,\n    official: false,\n    popularity: 89,\n    lastUpdate: '2024-01-14',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'virtual-machine',\n    name: 'webos-vm',\n    description: 'Virtual machine manager with container support and system emulation',\n    version: '3.0.1-1',\n    size: '8.9 MB',\n    category: 'system',\n    dependencies: ['qemu', 'docker'],\n    installed: false,\n    official: false,\n    popularity: 65,\n    lastUpdate: '2024-01-15',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'video-editor',\n    name: 'webos-video',\n    description: 'Professional video editing suite with timeline, effects, and export options',\n    version: '2.3.4-1',\n    size: '15.2 MB',\n    category: 'multimedia',\n    dependencies: ['ffmpeg', 'nodejs', 'opencv'],\n    installed: false,\n    official: false,\n    popularity: 71,\n    lastUpdate: '2024-01-13',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'roblox',\n    name: 'roblox-player',\n    description: 'Roblox game client for playing user-generated games',\n    version: '2.598.566-1',\n    size: '127.3 MB',\n    category: 'games',\n    dependencies: ['wine', 'winetricks'],\n    installed: false,\n    official: false,\n    popularity: 92,\n    lastUpdate: '2024-01-12',\n    maintainer: 'Roblox Corporation',\n    repository: 'aur'\n  },\n  {\n    id: 'roblox-studio',\n    name: 'roblox-studio',\n    description: 'Roblox Studio for game development and scripting',\n    version: '2.598.566-1',\n    size: '156.7 MB',\n    category: 'development',\n    dependencies: ['wine', 'winetricks', 'dotnet'],\n    installed: false,\n    official: false,\n    popularity: 76,\n    lastUpdate: '2024-01-12',\n    maintainer: 'Roblox Corporation',\n    repository: 'aur'\n  },\n  {\n    id: 'pacman',\n    name: 'webos-pacman',\n    description: 'Classic Pac-Man arcade game with authentic gameplay and sound',\n    version: '1.3.1-1',\n    size: '2.8 MB',\n    category: 'games',\n    dependencies: ['nodejs', 'sdl2'],\n    installed: false,\n    official: false,\n    popularity: 87,\n    lastUpdate: '2024-01-10',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'retro-emulator',\n    name: 'webos-retro',\n    description: 'Multi-system retro game emulator supporting NES, SNES, Game Boy, and more',\n    version: '4.2.0-1',\n    size: '24.6 MB',\n    category: 'games',\n    dependencies: ['libretro', 'sdl2', 'opengl'],\n    installed: false,\n    official: false,\n    popularity: 81,\n    lastUpdate: '2024-01-11',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'storage-manager',\n    name: 'webos-storage',\n    description: 'Advanced disk and storage management with partitioning and monitoring',\n    version: '2.1.3-1',\n    size: '3.7 MB',\n    category: 'system',\n    dependencies: ['util-linux', 'smartmontools'],\n    installed: false,\n    official: false,\n    popularity: 69,\n    lastUpdate: '2024-01-09',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  {\n    id: 'system-recovery',\n    name: 'webos-recovery',\n    description: 'System recovery and backup utilities with file restoration',\n    version: '1.5.2-1',\n    size: '4.2 MB',\n    category: 'system',\n    dependencies: ['rsync', 'tar', 'gzip'],\n    installed: false,\n    official: false,\n    popularity: 73,\n    lastUpdate: '2024-01-08',\n    maintainer: 'WebOS Team',\n    repository: 'aur'\n  },\n  // External Applications\n  {\n    id: 'firefox',\n    name: 'firefox',\n    description: 'Standalone web browser from Mozilla',\n    version: '121.0-1',\n    size: '58.2 MB',\n    category: 'network',\n    dependencies: ['gtk3', 'libpulse', 'ffmpeg'],\n    installed: false,\n    official: true,\n    popularity: 95,\n    lastUpdate: '2024-01-15',\n    maintainer: 'Mozilla Team',\n    repository: 'extra'\n  },\n  {\n    id: 'code',\n    name: 'visual-studio-code-bin',\n    description: 'The Open Source build of Visual Studio Code (vscode) editor',\n    version: '1.85.1-1',\n    size: '102.4 MB',\n    category: 'development',\n    dependencies: ['electron', 'libxss', 'gtk3'],\n    installed: false,\n    official: false,\n    popularity: 88,\n    lastUpdate: '2024-01-12',\n    maintainer: 'Microsoft',\n    repository: 'aur'\n  },\n  {\n    id: 'discord',\n    name: 'discord',\n    description: 'All-in-one voice and text chat for gamers',\n    version: '0.0.40-1',\n    size: '78.9 MB',\n    category: 'network',\n    dependencies: ['gtk3', 'libxss', 'gconf'],\n    installed: false,\n    official: false,\n    popularity: 82,\n    lastUpdate: '2024-01-10',\n    maintainer: 'Discord Inc.',\n    repository: 'aur'\n  },\n  {\n    id: 'gimp',\n    name: 'gimp',\n    description: 'GNU Image Manipulation Program',\n    version: '2.10.36-1',\n    size: '45.7 MB',\n    category: 'multimedia',\n    dependencies: ['gtk2', 'lcms2', 'libmng', 'librsvg'],\n    installed: false,\n    official: true,\n    popularity: 75,\n    lastUpdate: '2024-01-08',\n    maintainer: 'GIMP Team',\n    repository: 'extra'\n  },\n  {\n    id: 'steam',\n    name: 'steam',\n    description: 'Valve\\'s digital software delivery system',\n    version: '1.0.0.78-1',\n    size: '3.2 MB',\n    category: 'games',\n    dependencies: ['lib32-libgl', 'lib32-gcc-libs', 'lib32-libx11'],\n    installed: false,\n    official: false,\n    popularity: 90,\n    lastUpdate: '2024-01-14',\n    maintainer: 'Valve Corporation',\n    repository: 'aur'\n  },\n  {\n    id: 'libreoffice',\n    name: 'libreoffice-fresh',\n    description: 'LibreOffice branch which contains new features and program enhancements',\n    version: '7.6.4-1',\n    size: '285.6 MB',\n    category: 'productivity',\n    dependencies: ['curl', 'hunspell', 'python', 'libwpd'],\n    installed: false,\n    official: true,\n    popularity: 70,\n    lastUpdate: '2024-01-13',\n    maintainer: 'The Document Foundation',\n    repository: 'extra'\n  },\n  {\n    id: 'htop',\n    name: 'htop',\n    description: 'Interactive process viewer',\n    version: '3.3.0-1',\n    size: '245 KB',\n    category: 'system',\n    dependencies: ['ncurses'],\n    installed: true,\n    official: true,\n    popularity: 85,\n    lastUpdate: '2023-12-20',\n    maintainer: 'Hisham Muhammad',\n    repository: 'extra'\n  },\n  {\n    id: 'vim',\n    name: 'vim',\n    description: 'Vi Improved, a highly configurable, improved version of the vi text editor',\n    version: '9.0.2189-1',\n    size: '3.8 MB',\n    category: 'development',\n    dependencies: ['gpm', 'acl', 'glibc'],\n    installed: true,\n    official: true,\n    popularity: 92,\n    lastUpdate: '2024-01-11',\n    maintainer: 'Bram Moolenaar',\n    repository: 'extra'\n  },\n  {\n    id: 'wireshark',\n    name: 'wireshark-qt',\n    description: 'Network traffic and protocol analyzer/sniffer - Qt GUI',\n    version: '4.2.1-1',\n    size: '28.4 MB',\n    category: 'security',\n    dependencies: ['qt6-base', 'qt6-multimedia', 'libpcap'],\n    installed: false,\n    official: true,\n    popularity: 65,\n    lastUpdate: '2024-01-09',\n    maintainer: 'Wireshark Team',\n    repository: 'extra'\n  },\n  {\n    id: 'blender',\n    name: 'blender',\n    description: 'A fully integrated 3D graphics creation suite',\n    version: '4.0.2-1',\n    size: '267.8 MB',\n    category: 'multimedia',\n    dependencies: ['libgl', 'python', 'python-numpy', 'openimageio'],\n    installed: false,\n    official: true,\n    popularity: 78,\n    lastUpdate: '2024-01-16',\n    maintainer: 'Blender Foundation',\n    repository: 'community'\n  }\n];\n\nexport const PackageManager: FC = () => {\n  const [packages, setPackages] = useState<PackageInfo[]>(availablePackages);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [selectedRepository, setSelectedRepository] = useState<string>('all');\n  const [isUpdating, setIsUpdating] = useState(false);\n  const [installingPackages, setInstallingPackages] = useState<Set<string>>(new Set());\n  const [removingPackages, setRemovingPackages] = useState<Set<string>>(new Set());\n  const { toast } = useToast();\n\n  const categories = ['all', 'system', 'development', 'multimedia', 'productivity', 'games', 'network', 'security'];\n  const repositories = ['all', 'core', 'extra', 'community', 'aur'];\n\n  const filteredPackages = packages.filter(pkg => {\n    const matchesSearch = pkg.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         pkg.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || pkg.category === selectedCategory;\n    const matchesRepository = selectedRepository === 'all' || pkg.repository === selectedRepository;\n    \n    return matchesSearch && matchesCategory && matchesRepository;\n  });\n\n  const installedPackages = packages.filter(pkg => pkg.installed);\n  const availableForInstall = packages.filter(pkg => !pkg.installed);\n\n  const handleInstallPackage = async (packageId: string) => {\n    const pkg = packages.find(p => p.id === packageId);\n    if (!pkg) return;\n\n    const currentInstalling = Array.from(installingPackages);\n    setInstallingPackages(new Set([...currentInstalling, packageId]));\n    \n    // Simulate package installation\n    await new Promise(resolve => setTimeout(resolve, 2000 + Math.random() * 3000));\n    \n    setPackages(prev => prev.map(p => \n      p.id === packageId ? { ...p, installed: true } : p\n    ));\n    \n    // Create desktop shortcut for WebOS applications\n    if (pkg.maintainer === 'WebOS Team') {\n      const desktopApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n      const newApp = {\n        id: packageId,\n        name: getAppDisplayName(packageId),\n        icon: getAppIcon(packageId),\n        description: pkg.description\n      };\n      \n      if (!desktopApps.find((app: any) => app.id === packageId)) {\n        desktopApps.push(newApp);\n        localStorage.setItem('desktop-apps', JSON.stringify(desktopApps));\n        \n        // Trigger desktop refresh\n        window.dispatchEvent(new CustomEvent('desktop-refresh'));\n      }\n    }\n    \n    const updatedInstalling = Array.from(installingPackages).filter(id => id !== packageId);\n    setInstallingPackages(new Set(updatedInstalling));\n\n    toast({\n      title: \"Package Installed\",\n      description: `${pkg.name} has been successfully installed`,\n    });\n\n    // Track installation for achievements\n    window.dispatchEvent(new CustomEvent('package-installed', { detail: pkg }));\n  };\n\n  const getAppDisplayName = (packageId: string): string => {\n    const nameMap: { [key: string]: string } = {\n      'weather-app': 'Weather',\n      'email-client': 'Thunderbird',\n      'spreadsheet': 'LibreOffice Calc',\n      'presentation': 'LibreOffice Impress',\n      'office-suite': 'Office Suite',\n      'tetris': 'Tetris',\n      'virtual-machine': 'VirtualBox',\n      'video-editor': 'Video Editor',\n      'roblox': 'Roblox',\n      'roblox-studio': 'Roblox Studio',\n      'pacman': 'Pac-Man',\n      'retro-emulator': 'Retro Emulator',\n      'storage-manager': 'Storage Manager',\n      'system-recovery': 'System Recovery'\n    };\n    return nameMap[packageId] || packageId;\n  };\n\n  const getAppIcon = (packageId: string): string => {\n    const iconMap: { [key: string]: string } = {\n      'weather-app': 'cloud',\n      'email-client': 'email',\n      'spreadsheet': 'spreadsheet',\n      'presentation': 'presentation',\n      'office-suite': 'briefcase',\n      'tetris': 'gamepad',\n      'virtual-machine': 'monitor',\n      'video-editor': 'video',\n      'roblox': 'gamepad',\n      'roblox-studio': 'code',\n      'pacman': 'gamepad',\n      'retro-emulator': 'gamepad',\n      'storage-manager': 'harddrive',\n      'system-recovery': 'shield'\n    };\n    return iconMap[packageId] || 'package';\n  };\n\n  const handleRemovePackage = async (packageId: string) => {\n    const pkg = packages.find(p => p.id === packageId);\n    if (!pkg) return;\n\n    const currentRemoving = Array.from(removingPackages);\n    setRemovingPackages(new Set([...currentRemoving, packageId]));\n    \n    // Simulate package removal\n    await new Promise(resolve => setTimeout(resolve, 1500));\n    \n    setPackages(prev => prev.map(p => \n      p.id === packageId ? { ...p, installed: false } : p\n    ));\n    \n    setRemovingPackages(prev => {\n      const newSet = new Set(prev);\n      newSet.delete(packageId);\n      return newSet;\n    });\n\n    toast({\n      title: \"Package Removed\",\n      description: `${pkg.name} has been successfully removed`,\n    });\n  };\n\n  const handleUpdateSystem = async () => {\n    setIsUpdating(true);\n    toast({\n      title: \"System Update Started\",\n      description: \"Checking for package updates...\",\n    });\n\n    // Simulate system update\n    await new Promise(resolve => setTimeout(resolve, 5000));\n    \n    setIsUpdating(false);\n    toast({\n      title: \"System Updated\",\n      description: \"All packages are up to date\",\n    });\n  };\n\n  const getRepositoryBadgeColor = (repo: string) => {\n    switch (repo) {\n      case 'core': return 'bg-blue-500';\n      case 'extra': return 'bg-green-500';\n      case 'community': return 'bg-purple-500';\n      case 'aur': return 'bg-orange-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getCategoryIcon = (category: string) => {\n    switch (category) {\n      case 'system': return <Terminal className=\"w-4 h-4\" />;\n      case 'development': return <Package className=\"w-4 h-4\" />;\n      case 'security': return <Shield className=\"w-4 h-4\" />;\n      default: return <Package className=\"w-4 h-4\" />;\n    }\n  };\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-blue-950 to-cyan-950 text-blue-100 p-6 overflow-auto\">\n      <div className=\"max-w-7xl mx-auto\">\n        {/* Header */}\n        <div className=\"mb-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <div>\n              <h1 className=\"text-2xl font-bold text-cyan-100 font-mono\">pacman</h1>\n              <p className=\"text-blue-300 text-sm font-mono\">Arch Linux Package Manager</p>\n            </div>\n            <Button\n              onClick={handleUpdateSystem}\n              disabled={isUpdating}\n              className=\"bg-cyan-600 hover:bg-cyan-700 text-white font-mono\"\n            >\n              {isUpdating ? (\n                <>\n                  <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Updating...\n                </>\n              ) : (\n                <>\n                  <RefreshCw className=\"w-4 h-4 mr-2\" />\n                  pacman -Syu\n                </>\n              )}\n            </Button>\n          </div>\n\n          {/* Search and Filters */}\n          <div className=\"flex flex-col md:flex-row gap-4 mb-6\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-blue-400 w-4 h-4\" />\n              <Input\n                placeholder=\"Search packages...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10 bg-blue-900/50 border-blue-400/30 text-blue-100 placeholder-blue-300 font-mono\"\n              />\n            </div>\n            \n            <select\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value)}\n              className=\"px-3 py-2 bg-blue-900/50 border border-blue-400/30 rounded-md text-blue-100 font-mono\"\n            >\n              {categories.map(cat => (\n                <option key={cat} value={cat} className=\"bg-blue-900\">\n                  {cat === 'all' ? 'All Categories' : cat.charAt(0).toUpperCase() + cat.slice(1)}\n                </option>\n              ))}\n            </select>\n\n            <select\n              value={selectedRepository}\n              onChange={(e) => setSelectedRepository(e.target.value)}\n              className=\"px-3 py-2 bg-blue-900/50 border border-blue-400/30 rounded-md text-blue-100 font-mono\"\n            >\n              {repositories.map(repo => (\n                <option key={repo} value={repo} className=\"bg-blue-900\">\n                  {repo === 'all' ? 'All Repositories' : repo.toUpperCase()}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        <Tabs defaultValue=\"browse\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-3 bg-blue-900/50 border-blue-400/30\">\n            <TabsTrigger value=\"browse\" className=\"font-mono data-[state=active]:bg-cyan-600\">\n              Browse Packages\n            </TabsTrigger>\n            <TabsTrigger value=\"installed\" className=\"font-mono data-[state=active]:bg-cyan-600\">\n              Installed ({installedPackages.length})\n            </TabsTrigger>\n            <TabsTrigger value=\"updates\" className=\"font-mono data-[state=active]:bg-cyan-600\">\n              Updates\n            </TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"browse\" className=\"mt-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {filteredPackages.map(pkg => (\n                <Card key={pkg.id} className=\"bg-blue-900/30 border-blue-400/30 hover:bg-blue-800/40 transition-colors\">\n                  <CardHeader className=\"pb-2\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        {getCategoryIcon(pkg.category)}\n                        <CardTitle className=\"text-cyan-100 font-mono text-lg\">{pkg.name}</CardTitle>\n                      </div>\n                      <div className=\"flex gap-1\">\n                        <Badge className={`${getRepositoryBadgeColor(pkg.repository)} text-white text-xs`}>\n                          {pkg.repository.toUpperCase()}\n                        </Badge>\n                        {pkg.official && (\n                          <Badge className=\"bg-green-600 text-white text-xs\">\n                            Official\n                          </Badge>\n                        )}\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-blue-300\">\n                      <span className=\"font-mono\">{pkg.version}</span>\n                      <span>•</span>\n                      <span>{pkg.size}</span>\n                      <span>•</span>\n                      <div className=\"flex items-center gap-1\">\n                        <Star className=\"w-3 h-3 fill-yellow-400 text-yellow-400\" />\n                        <span>{pkg.popularity}%</span>\n                      </div>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <CardDescription className=\"text-blue-200 mb-3 text-sm\">\n                      {pkg.description}\n                    </CardDescription>\n                    \n                    <div className=\"space-y-2 mb-4\">\n                      <div className=\"text-xs text-blue-300\">\n                        <strong>Maintainer:</strong> {pkg.maintainer}\n                      </div>\n                      <div className=\"text-xs text-blue-300\">\n                        <strong>Last Update:</strong> {pkg.lastUpdate}\n                      </div>\n                      {pkg.dependencies.length > 0 && (\n                        <div className=\"text-xs text-blue-300\">\n                          <strong>Dependencies:</strong> {pkg.dependencies.join(', ')}\n                        </div>\n                      )}\n                    </div>\n\n                    {pkg.installed ? (\n                      <Button\n                        onClick={() => handleRemovePackage(pkg.id)}\n                        disabled={removingPackages.has(pkg.id)}\n                        variant=\"destructive\"\n                        size=\"sm\"\n                        className=\"w-full font-mono\"\n                      >\n                        {removingPackages.has(pkg.id) ? (\n                          <>\n                            <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n                            Removing...\n                          </>\n                        ) : (\n                          <>\n                            <Trash2 className=\"w-4 h-4 mr-2\" />\n                            pacman -R\n                          </>\n                        )}\n                      </Button>\n                    ) : (\n                      <Button\n                        onClick={() => handleInstallPackage(pkg.id)}\n                        disabled={installingPackages.has(pkg.id)}\n                        className=\"w-full bg-cyan-600 hover:bg-cyan-700 font-mono\"\n                      >\n                        {installingPackages.has(pkg.id) ? (\n                          <>\n                            <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n                            Installing...\n                          </>\n                        ) : (\n                          <>\n                            <Download className=\"w-4 h-4 mr-2\" />\n                            pacman -S\n                          </>\n                        )}\n                      </Button>\n                    )}\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"installed\" className=\"mt-6\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n              {installedPackages.map(pkg => (\n                <Card key={pkg.id} className=\"bg-green-900/20 border-green-400/30\">\n                  <CardHeader className=\"pb-2\">\n                    <div className=\"flex items-start justify-between\">\n                      <div className=\"flex items-center gap-2\">\n                        {getCategoryIcon(pkg.category)}\n                        <CardTitle className=\"text-green-100 font-mono text-lg\">{pkg.name}</CardTitle>\n                      </div>\n                      <Badge className=\"bg-green-600 text-white text-xs\">\n                        Installed\n                      </Badge>\n                    </div>\n                    <div className=\"flex items-center gap-2 text-sm text-green-300\">\n                      <span className=\"font-mono\">{pkg.version}</span>\n                      <span>•</span>\n                      <span>{pkg.size}</span>\n                    </div>\n                  </CardHeader>\n                  <CardContent>\n                    <CardDescription className=\"text-green-200 mb-3 text-sm\">\n                      {pkg.description}\n                    </CardDescription>\n                    \n                    <Button\n                      onClick={() => handleRemovePackage(pkg.id)}\n                      disabled={removingPackages.has(pkg.id)}\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      className=\"w-full font-mono\"\n                    >\n                      {removingPackages.has(pkg.id) ? (\n                        <>\n                          <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n                          Removing...\n                        </>\n                      ) : (\n                        <>\n                          <Trash2 className=\"w-4 h-4 mr-2\" />\n                          pacman -R {pkg.name}\n                        </>\n                      )}\n                    </Button>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"updates\" className=\"mt-6\">\n            <Card className=\"bg-blue-900/30 border-blue-400/30\">\n              <CardHeader>\n                <CardTitle className=\"text-cyan-100 font-mono flex items-center gap-2\">\n                  <Clock className=\"w-5 h-5\" />\n                  System Updates\n                </CardTitle>\n                <CardDescription className=\"text-blue-200\">\n                  Check for and install system updates\n                </CardDescription>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-center py-8\">\n                  <Package className=\"w-16 h-16 text-blue-400 mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium text-blue-100 mb-2\">System Up to Date</h3>\n                  <p className=\"text-blue-300 mb-4\">All packages are running the latest versions</p>\n                  <Button\n                    onClick={handleUpdateSystem}\n                    disabled={isUpdating}\n                    className=\"bg-cyan-600 hover:bg-cyan-700 font-mono\"\n                  >\n                    {isUpdating ? (\n                      <>\n                        <RefreshCw className=\"w-4 h-4 mr-2 animate-spin\" />\n                        Checking for updates...\n                      </>\n                    ) : (\n                      <>\n                        <RefreshCw className=\"w-4 h-4 mr-2\" />\n                        Check for Updates\n                      </>\n                    )}\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":28422},"client/src/components/apps/PackageManagerPro.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Package, Download, Search, Star, Shield, RefreshCw, Trash2, CheckCircle } from 'lucide-react';\n\ninterface PackageInfo {\n  id: string;\n  name: string;\n  version: string;\n  description: string;\n  category: string;\n  size: number;\n  rating: number;\n  downloads: number;\n  author: string;\n  status: 'available' | 'installed' | 'updating';\n  dependencies: string[];\n  repository: string;\n  verified: boolean;\n}\n\nexport const PackageManagerPro: FC = () => {\n  const [packages, setPackages] = useState<PackageInfo[]>([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [activeTab, setActiveTab] = useState('browse');\n  const [installProgress, setInstallProgress] = useState<{[key: string]: number}>({});\n\n  useEffect(() => {\n    loadPackages();\n  }, []);\n\n  const loadPackages = () => {\n    const mockPackages: PackageInfo[] = [\n      {\n        id: 'firefox',\n        name: 'Firefox Browser',\n        version: '121.0',\n        description: 'Fast, secure web browser with privacy protection',\n        category: 'Web Browsers',\n        size: 89600000,\n        rating: 4.8,\n        downloads: 2500000,\n        author: 'Mozilla Foundation',\n        status: 'available',\n        dependencies: ['libgtk-3', 'libssl'],\n        repository: 'official',\n        verified: true\n      },\n      {\n        id: 'vscode',\n        name: 'Visual Studio Code',\n        version: '1.85.1',\n        description: 'Powerful code editor with IntelliSense and debugging',\n        category: 'Development',\n        size: 156700000,\n        rating: 4.9,\n        downloads: 5000000,\n        author: 'Microsoft',\n        status: 'installed',\n        dependencies: ['electron', 'nodejs'],\n        repository: 'official',\n        verified: true\n      },\n      {\n        id: 'gimp',\n        name: 'GIMP',\n        version: '2.10.36',\n        description: 'GNU Image Manipulation Program for photo editing',\n        category: 'Graphics',\n        size: 267800000,\n        rating: 4.6,\n        downloads: 1800000,\n        author: 'GIMP Team',\n        status: 'available',\n        dependencies: ['libgimp', 'python3'],\n        repository: 'official',\n        verified: true\n      },\n      {\n        id: 'discord',\n        name: 'Discord',\n        version: '0.0.40',\n        description: 'Voice, video and text communication platform',\n        category: 'Communication',\n        size: 124500000,\n        rating: 4.7,\n        downloads: 3200000,\n        author: 'Discord Inc.',\n        status: 'available',\n        dependencies: ['electron'],\n        repository: 'third-party',\n        verified: true\n      },\n      {\n        id: 'blender',\n        name: 'Blender',\n        version: '4.0.2',\n        description: '3D creation suite for modeling, animation, and rendering',\n        category: 'Graphics',\n        size: 445600000,\n        rating: 4.8,\n        downloads: 980000,\n        author: 'Blender Foundation',\n        status: 'available',\n        dependencies: ['python3', 'ffmpeg'],\n        repository: 'official',\n        verified: true\n      }\n    ];\n    setPackages(mockPackages);\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  const installPackage = (packageId: string) => {\n    setInstallProgress(prev => ({ ...prev, [packageId]: 0 }));\n    \n    const interval = setInterval(() => {\n      setInstallProgress(prev => {\n        const currentProgress = prev[packageId] || 0;\n        if (currentProgress >= 100) {\n          clearInterval(interval);\n          setPackages(pkgs => pkgs.map(pkg => \n            pkg.id === packageId ? { ...pkg, status: 'installed' as const } : pkg\n          ));\n          return { ...prev, [packageId]: 100 };\n        }\n        return { ...prev, [packageId]: currentProgress + 10 };\n      });\n    }, 300);\n  };\n\n  const uninstallPackage = (packageId: string) => {\n    setPackages(prev => prev.map(pkg => \n      pkg.id === packageId ? { ...pkg, status: 'available' as const } : pkg\n    ));\n  };\n\n  const categories = ['all', 'Development', 'Web Browsers', 'Graphics', 'Communication', 'Games', 'Utilities'];\n\n  const filteredPackages = packages.filter(pkg => {\n    const matchesSearch = pkg.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         pkg.description.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || pkg.category === selectedCategory;\n    return matchesSearch && matchesCategory;\n  });\n\n  const installedPackages = packages.filter(pkg => pkg.status === 'installed');\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center gap-2 mb-4\">\n          <Package className=\"h-6 w-6 text-primary\" />\n          <h1 className=\"text-xl font-semibold\">Package Manager</h1>\n          <Badge variant=\"secondary\">WebOS Repository</Badge>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList>\n            <TabsTrigger value=\"browse\">Browse</TabsTrigger>\n            <TabsTrigger value=\"installed\">Installed ({installedPackages.length})</TabsTrigger>\n            <TabsTrigger value=\"updates\">Updates</TabsTrigger>\n            <TabsTrigger value=\"repositories\">Repositories</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      <div className=\"flex-1 overflow-auto\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsContent value=\"browse\" className=\"p-4 space-y-4\">\n            <div className=\"flex gap-4\">\n              <div className=\"flex-1 relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search packages...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n              <Button variant=\"outline\">\n                <RefreshCw className=\"h-4 w-4 mr-2\" />\n                Refresh\n              </Button>\n            </div>\n\n            <div className=\"flex gap-2 flex-wrap\">\n              {categories.map(category => (\n                <Button\n                  key={category}\n                  variant={selectedCategory === category ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => setSelectedCategory(category)}\n                >\n                  {category === 'all' ? 'All Categories' : category}\n                </Button>\n              ))}\n            </div>\n\n            <div className=\"grid gap-4\">\n              {filteredPackages.map((pkg) => (\n                <Card key={pkg.id} className=\"hover:shadow-lg transition-shadow\">\n                  <CardContent className=\"p-6\">\n                    <div className=\"flex justify-between items-start\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <h3 className=\"text-lg font-semibold\">{pkg.name}</h3>\n                          <Badge variant=\"secondary\">{pkg.version}</Badge>\n                          {pkg.verified && <Shield className=\"h-4 w-4 text-green-500\" />}\n                        </div>\n                        \n                        <p className=\"text-muted-foreground mb-3\">{pkg.description}</p>\n                        \n                        <div className=\"flex items-center gap-4 text-sm text-muted-foreground\">\n                          <span>By {pkg.author}</span>\n                          <span>{formatFileSize(pkg.size)}</span>\n                          <div className=\"flex items-center gap-1\">\n                            <Star className=\"h-3 w-3 fill-yellow-400 text-yellow-400\" />\n                            <span>{pkg.rating}</span>\n                          </div>\n                          <span>{pkg.downloads.toLocaleString()} downloads</span>\n                        </div>\n\n                        {pkg.dependencies.length > 0 && (\n                          <div className=\"mt-2\">\n                            <span className=\"text-xs text-muted-foreground\">Dependencies: </span>\n                            {pkg.dependencies.map(dep => (\n                              <Badge key={dep} variant=\"outline\" className=\"text-xs mr-1\">\n                                {dep}\n                              </Badge>\n                            ))}\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"ml-4 flex flex-col gap-2\">\n                        {pkg.status === 'installed' ? (\n                          <div className=\"flex flex-col gap-2\">\n                            <Badge variant=\"default\" className=\"justify-center\">\n                              <CheckCircle className=\"h-3 w-3 mr-1\" />\n                              Installed\n                            </Badge>\n                            <Button variant=\"outline\" size=\"sm\" onClick={() => uninstallPackage(pkg.id)}>\n                              <Trash2 className=\"h-4 w-4 mr-2\" />\n                              Remove\n                            </Button>\n                          </div>\n                        ) : (\n                          <Button onClick={() => installPackage(pkg.id)} disabled={pkg.id in installProgress}>\n                            <Download className=\"h-4 w-4 mr-2\" />\n                            Install\n                          </Button>\n                        )}\n\n                        {pkg.id in installProgress && (\n                          <div className=\"w-32\">\n                            <div className=\"flex justify-between text-xs mb-1\">\n                              <span>Installing...</span>\n                              <span>{installProgress[pkg.id]}%</span>\n                            </div>\n                            <Progress value={installProgress[pkg.id]} className=\"h-1\" />\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"installed\" className=\"p-4 space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-lg font-semibold\">Installed Packages</h2>\n              <Badge variant=\"outline\">{installedPackages.length} packages</Badge>\n            </div>\n\n            <div className=\"grid gap-4\">\n              {installedPackages.map((pkg) => (\n                <Card key={pkg.id}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex justify-between items-center\">\n                      <div>\n                        <div className=\"flex items-center gap-2\">\n                          <h3 className=\"font-semibold\">{pkg.name}</h3>\n                          <Badge variant=\"secondary\">{pkg.version}</Badge>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground\">{pkg.description}</p>\n                        <div className=\"text-xs text-muted-foreground mt-1\">\n                          {formatFileSize(pkg.size)} • {pkg.author}\n                        </div>\n                      </div>\n                      \n                      <div className=\"flex gap-2\">\n                        <Button variant=\"outline\" size=\"sm\">Update</Button>\n                        <Button variant=\"outline\" size=\"sm\" onClick={() => uninstallPackage(pkg.id)}>\n                          <Trash2 className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n\n            {installedPackages.length === 0 && (\n              <div className=\"text-center py-12\">\n                <Package className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                <h3 className=\"text-lg font-medium mb-2\">No packages installed</h3>\n                <p className=\"text-muted-foreground\">Browse the package repository to install applications</p>\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"updates\" className=\"p-4\">\n            <div className=\"text-center py-12\">\n              <RefreshCw className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n              <h3 className=\"text-lg font-medium mb-2\">No updates available</h3>\n              <p className=\"text-muted-foreground\">All installed packages are up to date</p>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"repositories\" className=\"p-4 space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Configured Repositories</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex justify-between items-center p-3 border rounded\">\n                  <div>\n                    <div className=\"font-medium\">Official WebOS Repository</div>\n                    <div className=\"text-sm text-muted-foreground\">https://packages.webos.dev/</div>\n                  </div>\n                  <Badge variant=\"default\">Official</Badge>\n                </div>\n                \n                <div className=\"flex justify-between items-center p-3 border rounded\">\n                  <div>\n                    <div className=\"font-medium\">Community Repository</div>\n                    <div className=\"text-sm text-muted-foreground\">https://community.webos.dev/</div>\n                  </div>\n                  <Badge variant=\"secondary\">Community</Badge>\n                </div>\n\n                <Button variant=\"outline\" className=\"w-full\">\n                  Add Repository\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":14669},"client/src/components/apps/PerformanceMonitor.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Activity, Cpu, HardDrive, Wifi, BarChart3, TrendingUp, TrendingDown, Zap, Clock, AlertTriangle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\n\ninterface AppPerformance {\n  id: string;\n  name: string;\n  icon: string;\n  pid: number;\n  cpuUsage: number;\n  memoryUsage: number;\n  diskUsage: number;\n  networkUsage: number;\n  uptime: number;\n  responseTime: number;\n  crashes: number;\n  status: 'running' | 'idle' | 'suspended' | 'error';\n  priority: 'low' | 'normal' | 'high' | 'critical';\n  threads: number;\n  handles: number;\n  powerUsage: number;\n  gpuUsage?: number;\n}\n\ninterface SystemMetrics {\n  totalCpuUsage: number;\n  totalMemoryUsage: number;\n  totalDiskUsage: number;\n  totalNetworkUsage: number;\n  temperature: number;\n  batteryLevel: number;\n  powerConsumption: number;\n  processorCount: number;\n  totalMemory: number;\n  availableMemory: number;\n}\n\nexport const PerformanceMonitor: FC = () => {\n  const [apps, setApps] = useState<AppPerformance[]>([]);\n  const [systemMetrics, setSystemMetrics] = useState<SystemMetrics>({\n    totalCpuUsage: 0,\n    totalMemoryUsage: 0,\n    totalDiskUsage: 0,\n    totalNetworkUsage: 0,\n    temperature: 45,\n    batteryLevel: 85,\n    powerConsumption: 25,\n    processorCount: 8,\n    totalMemory: 16384,\n    availableMemory: 8192\n  });\n  const [selectedApp, setSelectedApp] = useState<string | null>(null);\n  const [sortBy, setSortBy] = useState<'cpu' | 'memory' | 'disk' | 'network'>('cpu');\n  const [isMonitoring, setIsMonitoring] = useState(false);\n  const [refreshRate, setRefreshRate] = useState(1000);\n\n  // Simulate real app performance data\n  useEffect(() => {\n    const generateAppPerformance = (): AppPerformance[] => {\n      const installedApps = JSON.parse(localStorage.getItem('desktop-apps') || '[]');\n      const systemApps = [\n        { id: 'terminal', name: 'Terminal', icon: 'terminal' },\n        { id: 'browser', name: 'Firefox', icon: 'browser' },\n        { id: 'file-manager', name: 'Files', icon: 'folder' },\n        { id: 'package-manager', name: 'App Store', icon: 'package' }\n      ];\n\n      const allApps = [...systemApps, ...installedApps];\n      \n      return allApps.map((app, index) => ({\n        id: app.id,\n        name: app.name,\n        icon: app.icon,\n        pid: 1000 + index * 100 + Math.floor(Math.random() * 50),\n        cpuUsage: Math.random() * 25 + (app.id === 'browser' ? 15 : 2),\n        memoryUsage: Math.random() * 512 + (app.id === 'browser' ? 256 : 64),\n        diskUsage: Math.random() * 10 + 1,\n        networkUsage: Math.random() * 50 + (app.id === 'browser' ? 25 : 1),\n        uptime: Math.floor(Math.random() * 86400) + 3600,\n        responseTime: Math.random() * 100 + 10,\n        crashes: Math.floor(Math.random() * 3),\n        status: Math.random() > 0.1 ? 'running' : (Math.random() > 0.5 ? 'idle' : 'suspended'),\n        priority: ['low', 'normal', 'high'][Math.floor(Math.random() * 3)] as 'low' | 'normal' | 'high',\n        threads: Math.floor(Math.random() * 20) + 1,\n        handles: Math.floor(Math.random() * 500) + 50,\n        powerUsage: Math.random() * 5 + 1,\n        gpuUsage: app.id === 'browser' || app.id === 'video-editor' ? Math.random() * 30 : undefined\n      }));\n    };\n\n    const updateMetrics = () => {\n      const newApps = generateAppPerformance();\n      setApps(newApps);\n\n      // Calculate system totals\n      const totalCpu = newApps.reduce((sum, app) => sum + app.cpuUsage, 0);\n      const totalMemory = newApps.reduce((sum, app) => sum + app.memoryUsage, 0);\n      const totalDisk = newApps.reduce((sum, app) => sum + app.diskUsage, 0);\n      const totalNetwork = newApps.reduce((sum, app) => sum + app.networkUsage, 0);\n\n      setSystemMetrics(prev => ({\n        ...prev,\n        totalCpuUsage: Math.min(totalCpu, 100),\n        totalMemoryUsage: (totalMemory / prev.totalMemory) * 100,\n        totalDiskUsage: Math.min(totalDisk, 100),\n        totalNetworkUsage: Math.min(totalNetwork, 100),\n        temperature: 35 + (totalCpu * 0.3) + Math.random() * 5,\n        powerConsumption: 15 + (totalCpu * 0.5) + Math.random() * 10\n      }));\n    };\n\n    updateMetrics();\n\n    if (isMonitoring) {\n      const interval = setInterval(updateMetrics, refreshRate);\n      return () => clearInterval(interval);\n    }\n  }, [isMonitoring, refreshRate]);\n\n  const formatUptime = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const formatBytes = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'bg-green-500';\n      case 'idle': return 'bg-yellow-500';\n      case 'suspended': return 'bg-blue-500';\n      case 'error': return 'bg-red-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const getPriorityColor = (priority: string) => {\n    switch (priority) {\n      case 'critical': return 'text-red-600 bg-red-100';\n      case 'high': return 'text-orange-600 bg-orange-100';\n      case 'normal': return 'text-blue-600 bg-blue-100';\n      case 'low': return 'text-gray-600 bg-gray-100';\n      default: return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const sortedApps = [...apps].sort((a, b) => {\n    switch (sortBy) {\n      case 'cpu': return b.cpuUsage - a.cpuUsage;\n      case 'memory': return b.memoryUsage - a.memoryUsage;\n      case 'disk': return b.diskUsage - a.diskUsage;\n      case 'network': return b.networkUsage - a.networkUsage;\n      default: return 0;\n    }\n  });\n\n  const selectedAppData = selectedApp ? apps.find(app => app.id === selectedApp) : null;\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 overflow-hidden\">\n      {/* Header */}\n      <div className=\"bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <Activity className=\"w-6 h-6 text-blue-600\" />\n            <h1 className=\"text-xl font-bold text-gray-900 dark:text-white\">Performance Monitor</h1>\n            <Badge className={`${isMonitoring ? 'bg-green-500' : 'bg-gray-500'} text-white`}>\n              {isMonitoring ? 'LIVE' : 'PAUSED'}\n            </Badge>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <select \n              value={refreshRate} \n              onChange={(e) => setRefreshRate(Number(e.target.value))}\n              className=\"px-3 py-1 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-sm\"\n            >\n              <option value={500}>0.5s</option>\n              <option value={1000}>1s</option>\n              <option value={2000}>2s</option>\n              <option value={5000}>5s</option>\n            </select>\n            <Button \n              onClick={() => setIsMonitoring(!isMonitoring)}\n              className={`${isMonitoring ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'} text-white`}\n            >\n              {isMonitoring ? 'Stop' : 'Start'} Monitoring\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex h-full\">\n        {/* Sidebar - System Overview */}\n        <div className=\"w-80 bg-white/50 dark:bg-gray-800/50 backdrop-blur-sm border-r border-gray-200 dark:border-gray-700 p-4 overflow-y-auto\">\n          <h2 className=\"text-lg font-semibold mb-4 text-gray-900 dark:text-white\">System Overview</h2>\n          \n          <div className=\"space-y-4\">\n            {/* CPU Usage */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Cpu className=\"w-4 h-4 text-blue-600\" />\n                  <span className=\"text-sm font-medium\">CPU Usage</span>\n                </div>\n                <span className=\"text-sm font-bold text-blue-600\">\n                  {systemMetrics.totalCpuUsage.toFixed(1)}%\n                </span>\n              </div>\n              <Progress value={systemMetrics.totalCpuUsage} className=\"h-2\" />\n              <div className=\"text-xs text-gray-500 mt-1\">\n                {systemMetrics.processorCount} cores • {systemMetrics.temperature.toFixed(1)}°C\n              </div>\n            </div>\n\n            {/* Memory Usage */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <HardDrive className=\"w-4 h-4 text-green-600\" />\n                  <span className=\"text-sm font-medium\">Memory</span>\n                </div>\n                <span className=\"text-sm font-bold text-green-600\">\n                  {systemMetrics.totalMemoryUsage.toFixed(1)}%\n                </span>\n              </div>\n              <Progress value={systemMetrics.totalMemoryUsage} className=\"h-2\" />\n              <div className=\"text-xs text-gray-500 mt-1\">\n                {formatBytes(systemMetrics.availableMemory * 1024 * 1024)} free of {formatBytes(systemMetrics.totalMemory * 1024 * 1024)}\n              </div>\n            </div>\n\n            {/* Network Usage */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Wifi className=\"w-4 h-4 text-purple-600\" />\n                  <span className=\"text-sm font-medium\">Network</span>\n                </div>\n                <span className=\"text-sm font-bold text-purple-600\">\n                  {systemMetrics.totalNetworkUsage.toFixed(1)} MB/s\n                </span>\n              </div>\n              <Progress value={Math.min(systemMetrics.totalNetworkUsage, 100)} className=\"h-2\" />\n            </div>\n\n            {/* Power & Battery */}\n            <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <div className=\"flex items-center gap-2\">\n                  <Zap className=\"w-4 h-4 text-yellow-600\" />\n                  <span className=\"text-sm font-medium\">Power</span>\n                </div>\n                <span className=\"text-sm font-bold text-yellow-600\">\n                  {systemMetrics.powerConsumption.toFixed(1)}W\n                </span>\n              </div>\n              <Progress value={systemMetrics.batteryLevel} className=\"h-2\" />\n              <div className=\"text-xs text-gray-500 mt-1\">\n                Battery: {systemMetrics.batteryLevel}%\n              </div>\n            </div>\n          </div>\n\n          {/* Quick Actions */}\n          <div className=\"mt-6\">\n            <h3 className=\"text-sm font-semibold mb-3 text-gray-900 dark:text-white\">Quick Actions</h3>\n            <div className=\"space-y-2\">\n              <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                <BarChart3 className=\"w-4 h-4 mr-2\" />\n                Export Report\n              </Button>\n              <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                <AlertTriangle className=\"w-4 h-4 mr-2\" />\n                Kill High CPU Apps\n              </Button>\n              <Button variant=\"outline\" size=\"sm\" className=\"w-full justify-start\">\n                <TrendingUp className=\"w-4 h-4 mr-2\" />\n                Optimize Performance\n              </Button>\n            </div>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 overflow-hidden\">\n          {selectedAppData ? (\n            /* Detailed App View */\n            <div className=\"h-full overflow-y-auto\">\n              <div className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"w-12 h-12 bg-gradient-to-br from-blue-400 to-purple-600 rounded-xl flex items-center justify-center\">\n                      <span className=\"text-white text-lg font-bold\">{selectedAppData.name.charAt(0)}</span>\n                    </div>\n                    <div>\n                      <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">{selectedAppData.name}</h2>\n                      <div className=\"flex items-center gap-2 mt-1\">\n                        <div className={`w-2 h-2 rounded-full ${getStatusColor(selectedAppData.status)}`}></div>\n                        <span className=\"text-sm text-gray-600 dark:text-gray-400 capitalize\">{selectedAppData.status}</span>\n                        <Badge className={getPriorityColor(selectedAppData.priority)}>\n                          {selectedAppData.priority}\n                        </Badge>\n                      </div>\n                    </div>\n                  </div>\n                  <Button variant=\"outline\" onClick={() => setSelectedApp(null)}>\n                    Back to Overview\n                  </Button>\n                </div>\n\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">CPU Usage</p>\n                        <p className=\"text-2xl font-bold text-blue-600\">{selectedAppData.cpuUsage.toFixed(1)}%</p>\n                      </div>\n                      <Cpu className=\"w-8 h-8 text-blue-600\" />\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">Memory</p>\n                        <p className=\"text-2xl font-bold text-green-600\">{formatBytes(selectedAppData.memoryUsage * 1024 * 1024)}</p>\n                      </div>\n                      <HardDrive className=\"w-8 h-8 text-green-600\" />\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">Network</p>\n                        <p className=\"text-2xl font-bold text-purple-600\">{selectedAppData.networkUsage.toFixed(1)} KB/s</p>\n                      </div>\n                      <Wifi className=\"w-8 h-8 text-purple-600\" />\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-sm text-gray-600 dark:text-gray-400\">Uptime</p>\n                        <p className=\"text-lg font-bold text-orange-600\">{formatUptime(selectedAppData.uptime)}</p>\n                      </div>\n                      <Clock className=\"w-8 h-8 text-orange-600\" />\n                    </div>\n                  </div>\n                </div>\n\n                {/* Detailed Info */}\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm\">\n                    <h3 className=\"text-lg font-semibold mb-4\">Process Information</h3>\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Process ID</span>\n                        <span className=\"font-mono\">{selectedAppData.pid}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Threads</span>\n                        <span>{selectedAppData.threads}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Handles</span>\n                        <span>{selectedAppData.handles.toLocaleString()}</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Response Time</span>\n                        <span>{selectedAppData.responseTime.toFixed(0)}ms</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span className=\"text-gray-600 dark:text-gray-400\">Crashes</span>\n                        <span className={selectedAppData.crashes > 0 ? 'text-red-600' : 'text-green-600'}>\n                          {selectedAppData.crashes}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"bg-white dark:bg-gray-800 rounded-lg p-6 shadow-sm\">\n                    <h3 className=\"text-lg font-semibold mb-4\">Resource Usage</h3>\n                    <div className=\"space-y-4\">\n                      <div>\n                        <div className=\"flex justify-between mb-1\">\n                          <span className=\"text-sm\">CPU</span>\n                          <span className=\"text-sm font-medium\">{selectedAppData.cpuUsage.toFixed(1)}%</span>\n                        </div>\n                        <Progress value={selectedAppData.cpuUsage} className=\"h-2\" />\n                      </div>\n                      <div>\n                        <div className=\"flex justify-between mb-1\">\n                          <span className=\"text-sm\">Memory</span>\n                          <span className=\"text-sm font-medium\">{formatBytes(selectedAppData.memoryUsage * 1024 * 1024)}</span>\n                        </div>\n                        <Progress value={(selectedAppData.memoryUsage / systemMetrics.totalMemory) * 100} className=\"h-2\" />\n                      </div>\n                      <div>\n                        <div className=\"flex justify-between mb-1\">\n                          <span className=\"text-sm\">Power Usage</span>\n                          <span className=\"text-sm font-medium\">{selectedAppData.powerUsage.toFixed(1)}W</span>\n                        </div>\n                        <Progress value={(selectedAppData.powerUsage / 10) * 100} className=\"h-2\" />\n                      </div>\n                      {selectedAppData.gpuUsage && (\n                        <div>\n                          <div className=\"flex justify-between mb-1\">\n                            <span className=\"text-sm\">GPU</span>\n                            <span className=\"text-sm font-medium\">{selectedAppData.gpuUsage.toFixed(1)}%</span>\n                          </div>\n                          <Progress value={selectedAppData.gpuUsage} className=\"h-2\" />\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            /* App List View */\n            <div className=\"h-full overflow-y-auto\">\n              <div className=\"p-6\">\n                {/* Sort Controls */}\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h2 className=\"text-xl font-bold text-gray-900 dark:text-white\">Running Applications</h2>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm text-gray-600 dark:text-gray-400\">Sort by:</span>\n                    {(['cpu', 'memory', 'disk', 'network'] as const).map((metric) => (\n                      <Button\n                        key={metric}\n                        variant={sortBy === metric ? 'default' : 'outline'}\n                        size=\"sm\"\n                        onClick={() => setSortBy(metric)}\n                        className=\"capitalize\"\n                      >\n                        {metric === 'cpu' ? 'CPU' : metric}\n                      </Button>\n                    ))}\n                  </div>\n                </div>\n\n                {/* Apps Table */}\n                <div className=\"bg-white dark:bg-gray-800 rounded-lg shadow-sm overflow-hidden\">\n                  <div className=\"overflow-x-auto\">\n                    <table className=\"w-full\">\n                      <thead className=\"bg-gray-50 dark:bg-gray-700\">\n                        <tr>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Application\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Status\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            CPU %\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Memory\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Network\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Uptime\n                          </th>\n                          <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider\">\n                            Actions\n                          </th>\n                        </tr>\n                      </thead>\n                      <tbody className=\"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700\">\n                        {sortedApps.map((app) => (\n                          <tr \n                            key={app.id}\n                            className=\"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer\"\n                            onClick={() => setSelectedApp(app.id)}\n                          >\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-600 rounded-lg flex items-center justify-center mr-3\">\n                                  <span className=\"text-white text-xs font-bold\">{app.name.charAt(0)}</span>\n                                </div>\n                                <div>\n                                  <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{app.name}</div>\n                                  <div className=\"text-sm text-gray-500\">PID: {app.pid}</div>\n                                </div>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className={`w-2 h-2 rounded-full mr-2 ${getStatusColor(app.status)}`}></div>\n                                <span className=\"text-sm text-gray-900 dark:text-white capitalize\">{app.status}</span>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap\">\n                              <div className=\"flex items-center\">\n                                <div className=\"w-16 mr-2\">\n                                  <Progress value={app.cpuUsage} className=\"h-2\" />\n                                </div>\n                                <span className=\"text-sm text-gray-900 dark:text-white\">{app.cpuUsage.toFixed(1)}%</span>\n                              </div>\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                              {formatBytes(app.memoryUsage * 1024 * 1024)}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                              {app.networkUsage.toFixed(1)} KB/s\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                              {formatUptime(app.uptime)}\n                            </td>\n                            <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  setSelectedApp(app.id);\n                                }}\n                              >\n                                Details\n                              </Button>\n                            </td>\n                          </tr>\n                        ))}\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":26604},"client/src/components/apps/Presentation.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { \n  Save, Download, Upload, Plus, Minus, Play, Square, SkipBack, SkipForward,\n  Type, Image, BarChart3, Shapes, Palette, Bold, Italic, Underline,\n  AlignLeft, AlignCenter, AlignRight, RotateCcw, Copy, Trash2,\n  Monitor, Eye, Grid3X3, Layout, FileImage, Video\n} from 'lucide-react';\n\ninterface SlideElement {\n  id: string;\n  type: 'text' | 'image' | 'shape' | 'chart';\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  content: string;\n  style: {\n    fontSize?: number;\n    fontFamily?: string;\n    color?: string;\n    backgroundColor?: string;\n    bold?: boolean;\n    italic?: boolean;\n    underline?: boolean;\n    textAlign?: 'left' | 'center' | 'right';\n    borderWidth?: number;\n    borderColor?: string;\n    borderRadius?: number;\n  };\n}\n\ninterface Slide {\n  id: string;\n  title: string;\n  layout: 'title' | 'content' | 'two-column' | 'image' | 'blank';\n  backgroundColor: string;\n  backgroundImage?: string;\n  elements: SlideElement[];\n}\n\nexport const PresentationApp: FC = () => {\n  const [slides, setSlides] = useState<Slide[]>(() => {\n    const stored = localStorage.getItem('webos-presentation-slides');\n    if (stored) {\n      return JSON.parse(stored);\n    }\n    return [\n      {\n        id: '1',\n        title: 'Title Slide',\n        layout: 'title',\n        backgroundColor: '#ffffff',\n        elements: [\n          {\n            id: 'title-1',\n            type: 'text',\n            x: 50,\n            y: 150,\n            width: 600,\n            height: 100,\n            content: 'Click to add title',\n            style: {\n              fontSize: 44,\n              fontFamily: 'Calibri, Arial',\n              color: '#1f4e79',\n              bold: true,\n              textAlign: 'center'\n            }\n          },\n          {\n            id: 'subtitle-1',\n            type: 'text',\n            x: 50,\n            y: 280,\n            width: 600,\n            height: 60,\n            content: 'Click to add subtitle',\n            style: {\n              fontSize: 20,\n              fontFamily: 'Calibri, Arial',\n              color: '#70ad47',\n              textAlign: 'center'\n            }\n          }\n        ]\n      }\n    ];\n  });\n  \n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [selectedElement, setSelectedElement] = useState<string | null>(null);\n  const [isPresenting, setIsPresenting] = useState(false);\n  const [fileName, setFileName] = useState('Presentation1');\n  const [zoom, setZoom] = useState(100);\n  const [theme, setTheme] = useState('office');\n  const [showSlideTemplates, setShowSlideTemplates] = useState(false);\n  const [activeTab, setActiveTab] = useState('Home');\n  const canvasRef = useRef<HTMLDivElement>(null);\n\n  const themes = {\n    office: {\n      name: 'Office Theme',\n      colors: {\n        primary: '#1f4e79',\n        secondary: '#70ad47',\n        accent: '#ffc000',\n        background: '#ffffff',\n        text: '#333333'\n      }\n    },\n    ion: {\n      name: 'Ion',\n      colors: {\n        primary: '#0078d4',\n        secondary: '#005a9e',\n        accent: '#40e0d0',\n        background: '#f3f2f1',\n        text: '#323130'\n      }\n    },\n    facet: {\n      name: 'Facet',\n      colors: {\n        primary: '#4472c4',\n        secondary: '#e7e6e6',\n        accent: '#70ad47',\n        background: '#ffffff',\n        text: '#44546a'\n      }\n    }\n  };\n\n  const slideLayouts = [\n    { \n      id: 'title', \n      name: 'Title Slide',\n      icon: '📄',\n      elements: [\n        { type: 'text', placeholder: 'Click to add title', x: 50, y: 150, width: 600, height: 100, fontSize: 44, bold: true, textAlign: 'center' },\n        { type: 'text', placeholder: 'Click to add subtitle', x: 50, y: 280, width: 600, height: 60, fontSize: 20, textAlign: 'center' }\n      ]\n    },\n    { \n      id: 'content', \n      name: 'Title and Content',\n      icon: '📋',\n      elements: [\n        { type: 'text', placeholder: 'Click to add title', x: 50, y: 50, width: 600, height: 80, fontSize: 32, bold: true },\n        { type: 'text', placeholder: 'Click to add content', x: 50, y: 150, width: 600, height: 300, fontSize: 16 }\n      ]\n    },\n    { \n      id: 'two-column', \n      name: 'Two Content',\n      icon: '📊',\n      elements: [\n        { type: 'text', placeholder: 'Click to add title', x: 50, y: 50, width: 600, height: 80, fontSize: 32, bold: true },\n        { type: 'text', placeholder: 'Content', x: 50, y: 150, width: 290, height: 300, fontSize: 16 },\n        { type: 'text', placeholder: 'Content', x: 360, y: 150, width: 290, height: 300, fontSize: 16 }\n      ]\n    },\n    { \n      id: 'blank', \n      name: 'Blank',\n      icon: '⬜',\n      elements: []\n    }\n  ];\n\n  useEffect(() => {\n    const stored = localStorage.getItem('webos-presentation-data');\n    if (stored) {\n      const data = JSON.parse(stored);\n      setSlides(data.slides || slides);\n      setFileName(data.fileName || fileName);\n    }\n  }, []);\n\n  useEffect(() => {\n    const data = { slides, fileName };\n    localStorage.setItem('webos-presentation-data', JSON.stringify(data));\n  }, [slides, fileName]);\n\n  const addSlide = (layoutId: string = 'content') => {\n    const layout = slideLayouts.find(l => l.id === layoutId) || slideLayouts[1];\n    const currentTheme = themes[theme as keyof typeof themes];\n    \n    const newSlide: Slide = {\n      id: Date.now().toString(),\n      title: `Slide ${slides.length + 1}`,\n      layout: layoutId as Slide['layout'],\n      backgroundColor: currentTheme.colors.background,\n      elements: layout.elements.map((template, index) => ({\n        id: `${layoutId}-${Date.now()}-${index}`,\n        type: template.type as 'text',\n        x: template.x,\n        y: template.y,\n        width: template.width,\n        height: template.height,\n        content: template.placeholder,\n        style: {\n          fontSize: template.fontSize,\n          fontFamily: 'Calibri, Arial',\n          color: index === 0 ? currentTheme.colors.primary : currentTheme.colors.text,\n          bold: template.bold,\n          textAlign: template.textAlign as 'left' | 'center' | 'right'\n        }\n      }))\n    };\n    \n    setSlides([...slides, newSlide]);\n    setCurrentSlide(slides.length);\n    setShowSlideTemplates(false);\n  };\n\n  const deleteSlide = (index: number) => {\n    if (slides.length > 1) {\n      const newSlides = slides.filter((_, i) => i !== index);\n      setSlides(newSlides);\n      if (currentSlide >= newSlides.length) {\n        setCurrentSlide(newSlides.length - 1);\n      }\n    }\n  };\n\n  const addTextElement = () => {\n    const newElement: SlideElement = {\n      id: Date.now().toString(),\n      type: 'text',\n      x: 100,\n      y: 100,\n      width: 300,\n      height: 50,\n      content: 'New text box',\n      style: {\n        fontSize: 16,\n        fontFamily: 'Arial',\n        color: '#333333',\n        textAlign: 'left'\n      }\n    };\n\n    const updatedSlides = [...slides];\n    updatedSlides[currentSlide].elements.push(newElement);\n    setSlides(updatedSlides);\n  };\n\n  const updateElement = (elementId: string, updates: Partial<SlideElement>) => {\n    const updatedSlides = [...slides];\n    const elementIndex = updatedSlides[currentSlide].elements.findIndex(el => el.id === elementId);\n    if (elementIndex !== -1) {\n      updatedSlides[currentSlide].elements[elementIndex] = {\n        ...updatedSlides[currentSlide].elements[elementIndex],\n        ...updates\n      };\n      setSlides(updatedSlides);\n    }\n  };\n\n  const exportToPDF = () => {\n    // Simulate PDF export\n    const blob = new Blob(['PDF Export Coming Soon'], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${fileName}.pdf`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const startPresentation = () => {\n    setIsPresenting(true);\n    setCurrentSlide(0);\n  };\n\n  const nextSlide = () => {\n    if (currentSlide < slides.length - 1) {\n      setCurrentSlide(currentSlide + 1);\n    }\n  };\n\n  const prevSlide = () => {\n    if (currentSlide > 0) {\n      setCurrentSlide(currentSlide - 1);\n    }\n  };\n\n  if (isPresenting) {\n    return (\n      <div className=\"h-full bg-black flex items-center justify-center relative\">\n        <div \n          className=\"relative bg-white shadow-2xl\"\n          style={{ \n            width: '80vw', \n            height: '60vh',\n            backgroundColor: slides[currentSlide]?.backgroundColor || '#ffffff'\n          }}\n        >\n          {slides[currentSlide]?.elements.map(element => (\n            <div\n              key={element.id}\n              className=\"absolute\"\n              style={{\n                left: element.x,\n                top: element.y,\n                width: element.width,\n                height: element.height,\n                fontSize: element.style.fontSize,\n                fontFamily: element.style.fontFamily,\n                color: element.style.color,\n                backgroundColor: element.style.backgroundColor,\n                fontWeight: element.style.bold ? 'bold' : 'normal',\n                fontStyle: element.style.italic ? 'italic' : 'normal',\n                textDecoration: element.style.underline ? 'underline' : 'none',\n                textAlign: element.style.textAlign,\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: element.style.textAlign === 'center' ? 'center' : \n                              element.style.textAlign === 'right' ? 'flex-end' : 'flex-start',\n                padding: '8px',\n                borderRadius: element.style.borderRadius || 0,\n                border: element.style.borderWidth ? \n                  `${element.style.borderWidth}px solid ${element.style.borderColor}` : 'none'\n              }}\n            >\n              {element.content}\n            </div>\n          ))}\n        </div>\n        \n        <div className=\"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex gap-2\">\n          <Button onClick={prevSlide} disabled={currentSlide === 0} variant=\"secondary\">\n            <SkipBack className=\"w-4 h-4\" />\n          </Button>\n          <Button onClick={() => setIsPresenting(false)} variant=\"secondary\">\n            <Square className=\"w-4 h-4\" />\n          </Button>\n          <Button onClick={nextSlide} disabled={currentSlide === slides.length - 1} variant=\"secondary\">\n            <SkipForward className=\"w-4 h-4\" />\n          </Button>\n        </div>\n        \n        <div className=\"absolute bottom-4 right-4 text-white text-sm\">\n          {currentSlide + 1} / {slides.length}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Ribbon Toolbar - PowerPoint Style */}\n      <div className=\"border-b bg-background\">\n        {/* File Bar */}\n        <div className=\"flex items-center gap-2 p-2 border-b bg-muted/20\">\n          <div className=\"flex items-center gap-2\">\n            <Monitor className=\"w-5 h-5 text-orange-600\" />\n            <Input\n              value={fileName}\n              onChange={(e) => setFileName(e.target.value)}\n              className=\"w-48 h-8\"\n              placeholder=\"Presentation1\"\n            />\n          </div>\n          \n          <div className=\"h-6 w-px bg-border mx-2\" />\n          \n          <Button variant=\"outline\" size=\"sm\" onClick={() => {}}>\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" onClick={exportToPDF}>\n            <Download className=\"w-4 h-4 mr-1\" />\n            Export\n          </Button>\n          <Button variant=\"default\" size=\"sm\" onClick={startPresentation}>\n            <Play className=\"w-4 h-4 mr-1\" />\n            Present\n          </Button>\n        </div>\n\n        {/* Ribbon Tabs */}\n        <div className=\"flex border-b\">\n          {['Home', 'Insert', 'Design', 'View'].map(tab => (\n            <Button\n              key={tab}\n              variant={activeTab === tab ? 'default' : 'ghost'}\n              size=\"sm\"\n              onClick={() => setActiveTab(tab)}\n              className=\"rounded-none border-b-2 border-transparent data-[state=active]:border-blue-500\"\n            >\n              {tab}\n            </Button>\n          ))}\n        </div>\n\n        {/* Tab Content */}\n        <div className=\"p-2\">\n          {activeTab === 'Home' && (\n            <div className=\"flex items-center gap-1\">\n              {/* Slides Group */}\n              <div className=\"flex items-center gap-1 px-2 border-r\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Slides</span>\n                <div className=\"flex gap-1\">\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => setShowSlideTemplates(true)}>\n                    <Plus className=\"w-4 h-4 mr-1\" />\n                    New Slide\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\" onClick={() => addSlide('content')}>\n                    <Layout className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              {/* Font Group */}\n              <div className=\"flex items-center gap-1 px-2 border-r\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Font</span>\n                <div className=\"flex gap-1\">\n                  <select className=\"text-xs border rounded px-2 py-1 w-20\">\n                    <option>Calibri</option>\n                    <option>Arial</option>\n                    <option>Times</option>\n                  </select>\n                  <select className=\"text-xs border rounded px-1 py-1 w-12\">\n                    <option>16</option>\n                    <option>18</option>\n                    <option>24</option>\n                    <option>32</option>\n                  </select>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <Bold className=\"w-4 h-4\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <Italic className=\"w-4 h-4\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <Underline className=\"w-4 h-4\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <Palette className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n\n              {/* Paragraph Group */}\n              <div className=\"flex items-center gap-1 px-2 border-r\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Paragraph</span>\n                <div className=\"flex gap-1\">\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <AlignLeft className=\"w-4 h-4\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <AlignCenter className=\"w-4 h-4\" />\n                  </Button>\n                  <Button variant=\"ghost\" size=\"sm\" className=\"h-8 w-8 p-0\">\n                    <AlignRight className=\"w-4 h-4\" />\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'Insert' && (\n            <div className=\"flex items-center gap-1\">\n              <div className=\"flex items-center gap-1 px-2 border-r\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Content</span>\n                <div className=\"flex gap-1\">\n                  <Button variant=\"outline\" size=\"sm\" onClick={addTextElement}>\n                    <Type className=\"w-4 h-4 mr-1\" />\n                    Text Box\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\">\n                    <FileImage className=\"w-4 h-4 mr-1\" />\n                    Image\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\">\n                    <Shapes className=\"w-4 h-4 mr-1\" />\n                    Shapes\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\">\n                    <BarChart3 className=\"w-4 h-4 mr-1\" />\n                    Chart\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'Design' && (\n            <div className=\"flex items-center gap-1\">\n              <div className=\"flex items-center gap-1 px-2 border-r\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Themes</span>\n                <div className=\"flex gap-1\">\n                  {Object.entries(themes).map(([key, themeData]) => (\n                    <Button\n                      key={key}\n                      variant={theme === key ? 'default' : 'outline'}\n                      size=\"sm\"\n                      onClick={() => setTheme(key)}\n                      className=\"text-xs\"\n                    >\n                      {themeData.name}\n                    </Button>\n                  ))}\n                </div>\n              </div>\n            </div>\n          )}\n\n          {activeTab === 'View' && (\n            <div className=\"flex items-center gap-1\">\n              <div className=\"flex items-center gap-1 px-2\">\n                <span className=\"text-xs font-medium text-muted-foreground mr-2 block mb-1\">Zoom</span>\n                <div className=\"flex gap-1 items-center\">\n                  <select \n                    value={zoom} \n                    onChange={(e) => setZoom(Number(e.target.value))}\n                    className=\"text-xs border rounded px-2 py-1\"\n                  >\n                    <option value={50}>50%</option>\n                    <option value={75}>75%</option>\n                    <option value={100}>100%</option>\n                    <option value={150}>150%</option>\n                    <option value={200}>200%</option>\n                  </select>\n                  <Button variant=\"outline\" size=\"sm\">\n                    Fit to Window\n                  </Button>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Slide Layout Selector */}\n      {showSlideTemplates && (\n        <div className=\"absolute inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <div className=\"bg-white rounded-lg p-6 max-w-2xl w-full mx-4\">\n            <h2 className=\"text-lg font-semibold mb-4\">Choose a Layout</h2>\n            <div className=\"grid grid-cols-4 gap-4 mb-4\">\n              {slideLayouts.map(layout => (\n                <div\n                  key={layout.id}\n                  className=\"cursor-pointer border-2 border-gray-200 rounded-lg p-4 hover:border-blue-500 transition-colors\"\n                  onClick={() => addSlide(layout.id)}\n                >\n                  <div className=\"text-center\">\n                    <div className=\"text-2xl mb-2\">{layout.icon}</div>\n                    <div className=\"text-xs font-medium\">{layout.name}</div>\n                  </div>\n                </div>\n              ))}\n            </div>\n            <div className=\"flex justify-end gap-2\">\n              <Button variant=\"outline\" onClick={() => setShowSlideTemplates(false)}>\n                Cancel\n              </Button>\n              <Button onClick={() => addSlide('content')}>\n                Add Slide\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"flex-1 flex\">\n        {/* Slide Thumbnails */}\n        <div className=\"w-64 border-r bg-muted/10 p-2 overflow-y-auto\">\n          <div className=\"space-y-2\">\n            {slides.map((slide, index) => (\n              <Card \n                key={slide.id}\n                className={`cursor-pointer transition-all ${\n                  currentSlide === index ? 'ring-2 ring-blue-500' : ''\n                }`}\n                onClick={() => setCurrentSlide(index)}\n              >\n                <CardContent className=\"p-2\">\n                  <div \n                    className=\"w-full h-24 bg-white border rounded text-xs overflow-hidden relative\"\n                    style={{ backgroundColor: slide.backgroundColor }}\n                  >\n                    {slide.elements.slice(0, 3).map(element => (\n                      <div\n                        key={element.id}\n                        className=\"absolute bg-gray-200 rounded\"\n                        style={{\n                          left: `${(element.x / 700) * 100}%`,\n                          top: `${(element.y / 500) * 100}%`,\n                          width: `${(element.width / 700) * 100}%`,\n                          height: `${Math.min((element.height / 500) * 100, 20)}%`,\n                        }}\n                      />\n                    ))}\n                    <div className=\"absolute bottom-1 left-1 text-xs text-gray-600\">\n                      {index + 1}\n                    </div>\n                  </div>\n                  <div className=\"flex justify-between items-center mt-1\">\n                    <span className=\"text-xs truncate\">{slide.title}</span>\n                    <Button \n                      variant=\"ghost\" \n                      size=\"sm\" \n                      className=\"h-6 w-6 p-0\"\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        deleteSlide(index);\n                      }}\n                    >\n                      <Trash2 className=\"w-3 h-3\" />\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n\n        {/* Main Canvas */}\n        <div className=\"flex-1 p-4 overflow-auto bg-gray-100\">\n          <div \n            ref={canvasRef}\n            className=\"mx-auto bg-white shadow-lg relative\"\n            style={{ \n              width: `${700 * (zoom / 100)}px`, \n              height: `${500 * (zoom / 100)}px`,\n              backgroundColor: slides[currentSlide]?.backgroundColor || '#ffffff'\n            }}\n          >\n            {slides[currentSlide]?.elements.map(element => (\n              <div\n                key={element.id}\n                className={`absolute cursor-pointer border-2 ${\n                  selectedElement === element.id ? 'border-blue-500' : 'border-transparent'\n                } hover:border-blue-300`}\n                style={{\n                  left: `${element.x * (zoom / 100)}px`,\n                  top: `${element.y * (zoom / 100)}px`,\n                  width: `${element.width * (zoom / 100)}px`,\n                  height: `${element.height * (zoom / 100)}px`,\n                  fontSize: `${(element.style.fontSize || 16) * (zoom / 100)}px`,\n                  fontFamily: element.style.fontFamily,\n                  color: element.style.color,\n                  backgroundColor: element.style.backgroundColor,\n                  fontWeight: element.style.bold ? 'bold' : 'normal',\n                  fontStyle: element.style.italic ? 'italic' : 'normal',\n                  textDecoration: element.style.underline ? 'underline' : 'none',\n                  textAlign: element.style.textAlign,\n                  padding: `${4 * (zoom / 100)}px`,\n                  borderRadius: element.style.borderRadius || 0,\n                }}\n                onClick={() => setSelectedElement(element.id)}\n              >\n                <textarea\n                  value={element.content}\n                  onChange={(e) => updateElement(element.id, { content: e.target.value })}\n                  className=\"w-full h-full bg-transparent border-0 outline-0 resize-none\"\n                  style={{\n                    fontSize: 'inherit',\n                    fontFamily: 'inherit',\n                    color: 'inherit',\n                    fontWeight: 'inherit',\n                    fontStyle: 'inherit',\n                    textDecoration: 'inherit',\n                    textAlign: 'inherit'\n                  }}\n                />\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"flex items-center justify-between p-2 border-t bg-muted/30 text-xs\">\n        <div className=\"flex items-center gap-4\">\n          <span>Slide {currentSlide + 1} of {slides.length}</span>\n          <span>Elements: {slides[currentSlide]?.elements.length || 0}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <span>Zoom: {zoom}%</span>\n          {selectedElement && (\n            <span>Selected: {slides[currentSlide]?.elements.find(e => e.id === selectedElement)?.type}</span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":25012},"client/src/components/apps/ProductivitySuite.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { \n  X, \n  FileText, \n  Table, \n  Presentation, \n  Save, \n  Download, \n  Upload,\n  Bold,\n  Italic,\n  Underline,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  List,\n  ListOrdered,\n  Image,\n  Link\n} from 'lucide-react';\n\ntype AppType = 'word' | 'excel' | 'powerpoint';\n\nexport const ProductivitySuite: FC = () => {\n  const [activeApp, setActiveApp] = useState<AppType>('word');\n  const [documentContent, setDocumentContent] = useState(`Welcome to WebOS Office Suite\n\nThis is a comprehensive productivity suite featuring:\n\nWord Processor:\n• Rich text formatting\n• Document templates\n• Collaborative editing\n• Export to PDF/DOCX\n\nSpreadsheet:\n• Formula calculations\n• Charts and graphs\n• Data analysis tools\n• Import/export Excel files\n\nPresentation:\n• Slide templates\n• Animations and transitions\n• Media integration\n• Export to PowerPoint\n\nStart creating professional documents with our powerful office tools.`);\n\n  const [spreadsheetData, setSpreadsheetData] = useState([\n    ['Quarter', 'Revenue', 'Expenses', 'Profit'],\n    ['Q1 2024', '150000', '120000', '=B2-C2'],\n    ['Q2 2024', '180000', '140000', '=B3-C3'],\n    ['Q3 2024', '165000', '130000', '=B4-C4'],\n    ['Q4 2024', '200000', '155000', '=B5-C5'],\n    ['Total', '=SUM(B2:B5)', '=SUM(C2:C5)', '=SUM(D2:D5)']\n  ]);\n\n  const [presentations] = useState([\n    {\n      title: 'Quarterly Review',\n      slides: [\n        { title: 'Q4 2024 Performance', content: 'Revenue increased by 25% compared to Q3' },\n        { title: 'Key Achievements', content: '• Launched 3 new products\\n• Expanded to 5 new markets\\n• Increased team by 30%' },\n        { title: 'Future Goals', content: 'Focus on sustainable growth and innovation' }\n      ]\n    }\n  ]);\n\n  const [currentSlide, setCurrentSlide] = useState(0);\n\n  const formatText = (format: string) => {\n    const textarea = document.querySelector('textarea');\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = documentContent.substring(start, end);\n    \n    let formattedText = selectedText;\n    switch (format) {\n      case 'bold':\n        formattedText = `**${selectedText}**`;\n        break;\n      case 'italic':\n        formattedText = `*${selectedText}*`;\n        break;\n      case 'underline':\n        formattedText = `_${selectedText}_`;\n        break;\n    }\n    \n    const newContent = documentContent.substring(0, start) + formattedText + documentContent.substring(end);\n    setDocumentContent(newContent);\n  };\n\n  const calculateCell = (formula: string): string => {\n    if (!formula.startsWith('=')) return formula;\n    \n    // Simple formula calculation for demo\n    if (formula.includes('SUM')) {\n      const match = formula.match(/SUM\\(([A-Z])(\\d+):([A-Z])(\\d+)\\)/);\n      if (match) {\n        const [, col, startRow, , endRow] = match;\n        const colIndex = col.charCodeAt(0) - 65;\n        let sum = 0;\n        for (let i = parseInt(startRow) - 1; i < parseInt(endRow); i++) {\n          const value = parseFloat(spreadsheetData[i]?.[colIndex] || '0');\n          if (!isNaN(value)) sum += value;\n        }\n        return sum.toString();\n      }\n    }\n    \n    // Simple arithmetic\n    const match = formula.match(/=([A-Z])(\\d+)-([A-Z])(\\d+)/);\n    if (match) {\n      const [, col1, row1, col2, row2] = match;\n      const col1Index = col1.charCodeAt(0) - 65;\n      const col2Index = col2.charCodeAt(0) - 65;\n      const val1 = parseFloat(spreadsheetData[parseInt(row1) - 1]?.[col1Index] || '0');\n      const val2 = parseFloat(spreadsheetData[parseInt(row2) - 1]?.[col2Index] || '0');\n      return (val1 - val2).toString();\n    }\n    \n    return formula;\n  };\n\n  const renderWordProcessor = () => (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"bg-gray-100 p-2 border-b flex items-center space-x-2\">\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => formatText('bold')}>\n          <Bold className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => formatText('italic')}>\n          <Italic className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => formatText('underline')}>\n          <Underline className=\"w-4 h-4\" />\n        </Button>\n        <div className=\"border-l h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\">\n          <AlignLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <AlignCenter className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <AlignRight className=\"w-4 h-4\" />\n        </Button>\n        <div className=\"border-l h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\">\n          <List className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <ListOrdered className=\"w-4 h-4\" />\n        </Button>\n        <div className=\"border-l h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\">\n          <Image className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <Link className=\"w-4 h-4\" />\n        </Button>\n      </div>\n      <div className=\"flex-1 p-6 bg-white\">\n        <textarea\n          value={documentContent}\n          onChange={(e) => setDocumentContent(e.target.value)}\n          className=\"w-full h-full resize-none border-0 outline-none font-serif text-lg leading-relaxed\"\n          placeholder=\"Start typing your document...\"\n        />\n      </div>\n    </div>\n  );\n\n  const renderSpreadsheet = () => (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"bg-gray-100 p-2 border-b flex items-center space-x-2\">\n        <Button size=\"sm\" variant=\"ghost\">\n          <Save className=\"w-4 h-4 mr-1\" />\n          Save\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          Insert Chart\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          Format Cells\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          Sort Data\n        </Button>\n      </div>\n      <div className=\"flex-1 overflow-auto\">\n        <table className=\"w-full border-collapse\">\n          <thead>\n            <tr>\n              <th className=\"w-12 bg-gray-200 border border-gray-300 p-1\"></th>\n              {['A', 'B', 'C', 'D', 'E', 'F'].map(col => (\n                <th key={col} className=\"bg-gray-200 border border-gray-300 p-2 font-bold text-center min-w-24\">\n                  {col}\n                </th>\n              ))}\n            </tr>\n          </thead>\n          <tbody>\n            {Array.from({ length: 20 }, (_, i) => (\n              <tr key={i}>\n                <td className=\"bg-gray-200 border border-gray-300 p-2 text-center font-bold text-sm\">\n                  {i + 1}\n                </td>\n                {Array.from({ length: 6 }, (_, j) => (\n                  <td key={j} className=\"border border-gray-300 p-1\">\n                    <input\n                      type=\"text\"\n                      value={spreadsheetData[i]?.[j] ? calculateCell(spreadsheetData[i][j]) : ''}\n                      onChange={(e) => {\n                        const newData = [...spreadsheetData];\n                        if (!newData[i]) newData[i] = [];\n                        newData[i][j] = e.target.value;\n                        setSpreadsheetData(newData);\n                      }}\n                      className=\"w-full border-0 outline-none p-1 text-sm\"\n                    />\n                  </td>\n                ))}\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n\n  const renderPresentation = () => (\n    <div className=\"flex h-full\">\n      <div className=\"w-64 bg-gray-100 border-r p-4\">\n        <h3 className=\"font-semibold mb-4\">Slides</h3>\n        <div className=\"space-y-2\">\n          {presentations[0].slides.map((slide, index) => (\n            <div\n              key={index}\n              onClick={() => setCurrentSlide(index)}\n              className={`p-3 border rounded cursor-pointer transition-colors ${\n                currentSlide === index ? 'bg-blue-100 border-blue-300' : 'bg-white hover:bg-gray-50'\n              }`}\n            >\n              <div className=\"text-sm font-medium mb-1\">{index + 1}. {slide.title}</div>\n              <div className=\"text-xs text-gray-600 line-clamp-2\">{slide.content}</div>\n            </div>\n          ))}\n        </div>\n        <Button className=\"w-full mt-4\" size=\"sm\">\n          Add Slide\n        </Button>\n      </div>\n      \n      <div className=\"flex-1 flex flex-col\">\n        <div className=\"bg-gray-100 p-2 border-b flex items-center space-x-2\">\n          <Button size=\"sm\" variant=\"ghost\">\n            New Slide\n          </Button>\n          <Button size=\"sm\" variant=\"ghost\">\n            Design\n          </Button>\n          <Button size=\"sm\" variant=\"ghost\">\n            Animations\n          </Button>\n          <Button size=\"sm\" variant=\"ghost\">\n            Slide Show\n          </Button>\n        </div>\n        \n        <div className=\"flex-1 p-8 bg-gray-50 flex items-center justify-center\">\n          <div className=\"bg-white shadow-lg rounded-lg p-8 w-full max-w-2xl aspect-video\">\n            <h1 className=\"text-3xl font-bold mb-6 text-center text-blue-600\">\n              {presentations[0].slides[currentSlide].title}\n            </h1>\n            <div className=\"text-lg leading-relaxed whitespace-pre-line\">\n              {presentations[0].slides[currentSlide].content}\n            </div>\n          </div>\n        </div>\n        \n        <div className=\"bg-gray-100 p-2 border-t flex items-center justify-between\">\n          <div className=\"flex space-x-2\">\n            <Button \n              size=\"sm\" \n              disabled={currentSlide === 0}\n              onClick={() => setCurrentSlide(currentSlide - 1)}\n            >\n              Previous\n            </Button>\n            <Button \n              size=\"sm\"\n              disabled={currentSlide === presentations[0].slides.length - 1}\n              onClick={() => setCurrentSlide(currentSlide + 1)}\n            >\n              Next\n            </Button>\n          </div>\n          <div className=\"text-sm text-gray-600\">\n            Slide {currentSlide + 1} of {presentations[0].slides.length}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[700px] flex flex-col\">\n      <div className=\"bg-blue-600 text-white px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <FileText className=\"w-5 h-5\" />\n          <span className=\"font-medium\">WebOS Office Suite</span>\n        </div>\n        <div className=\"flex items-center space-x-2\">\n          <Button size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-blue-700\">\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n          <Button size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-blue-700\">\n            <Download className=\"w-4 h-4 mr-1\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex border-b\">\n        <button\n          onClick={() => setActiveApp('word')}\n          className={`flex items-center space-x-2 px-4 py-2 ${\n            activeApp === 'word' ? 'bg-blue-50 border-b-2 border-blue-600' : 'hover:bg-gray-50'\n          }`}\n        >\n          <FileText className=\"w-4 h-4\" />\n          <span>Word Processor</span>\n        </button>\n        <button\n          onClick={() => setActiveApp('excel')}\n          className={`flex items-center space-x-2 px-4 py-2 ${\n            activeApp === 'excel' ? 'bg-blue-50 border-b-2 border-blue-600' : 'hover:bg-gray-50'\n          }`}\n        >\n          <Table className=\"w-4 h-4\" />\n          <span>Spreadsheet</span>\n        </button>\n        <button\n          onClick={() => setActiveApp('powerpoint')}\n          className={`flex items-center space-x-2 px-4 py-2 ${\n            activeApp === 'powerpoint' ? 'bg-blue-50 border-b-2 border-blue-600' : 'hover:bg-gray-50'\n          }`}\n        >\n          <Presentation className=\"w-4 h-4\" />\n          <span>Presentation</span>\n        </button>\n      </div>\n\n      <div className=\"flex-1 overflow-hidden\">\n        {activeApp === 'word' && renderWordProcessor()}\n        {activeApp === 'excel' && renderSpreadsheet()}\n        {activeApp === 'powerpoint' && renderPresentation()}\n      </div>\n\n      <div className=\"bg-gray-100 px-4 py-2 text-sm text-gray-600 border-t\">\n        WebOS Office Suite • Auto-save enabled • Last saved: {new Date().toLocaleTimeString()}\n      </div>\n    </div>\n  );\n};","size_bytes":12795},"client/src/components/apps/ProxyTestCenter.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Globe, Image, Video, FileText, Smartphone, Shield, Zap, BarChart3, Settings, PlayCircle } from 'lucide-react';\n\nexport const ProxyTestCenter: FC = () => {\n  const [testUrl, setTestUrl] = useState('https://example.com');\n  const [results, setResults] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n\n  const testProxyEndpoint = async (endpoint: string, params: any = {}) => {\n    setLoading(true);\n    try {\n      const queryParams = new URLSearchParams(params).toString();\n      const url = `${endpoint}?${queryParams}`;\n      \n      const response = await fetch(url);\n      const data = await response.text();\n      \n      setResults({\n        endpoint,\n        status: response.status,\n        headers: Object.fromEntries(response.headers.entries()),\n        success: response.ok,\n        size: data.length,\n        cached: response.headers.get('X-Cache') === 'HIT'\n      });\n    } catch (error) {\n      setResults({\n        endpoint,\n        error: error instanceof Error ? error.message : 'Unknown error',\n        success: false\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const proxyTests = [\n    {\n      name: 'Website Proxy',\n      endpoint: '/api/proxy/site',\n      icon: Globe,\n      description: 'Full website proxy with content optimization',\n      params: { url: testUrl, mode: 'embed' }\n    },\n    {\n      name: 'Image Proxy',\n      endpoint: '/api/proxy/image',\n      icon: Image,\n      description: 'Optimized image loading with caching',\n      params: { url: 'https://picsum.photos/800/600' }\n    },\n    {\n      name: 'Video Proxy',\n      endpoint: '/api/proxy/video',\n      icon: Video,\n      description: 'Video streaming with range request support',\n      params: { url: 'https://sample-videos.com/zip/10/mp4/SampleVideo_1280x720_1mb.mp4' }\n    },\n    {\n      name: 'Document Viewer',\n      endpoint: '/api/proxy/document',\n      icon: FileText,\n      description: 'PDF and document viewing capabilities',\n      params: { url: 'https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf' }\n    },\n    {\n      name: 'Mobile Optimized',\n      endpoint: '/api/proxy/mobile',\n      icon: Smartphone,\n      description: 'Mobile-optimized website rendering',\n      params: { url: testUrl }\n    },\n    {\n      name: 'Secure Proxy',\n      endpoint: '/api/proxy/secure',\n      icon: Shield,\n      description: 'Security-enhanced proxy with tracker blocking',\n      params: { url: testUrl, removeTrackers: 'true' }\n    },\n    {\n      name: 'Optimized Proxy',\n      endpoint: '/api/proxy/optimize',\n      icon: Zap,\n      description: 'Content optimization and compression',\n      params: { url: testUrl, minifyHtml: 'true', removeComments: 'true' }\n    },\n    {\n      name: 'Performance Metrics',\n      endpoint: '/api/proxy/metrics',\n      icon: BarChart3,\n      description: 'Proxy performance and analytics',\n      params: {}\n    }\n  ];\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"flex-1 p-6 overflow-auto\">\n        <div className=\"max-w-7xl mx-auto space-y-6\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <h1 className=\"text-3xl font-bold\">Advanced Proxy System</h1>\n              <p className=\"text-muted-foreground\">Test and monitor all proxy features</p>\n            </div>\n            <Badge variant=\"secondary\" className=\"text-sm\">\n              v2.0.0\n            </Badge>\n          </div>\n\n          <Tabs defaultValue=\"test\" className=\"w-full\">\n            <TabsList className=\"grid w-full grid-cols-3\">\n              <TabsTrigger value=\"test\">Test Endpoints</TabsTrigger>\n              <TabsTrigger value=\"demo\">Live Demo</TabsTrigger>\n              <TabsTrigger value=\"config\">Configuration</TabsTrigger>\n            </TabsList>\n\n            <TabsContent value=\"test\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Test URL Configuration</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"flex gap-4\">\n                    <Input\n                      value={testUrl}\n                      onChange={(e) => setTestUrl(e.target.value)}\n                      placeholder=\"Enter URL to test...\"\n                      className=\"flex-1\"\n                    />\n                    <Button \n                      onClick={() => testProxyEndpoint('/api/proxy/site', { url: testUrl, mode: 'embed' })}\n                      disabled={loading}\n                    >\n                      Test Website\n                    </Button>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {proxyTests.map((test) => {\n                  const Icon = test.icon;\n                  return (\n                    <Card key={test.name} className=\"cursor-pointer hover:shadow-lg transition-shadow\">\n                      <CardHeader className=\"pb-3\">\n                        <div className=\"flex items-center gap-3\">\n                          <Icon className=\"h-5 w-5 text-primary\" />\n                          <CardTitle className=\"text-lg\">{test.name}</CardTitle>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground\">{test.description}</p>\n                      </CardHeader>\n                      <CardContent>\n                        <Button \n                          onClick={() => testProxyEndpoint(test.endpoint, test.params)}\n                          disabled={loading}\n                          className=\"w-full\"\n                          variant=\"outline\"\n                        >\n                          Test {test.name}\n                        </Button>\n                      </CardContent>\n                    </Card>\n                  );\n                })}\n              </div>\n\n              {results && (\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Test Results</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant={results.success ? \"default\" : \"destructive\"}>\n                          {results.success ? \"Success\" : \"Failed\"}\n                        </Badge>\n                        <span className=\"text-sm text-muted-foreground\">\n                          Status: {results.status || 'Error'}\n                        </span>\n                        {results.cached && (\n                          <Badge variant=\"secondary\">Cached</Badge>\n                        )}\n                      </div>\n                      \n                      <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                          <strong>Endpoint:</strong> {results.endpoint}\n                        </div>\n                        {results.size && (\n                          <div>\n                            <strong>Response Size:</strong> {(results.size / 1024).toFixed(1)} KB\n                          </div>\n                        )}\n                      </div>\n\n                      {results.headers && (\n                        <div>\n                          <strong>Response Headers:</strong>\n                          <pre className=\"mt-2 p-3 bg-muted rounded text-xs overflow-auto\">\n                            {JSON.stringify(results.headers, null, 2)}\n                          </pre>\n                        </div>\n                      )}\n\n                      {results.error && (\n                        <div className=\"text-destructive\">\n                          <strong>Error:</strong> {results.error}\n                        </div>\n                      )}\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n            </TabsContent>\n\n            <TabsContent value=\"demo\" className=\"space-y-6\">\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Live Website Demo</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <iframe\n                      src=\"/api/proxy/site?url=https://example.com&mode=embed\"\n                      className=\"w-full h-96 border rounded\"\n                      title=\"Website Proxy Demo\"\n                    />\n                  </CardContent>\n                </Card>\n\n                <Card>\n                  <CardHeader>\n                    <CardTitle>Image Optimization Demo</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <img\n                      src=\"/api/proxy/image?url=https://picsum.photos/400/300\"\n                      alt=\"Proxy Image Demo\"\n                      className=\"w-full h-96 object-cover rounded\"\n                    />\n                  </CardContent>\n                </Card>\n              </div>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Performance Metrics</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <iframe\n                    src=\"/api/proxy/metrics\"\n                    className=\"w-full h-64 border rounded\"\n                    title=\"Metrics Dashboard\"\n                  />\n                </CardContent>\n              </Card>\n            </TabsContent>\n\n            <TabsContent value=\"config\" className=\"space-y-6\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Proxy Configuration</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <iframe\n                    src=\"/api/proxy/config\"\n                    className=\"w-full h-96 border rounded\"\n                    title=\"Configuration\"\n                  />\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Health Status</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <iframe\n                    src=\"/api/proxy/health\"\n                    className=\"w-full h-64 border rounded\"\n                    title=\"Health Check\"\n                  />\n                </CardContent>\n              </Card>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":10895},"client/src/components/apps/RetroEmulator.tsx":{"content":"import { FC, useState, useRef, useEffect, useCallback } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Play, Pause, RotateCcw, Settings, BookOpen, Gamepad2, Monitor } from 'lucide-react';\n\ninterface RetroGame {\n  id: string;\n  title: string;\n  system: string;\n  year: number;\n  description: string;\n  educational: string;\n  controls: string[];\n  difficulty: 'Easy' | 'Medium' | 'Hard';\n  category: 'Programming' | 'Logic' | 'Math' | 'History' | 'Strategy';\n}\n\ninterface GameState {\n  score: number;\n  level: number;\n  lives: number;\n  gameOver: boolean;\n  paused: boolean;\n}\n\nexport const RetroEmulator: FC = () => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [selectedGame, setSelectedGame] = useState<string | null>(null);\n  const [gameState, setGameState] = useState<GameState>({\n    score: 0,\n    level: 1,\n    lives: 3,\n    gameOver: false,\n    paused: false\n  });\n  const [currentTab, setCurrentTab] = useState('library');\n\n  const retroGames: RetroGame[] = [\n    {\n      id: 'snake',\n      title: 'Educational Snake',\n      system: 'Classic Arcade',\n      year: 1976,\n      description: 'Learn algorithmic thinking and pathfinding concepts through the classic Snake game.',\n      educational: 'Teaches: Array manipulation, collision detection, game loops, and basic AI pathfinding algorithms.',\n      controls: ['Arrow Keys: Move snake', 'Space: Pause', 'R: Restart'],\n      difficulty: 'Easy',\n      category: 'Programming'\n    },\n    {\n      id: 'pong',\n      title: 'Physics Pong',\n      system: 'Atari 2600',\n      year: 1972,\n      description: 'Understand physics concepts like velocity, acceleration, and collision through Pong.',\n      educational: 'Teaches: Physics simulation, velocity vectors, collision response, and real-time calculation.',\n      controls: ['W/S: Left paddle', 'Up/Down: Right paddle', 'Space: Serve'],\n      difficulty: 'Easy',\n      category: 'Math'\n    },\n    {\n      id: 'breakout',\n      title: 'Algorithm Breakout',\n      system: 'Atari 2600',\n      year: 1976,\n      description: 'Learn about geometric calculations and pattern recognition through brick breaking.',\n      educational: 'Teaches: Angle calculations, pattern recognition, optimization algorithms, and resource management.',\n      controls: ['A/D or Left/Right: Move paddle', 'Space: Launch ball'],\n      difficulty: 'Medium',\n      category: 'Math'\n    },\n    {\n      id: 'tetris',\n      title: 'Logic Tetris',\n      system: 'Game Boy',\n      year: 1984,\n      description: 'Master spatial reasoning and algorithmic thinking with the classic puzzle game.',\n      educational: 'Teaches: Spatial reasoning, pattern matching, optimization strategies, and decision trees.',\n      controls: ['A/D: Move', 'W: Rotate', 'S: Drop', 'Space: Hard drop'],\n      difficulty: 'Medium',\n      category: 'Logic'\n    },\n    {\n      id: 'maze',\n      title: 'Pathfinding Maze',\n      system: 'Educational',\n      year: 1980,\n      description: 'Learn graph traversal and pathfinding algorithms by solving procedural mazes.',\n      educational: 'Teaches: Graph theory, breadth-first search, depth-first search, and A* pathfinding.',\n      controls: ['Arrow Keys: Move', 'H: Show hint path', 'N: New maze'],\n      difficulty: 'Hard',\n      category: 'Programming'\n    },\n    {\n      id: 'calculator',\n      title: 'Math Blaster',\n      system: 'Educational',\n      year: 1983,\n      description: 'Improve mental math skills through fast-paced arithmetic challenges.',\n      educational: 'Teaches: Mental arithmetic, order of operations, number patterns, and mathematical reasoning.',\n      controls: ['Number keys: Input answer', 'Enter: Submit', 'Backspace: Clear'],\n      difficulty: 'Medium',\n      category: 'Math'\n    }\n  ];\n\n  const [currentGame, setCurrentGame] = useState<RetroGame | null>(null);\n\n  // Snake Game Implementation\n  const SnakeGame: FC = () => {\n    const [snake, setSnake] = useState([{ x: 10, y: 10 }]);\n    const [food, setFood] = useState({ x: 15, y: 15 });\n    const [direction, setDirection] = useState({ x: 0, y: 1 });\n    const [gameRunning, setGameRunning] = useState(false);\n\n    const BOARD_SIZE = 20;\n    const CELL_SIZE = 20;\n\n    const moveSnake = useCallback(() => {\n      if (!gameRunning || gameState.paused) return;\n\n      setSnake(currentSnake => {\n        const newSnake = [...currentSnake];\n        const head = { x: newSnake[0].x + direction.x, y: newSnake[0].y + direction.y };\n\n        // Check boundaries\n        if (head.x < 0 || head.x >= BOARD_SIZE || head.y < 0 || head.y >= BOARD_SIZE) {\n          setGameRunning(false);\n          setGameState(prev => ({ ...prev, gameOver: true }));\n          return currentSnake;\n        }\n\n        // Check self collision\n        if (newSnake.some(segment => segment.x === head.x && segment.y === head.y)) {\n          setGameRunning(false);\n          setGameState(prev => ({ ...prev, gameOver: true }));\n          return currentSnake;\n        }\n\n        newSnake.unshift(head);\n\n        // Check food collision\n        if (head.x === food.x && head.y === food.y) {\n          setFood({\n            x: Math.floor(Math.random() * BOARD_SIZE),\n            y: Math.floor(Math.random() * BOARD_SIZE)\n          });\n          setGameState(prev => ({ ...prev, score: prev.score + 10 }));\n        } else {\n          newSnake.pop();\n        }\n\n        return newSnake;\n      });\n    }, [direction, food, gameRunning, gameState.paused]);\n\n    useEffect(() => {\n      const gameInterval = setInterval(moveSnake, 200);\n      return () => clearInterval(gameInterval);\n    }, [moveSnake]);\n\n    useEffect(() => {\n      const handleKeyPress = (e: KeyboardEvent) => {\n        if (!gameRunning) return;\n\n        switch (e.key) {\n          case 'ArrowUp':\n            if (direction.y === 0) setDirection({ x: 0, y: -1 });\n            break;\n          case 'ArrowDown':\n            if (direction.y === 0) setDirection({ x: 0, y: 1 });\n            break;\n          case 'ArrowLeft':\n            if (direction.x === 0) setDirection({ x: -1, y: 0 });\n            break;\n          case 'ArrowRight':\n            if (direction.x === 0) setDirection({ x: 1, y: 0 });\n            break;\n          case ' ':\n            setGameState(prev => ({ ...prev, paused: !prev.paused }));\n            break;\n        }\n      };\n\n      window.addEventListener('keydown', handleKeyPress);\n      return () => window.removeEventListener('keydown', handleKeyPress);\n    }, [direction, gameRunning]);\n\n    const startGame = () => {\n      setSnake([{ x: 10, y: 10 }]);\n      setFood({ x: 15, y: 15 });\n      setDirection({ x: 0, y: 1 });\n      setGameRunning(true);\n      setGameState({ score: 0, level: 1, lives: 3, gameOver: false, paused: false });\n    };\n\n    return (\n      <div className=\"flex flex-col items-center space-y-4\">\n        <div className=\"flex gap-4 text-sm\">\n          <span>Score: {gameState.score}</span>\n          <span>Length: {snake.length}</span>\n        </div>\n        \n        <svg width={BOARD_SIZE * CELL_SIZE} height={BOARD_SIZE * CELL_SIZE} className=\"border-2 border-green-500 bg-black\">\n          {/* Grid */}\n          {Array.from({ length: BOARD_SIZE }, (_, i) => (\n            <g key={i}>\n              <line x1={i * CELL_SIZE} y1=\"0\" x2={i * CELL_SIZE} y2={BOARD_SIZE * CELL_SIZE} stroke=\"#333\" strokeWidth=\"0.5\" />\n              <line x1=\"0\" y1={i * CELL_SIZE} x2={BOARD_SIZE * CELL_SIZE} y2={i * CELL_SIZE} stroke=\"#333\" strokeWidth=\"0.5\" />\n            </g>\n          ))}\n          \n          {/* Snake */}\n          {snake.map((segment, index) => (\n            <rect\n              key={index}\n              x={segment.x * CELL_SIZE}\n              y={segment.y * CELL_SIZE}\n              width={CELL_SIZE}\n              height={CELL_SIZE}\n              fill={index === 0 ? '#00ff00' : '#008800'}\n              stroke=\"#004400\"\n            />\n          ))}\n          \n          {/* Food */}\n          <circle\n            cx={food.x * CELL_SIZE + CELL_SIZE / 2}\n            cy={food.y * CELL_SIZE + CELL_SIZE / 2}\n            r={CELL_SIZE / 3}\n            fill=\"#ff0000\"\n          />\n        </svg>\n\n        <div className=\"flex gap-2\">\n          {!gameRunning ? (\n            <Button onClick={startGame} className=\"bg-green-600 hover:bg-green-700\">\n              <Play className=\"w-4 h-4 mr-1\" />\n              Start Game\n            </Button>\n          ) : (\n            <Button onClick={() => setGameState(prev => ({ ...prev, paused: !prev.paused }))}>\n              {gameState.paused ? <Play className=\"w-4 h-4 mr-1\" /> : <Pause className=\"w-4 h-4 mr-1\" />}\n              {gameState.paused ? 'Resume' : 'Pause'}\n            </Button>\n          )}\n          <Button onClick={() => setGameRunning(false)} variant=\"outline\">\n            <RotateCcw className=\"w-4 h-4 mr-1\" />\n            Reset\n          </Button>\n        </div>\n\n        {gameState.gameOver && (\n          <div className=\"text-center p-4 bg-red-900 rounded-lg\">\n            <h3 className=\"text-lg font-bold text-red-400\">Game Over!</h3>\n            <p>Final Score: {gameState.score}</p>\n            <p className=\"text-sm mt-2\">Snake Length: {snake.length}</p>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  const renderGameContent = () => {\n    if (!currentGame) {\n      return (\n        <div className=\"flex items-center justify-center h-64 text-gray-400\">\n          <div className=\"text-center\">\n            <Monitor className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n            <p>Select a game to start learning</p>\n          </div>\n        </div>\n      );\n    }\n\n    switch (currentGame.id) {\n      case 'snake':\n        return <SnakeGame />;\n      default:\n        return (\n          <div className=\"flex items-center justify-center h-64 text-gray-400\">\n            <div className=\"text-center\">\n              <Gamepad2 className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n              <p className=\"text-lg font-semibold\">{currentGame.title}</p>\n              <p className=\"text-sm\">Coming Soon - Advanced Educational Features</p>\n              <Button className=\"mt-4 bg-blue-600 hover:bg-blue-700\">\n                Start {currentGame.title}\n              </Button>\n            </div>\n          </div>\n        );\n    }\n  };\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white\">\n      {/* Header */}\n      <div className=\"bg-black/30 backdrop-blur-sm border-b border-white/20 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-600 rounded-lg flex items-center justify-center\">\n              <Gamepad2 className=\"w-5 h-5 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-xl font-bold\">Educational Gaming Emulator</h1>\n              <p className=\"text-sm text-gray-300\">Learn programming and math through classic games</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button variant=\"outline\" size=\"sm\" className=\"border-white/20 text-white\">\n              <Settings className=\"w-4 h-4 mr-1\" />\n              Settings\n            </Button>\n            <Button variant=\"outline\" size=\"sm\" className=\"border-white/20 text-white\">\n              <BookOpen className=\"w-4 h-4 mr-1\" />\n              Tutorials\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex\">\n        {/* Sidebar - Game Library */}\n        <div className=\"w-80 bg-black/20 border-r border-white/10 p-4 overflow-y-auto\">\n          <Tabs value={currentTab} onValueChange={setCurrentTab}>\n            <TabsList className=\"grid w-full grid-cols-2 bg-white/10\">\n              <TabsTrigger value=\"library\">Game Library</TabsTrigger>\n              <TabsTrigger value=\"learning\">Learning</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"library\" className=\"space-y-3 mt-4\">\n              {retroGames.map(game => (\n                <Card\n                  key={game.id}\n                  className={`cursor-pointer transition-all bg-white/10 border-white/20 hover:bg-white/20 ${\n                    currentGame?.id === game.id ? 'ring-2 ring-blue-400' : ''\n                  }`}\n                  onClick={() => setCurrentGame(game)}\n                >\n                  <CardContent className=\"p-3\">\n                    <div className=\"flex items-start justify-between mb-2\">\n                      <h3 className=\"font-semibold text-white\">{game.title}</h3>\n                      <span className={`text-xs px-2 py-1 rounded ${\n                        game.difficulty === 'Easy' ? 'bg-green-600' :\n                        game.difficulty === 'Medium' ? 'bg-yellow-600' : 'bg-red-600'\n                      }`}>\n                        {game.difficulty}\n                      </span>\n                    </div>\n                    <div className=\"text-xs text-gray-300 space-y-1\">\n                      <div>{game.system} • {game.year}</div>\n                      <div className=\"text-blue-300\">{game.category}</div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </TabsContent>\n\n            <TabsContent value=\"learning\" className=\"mt-4\">\n              {currentGame ? (\n                <Card className=\"bg-white/10 border-white/20\">\n                  <CardHeader>\n                    <CardTitle className=\"text-white text-sm\">Educational Focus</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div>\n                      <h4 className=\"font-semibold text-blue-300 mb-1\">What You'll Learn:</h4>\n                      <p className=\"text-xs text-gray-300\">{currentGame.educational}</p>\n                    </div>\n                    \n                    <div>\n                      <h4 className=\"font-semibold text-green-300 mb-1\">Controls:</h4>\n                      <ul className=\"text-xs text-gray-300 space-y-1\">\n                        {currentGame.controls.map((control, index) => (\n                          <li key={index}>• {control}</li>\n                        ))}\n                      </ul>\n                    </div>\n\n                    <div>\n                      <h4 className=\"font-semibold text-purple-300 mb-1\">Description:</h4>\n                      <p className=\"text-xs text-gray-300\">{currentGame.description}</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : (\n                <div className=\"text-center text-gray-400 py-8\">\n                  <BookOpen className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                  <p>Select a game to see learning objectives</p>\n                </div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Main Game Area */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Game Header */}\n          {currentGame && (\n            <div className=\"bg-black/20 border-b border-white/10 p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h2 className=\"text-lg font-bold\">{currentGame.title}</h2>\n                  <p className=\"text-sm text-gray-300\">{currentGame.system} • {currentGame.year}</p>\n                </div>\n                <div className=\"flex items-center gap-4 text-sm\">\n                  <span>Score: {gameState.score}</span>\n                  <span>Level: {gameState.level}</span>\n                  <span>Lives: {gameState.lives}</span>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {/* Game Canvas/Content */}\n          <div className=\"flex-1 flex items-center justify-center p-8\">\n            {renderGameContent()}\n          </div>\n\n          {/* Educational Info Footer */}\n          {currentGame && (\n            <div className=\"bg-black/20 border-t border-white/10 p-4\">\n              <div className=\"grid grid-cols-3 gap-4 text-center text-sm\">\n                <div>\n                  <div className=\"font-semibold text-blue-300\">Programming Concepts</div>\n                  <div className=\"text-xs text-gray-300\">Game loops, collision detection, state management</div>\n                </div>\n                <div>\n                  <div className=\"font-semibold text-green-300\">Mathematical Skills</div>\n                  <div className=\"text-xs text-gray-300\">Coordinate systems, algorithms, optimization</div>\n                </div>\n                <div>\n                  <div className=\"font-semibold text-purple-300\">Problem Solving</div>\n                  <div className=\"text-xs text-gray-300\">Logic, pattern recognition, strategic thinking</div>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":17103},"client/src/components/apps/Roblox.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { RobloxAPI } from './RobloxAPI';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { \n  Play, Users, Star, Clock, Download, Search, Filter,\n  Settings, User, Gamepad2, Trophy, Coins, Heart,\n  MessageCircle, Share2, Globe, Lock, Edit3, Eye\n} from 'lucide-react';\n\ninterface Game {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  creator: string;\n  players: number;\n  maxPlayers: number;\n  rating: number;\n  visits: number;\n  genre: string;\n  isPrivate: boolean;\n  lastUpdated: string;\n}\n\ninterface Friend {\n  id: string;\n  username: string;\n  avatar: string;\n  status: 'online' | 'offline' | 'playing';\n  currentGame?: string;\n}\n\ninterface Achievement {\n  id: string;\n  name: string;\n  description: string;\n  icon: string;\n  unlocked: boolean;\n  rarity: 'common' | 'rare' | 'epic' | 'legendary';\n}\n\nexport const Roblox: FC = () => {\n  const [currentTab, setCurrentTab] = useState('home');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedGenre, setSelectedGenre] = useState('all');\n  const [accountMode, setAccountMode] = useState<'default' | 'connected'>('default');\n  const [userProfile, setUserProfile] = useState({\n    username: 'WebOSPlayer',\n    displayName: 'WebOS Player',\n    avatar: '🧑‍💻',\n    robux: 2500,\n    level: 45,\n    joinDate: '2024-01-15',\n    premium: true,\n    followers: 156,\n    following: 89,\n    description: 'WebOS default account - Connect your real Roblox account for full features!'\n  });\n\n  const [games, setGames] = useState<Game[]>([\n    {\n      id: '1',\n      title: 'Mega Obby Challenge',\n      description: 'Navigate through 500+ challenging obstacles in this epic obby adventure!',\n      thumbnail: '🏃‍♂️',\n      creator: 'ObbyMaster',\n      players: 2847,\n      maxPlayers: 50,\n      rating: 4.8,\n      visits: 15234567,\n      genre: 'Adventure',\n      isPrivate: false,\n      lastUpdated: '2024-12-01'\n    },\n    {\n      id: '2',\n      title: 'City Roleplay Simulator',\n      description: 'Build your life in the ultimate city roleplay experience with jobs, cars, and houses!',\n      thumbnail: '🏙️',\n      creator: 'UrbanDev',\n      players: 5621,\n      maxPlayers: 100,\n      rating: 4.6,\n      visits: 28945123,\n      genre: 'Roleplay',\n      isPrivate: false,\n      lastUpdated: '2024-12-02'\n    },\n    {\n      id: '3',\n      title: 'Space Wars Battle Arena',\n      description: 'Epic PvP battles in space with custom ships and weapons!',\n      thumbnail: '🚀',\n      creator: 'GalacticGames',\n      players: 1834,\n      maxPlayers: 30,\n      rating: 4.9,\n      visits: 8765432,\n      genre: 'Fighting',\n      isPrivate: false,\n      lastUpdated: '2024-12-02'\n    },\n    {\n      id: '4',\n      title: 'Tycoon Empire Builder',\n      description: 'Build and manage your business empire from the ground up!',\n      thumbnail: '🏭',\n      creator: 'TycoonKing',\n      players: 3456,\n      maxPlayers: 25,\n      rating: 4.7,\n      visits: 12456789,\n      genre: 'Simulation',\n      isPrivate: false,\n      lastUpdated: '2024-12-01'\n    },\n    {\n      id: '5',\n      title: 'Horror Mansion Escape',\n      description: 'Survive the night in this terrifying horror experience with friends!',\n      thumbnail: '👻',\n      creator: 'ScareStudios',\n      players: 892,\n      maxPlayers: 8,\n      rating: 4.5,\n      visits: 5234567,\n      genre: 'Horror',\n      isPrivate: false,\n      lastUpdated: '2024-11-30'\n    }\n  ]);\n\n  const [friends, setFriends] = useState<Friend[]>([\n    { id: '1', username: 'GameMaster99', avatar: '👑', status: 'online', currentGame: 'Space Wars Battle Arena' },\n    { id: '2', username: 'BuilderPro', avatar: '🔨', status: 'playing', currentGame: 'Tycoon Empire Builder' },\n    { id: '3', username: 'SpeedRunner42', avatar: '⚡', status: 'online' },\n    { id: '4', username: 'CreativeGenius', avatar: '🎨', status: 'offline' }\n  ]);\n\n  const [achievements, setAchievements] = useState<Achievement[]>([\n    {\n      id: '1',\n      name: 'First Steps',\n      description: 'Join your first game',\n      icon: '👶',\n      unlocked: true,\n      rarity: 'common'\n    },\n    {\n      id: '2',\n      name: 'Social Butterfly',\n      description: 'Add 10 friends',\n      icon: '🦋',\n      unlocked: true,\n      rarity: 'common'\n    },\n    {\n      id: '3',\n      name: 'Developer',\n      description: 'Create your first game',\n      icon: '💻',\n      unlocked: false,\n      rarity: 'rare'\n    },\n    {\n      id: '4',\n      name: 'Legendary Player',\n      description: 'Reach level 50',\n      icon: '🏆',\n      unlocked: false,\n      rarity: 'legendary'\n    }\n  ]);\n\n  const filteredGames = games.filter(game => {\n    const matchesSearch = game.title.toLowerCase().includes(searchQuery.toLowerCase()) ||\n                         game.description.toLowerCase().includes(searchQuery.toLowerCase());\n    const matchesGenre = selectedGenre === 'all' || game.genre === selectedGenre;\n    return matchesSearch && matchesGenre;\n  });\n\n  const genres = ['all', 'Adventure', 'Roleplay', 'Fighting', 'Simulation', 'Horror', 'Racing', 'Sports'];\n\n  const playGame = async (gameId: string) => {\n    const game = games.find(g => g.id === gameId);\n    if (game) {\n      try {\n        const response = await fetch('/api/roblox/games/join', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({ \n            placeId: parseInt(gameId),\n            universeId: parseInt(gameId)\n          })\n        });\n        \n        if (response.ok) {\n          const data = await response.json();\n          // Attempt to launch Roblox client\n          window.open(data.joinUrl, '_blank');\n        } else {\n          console.error('Failed to join game');\n        }\n      } catch (error) {\n        console.error('Error joining game:', error);\n      }\n    }\n  };\n\n  const openStudio = () => {\n    // This would open Roblox Studio\n    alert('Opening Roblox Studio...\\n\\nThis would launch the game development environment!');\n  };\n\n  const formatNumber = (num: number): string => {\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';\n    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n    return num.toString();\n  };\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-blue-500 via-purple-600 to-pink-500 text-white\">\n      {/* Header */}\n      <div className=\"bg-black/20 backdrop-blur-sm border-b border-white/20 p-4\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent\">\n              ROBLOX\n            </div>\n            <div className=\"flex items-center gap-2 bg-black/30 rounded-full px-3 py-1\">\n              <Coins className=\"w-4 h-4 text-yellow-400\" />\n              <span className=\"font-bold\">{userProfile.robux.toLocaleString()}</span>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-3\">\n            <Button onClick={openStudio} className=\"bg-green-600 hover:bg-green-700\">\n              <Edit3 className=\"w-4 h-4 mr-1\" />\n              Studio\n            </Button>\n            <div className=\"flex items-center gap-2\">\n              <div className=\"text-2xl\">{userProfile.avatar}</div>\n              <div className=\"text-sm\">\n                <div className=\"font-medium\">{userProfile.username}</div>\n                <div className=\"text-xs opacity-80\">Level {userProfile.level}</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Navigation */}\n      <Tabs value={currentTab} onValueChange={setCurrentTab} className=\"h-full flex flex-col\">\n        <TabsList className=\"bg-black/30 border-b border-white/20 rounded-none justify-start\">\n          <TabsTrigger value=\"home\" className=\"data-[state=active]:bg-white/20\">\n            <Gamepad2 className=\"w-4 h-4 mr-1\" />\n            Games\n          </TabsTrigger>\n          <TabsTrigger value=\"friends\" className=\"data-[state=active]:bg-white/20\">\n            <Users className=\"w-4 h-4 mr-1\" />\n            Friends\n          </TabsTrigger>\n          <TabsTrigger value=\"profile\" className=\"data-[state=active]:bg-white/20\">\n            <User className=\"w-4 h-4 mr-1\" />\n            Profile\n          </TabsTrigger>\n          <TabsTrigger value=\"create\" className=\"data-[state=active]:bg-white/20\">\n            <Edit3 className=\"w-4 h-4 mr-1\" />\n            Create\n          </TabsTrigger>\n          <TabsTrigger value=\"settings\" className=\"data-[state=active]:bg-white/20\">\n            <Settings className=\"w-4 h-4 mr-1\" />\n            Settings\n          </TabsTrigger>\n        </TabsList>\n\n        <div className=\"flex-1 overflow-auto\">\n          <TabsContent value=\"home\" className=\"p-6 space-y-6\">\n            {/* Search and Filters */}\n            <div className=\"flex gap-4\">\n              <div className=\"flex-1 relative\">\n                <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n                <Input\n                  placeholder=\"Search games...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10 bg-black/30 border-white/20 text-white placeholder-gray-400\"\n                />\n              </div>\n              <select\n                value={selectedGenre}\n                onChange={(e) => setSelectedGenre(e.target.value)}\n                className=\"bg-black/30 border border-white/20 rounded-md px-3 py-2 text-white\"\n              >\n                {genres.map(genre => (\n                  <option key={genre} value={genre} className=\"bg-gray-800\">\n                    {genre === 'all' ? 'All Genres' : genre}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Featured Games */}\n            <div>\n              <h2 className=\"text-xl font-bold mb-4\">🔥 Popular Games</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                {filteredGames.map(game => (\n                  <Card key={game.id} className=\"bg-black/30 border-white/20 text-white hover:bg-black/40 transition-all cursor-pointer\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"text-4xl\">{game.thumbnail}</div>\n                        <div className=\"flex-1 min-w-0\">\n                          <h3 className=\"font-bold truncate\">{game.title}</h3>\n                          <p className=\"text-sm text-gray-300 line-clamp-2 mb-2\">{game.description}</p>\n                          \n                          <div className=\"flex items-center gap-4 text-xs text-gray-400 mb-3\">\n                            <div className=\"flex items-center gap-1\">\n                              <Users className=\"w-3 h-3\" />\n                              {formatNumber(game.players)}/{game.maxPlayers}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Star className=\"w-3 h-3 text-yellow-400\" />\n                              {game.rating}\n                            </div>\n                            <div className=\"flex items-center gap-1\">\n                              <Eye className=\"w-3 h-3\" />\n                              {formatNumber(game.visits)}\n                            </div>\n                          </div>\n                          \n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2\">\n                              <Badge variant=\"secondary\" className=\"text-xs\">\n                                {game.genre}\n                              </Badge>\n                              <span className=\"text-xs text-gray-400\">by {game.creator}</span>\n                            </div>\n                            <Button \n                              size=\"sm\" \n                              onClick={() => playGame(game.id)}\n                              className=\"bg-green-600 hover:bg-green-700\"\n                            >\n                              <Play className=\"w-3 h-3 mr-1\" />\n                              Play\n                            </Button>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"friends\" className=\"p-6 space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-xl font-bold\">Friends ({friends.length})</h2>\n              <Button variant=\"outline\" className=\"border-white/20 text-white\">\n                Add Friends\n              </Button>\n            </div>\n\n            <div className=\"grid gap-4\">\n              {friends.map(friend => (\n                <Card key={friend.id} className=\"bg-black/30 border-white/20 text-white\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"text-2xl\">{friend.avatar}</div>\n                        <div>\n                          <div className=\"font-medium\">{friend.username}</div>\n                          <div className=\"flex items-center gap-2 text-sm\">\n                            <div className={`w-2 h-2 rounded-full ${\n                              friend.status === 'online' ? 'bg-green-400' :\n                              friend.status === 'playing' ? 'bg-blue-400' : 'bg-gray-400'\n                            }`} />\n                            {friend.status === 'playing' && friend.currentGame ? \n                              `Playing ${friend.currentGame}` : \n                              friend.status\n                            }\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"flex gap-2\">\n                        <Button size=\"sm\" variant=\"outline\" className=\"border-white/20 text-white\">\n                          <MessageCircle className=\"w-3 h-3\" />\n                        </Button>\n                        {friend.currentGame && (\n                          <Button size=\"sm\" className=\"bg-blue-600 hover:bg-blue-700\">\n                            Join Game\n                          </Button>\n                        )}\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"profile\" className=\"p-6 space-y-6\">\n            <Card className=\"bg-black/30 border-white/20 text-white\">\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-3\">\n                  <div className=\"text-4xl\">{userProfile.avatar}</div>\n                  <div>\n                    <div className=\"text-2xl\">{userProfile.username}</div>\n                    <div className=\"text-sm text-gray-400\">Level {userProfile.level} • Joined {userProfile.joinDate}</div>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"grid grid-cols-3 gap-4 text-center\">\n                  <div className=\"bg-black/40 rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-yellow-400\">{userProfile.robux.toLocaleString()}</div>\n                    <div className=\"text-sm text-gray-400\">Robux</div>\n                  </div>\n                  <div className=\"bg-black/40 rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-blue-400\">{friends.length}</div>\n                    <div className=\"text-sm text-gray-400\">Friends</div>\n                  </div>\n                  <div className=\"bg-black/40 rounded-lg p-3\">\n                    <div className=\"text-xl font-bold text-green-400\">{achievements.filter(a => a.unlocked).length}</div>\n                    <div className=\"text-sm text-gray-400\">Achievements</div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"bg-black/30 border-white/20 text-white\">\n              <CardHeader>\n                <CardTitle>🏆 Achievements</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid gap-3\">\n                  {achievements.map(achievement => (\n                    <div key={achievement.id} className={`flex items-center gap-3 p-3 rounded-lg ${\n                      achievement.unlocked ? 'bg-green-900/30' : 'bg-gray-800/30'\n                    }`}>\n                      <div className=\"text-2xl\">{achievement.icon}</div>\n                      <div className=\"flex-1\">\n                        <div className=\"font-medium\">{achievement.name}</div>\n                        <div className=\"text-sm text-gray-400\">{achievement.description}</div>\n                      </div>\n                      <Badge variant={achievement.unlocked ? 'default' : 'secondary'}>\n                        {achievement.rarity}\n                      </Badge>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"settings\" className=\"p-6 space-y-6\">\n            <Card className=\"bg-black/30 border-white/20 text-white\">\n              <CardHeader>\n                <CardTitle>⚙️ Account Settings</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-6\">\n                <div className=\"space-y-4\">\n                  <h3 className=\"font-semibold text-lg\">Account Mode</h3>\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    <Card \n                      className={`cursor-pointer transition-all ${\n                        accountMode === 'default' \n                          ? 'bg-blue-600/20 border-blue-500' \n                          : 'bg-black/40 border-white/10 hover:border-white/20'\n                      }`}\n                      onClick={() => setAccountMode('default')}\n                    >\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3 mb-3\">\n                          <div className=\"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center\">\n                            🧑‍💻\n                          </div>\n                          <div>\n                            <h4 className=\"font-semibold\">WebOS Default Account</h4>\n                            <p className=\"text-sm text-gray-400\">Demo experience</p>\n                          </div>\n                        </div>\n                        <ul className=\"text-sm text-gray-300 space-y-1\">\n                          <li>• Browse sample games and content</li>\n                          <li>• Access Roblox Studio features</li>\n                          <li>• Educational gaming experience</li>\n                          <li>• No personal data required</li>\n                        </ul>\n                        {accountMode === 'default' && (\n                          <div className=\"mt-3 text-sm text-blue-400 font-medium\">\n                            ✓ Currently active\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n\n                    <Card \n                      className={`cursor-pointer transition-all ${\n                        accountMode === 'connected' \n                          ? 'bg-green-600/20 border-green-500' \n                          : 'bg-black/40 border-white/10 hover:border-white/20'\n                      }`}\n                      onClick={() => setAccountMode('connected')}\n                    >\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center gap-3 mb-3\">\n                          <div className=\"w-10 h-10 bg-gradient-to-r from-green-600 to-blue-600 rounded-full flex items-center justify-center\">\n                            🔗\n                          </div>\n                          <div>\n                            <h4 className=\"font-semibold\">Connected Roblox Account</h4>\n                            <p className=\"text-sm text-gray-400\">Full features</p>\n                          </div>\n                        </div>\n                        <ul className=\"text-sm text-gray-300 space-y-1\">\n                          <li>• Access your real games library</li>\n                          <li>• Join friends and real players</li>\n                          <li>• Sync your actual progress</li>\n                          <li>• Full Roblox experience</li>\n                        </ul>\n                        {accountMode === 'connected' && (\n                          <div className=\"mt-3 text-sm text-green-400 font-medium\">\n                            ✓ Currently active\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n                  </div>\n                </div>\n\n                {accountMode === 'default' && (\n                  <Card className=\"bg-blue-600/10 border-blue-500/30\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                          ℹ️\n                        </div>\n                        <div>\n                          <h4 className=\"font-semibold text-blue-300 mb-2\">Default Account Active</h4>\n                          <p className=\"text-sm text-gray-300 mb-3\">\n                            You're using the WebOS default Roblox account. This provides a full demo experience \n                            with sample games, Roblox Studio access, and educational content.\n                          </p>\n                          <div className=\"bg-black/30 rounded-lg p-3 space-y-2\">\n                            <div className=\"flex justify-between text-sm\">\n                              <span className=\"text-gray-400\">Username:</span>\n                              <span className=\"text-white font-medium\">{userProfile.username}</span>\n                            </div>\n                            <div className=\"flex justify-between text-sm\">\n                              <span className=\"text-gray-400\">Robux:</span>\n                              <span className=\"text-yellow-400 font-medium\">💰 {userProfile.robux.toLocaleString()}</span>\n                            </div>\n                            <div className=\"flex justify-between text-sm\">\n                              <span className=\"text-gray-400\">Level:</span>\n                              <span className=\"text-blue-400 font-medium\">⭐ {userProfile.level}</span>\n                            </div>\n                            <div className=\"flex justify-between text-sm\">\n                              <span className=\"text-gray-400\">Premium:</span>\n                              <span className=\"text-purple-400 font-medium\">👑 {userProfile.premium ? 'Active' : 'None'}</span>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                {accountMode === 'connected' && (\n                  <Card className=\"bg-green-600/10 border-green-500/30\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-start gap-3\">\n                        <div className=\"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center flex-shrink-0 mt-1\">\n                          🔗\n                        </div>\n                        <div className=\"w-full\">\n                          <h4 className=\"font-semibold text-green-300 mb-2\">Connect Your Roblox Account</h4>\n                          <p className=\"text-sm text-gray-300 mb-4\">\n                            Connect your real Roblox account to access your games, friends, and full platform features.\n                            Your API credentials are used securely to fetch your data.\n                          </p>\n                          \n                          <div className=\"space-y-3\">\n                            <Button \n                              className=\"w-full bg-green-600 hover:bg-green-700\"\n                              onClick={() => {\n                                // This would trigger the real API connection\n                                alert('API connection feature requires valid Roblox API credentials. Contact support for setup.');\n                              }}\n                            >\n                              <Globe className=\"w-4 h-4 mr-2\" />\n                              Connect Roblox Account\n                            </Button>\n                            \n                            <div className=\"text-xs text-gray-400 bg-black/30 rounded p-3\">\n                              <strong>Note:</strong> Real account connection requires valid API credentials and proper \n                              authentication setup. The default account provides full functionality for demo purposes.\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                )}\n\n                <Card className=\"bg-black/40 border-white/10\">\n                  <CardContent className=\"p-4\">\n                    <h4 className=\"font-semibold mb-3\">Privacy & Data</h4>\n                    <div className=\"space-y-2 text-sm text-gray-300\">\n                      <div className=\"flex justify-between\">\n                        <span>Data Storage:</span>\n                        <span className=\"text-blue-400\">Local WebOS only</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>External Connections:</span>\n                        <span className=\"text-green-400\">Secure API only</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>Account Data:</span>\n                        <span className=\"text-purple-400\">Encrypted</span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"create\" className=\"p-6 space-y-6\">\n            <Card className=\"bg-black/30 border-white/20 text-white\">\n              <CardHeader>\n                <CardTitle>🎮 Create Games</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <p className=\"text-gray-300\">\n                  Use Roblox Studio to create amazing games and experiences! Choose from templates or start from scratch.\n                </p>\n                \n                <div className=\"grid grid-cols-2 gap-4\">\n                  <Button onClick={openStudio} className=\"h-24 bg-blue-600 hover:bg-blue-700 flex-col\">\n                    <Edit3 className=\"w-8 h-8 mb-2\" />\n                    Open Studio\n                  </Button>\n                  <Button variant=\"outline\" className=\"h-24 border-white/20 text-white flex-col\">\n                    <Download className=\"w-8 h-8 mb-2\" />\n                    Templates\n                  </Button>\n                </div>\n\n                <div className=\"space-y-3\">\n                  <h3 className=\"font-semibold\">My Games</h3>\n                  <Card className=\"bg-black/40 border-white/10\">\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex items-center justify-between\">\n                        <div>\n                          <div className=\"font-medium\">Awesome Adventure</div>\n                          <div className=\"text-sm text-gray-400\">Last edited: 2 days ago</div>\n                        </div>\n                        <div className=\"flex gap-2\">\n                          <Button size=\"sm\" variant=\"outline\" className=\"border-white/20 text-white\">\n                            Edit\n                          </Button>\n                          <Button size=\"sm\" className=\"bg-green-600 hover:bg-green-700\">\n                            Publish\n                          </Button>\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </div>\n      </Tabs>\n    </div>\n  );\n};","size_bytes":29650},"client/src/components/apps/RobloxAPI.tsx":{"content":"// Roblox API Integration for WebOS\nexport interface RobloxUser {\n  id: number;\n  username: string;\n  displayName: string;\n  avatar: string;\n  robux: number;\n  level: number;\n  joinDate: string;\n}\n\nexport interface RobloxGame {\n  id: string;\n  name: string;\n  description: string;\n  creator: string;\n  placeId: number;\n  universeId: number;\n  playing: number;\n  visits: number;\n  maxPlayers: number;\n  genre: string;\n  thumbnailUrl: string;\n  isPlayable: boolean;\n  price: number;\n}\n\nexport interface RobloxFriend {\n  id: number;\n  username: string;\n  displayName: string;\n  isOnline: boolean;\n  lastLocation?: string;\n  avatar: string;\n}\n\nexport class RobloxAPI {\n  private static instance: RobloxAPI;\n  private baseUrl = 'https://www.roblox.com';\n  private gamesUrl = 'https://games.roblox.com';\n  private friendsUrl = 'https://friends.roblox.com';\n  \n  public static getInstance(): RobloxAPI {\n    if (!RobloxAPI.instance) {\n      RobloxAPI.instance = new RobloxAPI();\n    }\n    return RobloxAPI.instance;\n  }\n\n  async getPopularGames(): Promise<RobloxGame[]> {\n    try {\n      // Call the real Roblox Games API\n      const response = await fetch('/api/roblox/games/popular', {\n        headers: {\n          'Authorization': `Bearer ${process.env.ROBLOX_API_KEY}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      \n      if (response.ok) {\n        const data = await response.json();\n        return data.games || [];\n      }\n      \n      // Fallback to sample games if API fails\n      return [\n        {\n          id: '1818',\n          name: 'MeepCity',\n          description: 'The ultimate social hangout!',\n          creator: 'alexnewtron',\n          placeId: 370731277,\n          universeId: 1818,\n          playing: 15234,\n          visits: 4500000000,\n          maxPlayers: 100,\n          genre: 'Town and City',\n          thumbnailUrl: 'https://tr.rbxcdn.com/game-thumbnails/1818.jpg',\n          isPlayable: true,\n          price: 0\n        },\n        {\n          id: '2753',\n          name: 'Adopt Me!',\n          description: 'Raise a family and collect amazing pets!',\n          creator: 'DreamCraft',\n          placeId: 920587237,\n          universeId: 2753,\n          playing: 425000,\n          visits: 31000000000,\n          maxPlayers: 48,\n          genre: 'Town and City',\n          thumbnailUrl: 'https://tr.rbxcdn.com/game-thumbnails/2753.jpg',\n          isPlayable: true,\n          price: 0\n        },\n        {\n          id: '4924',\n          name: 'Brookhaven 🏡RP',\n          description: 'Welcome to Brookhaven, where you can live your dreams!',\n          creator: 'Wolfpaq',\n          placeId: 4924922222,\n          universeId: 4924,\n          playing: 312000,\n          visits: 15000000000,\n          maxPlayers: 12,\n          genre: 'Town and City',\n          thumbnailUrl: 'https://tr.rbxcdn.com/game-thumbnails/4924.jpg',\n          isPlayable: true,\n          price: 0\n        }\n      ];\n    } catch (error) {\n      console.error('Failed to fetch popular games:', error);\n      return [];\n    }\n  }\n\n  async getUserInfo(userId?: number): Promise<RobloxUser | null> {\n    try {\n      // This would normally call the Roblox Users API\n      return {\n        id: userId || 12345,\n        username: 'WebOSPlayer',\n        displayName: 'WebOS Player',\n        avatar: 'https://www.roblox.com/avatar-thumbnail/image?userId=12345&width=420&height=420&format=png',\n        robux: 1250,\n        level: 42,\n        joinDate: '2019-03-15'\n      };\n    } catch (error) {\n      console.error('Failed to fetch user info:', error);\n      return null;\n    }\n  }\n\n  async getFriends(userId: number): Promise<RobloxFriend[]> {\n    try {\n      // This would call the Roblox Friends API\n      return [\n        {\n          id: 67890,\n          username: 'BuilderPro123',\n          displayName: 'Builder Pro',\n          isOnline: true,\n          lastLocation: 'MeepCity',\n          avatar: 'https://www.roblox.com/avatar-thumbnail/image?userId=67890&width=150&height=150&format=png'\n        },\n        {\n          id: 54321,\n          username: 'GameMaster99',\n          displayName: 'Game Master',\n          isOnline: false,\n          avatar: 'https://www.roblox.com/avatar-thumbnail/image?userId=54321&width=150&height=150&format=png'\n        }\n      ];\n    } catch (error) {\n      console.error('Failed to fetch friends:', error);\n      return [];\n    }\n  }\n\n  async joinGame(placeId: number): Promise<boolean> {\n    try {\n      // This would normally launch the Roblox client\n      console.log(`Attempting to join game with Place ID: ${placeId}`);\n      \n      // Show join dialog\n      const shouldJoin = confirm(`Join this Roblox game?\\n\\nPlace ID: ${placeId}\\n\\nThis will attempt to open the Roblox client.`);\n      \n      if (shouldJoin) {\n        // In a real implementation, this would use the Roblox protocol\n        window.open(`roblox://placeId=${placeId}`, '_blank');\n        return true;\n      }\n      \n      return false;\n    } catch (error) {\n      console.error('Failed to join game:', error);\n      return false;\n    }\n  }\n\n  async searchGames(query: string): Promise<RobloxGame[]> {\n    try {\n      const allGames = await this.getPopularGames();\n      return allGames.filter(game => \n        game.name.toLowerCase().includes(query.toLowerCase()) ||\n        game.description.toLowerCase().includes(query.toLowerCase())\n      );\n    } catch (error) {\n      console.error('Failed to search games:', error);\n      return [];\n    }\n  }\n\n  formatNumber(num: number): string {\n    if (num >= 1000000000) return (num / 1000000000).toFixed(1) + 'B';\n    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';\n    if (num >= 1000) return (num / 1000).toFixed(1) + 'K';\n    return num.toString();\n  }\n}","size_bytes":5746},"client/src/components/apps/RobloxStudio.tsx":{"content":"import { FC, useState, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Slider } from '@/components/ui/slider';\nimport { \n  Play, Save, FolderOpen, Upload, Download, Settings, \n  Box, Circle, Move3D, RotateCcw, \n  Scale, Eye, EyeOff, Trash2, Copy, Layers, Code,\n  Paintbrush, Zap, Globe, Users, TestTube\n} from 'lucide-react';\n\ninterface GameObject {\n  id: string;\n  name: string;\n  type: 'part' | 'model' | 'script' | 'gui';\n  position: { x: number; y: number; z: number };\n  rotation: { x: number; y: number; z: number };\n  scale: { x: number; y: number; z: number };\n  color: string;\n  material: string;\n  visible: boolean;\n  children: GameObject[];\n}\n\ninterface Script {\n  id: string;\n  name: string;\n  content: string;\n  type: 'server' | 'local' | 'module';\n}\n\nexport const RobloxStudio: FC = () => {\n  const [projectName, setProjectName] = useState('Untitled Place');\n  const [selectedTool, setSelectedTool] = useState('select');\n  const [selectedObject, setSelectedObject] = useState<string | null>(null);\n  const [viewport3D, setViewport3D] = useState(true);\n  const [isPlaying, setIsPlaying] = useState(false);\n  \n  const [gameObjects, setGameObjects] = useState<GameObject[]>([\n    {\n      id: '1',\n      name: 'Workspace',\n      type: 'model',\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 1, y: 1, z: 1 },\n      color: '#ffffff',\n      material: 'Plastic',\n      visible: true,\n      children: [\n        {\n          id: '2',\n          name: 'SpawnLocation',\n          type: 'part',\n          position: { x: 0, y: -10, z: 0 },\n          rotation: { x: 0, y: 0, z: 0 },\n          scale: { x: 6, y: 1, z: 6 },\n          color: '#00ff00',\n          material: 'Neon',\n          visible: true,\n          children: []\n        },\n        {\n          id: '3',\n          name: 'Baseplate',\n          type: 'part',\n          position: { x: 0, y: -20, z: 0 },\n          rotation: { x: 0, y: 0, z: 0 },\n          scale: { x: 100, y: 1, z: 100 },\n          color: '#808080',\n          material: 'Concrete',\n          visible: true,\n          children: []\n        }\n      ]\n    }\n  ]);\n\n  const [scripts, setScripts] = useState<Script[]>([\n    {\n      id: '1',\n      name: 'PlayerSpawn',\n      type: 'server',\n      content: `-- Player Spawn Script\nlocal Players = game:GetService(\"Players\")\nlocal RunService = game:GetService(\"RunService\")\n\nPlayers.PlayerAdded:Connect(function(player)\n    player.CharacterAdded:Connect(function(character)\n        local humanoid = character:WaitForChild(\"Humanoid\")\n        local spawnLocation = workspace.SpawnLocation\n        \n        character:SetPrimaryPartCFrame(spawnLocation.CFrame + Vector3.new(0, 10, 0))\n        print(player.Name .. \" has spawned!\")\n    end)\nend)`\n    },\n    {\n      id: '2',\n      name: 'GameLogic',\n      type: 'server',\n      content: `-- Main Game Logic\nlocal ReplicatedStorage = game:GetService(\"ReplicatedStorage\")\nlocal Players = game:GetService(\"Players\")\n\n-- Game settings\nlocal GAME_DURATION = 300 -- 5 minutes\nlocal MAX_PLAYERS = 12\n\n-- Game state\nlocal gameActive = false\nlocal players = {}\n\nfunction startGame()\n    gameActive = true\n    print(\"Game started!\")\n    \n    -- Initialize player data\n    for _, player in pairs(Players:GetPlayers()) do\n        players[player.UserId] = {\n            score = 0,\n            coins = 0,\n            level = 1\n        }\n    end\nend\n\nfunction endGame()\n    gameActive = false\n    print(\"Game ended!\")\n    -- Handle game end logic\nend\n\n-- Start the game when enough players join\nPlayers.PlayerAdded:Connect(function(player)\n    if #Players:GetPlayers() >= 2 and not gameActive then\n        wait(5) -- Give time for more players\n        startGame()\n    end\nend)`\n    }\n  ]);\n\n  const [activeScript, setActiveScript] = useState<string | null>(scripts[0]?.id || null);\n\n  const tools = [\n    { id: 'select', icon: Move3D, name: 'Select' },\n    { id: 'move', icon: Move3D, name: 'Move' },\n    { id: 'rotate', icon: RotateCcw, name: 'Rotate' },\n    { id: 'scale', icon: Scale, name: 'Scale' },\n    { id: 'part', icon: Box, name: 'Part' },\n    { id: 'sphere', icon: Circle, name: 'Sphere' },\n    { id: 'cylinder', icon: Circle, name: 'Cylinder' },\n    { id: 'cone', icon: Circle, name: 'Cone' }\n  ];\n\n  const materials = ['Plastic', 'Wood', 'Metal', 'Concrete', 'Brick', 'Granite', 'Glass', 'Neon', 'ForceField'];\n\n  const addGameObject = (type: string) => {\n    const newObject: GameObject = {\n      id: Date.now().toString(),\n      name: `New${type.charAt(0).toUpperCase()}${type.slice(1)}`,\n      type: 'part',\n      position: { x: 0, y: 0, z: 0 },\n      rotation: { x: 0, y: 0, z: 0 },\n      scale: { x: 4, y: 4, z: 4 },\n      color: '#4287f5',\n      material: 'Plastic',\n      visible: true,\n      children: []\n    };\n\n    setGameObjects(prev => {\n      const workspace = prev[0];\n      return [{\n        ...workspace,\n        children: [...workspace.children, newObject]\n      }];\n    });\n  };\n\n  const deleteSelectedObject = () => {\n    if (!selectedObject) return;\n    \n    setGameObjects(prev => {\n      const workspace = prev[0];\n      return [{\n        ...workspace,\n        children: workspace.children.filter(obj => obj.id !== selectedObject)\n      }];\n    });\n    setSelectedObject(null);\n  };\n\n  const togglePlay = () => {\n    setIsPlaying(!isPlaying);\n    if (!isPlaying) {\n      alert('Testing game...\\n\\nThis would start a local test server where you can play your game!');\n    }\n  };\n\n  const publishGame = () => {\n    alert(`Publishing \"${projectName}\"...\\n\\nThis would upload your game to the Roblox platform for others to play!`);\n  };\n\n  const saveProject = () => {\n    const projectData = {\n      name: projectName,\n      objects: gameObjects,\n      scripts: scripts,\n      timestamp: new Date().toISOString()\n    };\n    console.log('Saving project:', projectData);\n    alert('Project saved successfully!');\n  };\n\n  const renderHierarchy = (objects: GameObject[], depth = 0) => {\n    return objects.map(obj => (\n      <div key={obj.id} style={{ marginLeft: depth * 16 }}>\n        <div \n          className={`flex items-center gap-2 p-1 hover:bg-gray-700 cursor-pointer ${\n            selectedObject === obj.id ? 'bg-blue-600' : ''\n          }`}\n          onClick={() => setSelectedObject(obj.id)}\n        >\n          <div className=\"w-4 h-4 flex items-center justify-center\">\n            {obj.type === 'part' && <Box className=\"w-3 h-3\" />}\n            {obj.type === 'model' && <Layers className=\"w-3 h-3\" />}\n            {obj.type === 'script' && <Code className=\"w-3 h-3\" />}\n          </div>\n          <span className=\"text-sm\">{obj.name}</span>\n          <div className=\"ml-auto flex gap-1\">\n            <button onClick={(e) => { e.stopPropagation(); /* toggle visibility */ }}>\n              {obj.visible ? <Eye className=\"w-3 h-3\" /> : <EyeOff className=\"w-3 h-3\" />}\n            </button>\n          </div>\n        </div>\n        {obj.children.length > 0 && renderHierarchy(obj.children, depth + 1)}\n      </div>\n    ));\n  };\n\n  const getSelectedObject = (): GameObject | null => {\n    if (!selectedObject) return null;\n    \n    const findObject = (objects: GameObject[]): GameObject | null => {\n      for (const obj of objects) {\n        if (obj.id === selectedObject) return obj;\n        const found = findObject(obj.children);\n        if (found) return found;\n      }\n      return null;\n    };\n    \n    return findObject(gameObjects);\n  };\n\n  const updateSelectedObject = (updates: Partial<GameObject>) => {\n    if (!selectedObject) return;\n    \n    setGameObjects(prev => {\n      const updateObject = (objects: GameObject[]): GameObject[] => {\n        return objects.map(obj => {\n          if (obj.id === selectedObject) {\n            return { ...obj, ...updates };\n          }\n          if (obj.children.length > 0) {\n            return { ...obj, children: updateObject(obj.children) };\n          }\n          return obj;\n        });\n      };\n      \n      return updateObject(prev);\n    });\n  };\n\n  const selectedObj = getSelectedObject();\n\n  return (\n    <div className=\"h-full bg-gray-900 text-white flex flex-col\">\n      {/* Header */}\n      <div className=\"bg-gray-800 border-b border-gray-700 p-3 flex items-center justify-between\">\n        <div className=\"flex items-center gap-4\">\n          <div className=\"text-lg font-bold text-blue-400\">Roblox Studio</div>\n          <Input\n            value={projectName}\n            onChange={(e) => setProjectName(e.target.value)}\n            className=\"bg-gray-700 border-gray-600 text-white w-48\"\n          />\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" onClick={saveProject}>\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n          <Button \n            onClick={togglePlay}\n            className={isPlaying ? 'bg-red-600 hover:bg-red-700' : 'bg-green-600 hover:bg-green-700'}\n          >\n            {isPlaying ? 'Stop' : <Play className=\"w-4 h-4 mr-1\" />}\n            {isPlaying ? 'Stop' : 'Test'}\n          </Button>\n          <Button onClick={publishGame} className=\"bg-blue-600 hover:bg-blue-700\">\n            <Upload className=\"w-4 h-4 mr-1\" />\n            Publish\n          </Button>\n        </div>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"bg-gray-800 border-b border-gray-700 p-2 flex items-center gap-1\">\n        {tools.map(tool => (\n          <Button\n            key={tool.id}\n            variant={selectedTool === tool.id ? 'default' : 'ghost'}\n            size=\"sm\"\n            onClick={() => setSelectedTool(tool.id)}\n            title={tool.name}\n            className=\"w-10 h-10 p-0\"\n          >\n            <tool.icon className=\"w-4 h-4\" />\n          </Button>\n        ))}\n        \n        <div className=\"w-px h-6 bg-gray-600 mx-2\" />\n        \n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => addGameObject('part')}\n          title=\"Add Part\"\n        >\n          <Box className=\"w-4 h-4\" />\n        </Button>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={deleteSelectedObject}\n          title=\"Delete\"\n          disabled={!selectedObject}\n        >\n          <Trash2 className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      <div className=\"flex-1 flex\">\n        {/* Left Panel - Explorer */}\n        <div className=\"w-64 bg-gray-800 border-r border-gray-700 flex flex-col\">\n          <Tabs defaultValue=\"explorer\" className=\"flex-1\">\n            <TabsList className=\"grid w-full grid-cols-2 bg-gray-700\">\n              <TabsTrigger value=\"explorer\">Explorer</TabsTrigger>\n              <TabsTrigger value=\"properties\">Properties</TabsTrigger>\n            </TabsList>\n            \n            <TabsContent value=\"explorer\" className=\"flex-1 p-2\">\n              <div className=\"space-y-1\">\n                {renderHierarchy(gameObjects)}\n              </div>\n            </TabsContent>\n            \n            <TabsContent value=\"properties\" className=\"flex-1 p-3 space-y-3\">\n              {selectedObj ? (\n                <>\n                  <div>\n                    <label className=\"text-xs text-gray-400\">Name</label>\n                    <Input\n                      value={selectedObj.name}\n                      onChange={(e) => updateSelectedObject({ name: e.target.value })}\n                      className=\"bg-gray-700 border-gray-600 text-white text-sm\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-xs text-gray-400\">Material</label>\n                    <select\n                      value={selectedObj.material}\n                      onChange={(e) => updateSelectedObject({ material: e.target.value })}\n                      className=\"w-full bg-gray-700 border border-gray-600 rounded px-2 py-1 text-sm text-white\"\n                    >\n                      {materials.map(material => (\n                        <option key={material} value={material}>{material}</option>\n                      ))}\n                    </select>\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-xs text-gray-400\">Color</label>\n                    <input\n                      type=\"color\"\n                      value={selectedObj.color}\n                      onChange={(e) => updateSelectedObject({ color: e.target.value })}\n                      className=\"w-full h-8 bg-gray-700 border border-gray-600 rounded\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-xs text-gray-400\">Position X</label>\n                    <Slider\n                      value={[selectedObj.position.x]}\n                      onValueChange={(value) => updateSelectedObject({ \n                        position: { ...selectedObj.position, x: value[0] }\n                      })}\n                      min={-50}\n                      max={50}\n                      step={0.5}\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-xs text-gray-400\">Position Y</label>\n                    <Slider\n                      value={[selectedObj.position.y]}\n                      onValueChange={(value) => updateSelectedObject({ \n                        position: { ...selectedObj.position, y: value[0] }\n                      })}\n                      min={-50}\n                      max={50}\n                      step={0.5}\n                      className=\"mt-1\"\n                    />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-xs text-gray-400\">Position Z</label>\n                    <Slider\n                      value={[selectedObj.position.z]}\n                      onValueChange={(value) => updateSelectedObject({ \n                        position: { ...selectedObj.position, z: value[0] }\n                      })}\n                      min={-50}\n                      max={50}\n                      step={0.5}\n                      className=\"mt-1\"\n                    />\n                  </div>\n                </>\n              ) : (\n                <div className=\"text-gray-400 text-sm\">Select an object to edit properties</div>\n              )}\n            </TabsContent>\n          </Tabs>\n        </div>\n\n        {/* Center - 3D Viewport */}\n        <div className=\"flex-1 bg-gray-900 relative\">\n          <div className=\"absolute inset-0 bg-gradient-to-b from-blue-900 to-gray-900 flex items-center justify-center\">\n            {/* 3D Viewport Simulation */}\n            <div className=\"relative w-full h-full overflow-hidden\">\n              {/* Grid floor */}\n              <div className=\"absolute bottom-1/2 left-1/2 transform -translate-x-1/2 translate-y-1/2\">\n                <div className=\"w-96 h-96 bg-gray-700 opacity-30 border border-gray-600\" \n                     style={{ \n                       background: 'repeating-linear-gradient(0deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 11px), repeating-linear-gradient(90deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 11px)' \n                     }}>\n                </div>\n              </div>\n              \n              {/* Render game objects */}\n              {gameObjects[0]?.children.map(obj => (\n                <div\n                  key={obj.id}\n                  className={`absolute border-2 cursor-pointer ${\n                    selectedObject === obj.id ? 'border-blue-400' : 'border-white/30'\n                  }`}\n                  style={{\n                    left: `${50 + obj.position.x}%`,\n                    top: `${50 - obj.position.y}%`,\n                    width: `${obj.scale.x * 4}px`,\n                    height: `${obj.scale.y * 4}px`,\n                    backgroundColor: obj.color,\n                    opacity: 0.8,\n                    transform: `translate(-50%, -50%) rotateZ(${obj.rotation.z}deg)`\n                  }}\n                  onClick={() => setSelectedObject(obj.id)}\n                >\n                  <div className=\"absolute -top-6 left-1/2 transform -translate-x-1/2 text-xs text-white bg-black/50 px-1 rounded\">\n                    {obj.name}\n                  </div>\n                </div>\n              ))}\n              \n              {/* Viewport info */}\n              <div className=\"absolute top-4 left-4 bg-black/50 px-2 py-1 rounded text-sm\">\n                Camera: Perspective | Tool: {tools.find(t => t.id === selectedTool)?.name}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right Panel - Scripts */}\n        <div className=\"w-80 bg-gray-800 border-l border-gray-700 flex flex-col\">\n          <div className=\"p-3 border-b border-gray-700\">\n            <div className=\"flex items-center justify-between mb-2\">\n              <h3 className=\"font-medium\">Scripts</h3>\n              <Button size=\"sm\" variant=\"ghost\">\n                <Code className=\"w-4 h-4\" />\n              </Button>\n            </div>\n            <div className=\"space-y-1\">\n              {scripts.map(script => (\n                <div\n                  key={script.id}\n                  className={`flex items-center gap-2 p-2 rounded cursor-pointer ${\n                    activeScript === script.id ? 'bg-blue-600' : 'hover:bg-gray-700'\n                  }`}\n                  onClick={() => setActiveScript(script.id)}\n                >\n                  <Code className=\"w-4 h-4\" />\n                  <span className=\"text-sm\">{script.name}</span>\n                  <span className=\"text-xs text-gray-400 ml-auto\">{script.type}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n          \n          {activeScript && (\n            <div className=\"flex-1 flex flex-col\">\n              <div className=\"p-2 bg-gray-700 text-sm\">\n                {scripts.find(s => s.id === activeScript)?.name} - Lua Script\n              </div>\n              <div className=\"flex-1 p-3\">\n                <textarea\n                  value={scripts.find(s => s.id === activeScript)?.content || ''}\n                  onChange={(e) => {\n                    setScripts(prev => prev.map(script => \n                      script.id === activeScript \n                        ? { ...script, content: e.target.value }\n                        : script\n                    ));\n                  }}\n                  className=\"w-full h-full bg-gray-900 border border-gray-600 text-green-400 font-mono text-sm p-2 resize-none\"\n                  placeholder=\"-- Write your Lua script here\"\n                  style={{ fontFamily: 'Monaco, Consolas, monospace' }}\n                />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-gray-800 border-t border-gray-700 p-2 flex items-center justify-between text-sm\">\n        <div className=\"flex items-center gap-4\">\n          <span>Objects: {gameObjects[0]?.children.length || 0}</span>\n          <span>Scripts: {scripts.length}</span>\n          {selectedObject && <span>Selected: {selectedObj?.name}</span>}\n        </div>\n        <div className=\"flex items-center gap-4\">\n          <span>Ready</span>\n          <div className=\"flex items-center gap-1\">\n            <Globe className=\"w-4 h-4\" />\n            <span>Studio</span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":19834},"client/src/components/apps/Settings.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\nimport { Slider } from '@/components/ui/slider';\nimport { Monitor, Palette, Volume2, User, Power, Settings as SettingsIcon, RotateCcw, LogOut, Moon, Upload, Heart } from 'lucide-react';\nimport { soundManager, playSounds } from '@/lib/soundManager';\nimport { usePrideTheme } from '@/components/PrideTheme';\nimport { colorPaletteManager } from '@/lib/colorPalette';\n\ninterface SettingsCategory {\n  id: string;\n  name: string;\n  icon: React.ReactNode;\n}\n\nconst categories: SettingsCategory[] = [\n  { id: 'display', name: 'Display', icon: <Monitor className=\"w-4 h-4\" /> },\n  { id: 'themes', name: 'Themes', icon: <Palette className=\"w-4 h-4\" /> },\n  { id: 'audio', name: 'Audio', icon: <Volume2 className=\"w-4 h-4\" /> },\n  { id: 'account', name: 'Account', icon: <User className=\"w-4 h-4\" /> },\n  { id: 'power', name: 'Power', icon: <Power className=\"w-4 h-4\" /> }\n];\n\nconst wallpapers = [\n  { id: 'default', name: 'Arch Dark', preview: 'bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900' },\n  { id: 'terminal', name: 'Terminal Green', preview: 'bg-gradient-to-br from-green-900 to-black' },\n  { id: 'code', name: 'Code Blue', preview: 'bg-gradient-to-br from-blue-900 to-indigo-900' },\n  { id: 'matrix', name: 'Matrix Black', preview: 'bg-gradient-to-br from-black to-green-800' },\n  { id: 'cyber', name: 'Cyber Purple', preview: 'bg-gradient-to-br from-purple-900 to-black' },\n  { id: 'sunset', name: 'Sunset Orange', preview: 'bg-gradient-to-br from-orange-600 to-red-800' },\n  { id: 'ocean', name: 'Ocean Blue', preview: 'bg-gradient-to-br from-blue-400 to-blue-800' },\n  { id: 'forest', name: 'Forest Green', preview: 'bg-gradient-to-br from-green-600 to-green-900' },\n  { id: 'fire', name: 'Fire Red', preview: 'bg-gradient-to-br from-red-500 to-orange-700' },\n  { id: 'cosmic', name: 'Cosmic Purple', preview: 'bg-gradient-to-br from-indigo-600 to-purple-800' },\n  { id: 'dawn', name: 'Dawn Pink', preview: 'bg-gradient-to-br from-pink-400 to-purple-600' },\n  { id: 'midnight', name: 'Midnight Blue', preview: 'bg-gradient-to-br from-gray-900 to-blue-900' }\n];\n\ninterface SettingsProps {\n  onShutdown?: () => void;\n  onRestart?: () => void;\n  onLogout?: () => void;\n}\n\nexport const Settings: FC<SettingsProps> = ({ onShutdown, onRestart, onLogout }) => {\n  const [activeCategory, setActiveCategory] = useState('display');\n  const { isEnabled: prideThemeEnabled, setPrideTheme } = usePrideTheme();\n  const [currentPalette, setCurrentPalette] = useState(colorPaletteManager.getCurrentPalette());\n  const [allPalettes, setAllPalettes] = useState(colorPaletteManager.getAllPalettes());\n  const [settings, setSettings] = useState(() => ({\n    theme: 'dark',\n    wallpaper: 'default',\n    showDesktopIcons: true,\n    soundEffects: soundManager.isEnabled(),\n    soundVolume: soundManager.getVolume() * 100,\n    notificationsEnabled: true,\n    username: 'html@javascriptiso',\n    autoLogin: false,\n    autoSleep: false,\n    sleepTimer: '30',\n    prideTheme: prideThemeEnabled,\n    colorPalette: currentPalette.id\n  }));\n\n  // Sync Pride theme and color palette settings when they change externally\n  useEffect(() => {\n    setSettings(prev => ({\n      ...prev,\n      prideTheme: prideThemeEnabled\n    }));\n  }, [prideThemeEnabled]);\n\n  useEffect(() => {\n    const unsubscribe = colorPaletteManager.onChange((palette) => {\n      setCurrentPalette(palette);\n      setAllPalettes(colorPaletteManager.getAllPalettes());\n      setSettings(prev => ({\n        ...prev,\n        colorPalette: palette.id\n      }));\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const updateSetting = (key: string, value: any) => {\n    setSettings(prev => ({\n      ...prev,\n      [key]: value\n    }));\n    \n    // Apply wallpaper change immediately\n    if (key === 'wallpaper') {\n      const wallpaper = wallpapers.find(w => w.id === value);\n      if (wallpaper) {\n        localStorage.setItem('webos-wallpaper', value);\n        // Dispatch custom event to update desktop background\n        window.dispatchEvent(new CustomEvent('wallpaper-change', { \n          detail: { wallpaper: value } \n        }));\n      }\n    }\n\n    // Handle sound settings\n    if (key === 'soundEffects') {\n      soundManager.setEnabled(value);\n      if (value) playSounds.buttonClick();\n    } else if (key === 'soundVolume') {\n      soundManager.setVolume(value / 100);\n      playSounds.buttonClick();\n    } else {\n      playSounds.buttonClick();\n    }\n    \n    // Apply theme change\n    if (key === 'theme') {\n      localStorage.setItem('webos-theme', value);\n      document.documentElement.classList.toggle('dark', value === 'dark');\n    }\n    \n    // Apply desktop icons setting\n    if (key === 'showDesktopIcons') {\n      localStorage.setItem('webos-show-icons', value.toString());\n      window.dispatchEvent(new CustomEvent('desktop-icons-toggle', { \n        detail: { show: value } \n      }));\n    }\n    \n    // Handle Pride theme toggle\n    if (key === 'prideTheme') {\n      setPrideTheme(value);\n    }\n    \n    // Handle color palette change\n    if (key === 'colorPalette') {\n      colorPaletteManager.setPalette(value);\n    }\n  };\n\n  const renderCategoryContent = () => {\n    switch (activeCategory) {\n      case 'display':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <Label className=\"text-base font-medium\">Theme</Label>\n              <p className=\"text-sm text-gray-600 mb-3\">Choose your preferred theme</p>\n              <Select value={settings.theme} onValueChange={(value) => updateSetting('theme', value)}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"light\">Light</SelectItem>\n                  <SelectItem value=\"dark\">Dark (Arch)</SelectItem>\n                  <SelectItem value=\"auto\">Auto (System)</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div>\n              <Label className=\"text-base font-medium\">Wallpaper</Label>\n              <p className=\"text-sm text-gray-600 mb-3\">Select your desktop background</p>\n              \n              {/* Custom Image Upload */}\n              <div className=\"mb-4 p-4 border-2 border-dashed border-gray-300 rounded-lg\">\n                <div className=\"text-center\">\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={(e) => {\n                      const file = e.target.files?.[0];\n                      if (file) {\n                        const reader = new FileReader();\n                        reader.onload = (event) => {\n                          const imageData = event.target?.result as string;\n                          localStorage.setItem('webos-custom-wallpaper', imageData);\n                          localStorage.setItem('webos-wallpaper', 'custom');\n                          setSettings(prev => ({ ...prev, wallpaper: 'custom' }));\n                          \n                          // Dispatch wallpaper change event\n                          window.dispatchEvent(new CustomEvent('wallpaper-change', { \n                            detail: { wallpaper: 'custom' } \n                          }));\n                        };\n                        reader.readAsDataURL(file);\n                      }\n                    }}\n                    className=\"hidden\"\n                    id=\"wallpaper-upload\"\n                  />\n                  <label \n                    htmlFor=\"wallpaper-upload\" \n                    className=\"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors\"\n                  >\n                    <Upload className=\"w-4 h-4 mr-2\" />\n                    Upload Custom Image\n                  </label>\n                  <p className=\"text-xs text-gray-500 mt-2\">JPG, PNG, GIF up to 10MB</p>\n                </div>\n              </div>\n\n              <div className=\"grid grid-cols-3 gap-3\">\n                {/* Custom wallpaper option */}\n                {localStorage.getItem('webos-custom-wallpaper') && (\n                  <button\n                    onClick={() => updateSetting('wallpaper', 'custom')}\n                    className={`w-full h-16 rounded-lg border-2 transition-all bg-cover bg-center ${\n                      settings.wallpaper === 'custom'\n                        ? 'border-blue-500 ring-2 ring-blue-200'\n                        : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    style={{\n                      backgroundImage: `url(${localStorage.getItem('webos-custom-wallpaper')})`,\n                      backgroundSize: 'cover',\n                      backgroundPosition: 'center'\n                    }}\n                    title=\"Custom Image\"\n                  >\n                    <div className=\"w-full h-full bg-black bg-opacity-30 rounded flex items-center justify-center\">\n                      <span className=\"text-white text-xs font-medium\">Custom</span>\n                    </div>\n                  </button>\n                )}\n                \n                {wallpapers.map((wallpaper) => (\n                  <button\n                    key={wallpaper.id}\n                    onClick={() => updateSetting('wallpaper', wallpaper.id)}\n                    className={`w-full h-16 rounded-lg border-2 transition-all ${\n                      settings.wallpaper === wallpaper.id\n                        ? 'border-blue-500 ring-2 ring-blue-200'\n                        : 'border-gray-200 hover:border-gray-300'\n                    } ${wallpaper.preview}`}\n                    title={wallpaper.name}\n                  >\n                    <span className=\"sr-only\">{wallpaper.name}</span>\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-base font-medium\">Show Desktop Icons</Label>\n                <p className=\"text-sm text-gray-600\">Display application icons on desktop</p>\n              </div>\n              <Switch\n                checked={settings.showDesktopIcons}\n                onCheckedChange={(checked) => updateSetting('showDesktopIcons', checked)}\n              />\n            </div>\n          </div>\n        );\n\n      case 'themes':\n        return (\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-base font-medium flex items-center gap-2\">\n                  <Heart className=\"w-4 h-4\" />\n                  Pride Theme\n                </Label>\n                <p className=\"text-sm text-gray-600\">Enable rainbow pride colors during June</p>\n              </div>\n              <Switch\n                checked={prideThemeEnabled}\n                onCheckedChange={(checked) => updateSetting('prideTheme', checked)}\n              />\n            </div>\n\n            <div>\n              <Label className=\"text-base font-medium\">Color Palette</Label>\n              <p className=\"text-sm text-gray-600 mb-3\">Choose your interface color scheme</p>\n              <Select value={settings.colorPalette} onValueChange={(value) => updateSetting('colorPalette', value)}>\n                <SelectTrigger className=\"w-full\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {allPalettes.map((palette) => (\n                    <SelectItem key={palette.id} value={palette.id}>\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"flex gap-1\">\n                          <div \n                            className=\"w-3 h-3 rounded-full\" \n                            style={{ backgroundColor: palette.primary }}\n                          />\n                          <div \n                            className=\"w-3 h-3 rounded-full\" \n                            style={{ backgroundColor: palette.accent }}\n                          />\n                          <div \n                            className=\"w-3 h-3 rounded-full\" \n                            style={{ backgroundColor: palette.success }}\n                          />\n                        </div>\n                        <span>{palette.name}</span>\n                      </div>\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              \n              <Button \n                variant=\"outline\" \n                size=\"sm\" \n                className=\"mt-3\"\n                onClick={() => window.dispatchEvent(new CustomEvent('open-app', { detail: 'color-palette-selector' }))}\n              >\n                <Palette className=\"w-4 h-4 mr-2\" />\n                Advanced Color Editor\n              </Button>\n            </div>\n          </div>\n        );\n\n      case 'audio':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Audio Settings</h3>\n              <p className=\"text-sm text-gray-600 mb-6\">\n                Configure system sounds and audio preferences.\n              </p>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-base font-medium\">Sound Effects</Label>\n                <p className=\"text-sm text-gray-600\">Play sounds for system events</p>\n              </div>\n              <Switch\n                checked={settings.soundEffects}\n                onCheckedChange={(checked) => updateSetting('soundEffects', checked)}\n              />\n            </div>\n\n            <div className=\"space-y-3\">\n              <Label className=\"text-base font-medium\">System Volume</Label>\n              <div className=\"px-3\">\n                <Slider\n                  value={[settings.soundVolume]}\n                  onValueChange={([value]) => updateSetting('soundVolume', value)}\n                  max={100}\n                  min={0}\n                  step={5}\n                  className=\"w-full\"\n                  disabled={!settings.soundEffects}\n                />\n                <div className=\"flex justify-between text-xs text-gray-500 mt-1\">\n                  <span>Silent</span>\n                  <span>{settings.soundVolume}%</span>\n                  <span>Loud</span>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-base font-medium\">Notifications</Label>\n                <p className=\"text-sm text-gray-600\">Enable notification sounds</p>\n              </div>\n              <Switch\n                checked={settings.notificationsEnabled}\n                onCheckedChange={(checked) => updateSetting('notificationsEnabled', checked)}\n              />\n            </div>\n\n            <div className=\"p-4 border rounded-lg\">\n              <h4 className=\"font-medium mb-3\">Test Sounds</h4>\n              <div className=\"grid grid-cols-2 gap-2\">\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => playSounds.buttonClick()}\n                  disabled={!settings.soundEffects}\n                >\n                  Click\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => playSounds.notification()}\n                  disabled={!settings.soundEffects}\n                >\n                  Notification\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => playSounds.achievement()}\n                  disabled={!settings.soundEffects}\n                >\n                  Achievement\n                </Button>\n                <Button \n                  variant=\"outline\" \n                  size=\"sm\"\n                  onClick={() => playSounds.error()}\n                  disabled={!settings.soundEffects}\n                >\n                  Error\n                </Button>\n              </div>\n            </div>\n          </div>\n        );\n\n      case 'account':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <Label className=\"text-base font-medium\">Username</Label>\n              <p className=\"text-sm text-gray-600 mb-3\">Your display name</p>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center\">\n                  <User className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <p className=\"font-medium\">{settings.username}</p>\n                  <p className=\"text-sm text-gray-600\">Local Account</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <Label className=\"text-base font-medium\">Auto Login</Label>\n                <p className=\"text-sm text-gray-600\">Sign in automatically at startup</p>\n              </div>\n              <Switch\n                checked={settings.autoLogin}\n                onCheckedChange={(checked) => updateSetting('autoLogin', checked)}\n              />\n            </div>\n\n            <div className=\"pt-4 border-t space-y-2\">\n              <Button variant=\"outline\" className=\"w-full\">\n                Change Password\n              </Button>\n              <Button \n                variant=\"destructive\" \n                className=\"w-full\"\n                onClick={async () => {\n                  if (confirm('Factory Reset Warning\\n\\nThis will delete ALL data including:\\n- User accounts and settings\\n- Installed apps and achievements\\n- Database records and files\\n- All personal data\\n\\nOnly the core system will remain. This action cannot be undone.\\n\\nAre you sure you want to proceed?')) {\n                    try {\n                      // Clear database data\n                      await fetch('/api/factory-reset', {\n                        method: 'POST',\n                        headers: {\n                          'Content-Type': 'application/json',\n                        },\n                      });\n                    } catch (error) {\n                      console.log('Database reset completed or not available');\n                    }\n                    \n                    // Clear all localStorage except installation state\n                    const keysToKeep = [\n                      'archInstalled', // Keep installation state\n                      'webos-setup-complete' // Keep setup completion\n                    ];\n                    \n                    // Get all localStorage keys\n                    const allKeys = Object.keys(localStorage);\n                    \n                    // Remove all keys except the ones we want to keep\n                    allKeys.forEach(key => {\n                      if (!keysToKeep.includes(key)) {\n                        localStorage.removeItem(key);\n                      }\n                    });\n                    \n                    // Clear session storage\n                    sessionStorage.clear();\n                    \n                    // Clear IndexedDB if available\n                    if ('indexedDB' in window) {\n                      try {\n                        const databases = await indexedDB.databases();\n                        databases.forEach(db => {\n                          if (db.name) {\n                            indexedDB.deleteDatabase(db.name);\n                          }\n                        });\n                      } catch (e) {\n                        console.log('IndexedDB cleanup completed');\n                      }\n                    }\n                    \n                    // Redirect to terminal for reinstallation\n                    window.location.href = '/?terminal=true';\n                  }\n                }}\n              >\n                Factory Reset WebOS\n              </Button>\n            </div>\n          </div>\n        );\n\n      case 'power':\n        return (\n          <div className=\"space-y-6\">\n            <div>\n              <h3 className=\"text-lg font-semibold mb-4\">Power Management</h3>\n              <p className=\"text-sm text-gray-600 mb-6\">\n                Manage system power options and shutdown settings.\n              </p>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div className=\"p-4 border rounded-lg\">\n                <h4 className=\"font-medium mb-2\">System Actions</h4>\n                <div className=\"space-y-3\">\n                  <Button \n                    variant=\"destructive\" \n                    className=\"w-full justify-start\"\n                    onClick={() => {\n                      if (confirm('Shutdown the system? This will close all applications and shut down WebOS.')) {\n                        onShutdown?.();\n                      }\n                    }}\n                  >\n                    <Power className=\"w-4 h-4 mr-2\" />\n                    Shutdown System\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full justify-start\"\n                    onClick={() => {\n                      if (confirm('Restart the system? This will close all applications and restart WebOS.')) {\n                        onRestart?.();\n                      }\n                    }}\n                  >\n                    <RotateCcw className=\"w-4 h-4 mr-2\" />\n                    Restart System\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full justify-start\"\n                    onClick={() => {\n                      if (confirm('Log out of your account? This will close all applications and return to the login screen.')) {\n                        onLogout?.();\n                      }\n                    }}\n                  >\n                    <LogOut className=\"w-4 h-4 mr-2\" />\n                    Log Out\n                  </Button>\n\n                  <Button \n                    variant=\"outline\" \n                    className=\"w-full justify-start\"\n                    onClick={() => {\n                      alert('Sleep mode activated. Click anywhere to wake up.');\n                      document.body.style.filter = 'brightness(0.1)';\n                      const wakeUp = () => {\n                        document.body.style.filter = '';\n                        document.removeEventListener('click', wakeUp);\n                      };\n                      document.addEventListener('click', wakeUp);\n                    }}\n                  >\n                    <Moon className=\"w-4 h-4 mr-2\" />\n                    Shutdown Options\n                  </Button>\n\n                  <Button \n                    variant=\"destructive\" \n                    className=\"w-full justify-start\"\n                    onClick={() => {\n                      const confirmed = confirm(\n                        '⚠️ FORCE SHUTDOWN WARNING ⚠️\\n\\n' +\n                        'This will immediately terminate WebOS without saving:\\n' +\n                        '• All unsaved work will be lost\\n' +\n                        '• Running applications will be force-closed\\n' +\n                        '• System state will not be preserved\\n\\n' +\n                        'Are you absolutely sure you want to kill this operating system?'\n                      );\n                      \n                      if (confirmed) {\n                        const finalConfirm = confirm(\n                          'FINAL CONFIRMATION\\n\\n' +\n                          'This action cannot be undone.\\n' +\n                          'WebOS will be terminated immediately.\\n\\n' +\n                          'Proceed with force shutdown?'\n                        );\n                        \n                        if (finalConfirm) {\n                          window.close();\n                          // If window.close() doesn't work, redirect to a blank page\n                          setTimeout(() => {\n                            window.location.href = 'about:blank';\n                          }, 100);\n                        }\n                      }\n                    }}\n                  >\n                    <Power className=\"w-4 h-4 mr-2\" />\n                    Force Shutdown\n                  </Button>\n                </div>\n              </div>\n\n              <div className=\"p-4 border rounded-lg\">\n                <h4 className=\"font-medium mb-2\">Sleep Settings</h4>\n                <div className=\"space-y-3\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <Label className=\"text-base font-medium\">Auto Sleep</Label>\n                      <p className=\"text-sm text-gray-600\">Automatically sleep after inactivity</p>\n                    </div>\n                    <Switch\n                      checked={settings.autoSleep || false}\n                      onCheckedChange={(checked) => updateSetting('autoSleep', checked)}\n                    />\n                  </div>\n\n                  <div>\n                    <Label className=\"text-sm font-medium\">Sleep Timer</Label>\n                    <Select value={settings.sleepTimer || '30'} onValueChange={(value) => updateSetting('sleepTimer', value)}>\n                      <SelectTrigger className=\"w-full mt-1\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent>\n                        <SelectItem value=\"5\">5 minutes</SelectItem>\n                        <SelectItem value=\"15\">15 minutes</SelectItem>\n                        <SelectItem value=\"30\">30 minutes</SelectItem>\n                        <SelectItem value=\"60\">1 hour</SelectItem>\n                        <SelectItem value=\"never\">Never</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n\n      default:\n        return null;\n    }\n  };\n\n  return (\n    <div className=\"h-full flex\">\n      {/* Sidebar */}\n      <div className=\"w-1/3 border-r border-gray-200 pr-4\">\n        <div className=\"space-y-1\">\n          {categories.map((category) => (\n            <button\n              key={category.id}\n              onClick={() => setActiveCategory(category.id)}\n              className={`w-full flex items-center space-x-3 p-3 rounded-lg text-left transition-colors ${\n                activeCategory === category.id\n                  ? 'bg-blue-500 text-white'\n                  : 'hover:bg-gray-100'\n              }`}\n            >\n              {category.icon}\n              <span className=\"font-medium\">{category.name}</span>\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"w-2/3 pl-6\">\n        <div className=\"mb-6\">\n          <h3 className=\"text-lg font-semibold flex items-center space-x-2\">\n            <SettingsIcon className=\"w-5 h-5\" />\n            <span>{categories.find(c => c.id === activeCategory)?.name} Settings</span>\n          </h3>\n        </div>\n        \n        {renderCategoryContent()}\n      </div>\n    </div>\n  );\n};\n","size_bytes":27926},"client/src/components/apps/Spreadsheet.tsx":{"content":"import { FC, useState, useCallback, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Save, Download, Upload, Plus, Minus, FileSpreadsheet, Grid, Calculator, Bold, Italic, AlignLeft, AlignCenter, AlignRight, Palette, Type, BarChart3, PieChart, TrendingUp } from 'lucide-react';\n\ninterface CellData {\n  value: string;\n  formula?: string;\n  computed?: number | string;\n  style?: {\n    bold?: boolean;\n    italic?: boolean;\n    underline?: boolean;\n    textAlign?: 'left' | 'center' | 'right';\n    backgroundColor?: string;\n    textColor?: string;\n    fontSize?: number;\n    fontFamily?: string;\n    borderStyle?: string;\n  };\n  dataType?: 'text' | 'number' | 'currency' | 'percentage' | 'date';\n}\n\ninterface SpreadsheetData {\n  [key: string]: CellData;\n}\n\nexport const Spreadsheet: FC = () => {\n  const [data, setData] = useState<SpreadsheetData>(() => {\n    const stored = localStorage.getItem('webos-spreadsheet-data');\n    return stored ? JSON.parse(stored) : {};\n  });\n  const [selectedCell, setSelectedCell] = useState<string>('A1');\n  const [formulaInput, setFormulaInput] = useState('');\n  const [rows, setRows] = useState(20);\n  const [columns, setCols] = useState(10);\n  const [fileName, setFileName] = useState('Untitled Spreadsheet');\n  const [isEditing, setIsEditing] = useState(false);\n  const cellRefs = useRef<{ [key: string]: HTMLInputElement }>({});\n\n  useEffect(() => {\n    localStorage.setItem('webos-spreadsheet-data', JSON.stringify(data));\n  }, [data]);\n\n  useEffect(() => {\n    const cellData = data[selectedCell];\n    setFormulaInput(cellData?.formula || cellData?.value || '');\n  }, [selectedCell, data]);\n\n  const getColumnName = (index: number): string => {\n    let result = '';\n    while (index >= 0) {\n      result = String.fromCharCode(65 + (index % 26)) + result;\n      index = Math.floor(index / 26) - 1;\n    }\n    return result;\n  };\n\n\n\n  const getCellId = (row: number, col: number): string => {\n    return `${getColumnName(col)}${row + 1}`;\n  };\n\n  const expandRange = useCallback((range: string): string[] => {\n    const cells: string[] = [];\n    \n    if (range.includes(':')) {\n      // Handle range like A1:B3\n      const [start, end] = range.split(':');\n      const startCol = start.match(/[A-Z]+/)?.[0] || 'A';\n      const startRow = parseInt(start.match(/\\d+/)?.[0] || '1');\n      const endCol = end.match(/[A-Z]+/)?.[0] || 'A';\n      const endRow = parseInt(end.match(/\\d+/)?.[0] || '1');\n      \n      const startColIndex = startCol.charCodeAt(0) - 65;\n      const endColIndex = endCol.charCodeAt(0) - 65;\n      \n      for (let row = startRow; row <= endRow; row++) {\n        for (let col = startColIndex; col <= endColIndex; col++) {\n          cells.push(`${getColumnName(col)}${row}`);\n        }\n      }\n    } else {\n      // Handle individual cells separated by commas\n      cells.push(...range.split(',').map(cell => cell.trim()));\n    }\n    \n    return cells;\n  }, []);\n\n  const parseFormula = useCallback((formula: string): number | string => {\n    if (!formula.startsWith('=')) return formula;\n    \n    try {\n      let expression = formula.substring(1);\n      \n      // Replace cell references with their values\n      expression = expression.replace(/[A-Z]+\\d+/g, (match) => {\n        const cellData = data[match];\n        const value = cellData?.computed ?? cellData?.value ?? '0';\n        return typeof value === 'number' ? value.toString() : (parseFloat(value as string) || 0).toString();\n      });\n      \n      // Basic math operations\n      expression = expression.replace(/\\s/g, '');\n      \n      // Handle Excel-like functions\n      expression = expression.replace(/SUM\\(([^)]+)\\)/g, (match, range) => {\n        const cells = expandRange(range);\n        let sum = 0;\n        cells.forEach((cell: string) => {\n          const cellData = data[cell.trim()];\n          const value = cellData?.computed ?? cellData?.value ?? 0;\n          sum += parseFloat(value as string) || 0;\n        });\n        return sum.toString();\n      });\n      \n      expression = expression.replace(/AVERAGE\\(([^)]+)\\)/g, (match, range) => {\n        const cells = expandRange(range);\n        let sum = 0;\n        let count = 0;\n        cells.forEach((cell: string) => {\n          const cellData = data[cell.trim()];\n          const value = cellData?.computed ?? cellData?.value ?? 0;\n          const num = parseFloat(value as string);\n          if (!isNaN(num)) {\n            sum += num;\n            count++;\n          }\n        });\n        return count > 0 ? (sum / count).toString() : '0';\n      });\n\n      expression = expression.replace(/COUNT\\(([^)]+)\\)/g, (match, range) => {\n        const cells = expandRange(range);\n        let count = 0;\n        cells.forEach((cell: string) => {\n          const cellData = data[cell.trim()];\n          const value = cellData?.computed ?? cellData?.value ?? '';\n          if (value !== '') count++;\n        });\n        return count.toString();\n      });\n\n      expression = expression.replace(/MAX\\(([^)]+)\\)/g, (match, range) => {\n        const cells = expandRange(range);\n        let max = -Infinity;\n        cells.forEach((cell: string) => {\n          const cellData = data[cell.trim()];\n          const value = cellData?.computed ?? cellData?.value ?? 0;\n          const num = parseFloat(value as string);\n          if (!isNaN(num)) max = Math.max(max, num);\n        });\n        return max === -Infinity ? '0' : max.toString();\n      });\n\n      expression = expression.replace(/MIN\\(([^)]+)\\)/g, (match, range) => {\n        const cells = expandRange(range);\n        let min = Infinity;\n        cells.forEach((cell: string) => {\n          const cellData = data[cell.trim()];\n          const value = cellData?.computed ?? cellData?.value ?? 0;\n          const num = parseFloat(value as string);\n          if (!isNaN(num)) min = Math.min(min, num);\n        });\n        return min === Infinity ? '0' : min.toString();\n      });\n      \n      // Evaluate the expression safely\n      const result = Function('\"use strict\"; return (' + expression + ')')();\n      return typeof result === 'number' ? Math.round(result * 100) / 100 : result;\n    } catch (error) {\n      return '#ERROR';\n    }\n  }, [expandRange, data]);\n\n  const updateCell = useCallback((cellId: string, value: string) => {\n    setData(prev => {\n      const newData = { ...prev };\n      const isFormula = value.startsWith('=');\n      \n      newData[cellId] = {\n        value,\n        formula: isFormula ? value : undefined,\n        computed: isFormula ? parseFormula(value) : value,\n      };\n      \n      return newData;\n    });\n  }, [parseFormula]);\n\n  const handleCellClick = (cellId: string) => {\n    setSelectedCell(cellId);\n    setIsEditing(false);\n  };\n\n  const handleCellDoubleClick = (cellId: string) => {\n    setSelectedCell(cellId);\n    setIsEditing(true);\n    setTimeout(() => {\n      const input = cellRefs.current[cellId];\n      if (input) {\n        input.focus();\n        input.select();\n      }\n    }, 0);\n  };\n\n  const handleFormulaSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    updateCell(selectedCell, formulaInput);\n    setIsEditing(false);\n  };\n\n  const addRow = () => setRows(prev => prev + 5);\n  const addColumn = () => setCols(prev => prev + 2);\n\n  const exportToCSV = () => {\n    let csv = '';\n    for (let row = 0; row < rows; row++) {\n      const rowData: string[] = [];\n      for (let col = 0; col < columns; col++) {\n        const cellId = getCellId(row, col);\n        const cellData = data[cellId];\n        const value = cellData?.computed ?? cellData?.value ?? '';\n        rowData.push(`\"${value.toString().replace(/\"/g, '\"\"')}\"`);\n      }\n      csv += rowData.join(',') + '\\n';\n    }\n    \n    const blob = new Blob([csv], { type: 'text/csv' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${fileName}.csv`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const saveSpreadsheet = () => {\n    const spreadsheetData = {\n      fileName,\n      data,\n      rows,\n      columns,\n      timestamp: new Date().toISOString(),\n    };\n    \n    const blob = new Blob([JSON.stringify(spreadsheetData, null, 2)], { type: 'application/json' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${fileName}.wss`;\n    a.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const clearAll = () => {\n    if (confirm('Clear all data? This cannot be undone.')) {\n      setData({});\n      setSelectedCell('A1');\n      setFormulaInput('');\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      {/* Toolbar */}\n      <div className=\"flex items-center gap-2 p-2 border-b bg-muted/30\">\n        <div className=\"flex items-center gap-2\">\n          <FileSpreadsheet className=\"w-5 h-5\" />\n          <Input\n            value={fileName}\n            onChange={(e) => setFileName(e.target.value)}\n            className=\"w-48 h-8\"\n            placeholder=\"Spreadsheet name\"\n          />\n        </div>\n        \n        <div className=\"h-6 w-px bg-border mx-2\" />\n        \n        <Button variant=\"outline\" size=\"sm\" onClick={saveSpreadsheet}>\n          <Save className=\"w-4 h-4 mr-1\" />\n          Save\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={exportToCSV}>\n          <Download className=\"w-4 h-4 mr-1\" />\n          CSV\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={clearAll}>\n          Clear All\n        </Button>\n        \n        <div className=\"h-6 w-px bg-border mx-2\" />\n        \n        <Button variant=\"outline\" size=\"sm\" onClick={addRow}>\n          <Plus className=\"w-4 h-4 mr-1\" />\n          Rows\n        </Button>\n        <Button variant=\"outline\" size=\"sm\" onClick={addColumn}>\n          <Plus className=\"w-4 h-4 mr-1\" />\n          Cols\n        </Button>\n      </div>\n\n      {/* Formula Bar */}\n      <div className=\"flex items-center gap-2 p-2 border-b\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm font-medium w-12\">{selectedCell}</span>\n          <Calculator className=\"w-4 h-4\" />\n        </div>\n        <form onSubmit={handleFormulaSubmit} className=\"flex-1\">\n          <Input\n            value={formulaInput}\n            onChange={(e) => setFormulaInput(e.target.value)}\n            placeholder=\"Enter value or formula (=A1+B1)\"\n            className=\"w-full\"\n          />\n        </form>\n      </div>\n\n      {/* Spreadsheet Grid */}\n      <div className=\"flex-1 overflow-auto\">\n        <div className=\"inline-block min-w-full\">\n          <table className=\"border-collapse\">\n            <thead>\n              <tr>\n                <th className=\"w-12 h-8 border border-border bg-muted/50 text-xs font-medium\"></th>\n                {Array.from({ length: columns }, (_, col) => (\n                  <th key={col} className=\"w-24 h-8 border border-border bg-muted/50 text-xs font-medium\">\n                    {getColumnName(col)}\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody>\n              {Array.from({ length: rows }, (_, row) => (\n                <tr key={row}>\n                  <td className=\"w-12 h-8 border border-border bg-muted/50 text-xs font-medium text-center\">\n                    {row + 1}\n                  </td>\n                  {Array.from({ length: columns }, (_, col) => {\n                    const cellId = getCellId(row, col);\n                    const cellData = data[cellId];\n                    const displayValue = cellData?.computed ?? cellData?.value ?? '';\n                    const isSelected = selectedCell === cellId;\n                    \n                    return (\n                      <td key={col} className=\"w-24 h-8 border border-border p-0\">\n                        <input\n                          ref={(el) => {\n                            if (el) cellRefs.current[cellId] = el;\n                          }}\n                          value={isEditing && isSelected ? formulaInput : displayValue.toString()}\n                          onChange={(e) => {\n                            if (isEditing && isSelected) {\n                              setFormulaInput(e.target.value);\n                            }\n                          }}\n                          onFocus={() => handleCellClick(cellId)}\n                          onDoubleClick={() => handleCellDoubleClick(cellId)}\n                          onBlur={() => {\n                            if (isEditing && isSelected) {\n                              updateCell(cellId, formulaInput);\n                              setIsEditing(false);\n                            }\n                          }}\n                          onKeyDown={(e) => {\n                            if (e.key === 'Enter') {\n                              updateCell(cellId, formulaInput);\n                              setIsEditing(false);\n                              \n                              // Move to next row\n                              const nextRow = row + 1;\n                              if (nextRow < rows) {\n                                const nextCellId = getCellId(nextRow, col);\n                                setSelectedCell(nextCellId);\n                              }\n                            } else if (e.key === 'Tab') {\n                              e.preventDefault();\n                              updateCell(cellId, formulaInput);\n                              setIsEditing(false);\n                              \n                              // Move to next column\n                              const nextCol = col + 1;\n                              if (nextCol < columns) {\n                                const nextCellId = getCellId(row, nextCol);\n                                setSelectedCell(nextCellId);\n                              }\n                            } else if (e.key === 'Escape') {\n                              setIsEditing(false);\n                              setFormulaInput(cellData?.formula || cellData?.value || '');\n                            }\n                          }}\n                          className={`w-full h-full px-1 text-xs border-0 outline-0 ${\n                            isSelected ? 'bg-blue-100 ring-2 ring-blue-500' : 'bg-transparent'\n                          } ${cellData?.formula ? 'text-green-700' : ''}`}\n                          readOnly={!isEditing || !isSelected}\n                        />\n                      </td>\n                    );\n                  })}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"flex items-center justify-between p-2 border-t bg-muted/30 text-xs\">\n        <div className=\"flex items-center gap-4\">\n          <span>Cells: {Object.keys(data).length}</span>\n          <span>Size: {columns} × {rows}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <span>Selected: {selectedCell}</span>\n          {data[selectedCell]?.formula && (\n            <span className=\"text-green-700\">Formula: {data[selectedCell].formula}</span>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":15357},"client/src/components/apps/StockMarket.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { X, TrendingUp, TrendingDown, BarChart3, RefreshCw, Search, DollarSign } from 'lucide-react';\n\ninterface StockQuote {\n  \"01. symbol\": string;\n  \"02. open\": string;\n  \"03. high\": string;\n  \"04. low\": string;\n  \"05. price\": string;\n  \"06. volume\": string;\n  \"07. latest trading day\": string;\n  \"08. previous close\": string;\n  \"09. change\": string;\n  \"10. change percent\": string;\n}\n\ninterface StockData {\n  \"Global Quote\": StockQuote;\n}\n\nexport const StockMarket: FC = () => {\n  const [stockData, setStockData] = useState<StockData | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [symbol, setSymbol] = useState('AAPL');\n  const [watchlist, setWatchlist] = useState(['AAPL', 'GOOGL', 'MSFT', 'AMZN', 'TSLA']);\n  const [watchlistData, setWatchlistData] = useState<{[key: string]: StockData}>({});\n\n  useEffect(() => {\n    fetchStockData();\n    fetchWatchlistData();\n  }, []);\n\n  const fetchStockData = async (stockSymbol?: string) => {\n    const targetSymbol = stockSymbol || symbol;\n    setLoading(true);\n    try {\n      const response = await fetch(`/api/stocks?symbol=${targetSymbol}`);\n      if (response.ok) {\n        const data = await response.json();\n        setStockData(data);\n      } else {\n        console.error('Failed to fetch stock data');\n      }\n    } catch (error) {\n      console.error('Stock API error:', error);\n    }\n    setLoading(false);\n  };\n\n  const fetchWatchlistData = async () => {\n    const promises = watchlist.map(async (sym) => {\n      try {\n        const response = await fetch(`/api/stocks?symbol=${sym}`);\n        if (response.ok) {\n          const data = await response.json();\n          return { symbol: sym, data };\n        }\n      } catch (error) {\n        console.error(`Error fetching ${sym}:`, error);\n      }\n      return null;\n    });\n\n    const results = await Promise.all(promises);\n    const newWatchlistData: {[key: string]: StockData} = {};\n    results.forEach(result => {\n      if (result) {\n        newWatchlistData[result.symbol] = result.data;\n      }\n    });\n    setWatchlistData(newWatchlistData);\n  };\n\n  const formatPrice = (price: string) => {\n    return parseFloat(price).toLocaleString('en-US', {\n      style: 'currency',\n      currency: 'USD',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  };\n\n  const formatVolume = (volume: string) => {\n    const vol = parseInt(volume);\n    if (vol >= 1e9) return `${(vol / 1e9).toFixed(2)}B`;\n    if (vol >= 1e6) return `${(vol / 1e6).toFixed(2)}M`;\n    if (vol >= 1e3) return `${(vol / 1e3).toFixed(2)}K`;\n    return vol.toString();\n  };\n\n  const getChangeColor = (change: string) => {\n    return parseFloat(change) >= 0 ? 'text-green-600' : 'text-red-600';\n  };\n\n  const getChangeIcon = (change: string) => {\n    return parseFloat(change) >= 0 ? \n      <TrendingUp className=\"w-4 h-4\" /> : \n      <TrendingDown className=\"w-4 h-4\" />;\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-6xl h-[700px] flex flex-col\">\n      <div className=\"bg-green-600 text-white px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <BarChart3 className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Stock Market</span>\n        </div>\n        <Button \n          onClick={() => fetchStockData()} \n          size=\"sm\" \n          variant=\"ghost\" \n          className=\"text-white hover:bg-green-700\"\n          disabled={loading}\n        >\n          <RefreshCw className={`w-4 h-4 ${loading ? 'animate-spin' : ''}`} />\n        </Button>\n      </div>\n\n      <div className=\"p-4 border-b\">\n        <div className=\"flex space-x-4 items-center\">\n          <div className=\"relative flex-1 max-w-md\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Enter stock symbol (e.g., AAPL)\"\n              value={symbol}\n              onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n              onKeyPress={(e) => e.key === 'Enter' && fetchStockData()}\n              className=\"pl-10\"\n            />\n          </div>\n          <Button onClick={() => fetchStockData()} disabled={loading}>\n            Search\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden\">\n        <div className=\"w-2/3 p-4 overflow-auto\">\n          {loading ? (\n            <div className=\"flex items-center justify-center py-12\">\n              <RefreshCw className=\"w-8 h-8 animate-spin text-green-500\" />\n              <span className=\"ml-2\">Loading stock data...</span>\n            </div>\n          ) : stockData && stockData[\"Global Quote\"] ? (\n            <div className=\"space-y-6\">\n              <div className=\"bg-gray-50 p-6 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h2 className=\"text-2xl font-bold\">{stockData[\"Global Quote\"][\"01. symbol\"]}</h2>\n                  <div className=\"text-right\">\n                    <div className=\"text-3xl font-bold\">\n                      {formatPrice(stockData[\"Global Quote\"][\"05. price\"])}\n                    </div>\n                    <div className={`flex items-center space-x-1 ${getChangeColor(stockData[\"Global Quote\"][\"09. change\"])}`}>\n                      {getChangeIcon(stockData[\"Global Quote\"][\"09. change\"])}\n                      <span className=\"font-medium\">\n                        {formatPrice(stockData[\"Global Quote\"][\"09. change\"])} \n                        ({stockData[\"Global Quote\"][\"10. change percent\"]})\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">Open</div>\n                    <div className=\"font-semibold\">{formatPrice(stockData[\"Global Quote\"][\"02. open\"])}</div>\n                  </div>\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">High</div>\n                    <div className=\"font-semibold\">{formatPrice(stockData[\"Global Quote\"][\"03. high\"])}</div>\n                  </div>\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">Low</div>\n                    <div className=\"font-semibold\">{formatPrice(stockData[\"Global Quote\"][\"04. low\"])}</div>\n                  </div>\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">Volume</div>\n                    <div className=\"font-semibold\">{formatVolume(stockData[\"Global Quote\"][\"06. volume\"])}</div>\n                  </div>\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">Previous Close</div>\n                    <div className=\"font-semibold\">{formatPrice(stockData[\"Global Quote\"][\"08. previous close\"])}</div>\n                  </div>\n                  <div>\n                    <div className=\"text-gray-600 text-sm\">Trading Day</div>\n                    <div className=\"font-semibold\">{stockData[\"Global Quote\"][\"07. latest trading day\"]}</div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-6 rounded-lg\">\n                <h3 className=\"text-lg font-semibold mb-4\">Price Chart</h3>\n                <div className=\"h-64 bg-white rounded border flex items-center justify-center\">\n                  <div className=\"text-gray-400\">\n                    Interactive price chart would be displayed here\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-6 rounded-lg\">\n                <h3 className=\"text-lg font-semibold mb-4\">Market Analysis</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Key Metrics</h4>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"flex justify-between\">\n                        <span>Market Cap:</span>\n                        <span>$2.8T</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>P/E Ratio:</span>\n                        <span>28.5</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>52 Week High:</span>\n                        <span>$199.62</span>\n                      </div>\n                      <div className=\"flex justify-between\">\n                        <span>52 Week Low:</span>\n                        <span>$124.17</span>\n                      </div>\n                    </div>\n                  </div>\n                  <div>\n                    <h4 className=\"font-medium mb-2\">Recent News</h4>\n                    <div className=\"space-y-2 text-sm\">\n                      <div className=\"text-blue-600 hover:underline cursor-pointer\">\n                        Q4 Earnings Beat Expectations\n                      </div>\n                      <div className=\"text-blue-600 hover:underline cursor-pointer\">\n                        New Product Launch Announced\n                      </div>\n                      <div className=\"text-blue-600 hover:underline cursor-pointer\">\n                        Analyst Upgrades Price Target\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          ) : (\n            <div className=\"flex items-center justify-center py-12\">\n              <div className=\"text-center text-gray-500\">\n                <BarChart3 className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                <p>Enter a stock symbol to view market data</p>\n              </div>\n            </div>\n          )}\n        </div>\n\n        <div className=\"w-1/3 border-l p-4 overflow-auto\">\n          <div className=\"space-y-4\">\n            <div>\n              <h3 className=\"font-semibold mb-3\">Watchlist</h3>\n              <div className=\"space-y-2\">\n                {watchlist.map(sym => {\n                  const data = watchlistData[sym];\n                  const quote = data?.[\"Global Quote\"];\n                  return (\n                    <div \n                      key={sym}\n                      onClick={() => {\n                        setSymbol(sym);\n                        fetchStockData(sym);\n                      }}\n                      className=\"bg-gray-50 p-3 rounded cursor-pointer hover:bg-gray-100 transition-colors\"\n                    >\n                      <div className=\"flex justify-between items-center\">\n                        <div className=\"font-medium\">{sym}</div>\n                        {quote && (\n                          <div className=\"text-right\">\n                            <div className=\"font-semibold\">\n                              {formatPrice(quote[\"05. price\"])}\n                            </div>\n                            <div className={`text-xs ${getChangeColor(quote[\"09. change\"])}`}>\n                              {quote[\"10. change percent\"]}\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n\n            <div>\n              <h3 className=\"font-semibold mb-3\">Market Indices</h3>\n              <div className=\"space-y-2\">\n                <div className=\"bg-gray-50 p-3 rounded\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">S&P 500</span>\n                    <div className=\"text-right\">\n                      <div className=\"font-semibold\">4,783.45</div>\n                      <div className=\"text-green-600 text-xs\">+0.75%</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-gray-50 p-3 rounded\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">NASDAQ</span>\n                    <div className=\"text-right\">\n                      <div className=\"font-semibold\">15,037.76</div>\n                      <div className=\"text-green-600 text-xs\">+1.23%</div>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"bg-gray-50 p-3 rounded\">\n                  <div className=\"flex justify-between\">\n                    <span className=\"font-medium\">DOW</span>\n                    <div className=\"text-right\">\n                      <div className=\"font-semibold\">37,404.35</div>\n                      <div className=\"text-red-600 text-xs\">-0.45%</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <h3 className=\"font-semibold mb-3\">Quick Actions</h3>\n              <div className=\"space-y-2\">\n                <Button className=\"w-full bg-green-600 hover:bg-green-700\">\n                  <DollarSign className=\"w-4 h-4 mr-2\" />\n                  Buy Stock\n                </Button>\n                <Button variant=\"outline\" className=\"w-full\">\n                  Add to Watchlist\n                </Button>\n                <Button variant=\"outline\" className=\"w-full\">\n                  Set Price Alert\n                </Button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"bg-gray-100 px-4 py-2 text-sm text-gray-600 border-t\">\n        Live market data powered by Alpha Vantage • Last updated: {new Date().toLocaleTimeString()}\n      </div>\n    </div>\n  );\n};","size_bytes":13931},"client/src/components/apps/StorageManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { HardDrive, Trash2, FolderOpen, FileText, Image, Music, Video, Archive, Settings, Download, Upload, RefreshCw } from 'lucide-react';\n\ninterface StorageDevice {\n  id: string;\n  name: string;\n  type: 'internal' | 'external' | 'cloud';\n  totalSpace: number;\n  usedSpace: number;\n  status: 'healthy' | 'warning' | 'error';\n  mountPoint: string;\n}\n\ninterface FileCategory {\n  name: string;\n  icon: any;\n  size: number;\n  count: number;\n  color: string;\n}\n\nexport const StorageManager: FC = () => {\n  const [devices, setDevices] = useState<StorageDevice[]>([\n    {\n      id: 'sda1',\n      name: 'System Drive (SSD)',\n      type: 'internal',\n      totalSpace: 512 * 1024 * 1024 * 1024, // 512GB\n      usedSpace: 89 * 1024 * 1024 * 1024,   // 89GB\n      status: 'healthy',\n      mountPoint: '/'\n    },\n    {\n      id: 'sdb1',\n      name: 'Data Drive (HDD)',\n      type: 'internal',\n      totalSpace: 2 * 1024 * 1024 * 1024 * 1024, // 2TB\n      usedSpace: 650 * 1024 * 1024 * 1024,       // 650GB\n      status: 'healthy',\n      mountPoint: '/home'\n    },\n    {\n      id: 'sdc1',\n      name: 'Storage Drive (HDD)',\n      type: 'internal',\n      totalSpace: 4 * 1024 * 1024 * 1024 * 1024, // 4TB\n      usedSpace: 1.2 * 1024 * 1024 * 1024 * 1024, // 1.2TB\n      status: 'healthy',\n      mountPoint: '/media/storage'\n    },\n    {\n      id: 'usb1',\n      name: 'USB Drive',\n      type: 'external',\n      totalSpace: 64 * 1024 * 1024 * 1024, // 64GB\n      usedSpace: 23 * 1024 * 1024 * 1024,  // 23GB\n      status: 'healthy',\n      mountPoint: '/media/usb'\n    }\n  ]);\n\n  const [fileCategories, setFileCategories] = useState<FileCategory[]>([\n    { name: 'Documents', icon: FileText, size: 12.5 * 1024 * 1024 * 1024, count: 2847, color: 'bg-blue-500' },\n    { name: 'Images', icon: Image, size: 145.3 * 1024 * 1024 * 1024, count: 8934, color: 'bg-green-500' },\n    { name: 'Videos', icon: Video, size: 523.7 * 1024 * 1024 * 1024, count: 456, color: 'bg-red-500' },\n    { name: 'Music', icon: Music, size: 87.2 * 1024 * 1024 * 1024, count: 3456, color: 'bg-purple-500' },\n    { name: 'Archives', icon: Archive, size: 34.8 * 1024 * 1024 * 1024, count: 234, color: 'bg-orange-500' },\n    { name: 'Applications', icon: Settings, size: 156.4 * 1024 * 1024 * 1024, count: 127, color: 'bg-indigo-500' }\n  ]);\n\n  const formatBytes = (bytes: number): string => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${(bytes / Math.pow(k, i)).toFixed(1)} ${sizes[i]}`;\n  };\n\n  const getUsagePercentage = (used: number, total: number): number => {\n    return Math.round((used / total) * 100);\n  };\n\n  const getTotalStorage = (): { total: number; used: number } => {\n    const total = devices.reduce((sum, device) => sum + device.totalSpace, 0);\n    const used = devices.reduce((sum, device) => sum + device.usedSpace, 0);\n    return { total, used };\n  };\n\n  const totalStorage = getTotalStorage();\n\n  const cleanupStorage = async () => {\n    // Simulate storage cleanup\n    setDevices(prev => prev.map(device => ({\n      ...device,\n      usedSpace: device.usedSpace * 0.95 // Reduce usage by 5%\n    })));\n  };\n\n  const scanStorage = async () => {\n    // Simulate storage scan\n    setTimeout(() => {\n      setFileCategories(prev => prev.map(category => ({\n        ...category,\n        size: category.size + Math.random() * 1024 * 1024 * 100,\n        count: category.count + Math.floor(Math.random() * 10)\n      })));\n    }, 1000);\n  };\n\n  return (\n    <div className=\"h-full p-6 bg-gradient-to-br from-slate-50 to-blue-50\">\n      <div className=\"mb-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">Storage Manager</h1>\n        <p className=\"text-gray-600\">Manage your storage devices and monitor disk usage</p>\n      </div>\n\n      <Tabs defaultValue=\"overview\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-4\">\n          <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n          <TabsTrigger value=\"devices\">Devices</TabsTrigger>\n          <TabsTrigger value=\"files\">File Analysis</TabsTrigger>\n          <TabsTrigger value=\"cleanup\">Cleanup</TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"overview\" className=\"space-y-6\">\n          {/* Total Storage Overview */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center gap-2\">\n                <HardDrive className=\"w-5 h-5\" />\n                Total Storage Overview\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-4\">\n                <div className=\"flex justify-between text-sm\">\n                  <span>Total Capacity</span>\n                  <span className=\"font-medium\">{formatBytes(totalStorage.total)}</span>\n                </div>\n                <Progress value={getUsagePercentage(totalStorage.used, totalStorage.total)} className=\"h-3\" />\n                <div className=\"flex justify-between text-sm text-gray-600\">\n                  <span>{formatBytes(totalStorage.used)} used</span>\n                  <span>{formatBytes(totalStorage.total - totalStorage.used)} free</span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"text-center\">\n                  <HardDrive className=\"w-8 h-8 mx-auto mb-2 text-blue-500\" />\n                  <div className=\"text-2xl font-bold\">{devices.length}</div>\n                  <div className=\"text-sm text-gray-600\">Storage Devices</div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"text-center\">\n                  <FileText className=\"w-8 h-8 mx-auto mb-2 text-green-500\" />\n                  <div className=\"text-2xl font-bold\">{fileCategories.reduce((sum, cat) => sum + cat.count, 0).toLocaleString()}</div>\n                  <div className=\"text-sm text-gray-600\">Total Files</div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"text-center\">\n                  <Archive className=\"w-8 h-8 mx-auto mb-2 text-orange-500\" />\n                  <div className=\"text-2xl font-bold\">{formatBytes(fileCategories.reduce((sum, cat) => sum + cat.size, 0))}</div>\n                  <div className=\"text-sm text-gray-600\">Data Stored</div>\n                </div>\n              </CardContent>\n            </Card>\n            <Card>\n              <CardContent className=\"p-4\">\n                <div className=\"text-center\">\n                  <Settings className=\"w-8 h-8 mx-auto mb-2 text-purple-500\" />\n                  <div className=\"text-2xl font-bold\">{devices.filter(d => d.status === 'healthy').length}</div>\n                  <div className=\"text-sm text-gray-600\">Healthy Drives</div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"devices\" className=\"space-y-4\">\n          {devices.map(device => (\n            <Card key={device.id}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <HardDrive className={`w-6 h-6 ${device.type === 'external' ? 'text-orange-500' : 'text-blue-500'}`} />\n                    <div>\n                      <h3 className=\"font-semibold\">{device.name}</h3>\n                      <p className=\"text-sm text-gray-600\">{device.mountPoint} • {device.type}</p>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <div className=\"font-medium\">{formatBytes(device.totalSpace)}</div>\n                    <div className={`text-sm ${device.status === 'healthy' ? 'text-green-600' : 'text-red-600'}`}>\n                      {device.status}\n                    </div>\n                  </div>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <div className=\"flex justify-between text-sm\">\n                    <span>Used: {formatBytes(device.usedSpace)}</span>\n                    <span>Free: {formatBytes(device.totalSpace - device.usedSpace)}</span>\n                  </div>\n                  <Progress \n                    value={getUsagePercentage(device.usedSpace, device.totalSpace)} \n                    className=\"h-2\"\n                  />\n                  <div className=\"text-xs text-gray-500 text-center\">\n                    {getUsagePercentage(device.usedSpace, device.totalSpace)}% used\n                  </div>\n                </div>\n\n                <div className=\"flex gap-2 mt-4\">\n                  <Button variant=\"outline\" size=\"sm\">\n                    <FolderOpen className=\"w-4 h-4 mr-1\" />\n                    Browse\n                  </Button>\n                  <Button variant=\"outline\" size=\"sm\">\n                    <Settings className=\"w-4 h-4 mr-1\" />\n                    Properties\n                  </Button>\n                  {device.type === 'external' && (\n                    <Button variant=\"outline\" size=\"sm\">\n                      Eject\n                    </Button>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </TabsContent>\n\n        <TabsContent value=\"files\" className=\"space-y-4\">\n          <div className=\"flex justify-between items-center\">\n            <h2 className=\"text-lg font-semibold\">File Analysis by Category</h2>\n            <Button onClick={scanStorage} variant=\"outline\" size=\"sm\">\n              <RefreshCw className=\"w-4 h-4 mr-1\" />\n              Scan Storage\n            </Button>\n          </div>\n\n          <div className=\"grid gap-4\">\n            {fileCategories.map((category, index) => (\n              <Card key={index}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className={`p-2 rounded-lg ${category.color}`}>\n                        <category.icon className=\"w-5 h-5 text-white\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-medium\">{category.name}</h3>\n                        <p className=\"text-sm text-gray-600\">{category.count.toLocaleString()} files</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-medium\">{formatBytes(category.size)}</div>\n                      <div className=\"text-sm text-gray-600\">\n                        {((category.size / totalStorage.used) * 100).toFixed(1)}% of used space\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </TabsContent>\n\n        <TabsContent value=\"cleanup\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Storage Cleanup Tools</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid gap-4\">\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div>\n                    <h3 className=\"font-medium\">Temporary Files</h3>\n                    <p className=\"text-sm text-gray-600\">Remove cached files and temporary data</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium\">~2.3 GB</span>\n                    <Button size=\"sm\">Clean</Button>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div>\n                    <h3 className=\"font-medium\">Old Downloads</h3>\n                    <p className=\"text-sm text-gray-600\">Files downloaded more than 30 days ago</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium\">~8.7 GB</span>\n                    <Button size=\"sm\">Clean</Button>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div>\n                    <h3 className=\"font-medium\">Duplicate Files</h3>\n                    <p className=\"text-sm text-gray-600\">Identical files found in multiple locations</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium\">~4.1 GB</span>\n                    <Button size=\"sm\">Scan</Button>\n                  </div>\n                </div>\n\n                <div className=\"flex items-center justify-between p-4 border rounded-lg\">\n                  <div>\n                    <h3 className=\"font-medium\">Large Files</h3>\n                    <p className=\"text-sm text-gray-600\">Files larger than 1GB</p>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <span className=\"text-sm font-medium\">157 files</span>\n                    <Button size=\"sm\">Review</Button>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"pt-4 border-t\">\n                <Button onClick={cleanupStorage} className=\"w-full\">\n                  <Trash2 className=\"w-4 h-4 mr-2\" />\n                  Run Complete Cleanup (Potential: ~15.1 GB)\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};","size_bytes":14428},"client/src/components/apps/SystemBackup.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { HardDrive, Shield, Clock, Download, Upload, Archive, RefreshCw, AlertTriangle } from 'lucide-react';\n\ninterface BackupJob {\n  id: string;\n  name: string;\n  type: 'full' | 'incremental' | 'differential';\n  status: 'scheduled' | 'running' | 'completed' | 'failed';\n  size: number;\n  created: Date;\n  progress?: number;\n  destination: string;\n}\n\ninterface RestorePoint {\n  id: string;\n  name: string;\n  type: 'system' | 'user' | 'application';\n  created: Date;\n  size: number;\n  verified: boolean;\n}\n\nexport const SystemBackup: FC = () => {\n  const [backupJobs, setBackupJobs] = useState<BackupJob[]>([]);\n  const [restorePoints, setRestorePoints] = useState<RestorePoint[]>([]);\n  const [activeTab, setActiveTab] = useState('backup');\n  const [autoBackupEnabled, setAutoBackupEnabled] = useState(true);\n\n  useEffect(() => {\n    loadBackupData();\n  }, []);\n\n  const loadBackupData = () => {\n    const mockBackups: BackupJob[] = [\n      {\n        id: '1',\n        name: 'Daily System Backup',\n        type: 'incremental',\n        status: 'completed',\n        size: 2400000000,\n        created: new Date('2024-01-15T02:00:00'),\n        destination: '/backup/system/daily'\n      },\n      {\n        id: '2',\n        name: 'Weekly Full Backup',\n        type: 'full',\n        status: 'running',\n        size: 15600000000,\n        created: new Date(),\n        progress: 65,\n        destination: '/backup/system/weekly'\n      },\n      {\n        id: '3',\n        name: 'User Data Backup',\n        type: 'differential',\n        status: 'scheduled',\n        size: 0,\n        created: new Date('2024-01-16T00:00:00'),\n        destination: '/backup/user/documents'\n      }\n    ];\n\n    const mockRestorePoints: RestorePoint[] = [\n      {\n        id: '1',\n        name: 'Clean Installation',\n        type: 'system',\n        created: new Date('2024-01-01T10:00:00'),\n        size: 8500000000,\n        verified: true\n      },\n      {\n        id: '2',\n        name: 'Pre-Update Snapshot',\n        type: 'system',\n        created: new Date('2024-01-10T14:30:00'),\n        size: 9200000000,\n        verified: true\n      },\n      {\n        id: '3',\n        name: 'User Profile Backup',\n        type: 'user',\n        created: new Date('2024-01-14T18:00:00'),\n        size: 3400000000,\n        verified: false\n      }\n    ];\n\n    setBackupJobs(mockBackups);\n    setRestorePoints(mockRestorePoints);\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 B';\n    const k = 1024;\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'completed':\n        return <Badge className=\"bg-green-500\">Completed</Badge>;\n      case 'running':\n        return <Badge className=\"bg-blue-500\">Running</Badge>;\n      case 'scheduled':\n        return <Badge variant=\"secondary\">Scheduled</Badge>;\n      case 'failed':\n        return <Badge variant=\"destructive\">Failed</Badge>;\n      default:\n        return <Badge variant=\"outline\">Unknown</Badge>;\n    }\n  };\n\n  const getTypeBadge = (type: string) => {\n    switch (type) {\n      case 'full':\n        return <Badge variant=\"default\">Full</Badge>;\n      case 'incremental':\n        return <Badge variant=\"secondary\">Incremental</Badge>;\n      case 'differential':\n        return <Badge variant=\"outline\">Differential</Badge>;\n      default:\n        return <Badge variant=\"outline\">{type}</Badge>;\n    }\n  };\n\n  const startBackup = () => {\n    const newBackup: BackupJob = {\n      id: Date.now().toString(),\n      name: 'Manual System Backup',\n      type: 'full',\n      status: 'running',\n      size: 0,\n      created: new Date(),\n      progress: 0,\n      destination: '/backup/manual'\n    };\n\n    setBackupJobs(prev => [newBackup, ...prev]);\n\n    // Simulate backup progress\n    const interval = setInterval(() => {\n      setBackupJobs(prev => prev.map(job => {\n        if (job.id === newBackup.id && job.progress !== undefined) {\n          const newProgress = job.progress + 5;\n          if (newProgress >= 100) {\n            clearInterval(interval);\n            return { ...job, status: 'completed' as const, progress: 100, size: 12800000000 };\n          }\n          return { ...job, progress: newProgress };\n        }\n        return job;\n      }));\n    }, 500);\n  };\n\n  const restoreFromPoint = (pointId: string) => {\n    const restorePoint = restorePoints.find(point => point.id === pointId);\n    if (restorePoint) {\n      // Simulate restore process\n      alert(`Starting restore from: ${restorePoint.name}\\nThis would restore your system to the state from ${restorePoint.created.toLocaleString()}`);\n    }\n  };\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Shield className=\"h-6 w-6 text-primary\" />\n            <h1 className=\"text-xl font-semibold\">System Backup & Recovery</h1>\n          </div>\n          <Button onClick={startBackup}>\n            <Archive className=\"h-4 w-4 mr-2\" />\n            Create Backup\n          </Button>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList>\n            <TabsTrigger value=\"backup\">Backup Jobs</TabsTrigger>\n            <TabsTrigger value=\"restore\">Restore Points</TabsTrigger>\n            <TabsTrigger value=\"schedule\">Schedule</TabsTrigger>\n            <TabsTrigger value=\"settings\">Settings</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      <div className=\"flex-1 overflow-auto\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsContent value=\"backup\" className=\"p-4 space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <HardDrive className=\"h-8 w-8 text-blue-500\" />\n                    <div>\n                      <div className=\"text-2xl font-bold\">24</div>\n                      <div className=\"text-sm text-muted-foreground\">Total Backups</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <Clock className=\"h-8 w-8 text-green-500\" />\n                    <div>\n                      <div className=\"text-2xl font-bold\">2h ago</div>\n                      <div className=\"text-sm text-muted-foreground\">Last Backup</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-3\">\n                    <Archive className=\"h-8 w-8 text-purple-500\" />\n                    <div>\n                      <div className=\"text-2xl font-bold\">156 GB</div>\n                      <div className=\"text-sm text-muted-foreground\">Storage Used</div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n\n            <div className=\"space-y-3\">\n              {backupJobs.map((job) => (\n                <Card key={job.id}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex justify-between items-start\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <h3 className=\"font-semibold\">{job.name}</h3>\n                          {getTypeBadge(job.type)}\n                          {getStatusBadge(job.status)}\n                        </div>\n                        \n                        <div className=\"text-sm text-muted-foreground space-y-1\">\n                          <div>Destination: {job.destination}</div>\n                          <div>Created: {job.created.toLocaleString()}</div>\n                          {job.size > 0 && <div>Size: {formatFileSize(job.size)}</div>}\n                        </div>\n\n                        {job.progress !== undefined && (\n                          <div className=\"mt-3\">\n                            <div className=\"flex justify-between text-sm mb-1\">\n                              <span>Progress</span>\n                              <span>{job.progress}%</span>\n                            </div>\n                            <Progress value={job.progress} className=\"h-2\" />\n                          </div>\n                        )}\n                      </div>\n\n                      <div className=\"flex gap-2\">\n                        {job.status === 'completed' && (\n                          <Button variant=\"outline\" size=\"sm\">\n                            <Download className=\"h-4 w-4\" />\n                          </Button>\n                        )}\n                        <Button variant=\"outline\" size=\"sm\">\n                          <RefreshCw className=\"h-4 w-4\" />\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"restore\" className=\"p-4 space-y-4\">\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-lg font-semibold\">Available Restore Points</h2>\n              <Badge variant=\"outline\">{restorePoints.length} points</Badge>\n            </div>\n\n            <div className=\"space-y-3\">\n              {restorePoints.map((point) => (\n                <Card key={point.id}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex justify-between items-start\">\n                      <div className=\"flex-1\">\n                        <div className=\"flex items-center gap-2 mb-2\">\n                          <h3 className=\"font-semibold\">{point.name}</h3>\n                          {getTypeBadge(point.type)}\n                          {point.verified ? (\n                            <Badge className=\"bg-green-500\">Verified</Badge>\n                          ) : (\n                            <Badge variant=\"destructive\">\n                              <AlertTriangle className=\"h-3 w-3 mr-1\" />\n                              Unverified\n                            </Badge>\n                          )}\n                        </div>\n                        \n                        <div className=\"text-sm text-muted-foreground\">\n                          <div>Created: {point.created.toLocaleString()}</div>\n                          <div>Size: {formatFileSize(point.size)}</div>\n                        </div>\n                      </div>\n\n                      <div className=\"flex gap-2\">\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\"\n                          onClick={() => restoreFromPoint(point.id)}\n                          disabled={!point.verified}\n                        >\n                          <Upload className=\"h-4 w-4 mr-2\" />\n                          Restore\n                        </Button>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              ))}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"schedule\" className=\"p-4 space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>Automatic Backup Schedule</CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4\">\n                <div className=\"flex items-center justify-between\">\n                  <span>Enable automatic backups</span>\n                  <Button\n                    variant={autoBackupEnabled ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setAutoBackupEnabled(!autoBackupEnabled)}\n                  >\n                    {autoBackupEnabled ? 'Enabled' : 'Disabled'}\n                  </Button>\n                </div>\n\n                <div className=\"space-y-3\">\n                  <div className=\"flex justify-between items-center p-3 border rounded\">\n                    <div>\n                      <div className=\"font-medium\">Daily Incremental</div>\n                      <div className=\"text-sm text-muted-foreground\">Every day at 2:00 AM</div>\n                    </div>\n                    <Badge variant=\"default\">Active</Badge>\n                  </div>\n\n                  <div className=\"flex justify-between items-center p-3 border rounded\">\n                    <div>\n                      <div className=\"font-medium\">Weekly Full Backup</div>\n                      <div className=\"text-sm text-muted-foreground\">Every Sunday at 1:00 AM</div>\n                    </div>\n                    <Badge variant=\"default\">Active</Badge>\n                  </div>\n\n                  <div className=\"flex justify-between items-center p-3 border rounded\">\n                    <div>\n                      <div className=\"font-medium\">Monthly Archive</div>\n                      <div className=\"text-sm text-muted-foreground\">First day of month at 12:00 AM</div>\n                    </div>\n                    <Badge variant=\"secondary\">Scheduled</Badge>\n                  </div>\n                </div>\n\n                <Button variant=\"outline\" className=\"w-full\">\n                  Configure Schedule\n                </Button>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"settings\" className=\"p-4 space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Backup Settings</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Default Backup Location</label>\n                    <div className=\"text-sm text-muted-foreground\">/var/backups/webos</div>\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">Compression Level</label>\n                    <div className=\"text-sm text-muted-foreground\">High (slower, smaller files)</div>\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">Retention Policy</label>\n                    <div className=\"text-sm text-muted-foreground\">Keep 30 daily, 12 weekly, 12 monthly</div>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Recovery Options</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Recovery Mode</label>\n                    <div className=\"text-sm text-muted-foreground\">Full system restore</div>\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">Verification</label>\n                    <div className=\"text-sm text-muted-foreground\">Auto-verify after backup</div>\n                  </div>\n                  \n                  <Button variant=\"outline\" className=\"w-full\">\n                    Configure Recovery\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":16274},"client/src/components/apps/SystemInfo.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Monitor, Cpu, HardDrive, MemoryStick, Network, Info } from 'lucide-react';\n\ninterface SystemSpecs {\n  cpu: {\n    model: string;\n    cores: number;\n    threads: number;\n    frequency: string;\n    usage: number;\n  };\n  memory: {\n    total: string;\n    used: string;\n    available: string;\n    usage: number;\n  };\n  storage: {\n    total: string;\n    used: string;\n    available: string;\n    usage: number;\n  };\n  network: {\n    interface: string;\n    status: string;\n    speed: string;\n    ip: string;\n  };\n  uptime: string;\n}\n\nexport const SystemInfo: FC = () => {\n  const [systemSpecs, setSystemSpecs] = useState<SystemSpecs>({\n    cpu: {\n      model: 'AMD Ryzen 7 5800X',\n      cores: 8,\n      threads: 16,\n      frequency: '3.8 GHz',\n      usage: 0\n    },\n    memory: {\n      total: '32.0 GB',\n      used: '12.4 GB',\n      available: '19.6 GB',\n      usage: 0\n    },\n    storage: {\n      total: '1.0 TB',\n      used: '340.2 GB',\n      available: '659.8 GB',\n      usage: 0\n    },\n    network: {\n      interface: 'enp3s0',\n      status: 'Connected',\n      speed: '1000 Mbps',\n      ip: '192.168.1.42'\n    },\n    uptime: '0h 0m'\n  });\n\n  const systemInfo = {\n    os: 'WebOS (Arch Linux)',\n    kernel: '6.6.8-arch1-1',\n    architecture: 'x86_64',\n    desktop: 'WebOS Desktop Environment',\n    shell: '/bin/bash',\n    terminal: 'WebOS Terminal',\n    packageManager: 'pacman',\n    bootloader: 'GRUB',\n    display: 'Wayland',\n    hostname: 'webos-desktop',\n    user: 'html',\n    home: '/home/html',\n    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n    locale: navigator.language,\n    theme: localStorage.getItem('webos-theme') || 'dark'\n  };\n\n  useEffect(() => {\n    // Simulate dynamic system monitoring\n    const interval = setInterval(() => {\n      setSystemSpecs(prev => ({\n        ...prev,\n        cpu: {\n          ...prev.cpu,\n          usage: Math.floor(Math.random() * 100)\n        },\n        memory: {\n          ...prev.memory,\n          usage: Math.floor(Math.random() * 100)\n        },\n        storage: {\n          ...prev.storage,\n          usage: 34 // Fixed storage usage\n        }\n      }));\n    }, 2000);\n\n    // Update uptime\n    const startTime = Date.now();\n    const uptimeInterval = setInterval(() => {\n      const elapsed = Date.now() - startTime;\n      const hours = Math.floor(elapsed / (1000 * 60 * 60));\n      const minutes = Math.floor((elapsed % (1000 * 60 * 60)) / (1000 * 60));\n      setSystemSpecs(prev => ({\n        ...prev,\n        uptime: `${hours}h ${minutes}m`\n      }));\n    }, 60000);\n\n    return () => {\n      clearInterval(interval);\n      clearInterval(uptimeInterval);\n    };\n  }, []);\n\n  return (\n    <div className=\"h-full bg-background p-6 overflow-auto\">\n      <div className=\"max-w-4xl mx-auto space-y-6\">\n        <div className=\"text-center\">\n          <h1 className=\"text-3xl font-bold mb-2\">WebOS System Information</h1>\n          <p className=\"text-muted-foreground\">Built on Arch Linux</p>\n        </div>\n\n        <Tabs defaultValue=\"overview\" className=\"w-full\">\n          <TabsList className=\"grid w-full grid-cols-4\">\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"hardware\">Hardware</TabsTrigger>\n            <TabsTrigger value=\"system\">System</TabsTrigger>\n            <TabsTrigger value=\"network\">Network</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\" className=\"space-y-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">Operating System</CardTitle>\n                  <Monitor className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{systemInfo.os}</div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Kernel {systemInfo.kernel}\n                  </p>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">System Uptime</CardTitle>\n                  <Info className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{systemSpecs.uptime}</div>\n                  <p className=\"text-xs text-muted-foreground\">\n                    Since last boot\n                  </p>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">CPU Usage</CardTitle>\n                  <Cpu className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{systemSpecs.cpu.usage}%</div>\n                  <Progress value={systemSpecs.cpu.usage} className=\"mt-2\" />\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                  <CardTitle className=\"text-sm font-medium\">Memory Usage</CardTitle>\n                  <MemoryStick className=\"h-4 w-4 text-muted-foreground\" />\n                </CardHeader>\n                <CardContent>\n                  <div className=\"text-2xl font-bold\">{systemSpecs.memory.usage}%</div>\n                  <Progress value={systemSpecs.memory.usage} className=\"mt-2\" />\n                  <p className=\"text-xs text-muted-foreground mt-1\">\n                    {systemSpecs.memory.used} / {systemSpecs.memory.total}\n                  </p>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"hardware\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Cpu className=\"h-5 w-5\" />\n                  Processor\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <p className=\"text-sm font-medium\">Model</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.cpu.model}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Base Frequency</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.cpu.frequency}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Cores</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.cpu.cores}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Threads</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.cpu.threads}</p>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium mb-2\">Current Usage</p>\n                  <Progress value={systemSpecs.cpu.usage} />\n                  <p className=\"text-xs text-muted-foreground mt-1\">{systemSpecs.cpu.usage}%</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <MemoryStick className=\"h-5 w-5\" />\n                  Memory\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <p className=\"text-sm font-medium\">Total</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.memory.total}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Used</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.memory.used}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Available</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.memory.available}</p>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium mb-2\">Usage</p>\n                  <Progress value={systemSpecs.memory.usage} />\n                  <p className=\"text-xs text-muted-foreground mt-1\">{systemSpecs.memory.usage}%</p>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <HardDrive className=\"h-5 w-5\" />\n                  Storage\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <div className=\"grid grid-cols-3 gap-4\">\n                  <div>\n                    <p className=\"text-sm font-medium\">Total</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.storage.total}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Used</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.storage.used}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Available</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.storage.available}</p>\n                  </div>\n                </div>\n                <div>\n                  <p className=\"text-sm font-medium mb-2\">Usage</p>\n                  <Progress value={systemSpecs.storage.usage} />\n                  <p className=\"text-xs text-muted-foreground mt-1\">{systemSpecs.storage.usage}%</p>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"system\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>System Details</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  <div className=\"space-y-4\">\n                    <div>\n                      <p className=\"text-sm font-medium\">Operating System</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.os}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Kernel Version</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.kernel}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Architecture</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.architecture}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Desktop Environment</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.desktop}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Display Server</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.display}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Package Manager</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.packageManager}</p>\n                    </div>\n                  </div>\n                  <div className=\"space-y-4\">\n                    <div>\n                      <p className=\"text-sm font-medium\">Hostname</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.hostname}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Current User</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.user}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Home Directory</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.home}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Shell</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.shell}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Timezone</p>\n                      <p className=\"text-sm text-muted-foreground\">{systemInfo.timezone}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm font-medium\">Current Theme</p>\n                      <Badge variant=\"outline\">{systemInfo.theme}</Badge>\n                    </div>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"network\" className=\"space-y-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle className=\"flex items-center gap-2\">\n                  <Network className=\"h-5 w-5\" />\n                  Network Interface\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div>\n                    <p className=\"text-sm font-medium\">Interface</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.network.interface}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Status</p>\n                    <Badge variant=\"outline\" className=\"text-green-600\">\n                      {systemSpecs.network.status}\n                    </Badge>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">Speed</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.network.speed}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-sm font-medium\">IP Address</p>\n                    <p className=\"text-sm text-muted-foreground\">{systemSpecs.network.ip}</p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":15250},"client/src/components/apps/SystemMonitor.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { X, Cpu, HardDrive, Wifi, Zap, Activity, MemoryStick } from 'lucide-react';\n\ninterface SystemStats {\n  cpu: number;\n  memory: number;\n  disk: number;\n  network: number;\n  temperature: number;\n  processes: ProcessInfo[];\n}\n\ninterface ProcessInfo {\n  pid: number;\n  name: string;\n  cpu: number;\n  memory: number;\n  status: 'running' | 'sleeping' | 'stopped';\n}\n\nexport const SystemMonitor: FC = () => {\n  const [stats, setStats] = useState<SystemStats>({\n    cpu: 0,\n    memory: 0,\n    disk: 0,\n    network: 0,\n    temperature: 0,\n    processes: []\n  });\n\n  const [selectedTab, setSelectedTab] = useState<'overview' | 'processes' | 'performance'>('overview');\n\n  useEffect(() => {\n    const updateStats = () => {\n      // Simulate realistic system stats\n      setStats({\n        cpu: Math.floor(Math.random() * 100),\n        memory: 65 + Math.floor(Math.random() * 20),\n        disk: 78,\n        network: Math.floor(Math.random() * 50),\n        temperature: 45 + Math.floor(Math.random() * 15),\n        processes: [\n          { pid: 1, name: 'systemd', cpu: 0.1, memory: 2.3, status: 'running' },\n          { pid: 789, name: 'gnome-shell', cpu: 15.2, memory: 12.8, status: 'running' },\n          { pid: 1024, name: 'firefox', cpu: 25.6, memory: 18.4, status: 'running' },\n          { pid: 1156, name: 'code', cpu: 8.3, memory: 9.7, status: 'running' },\n          { pid: 2048, name: 'node', cpu: 12.1, memory: 15.2, status: 'running' },\n          { pid: 3072, name: 'docker', cpu: 3.4, memory: 6.8, status: 'running' },\n          { pid: 4096, name: 'spotify', cpu: 2.1, memory: 4.5, status: 'sleeping' }\n        ]\n      });\n    };\n\n    updateStats();\n    const interval = setInterval(updateStats, 2000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const getStatusColor = (percentage: number) => {\n    if (percentage < 50) return 'bg-green-500';\n    if (percentage < 80) return 'bg-yellow-500';\n    return 'bg-red-500';\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl w-full max-w-4xl h-[600px] flex flex-col\">\n      <div className=\"bg-blue-600 text-white px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Activity className=\"w-5 h-5\" />\n          <span className=\"font-medium\">System Monitor</span>\n        </div>\n      </div>\n\n      <div className=\"flex border-b\">\n        {[\n          { key: 'overview', label: 'Overview', icon: Activity },\n          { key: 'processes', label: 'Processes', icon: Cpu },\n          { key: 'performance', label: 'Performance', icon: Zap }\n        ].map(tab => (\n          <button\n            key={tab.key}\n            onClick={() => setSelectedTab(tab.key as any)}\n            className={`flex items-center space-x-2 px-4 py-2 ${\n              selectedTab === tab.key ? 'bg-blue-50 border-b-2 border-blue-600' : 'hover:bg-gray-50'\n            }`}\n          >\n            <tab.icon className=\"w-4 h-4\" />\n            <span>{tab.label}</span>\n          </button>\n        ))}\n      </div>\n\n      <div className=\"flex-1 p-6 overflow-auto\">\n        {selectedTab === 'overview' && (\n          <div className=\"space-y-6\">\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Cpu className=\"w-5 h-5 text-blue-600\" />\n                    <span className=\"font-medium\">CPU Usage</span>\n                  </div>\n                  <span className=\"text-lg font-bold\">{stats.cpu}%</span>\n                </div>\n                <div className=\"w-full bg-gray-300 rounded-full h-2\">\n                  <div \n                    className={`h-2 rounded-full ${getStatusColor(stats.cpu)}`}\n                    style={{ width: `${stats.cpu}%` }}\n                  />\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <MemoryStick className=\"w-5 h-5 text-green-600\" />\n                    <span className=\"font-medium\">Memory</span>\n                  </div>\n                  <span className=\"text-lg font-bold\">{stats.memory}%</span>\n                </div>\n                <div className=\"w-full bg-gray-300 rounded-full h-2\">\n                  <div \n                    className={`h-2 rounded-full ${getStatusColor(stats.memory)}`}\n                    style={{ width: `${stats.memory}%` }}\n                  />\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <HardDrive className=\"w-5 h-5 text-purple-600\" />\n                    <span className=\"font-medium\">Disk Usage</span>\n                  </div>\n                  <span className=\"text-lg font-bold\">{stats.disk}%</span>\n                </div>\n                <div className=\"w-full bg-gray-300 rounded-full h-2\">\n                  <div \n                    className={`h-2 rounded-full ${getStatusColor(stats.disk)}`}\n                    style={{ width: `${stats.disk}%` }}\n                  />\n                </div>\n              </div>\n\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <div className=\"flex items-center justify-between mb-2\">\n                  <div className=\"flex items-center space-x-2\">\n                    <Wifi className=\"w-5 h-5 text-orange-600\" />\n                    <span className=\"font-medium\">Network</span>\n                  </div>\n                  <span className=\"text-lg font-bold\">{stats.network} MB/s</span>\n                </div>\n                <div className=\"w-full bg-gray-300 rounded-full h-2\">\n                  <div \n                    className=\"h-2 rounded-full bg-orange-500\"\n                    style={{ width: `${stats.network * 2}%` }}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-medium mb-3\">System Information</h3>\n              <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                <div>\n                  <span className=\"text-gray-600\">OS:</span>\n                  <span className=\"ml-2\">WebOS 4.0 (Ubuntu 22.04 Base)</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Kernel:</span>\n                  <span className=\"ml-2\">5.15.0-91-generic</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">CPU:</span>\n                  <span className=\"ml-2\">Intel Core i7-8565U (4 cores)</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Memory:</span>\n                  <span className=\"ml-2\">8.0 GB DDR4</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Temperature:</span>\n                  <span className=\"ml-2\">{stats.temperature}°C</span>\n                </div>\n                <div>\n                  <span className=\"text-gray-600\">Uptime:</span>\n                  <span className=\"ml-2\">2h 34m</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'processes' && (\n          <div>\n            <div className=\"mb-4\">\n              <h3 className=\"font-medium\">Running Processes</h3>\n              <p className=\"text-sm text-gray-600\">Total: {stats.processes.length} processes</p>\n            </div>\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b\">\n                    <th className=\"text-left p-2\">PID</th>\n                    <th className=\"text-left p-2\">Name</th>\n                    <th className=\"text-left p-2\">CPU %</th>\n                    <th className=\"text-left p-2\">Memory %</th>\n                    <th className=\"text-left p-2\">Status</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {stats.processes.map(process => (\n                    <tr key={process.pid} className=\"border-b hover:bg-gray-50\">\n                      <td className=\"p-2 font-mono\">{process.pid}</td>\n                      <td className=\"p-2\">{process.name}</td>\n                      <td className=\"p-2\">{process.cpu.toFixed(1)}%</td>\n                      <td className=\"p-2\">{process.memory.toFixed(1)}%</td>\n                      <td className=\"p-2\">\n                        <span className={`px-2 py-1 rounded-full text-xs ${\n                          process.status === 'running' ? 'bg-green-100 text-green-800' :\n                          process.status === 'sleeping' ? 'bg-yellow-100 text-yellow-800' :\n                          'bg-red-100 text-red-800'\n                        }`}>\n                          {process.status}\n                        </span>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        )}\n\n        {selectedTab === 'performance' && (\n          <div className=\"space-y-6\">\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-medium mb-3\">Performance Metrics</h3>\n              <div className=\"space-y-4\">\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">CPU Performance</span>\n                    <span className=\"text-sm font-medium\">{(100 - stats.cpu)}% available</span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\">\n                    4 cores @ 1.8GHz • Turbo: 4.6GHz\n                  </div>\n                </div>\n                \n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Memory Performance</span>\n                    <span className=\"text-sm font-medium\">{((100 - stats.memory) * 8 / 100).toFixed(1)}GB free</span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\">\n                    DDR4-3200 • Dual Channel\n                  </div>\n                </div>\n\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Storage Performance</span>\n                    <span className=\"text-sm font-medium\">NVMe SSD • 450MB/s</span>\n                  </div>\n                  <div className=\"text-xs text-gray-600\">\n                    512GB capacity • {((100 - stats.disk) * 512 / 100).toFixed(0)}GB available\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gray-50 p-4 rounded-lg\">\n              <h3 className=\"font-medium mb-3\">Resource Usage History</h3>\n              <div className=\"h-32 bg-white rounded border flex items-end justify-center space-x-1 p-2\">\n                {Array.from({ length: 20 }).map((_, i) => (\n                  <div\n                    key={i}\n                    className=\"bg-blue-500 w-3 rounded-t\"\n                    style={{ height: `${Math.random() * 100}%` }}\n                  />\n                ))}\n              </div>\n              <div className=\"text-xs text-gray-600 mt-2 text-center\">\n                CPU usage over last 20 minutes\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":11909},"client/src/components/apps/SystemRecovery.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardHeader, CardContent, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { AlertTriangle, CheckCircle, XCircle, RefreshCw, Wrench, HardDrive, Wifi, Settings } from 'lucide-react';\n\ninterface DiagnosticResult {\n  id: string;\n  name: string;\n  status: 'pending' | 'running' | 'pass' | 'fail' | 'warning';\n  details: string;\n  fixAvailable?: boolean;\n  critical?: boolean;\n}\n\ninterface RecoveryStep {\n  id: string;\n  title: string;\n  description: string;\n  action: () => Promise<boolean>;\n  dangerous?: boolean;\n}\n\nexport const SystemRecovery: FC = () => {\n  const [currentStep, setCurrentStep] = useState<'home' | 'diagnostics' | 'recovery' | 'results'>('home');\n  const [diagnostics, setDiagnostics] = useState<DiagnosticResult[]>([]);\n  const [isRunning, setIsRunning] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [selectedFixes, setSelectedFixes] = useState<string[]>([]);\n  const [recoveryResults, setRecoveryResults] = useState<{[key: string]: boolean}>({});\n\n  const diagnosticTests: DiagnosticResult[] = [\n    {\n      id: 'storage',\n      name: 'Local Storage Check',\n      status: 'pending',\n      details: 'Checking browser storage integrity and capacity',\n      fixAvailable: true\n    },\n    {\n      id: 'apps',\n      name: 'Installed Applications',\n      status: 'pending',\n      details: 'Verifying installed app configurations',\n      fixAvailable: true\n    },\n    {\n      id: 'settings',\n      name: 'System Settings',\n      status: 'pending',\n      details: 'Validating system configuration files',\n      fixAvailable: true\n    },\n    {\n      id: 'database',\n      name: 'Database Connection',\n      status: 'pending',\n      details: 'Testing backend database connectivity',\n      fixAvailable: false\n    },\n    {\n      id: 'memory',\n      name: 'Memory Usage',\n      status: 'pending',\n      details: 'Analyzing browser memory consumption',\n      fixAvailable: true\n    },\n    {\n      id: 'permissions',\n      name: 'Browser Permissions',\n      status: 'pending',\n      details: 'Checking required browser API access',\n      fixAvailable: false\n    }\n  ];\n\n  const recoverySteps: RecoveryStep[] = [\n    {\n      id: 'storage',\n      title: 'Clear Corrupted Storage Data',\n      description: 'Remove invalid entries from local storage',\n      action: async () => {\n        const keysToCheck = Object.keys(localStorage);\n        let fixed = false;\n        \n        keysToCheck.forEach(key => {\n          try {\n            const value = localStorage.getItem(key);\n            if (value) {\n              JSON.parse(value);\n            }\n          } catch (e) {\n            localStorage.removeItem(key);\n            fixed = true;\n          }\n        });\n        \n        return fixed;\n      }\n    },\n    {\n      id: 'apps',\n      title: 'Reset Application Registry',\n      description: 'Rebuild the installed applications list',\n      action: async () => {\n        const installedApps = localStorage.getItem('webos-installed-apps');\n        if (installedApps) {\n          try {\n            const apps = JSON.parse(installedApps);\n            const validApps = apps.filter((app: any) => app.id && app.name && app.component);\n            localStorage.setItem('webos-installed-apps', JSON.stringify(validApps));\n            return true;\n          } catch (e) {\n            localStorage.removeItem('webos-installed-apps');\n            return true;\n          }\n        }\n        return false;\n      }\n    },\n    {\n      id: 'settings',\n      title: 'Restore Default Settings',\n      description: 'Reset system settings to factory defaults',\n      action: async () => {\n        const settingsKeys = [\n          'webos-theme', 'webos-wallpaper', 'webos-show-icons',\n          'webos-icon-positions', 'webos-folders'\n        ];\n        \n        settingsKeys.forEach(key => {\n          localStorage.removeItem(key);\n        });\n        \n        // Set safe defaults\n        localStorage.setItem('webos-theme', 'dark');\n        localStorage.setItem('webos-wallpaper', 'default');\n        localStorage.setItem('webos-show-icons', 'true');\n        \n        return true;\n      },\n      dangerous: true\n    },\n    {\n      id: 'memory',\n      title: 'Clear Browser Cache',\n      description: 'Force garbage collection and clear caches',\n      action: async () => {\n        // Clear session storage\n        sessionStorage.clear();\n        \n        // Force garbage collection if available\n        if ('gc' in window && typeof window.gc === 'function') {\n          window.gc();\n        }\n        \n        return true;\n      }\n    }\n  ];\n\n  const runDiagnostics = async () => {\n    setIsRunning(true);\n    setProgress(0);\n    setCurrentStep('diagnostics');\n    \n    const results = [...diagnosticTests];\n    setDiagnostics(results);\n\n    for (let i = 0; i < results.length; i++) {\n      // Update current test status\n      results[i].status = 'running';\n      setDiagnostics([...results]);\n      \n      await new Promise(resolve => setTimeout(resolve, 800)); // Simulate test time\n      \n      // Run actual diagnostic\n      const testResult = await runDiagnosticTest(results[i].id);\n      results[i] = { ...results[i], ...testResult };\n      \n      setDiagnostics([...results]);\n      setProgress(((i + 1) / results.length) * 100);\n    }\n    \n    setIsRunning(false);\n  };\n\n  const runDiagnosticTest = async (testId: string): Promise<Partial<DiagnosticResult>> => {\n    switch (testId) {\n      case 'storage':\n        try {\n          const testKey = 'webos-test-storage';\n          localStorage.setItem(testKey, 'test');\n          localStorage.removeItem(testKey);\n          \n          // Check for corrupted data\n          let corruptedKeys = 0;\n          Object.keys(localStorage).forEach(key => {\n            try {\n              const value = localStorage.getItem(key);\n              if (value) JSON.parse(value);\n            } catch {\n              corruptedKeys++;\n            }\n          });\n          \n          if (corruptedKeys > 0) {\n            return {\n              status: 'warning',\n              details: `Storage accessible but ${corruptedKeys} corrupted entries found`\n            };\n          }\n          \n          return {\n            status: 'pass',\n            details: 'Local storage is healthy and accessible'\n          };\n        } catch {\n          return {\n            status: 'fail',\n            details: 'Local storage is not accessible or full',\n            critical: true\n          };\n        }\n\n      case 'apps':\n        try {\n          const installedApps = localStorage.getItem('webos-installed-apps');\n          if (installedApps) {\n            const apps = JSON.parse(installedApps);\n            const invalidApps = apps.filter((app: any) => !app.id || !app.name);\n            \n            if (invalidApps.length > 0) {\n              return {\n                status: 'warning',\n                details: `${invalidApps.length} invalid app entries found`\n              };\n            }\n          }\n          \n          return {\n            status: 'pass',\n            details: 'All installed applications are properly configured'\n          };\n        } catch {\n          return {\n            status: 'fail',\n            details: 'Application registry is corrupted'\n          };\n        }\n\n      case 'settings':\n        const requiredSettings = ['webos-theme', 'webos-wallpaper'];\n        const missingSettings = requiredSettings.filter(setting => \n          !localStorage.getItem(setting)\n        );\n        \n        if (missingSettings.length > 0) {\n          return {\n            status: 'warning',\n            details: `Missing settings: ${missingSettings.join(', ')}`\n          };\n        }\n        \n        return {\n          status: 'pass',\n          details: 'System settings are properly configured'\n        };\n\n      case 'database':\n        try {\n          const response = await fetch('/api/health-check');\n          if (response.ok) {\n            return {\n              status: 'pass',\n              details: 'Database connection is healthy'\n            };\n          } else {\n            return {\n              status: 'warning',\n              details: 'Database connection issues detected'\n            };\n          }\n        } catch {\n          return {\n            status: 'fail',\n            details: 'Cannot connect to backend database'\n          };\n        }\n\n      case 'memory':\n        const memoryInfo = (performance as any).memory;\n        if (memoryInfo) {\n          const usagePercent = (memoryInfo.usedJSHeapSize / memoryInfo.jsHeapSizeLimit) * 100;\n          \n          if (usagePercent > 80) {\n            return {\n              status: 'warning',\n              details: `High memory usage: ${usagePercent.toFixed(1)}%`\n            };\n          }\n          \n          return {\n            status: 'pass',\n            details: `Memory usage: ${usagePercent.toFixed(1)}%`\n          };\n        }\n        \n        return {\n          status: 'pass',\n          details: 'Memory information not available but system responsive'\n        };\n\n      case 'permissions':\n        const permissions = ['localStorage', 'sessionStorage', 'indexedDB'];\n        const failedPermissions = permissions.filter(perm => {\n          try {\n            return !(perm in window);\n          } catch {\n            return true;\n          }\n        });\n        \n        if (failedPermissions.length > 0) {\n          return {\n            status: 'warning',\n            details: `Missing permissions: ${failedPermissions.join(', ')}`\n          };\n        }\n        \n        return {\n          status: 'pass',\n          details: 'All required browser permissions are available'\n        };\n\n      default:\n        return {\n          status: 'fail',\n          details: 'Unknown diagnostic test'\n        };\n    }\n  };\n\n  const runRecovery = async () => {\n    setCurrentStep('recovery');\n    setIsRunning(true);\n    const results: {[key: string]: boolean} = {};\n    \n    for (const fixId of selectedFixes) {\n      const step = recoverySteps.find(s => s.id === fixId);\n      if (step) {\n        try {\n          const success = await step.action();\n          results[fixId] = success;\n        } catch (error) {\n          results[fixId] = false;\n        }\n      }\n    }\n    \n    setRecoveryResults(results);\n    setIsRunning(false);\n    setCurrentStep('results');\n  };\n\n  const getStatusIcon = (status: DiagnosticResult['status']) => {\n    switch (status) {\n      case 'pass':\n        return <CheckCircle className=\"w-5 h-5 text-green-500\" />;\n      case 'fail':\n        return <XCircle className=\"w-5 h-5 text-red-500\" />;\n      case 'warning':\n        return <AlertTriangle className=\"w-5 h-5 text-yellow-500\" />;\n      case 'running':\n        return <RefreshCw className=\"w-5 h-5 text-blue-500 animate-spin\" />;\n      default:\n        return <div className=\"w-5 h-5 rounded-full bg-gray-300\" />;\n    }\n  };\n\n  const getStatusBadge = (status: DiagnosticResult['status']) => {\n    const variants = {\n      pass: 'bg-green-100 text-green-800',\n      fail: 'bg-red-100 text-red-800',\n      warning: 'bg-yellow-100 text-yellow-800',\n      running: 'bg-blue-100 text-blue-800',\n      pending: 'bg-gray-100 text-gray-800'\n    };\n    \n    return (\n      <Badge className={variants[status]}>\n        {status.charAt(0).toUpperCase() + status.slice(1)}\n      </Badge>\n    );\n  };\n\n  if (currentStep === 'home') {\n    return (\n      <div className=\"h-full p-6\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            <Wrench className=\"w-16 h-16 mx-auto mb-4 text-primary\" />\n            <h1 className=\"text-3xl font-bold mb-2\">System Recovery Wizard</h1>\n            <p className=\"text-muted-foreground\">\n              Diagnose and fix common WebOS issues automatically\n            </p>\n          </div>\n\n          <div className=\"grid gap-6\">\n            <Card className=\"cursor-pointer hover:shadow-md transition-shadow\" onClick={runDiagnostics}>\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-4\">\n                  <HardDrive className=\"w-8 h-8 text-blue-500\" />\n                  <div>\n                    <h3 className=\"font-semibold text-lg\">Run System Diagnostics</h3>\n                    <p className=\"text-muted-foreground\">\n                      Automatically scan for system issues and errors\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"cursor-pointer hover:shadow-md transition-shadow\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-4\">\n                  <Settings className=\"w-8 h-8 text-green-500\" />\n                  <div>\n                    <h3 className=\"font-semibold text-lg\">Manual Recovery Tools</h3>\n                    <p className=\"text-muted-foreground\">\n                      Access individual recovery and repair utilities\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            <Card className=\"cursor-pointer hover:shadow-md transition-shadow\">\n              <CardContent className=\"p-6\">\n                <div className=\"flex items-center gap-4\">\n                  <Wifi className=\"w-8 h-8 text-purple-500\" />\n                  <div>\n                    <h3 className=\"font-semibold text-lg\">Network Diagnostics</h3>\n                    <p className=\"text-muted-foreground\">\n                      Test network connectivity and backend services\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentStep === 'diagnostics') {\n    return (\n      <div className=\"h-full p-6\">\n        <div className=\"max-w-4xl mx-auto\">\n          <div className=\"mb-6\">\n            <h1 className=\"text-2xl font-bold mb-2\">System Diagnostics</h1>\n            <Progress value={progress} className=\"mb-2\" />\n            <p className=\"text-sm text-muted-foreground\">\n              {isRunning ? 'Running diagnostics...' : `Completed ${diagnostics.filter(d => d.status !== 'pending').length}/${diagnostics.length} tests`}\n            </p>\n          </div>\n\n          <div className=\"space-y-4\">\n            {diagnostics.map((diagnostic) => (\n              <Card key={diagnostic.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-3\">\n                      {getStatusIcon(diagnostic.status)}\n                      <div>\n                        <h3 className=\"font-medium\">{diagnostic.name}</h3>\n                        <p className=\"text-sm text-muted-foreground\">{diagnostic.details}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      {diagnostic.critical && (\n                        <Badge variant=\"destructive\">Critical</Badge>\n                      )}\n                      {getStatusBadge(diagnostic.status)}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          {!isRunning && diagnostics.some(d => d.status === 'fail' || d.status === 'warning') && (\n            <div className=\"mt-6 text-center\">\n              <Button \n                onClick={() => {\n                  const availableFixes = diagnostics\n                    .filter(d => (d.status === 'fail' || d.status === 'warning') && d.fixAvailable)\n                    .map(d => d.id);\n                  setSelectedFixes(availableFixes);\n                  setCurrentStep('recovery');\n                }}\n                className=\"px-8\"\n              >\n                Proceed to Recovery\n              </Button>\n            </div>\n          )}\n\n          {!isRunning && diagnostics.every(d => d.status === 'pass') && (\n            <div className=\"mt-6 text-center\">\n              <div className=\"p-6 bg-green-50 rounded-lg\">\n                <CheckCircle className=\"w-12 h-12 mx-auto mb-4 text-green-500\" />\n                <h3 className=\"text-lg font-semibold text-green-800 mb-2\">System Healthy</h3>\n                <p className=\"text-green-700\">No issues were detected during the diagnostic scan.</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n\n  if (currentStep === 'recovery') {\n    const availableSteps = recoverySteps.filter(step => selectedFixes.includes(step.id));\n\n    return (\n      <div className=\"h-full p-6\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"mb-6\">\n            <h1 className=\"text-2xl font-bold mb-2\">Recovery Actions</h1>\n            <p className=\"text-muted-foreground\">\n              Review and confirm the recovery actions to be performed\n            </p>\n          </div>\n\n          <div className=\"space-y-4 mb-6\">\n            {availableSteps.map((step) => (\n              <Card key={step.id}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-start gap-3\">\n                    <Wrench className=\"w-5 h-5 mt-1 text-primary\" />\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-medium\">{step.title}</h3>\n                      <p className=\"text-sm text-muted-foreground mb-2\">{step.description}</p>\n                      {step.dangerous && (\n                        <Badge variant=\"destructive\" className=\"text-xs\">\n                          Destructive Action\n                        </Badge>\n                      )}\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n\n          <div className=\"flex gap-4\">\n            <Button \n              variant=\"outline\" \n              onClick={() => setCurrentStep('diagnostics')}\n              disabled={isRunning}\n            >\n              Back to Diagnostics\n            </Button>\n            <Button \n              onClick={runRecovery}\n              disabled={isRunning || availableSteps.length === 0}\n              className=\"flex-1\"\n            >\n              {isRunning ? 'Running Recovery...' : 'Start Recovery'}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  if (currentStep === 'results') {\n    const successCount = Object.values(recoveryResults).filter(Boolean).length;\n    const totalCount = Object.keys(recoveryResults).length;\n\n    return (\n      <div className=\"h-full p-6\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"text-center mb-8\">\n            {successCount === totalCount ? (\n              <CheckCircle className=\"w-16 h-16 mx-auto mb-4 text-green-500\" />\n            ) : (\n              <AlertTriangle className=\"w-16 h-16 mx-auto mb-4 text-yellow-500\" />\n            )}\n            <h1 className=\"text-2xl font-bold mb-2\">Recovery Complete</h1>\n            <p className=\"text-muted-foreground\">\n              {successCount} of {totalCount} recovery actions completed successfully\n            </p>\n          </div>\n\n          <div className=\"space-y-4 mb-6\">\n            {Object.entries(recoveryResults).map(([stepId, success]) => {\n              const step = recoverySteps.find(s => s.id === stepId);\n              if (!step) return null;\n\n              return (\n                <Card key={stepId}>\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center gap-3\">\n                      {success ? (\n                        <CheckCircle className=\"w-5 h-5 text-green-500\" />\n                      ) : (\n                        <XCircle className=\"w-5 h-5 text-red-500\" />\n                      )}\n                      <div>\n                        <h3 className=\"font-medium\">{step.title}</h3>\n                        <p className=\"text-sm text-muted-foreground\">\n                          {success ? 'Completed successfully' : 'Failed to complete'}\n                        </p>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n\n          <div className=\"flex gap-4\">\n            <Button \n              variant=\"outline\" \n              onClick={() => setCurrentStep('home')}\n              className=\"flex-1\"\n            >\n              Return to Home\n            </Button>\n            <Button \n              onClick={() => window.location.reload()}\n              className=\"flex-1\"\n            >\n              Restart System\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return null;\n};","size_bytes":20985},"client/src/components/apps/SystemWOS.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { \n  Shield, \n  AlertTriangle, \n  Cpu, \n  HardDrive, \n  Monitor, \n  Settings,\n  Lock,\n  Key,\n  Database,\n  Server,\n  Network,\n  Zap\n} from 'lucide-react';\n\nexport const SystemWOS: FC = () => {\n  const [isSystemIntact, setIsSystemIntact] = useState(true);\n  const [systemHealth, setSystemHealth] = useState(100);\n  const [criticalFiles] = useState([\n    { name: 'kernel32.wos', status: 'protected', size: '15.2 MB', critical: true },\n    { name: 'webos.dll', status: 'protected', size: '8.7 MB', critical: true },\n    { name: 'system.core', status: 'protected', size: '25.1 MB', critical: true },\n    { name: 'window.manager', status: 'protected', size: '12.4 MB', critical: true },\n    { name: 'desktop.engine', status: 'protected', size: '18.9 MB', critical: true },\n    { name: 'auth.service', status: 'protected', size: '6.3 MB', critical: true },\n    { name: 'network.stack', status: 'protected', size: '11.8 MB', critical: true },\n    { name: 'graphics.driver', status: 'protected', size: '22.5 MB', critical: true }\n  ]);\n\n  const [systemServices] = useState([\n    { name: 'WebOS Core Service', status: 'running', pid: 1001, memory: '45.2 MB' },\n    { name: 'Window Manager Service', status: 'running', pid: 1002, memory: '32.1 MB' },\n    { name: 'Desktop Environment', status: 'running', pid: 1003, memory: '28.7 MB' },\n    { name: 'Security Manager', status: 'running', pid: 1004, memory: '15.4 MB' },\n    { name: 'Network Stack', status: 'running', pid: 1005, memory: '22.8 MB' },\n    { name: 'File System Driver', status: 'running', pid: 1006, memory: '18.3 MB' },\n    { name: 'Graphics Subsystem', status: 'running', pid: 1007, memory: '67.9 MB' },\n    { name: 'Audio Engine', status: 'running', pid: 1008, memory: '12.6 MB' }\n  ]);\n\n  const [protectionLevel, setProtectionLevel] = useState('maximum');\n\n  useEffect(() => {\n    // Simulate system monitoring\n    const interval = setInterval(() => {\n      setSystemHealth(prev => {\n        const newHealth = 95 + Math.random() * 5;\n        return Math.round(newHealth);\n      });\n    }, 3000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const handleSystemCorruption = () => {\n    setIsSystemIntact(false);\n    setSystemHealth(0);\n    \n    // Trigger critical system failure and show recovery screen\n    setTimeout(() => {\n      // Create recovery component and mount it\n      const recoveryDiv = document.createElement('div');\n      recoveryDiv.id = 'webos-recovery-screen';\n      recoveryDiv.style.cssText = `\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        z-index: 999999;\n        background: linear-gradient(135deg, #7f1d1d, #991b1b, #000);\n        color: white;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        font-family: system-ui, sans-serif;\n      `;\n      \n      recoveryDiv.innerHTML = `\n        <div style=\"text-align: center; max-width: 600px; padding: 2rem;\">\n          <div style=\"font-size: 4rem; margin-bottom: 1rem;\">⚠️</div>\n          <h1 style=\"font-size: 3rem; margin-bottom: 1rem;\">CRITICAL SYSTEM FAILURE</h1>\n          <p style=\"font-size: 1.5rem; margin-bottom: 1rem;\">System WOS has been corrupted</p>\n          <p style=\"font-size: 1.2rem; margin-bottom: 2rem;\">WebOS cannot continue operation</p>\n          <div style=\"background: rgba(0,0,0,0.5); padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;\">\n            <h2 style=\"font-size: 1.5rem; margin-bottom: 1rem;\">WebOS Maker Recovery</h2>\n            <p style=\"margin-bottom: 1rem;\">Critical system files have been corrupted.</p>\n            <p style=\"margin-bottom: 1rem;\">Recovery options are limited.</p>\n            <p style=\"color: #fbbf24;\">Contact system administrator for recovery assistance.</p>\n          </div>\n          <p style=\"font-size: 0.9rem; opacity: 0.7;\">Do not power off your computer</p>\n        </div>\n      `;\n      \n      document.body.appendChild(recoveryDiv);\n    }, 3000);\n  };\n\n  if (!isSystemIntact) {\n    return (\n      <div className=\"w-full h-full flex flex-col items-center justify-center bg-red-900 text-white\">\n        <div className=\"text-center space-y-6\">\n          <AlertTriangle className=\"w-24 h-24 text-red-400 mx-auto animate-pulse\" />\n          <h1 className=\"text-4xl font-bold\">CRITICAL SYSTEM FAILURE</h1>\n          <p className=\"text-xl\">System WOS has been corrupted</p>\n          <div className=\"space-y-2\">\n            <p className=\"text-lg\">WebOS cannot continue operation</p>\n            <p className=\"text-sm opacity-75\">Redirecting to WebOS Maker Recovery...</p>\n          </div>\n          <Progress value={66} className=\"w-64 mx-auto\" />\n          <p className=\"text-xs opacity-50\">Do not power off your computer</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"w-full h-full flex flex-col bg-background\">\n      <div className=\"flex items-center justify-between p-4 border-b border-border bg-gradient-to-r from-blue-600/10 to-purple-600/10\">\n        <div className=\"flex items-center space-x-3\">\n          <Shield className=\"w-6 h-6 text-primary\" />\n          <h2 className=\"text-2xl font-bold\">System WOS</h2>\n          <div className=\"flex items-center space-x-2\">\n            <Lock className=\"w-4 h-4 text-green-500\" />\n            <span className=\"text-sm text-green-600 font-medium\">PROTECTED</span>\n          </div>\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          <div className=\"text-right\">\n            <p className=\"text-sm text-muted-foreground\">System Health</p>\n            <p className=\"text-lg font-bold text-green-600\">{systemHealth}%</p>\n          </div>\n          <div className=\"text-right\">\n            <p className=\"text-sm text-muted-foreground\">Protection Level</p>\n            <p className=\"text-lg font-bold text-blue-600\">Maximum</p>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex-1 p-4 overflow-auto\">\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* Critical System Files */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Database className=\"w-5 h-5\" />\n                <span>Critical System Files</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {criticalFiles.map((file, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-3 border rounded bg-green-50 dark:bg-green-900/20\">\n                    <div className=\"flex items-center space-x-3\">\n                      <Lock className=\"w-4 h-4 text-green-500\" />\n                      <div>\n                        <p className=\"font-medium\">{file.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">{file.size}</p>\n                      </div>\n                    </div>\n                    <div className=\"flex items-center space-x-2\">\n                      <span className=\"text-xs bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300 px-2 py-1 rounded\">\n                        {file.status.toUpperCase()}\n                      </span>\n                      <Shield className=\"w-4 h-4 text-green-500\" />\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* System Services */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Server className=\"w-5 h-5\" />\n                <span>System Services</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                {systemServices.map((service, index) => (\n                  <div key={index} className=\"flex items-center justify-between p-3 border rounded\">\n                    <div className=\"flex items-center space-x-3\">\n                      <div className=\"w-3 h-3 bg-green-500 rounded-full animate-pulse\"></div>\n                      <div>\n                        <p className=\"font-medium\">{service.name}</p>\n                        <p className=\"text-sm text-muted-foreground\">PID: {service.pid}</p>\n                      </div>\n                    </div>\n                    <div className=\"text-right\">\n                      <p className=\"text-sm font-medium text-green-600\">{service.status.toUpperCase()}</p>\n                      <p className=\"text-xs text-muted-foreground\">{service.memory}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* System Protection */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Zap className=\"w-5 h-5\" />\n                <span>Protection Settings</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span>File System Protection</span>\n                  <span className=\"text-green-600 font-medium\">ENABLED</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Memory Protection</span>\n                  <span className=\"text-green-600 font-medium\">ENABLED</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Registry Protection</span>\n                  <span className=\"text-green-600 font-medium\">ENABLED</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Service Protection</span>\n                  <span className=\"text-green-600 font-medium\">ENABLED</span>\n                </div>\n                <div className=\"flex items-center justify-between\">\n                  <span>Network Protection</span>\n                  <span className=\"text-green-600 font-medium\">ENABLED</span>\n                </div>\n              </div>\n              \n              <div className=\"pt-4 border-t\">\n                <Button \n                  onClick={handleSystemCorruption}\n                  variant=\"destructive\" \n                  className=\"w-full\"\n                  size=\"sm\"\n                >\n                  <AlertTriangle className=\"w-4 h-4 mr-2\" />\n                  DELETE SYSTEM WOS (DANGER)\n                </Button>\n                <p className=\"text-xs text-muted-foreground mt-2 text-center\">\n                  Warning: This will cause critical system failure\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* System Information */}\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"flex items-center space-x-2\">\n                <Monitor className=\"w-5 h-5\" />\n                <span>System Information</span>\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">OS Version</p>\n                  <p className=\"font-medium\">WebOS 3.0.0</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Build</p>\n                  <p className=\"font-medium\">22000.1.2024.0115</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Architecture</p>\n                  <p className=\"font-medium\">x64</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Kernel</p>\n                  <p className=\"font-medium\">WebOS NT 10.0</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Boot Time</p>\n                  <p className=\"font-medium\">12.3 seconds</p>\n                </div>\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Uptime</p>\n                  <p className=\"font-medium\">2d 14h 23m</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-3\">\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">CPU Usage</span>\n                    <span className=\"text-sm\">12%</span>\n                  </div>\n                  <Progress value={12} />\n                </div>\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Memory Usage</span>\n                    <span className=\"text-sm\">68%</span>\n                  </div>\n                  <Progress value={68} />\n                </div>\n                <div>\n                  <div className=\"flex justify-between mb-1\">\n                    <span className=\"text-sm\">Disk Usage</span>\n                    <span className=\"text-sm\">45%</span>\n                  </div>\n                  <Progress value={45} />\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n\n        {/* Warning Banner */}\n        <Card className=\"mt-6 border-yellow-200 bg-yellow-50 dark:border-yellow-800 dark:bg-yellow-900/20\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center space-x-3\">\n              <AlertTriangle className=\"w-6 h-6 text-yellow-600\" />\n              <div>\n                <h3 className=\"font-medium text-yellow-800 dark:text-yellow-200\">Critical System Component</h3>\n                <p className=\"text-sm text-yellow-700 dark:text-yellow-300\">\n                  System WOS contains essential files required for WebOS operation. \n                  Deletion or corruption of this component will result in immediate system failure \n                  and require complete system recovery through WebOS Maker.\n                </p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};","size_bytes":14530},"client/src/components/apps/TaskManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardHeader, CardContent, CardTitle } from '@/components/ui/card';\nimport { Progress } from '@/components/ui/progress';\nimport { Activity, Cpu, HardDrive, Zap, X } from 'lucide-react';\n\ninterface Process {\n  id: string;\n  name: string;\n  pid: number;\n  cpu: number;\n  memory: number;\n  status: 'running' | 'sleeping' | 'stopped';\n}\n\nexport const TaskManager: FC = () => {\n  const [processes, setProcesses] = useState<Process[]>([]);\n  const [systemStats, setSystemStats] = useState({\n    cpuUsage: 0,\n    memoryUsage: 0,\n    diskUsage: 0,\n    uptime: '0:00:00'\n  });\n  const [searchTerm, setSearchTerm] = useState('');\n\n  useEffect(() => {\n    // Initialize with system processes\n    const initialProcesses: Process[] = [\n      { id: '1', name: 'WebOS Kernel', pid: 1, cpu: 2.3, memory: 45.2, status: 'running' },\n      { id: '2', name: 'Window Manager', pid: 123, cpu: 1.8, memory: 23.1, status: 'running' },\n      { id: '3', name: 'Desktop Environment', pid: 156, cpu: 0.9, memory: 34.7, status: 'running' },\n      { id: '4', name: 'File System', pid: 78, cpu: 0.5, memory: 12.3, status: 'running' },\n      { id: '5', name: 'Network Manager', pid: 234, cpu: 0.3, memory: 8.9, status: 'running' },\n      { id: '6', name: 'Audio Service', pid: 345, cpu: 0.1, memory: 5.4, status: 'sleeping' },\n      { id: '7', name: 'Terminal', pid: 456, cpu: 0.8, memory: 15.6, status: 'running' },\n      { id: '8', name: 'Browser Process', pid: 567, cpu: 12.4, memory: 89.3, status: 'running' },\n    ];\n\n    setProcesses(initialProcesses);\n\n    // Update system stats periodically\n    const interval = setInterval(() => {\n      setSystemStats({\n        cpuUsage: Math.random() * 50 + 20,\n        memoryUsage: Math.random() * 30 + 40,\n        diskUsage: Math.random() * 10 + 60,\n        uptime: new Date().toLocaleTimeString()\n      });\n\n      // Randomly update process stats\n      setProcesses(prev => prev.map(proc => ({\n        ...proc,\n        cpu: Math.max(0, proc.cpu + (Math.random() - 0.5) * 2),\n        memory: Math.max(0, proc.memory + (Math.random() - 0.5) * 5)\n      })));\n    }, 2000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const filteredProcesses = processes.filter(proc =>\n    proc.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    proc.pid.toString().includes(searchTerm)\n  );\n\n  const handleKillProcess = (processId: string) => {\n    if (confirm('Are you sure you want to terminate this process?')) {\n      setProcesses(prev => prev.filter(p => p.id !== processId));\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'text-green-600';\n      case 'sleeping': return 'text-yellow-600';\n      case 'stopped': return 'text-red-600';\n      default: return 'text-gray-600';\n    }\n  };\n\n  return (\n    <div className=\"h-full p-6 overflow-auto\">\n      <div className=\"flex items-center gap-3 mb-6\">\n        <Activity className=\"w-6 h-6 text-primary\" />\n        <h1 className=\"text-2xl font-bold\">Task Manager</h1>\n      </div>\n\n      {/* System Stats */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <Cpu className=\"w-5 h-5 text-blue-500\" />\n              <span className=\"font-medium\">CPU Usage</span>\n            </div>\n            <Progress value={systemStats.cpuUsage} className=\"mb-2\" />\n            <span className=\"text-sm text-muted-foreground\">{systemStats.cpuUsage.toFixed(1)}%</span>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <HardDrive className=\"w-5 h-5 text-green-500\" />\n              <span className=\"font-medium\">Memory</span>\n            </div>\n            <Progress value={systemStats.memoryUsage} className=\"mb-2\" />\n            <span className=\"text-sm text-muted-foreground\">{systemStats.memoryUsage.toFixed(1)}%</span>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <HardDrive className=\"w-5 h-5 text-purple-500\" />\n              <span className=\"font-medium\">Disk</span>\n            </div>\n            <Progress value={systemStats.diskUsage} className=\"mb-2\" />\n            <span className=\"text-sm text-muted-foreground\">{systemStats.diskUsage.toFixed(1)}%</span>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3 mb-2\">\n              <Zap className=\"w-5 h-5 text-orange-500\" />\n              <span className=\"font-medium\">Uptime</span>\n            </div>\n            <span className=\"text-lg font-mono\">{systemStats.uptime}</span>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Process List */}\n      <Card>\n        <CardHeader>\n          <div className=\"flex justify-between items-center\">\n            <CardTitle>Running Processes ({processes.length})</CardTitle>\n            <Input\n              placeholder=\"Search processes...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-64\"\n            />\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"overflow-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"border-b\">\n                  <th className=\"text-left p-2\">Process Name</th>\n                  <th className=\"text-left p-2\">PID</th>\n                  <th className=\"text-left p-2\">CPU %</th>\n                  <th className=\"text-left p-2\">Memory %</th>\n                  <th className=\"text-left p-2\">Status</th>\n                  <th className=\"text-left p-2\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredProcesses.map(process => (\n                  <tr key={process.id} className=\"border-b hover:bg-muted/50\">\n                    <td className=\"p-2 font-medium\">{process.name}</td>\n                    <td className=\"p-2 font-mono text-sm\">{process.pid}</td>\n                    <td className=\"p-2\">\n                      <span className={process.cpu > 10 ? 'text-red-600 font-semibold' : ''}>\n                        {process.cpu.toFixed(1)}%\n                      </span>\n                    </td>\n                    <td className=\"p-2\">\n                      <span className={process.memory > 50 ? 'text-orange-600 font-semibold' : ''}>\n                        {process.memory.toFixed(1)}%\n                      </span>\n                    </td>\n                    <td className=\"p-2\">\n                      <span className={`capitalize ${getStatusColor(process.status)}`}>\n                        {process.status}\n                      </span>\n                    </td>\n                    <td className=\"p-2\">\n                      <Button\n                        variant=\"outline\"\n                        size=\"sm\"\n                        onClick={() => handleKillProcess(process.id)}\n                        className=\"text-red-600 hover:text-red-700\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </Button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","size_bytes":7672},"client/src/components/apps/Terminal.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\n\ninterface TerminalLine {\n  type: 'command' | 'output' | 'error';\n  content: string;\n  timestamp: Date;\n}\n\nexport const Terminal: FC = () => {\n  const [lines, setLines] = useState<TerminalLine[]>([\n    {\n      type: 'output',\n      content: 'Arch Linux 6.6.8-arch1-1 (TTY1)',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: '',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: 'arch@desktop login: user',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: 'Password: ********',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: 'Last login: ' + new Date().toLocaleString(),\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: '',\n      timestamp: new Date()\n    }\n  ]);\n  \n  const [currentCommand, setCurrentCommand] = useState('');\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  const handleCommand = (command: string) => {\n    const commandLine: TerminalLine = {\n      type: 'command',\n      content: `[user@webos ~]$ ${command}`,\n      timestamp: new Date()\n    };\n\n    setLines(prev => [...prev, commandLine]);\n\n    let output = '';\n    const cmd = command.toLowerCase().trim();\n    const args = command.trim().split(' ');\n\n    if (cmd === 'help') {\n      output = `WebOS Terminal v4.0 - Advanced Command Interface\n==========================================\nSYSTEM COMMANDS:\n  help              - Show this help message\n  clear             - Clear the terminal\n  pwd               - Print working directory\n  whoami            - Show current user\n  date              - Show current date and time\n  uptime            - Show system uptime\n  uname -a          - Show system information\n  history           - Show command history\n  wiki              - Show WebOS installation wiki and command reference\n  serve-website     - Start local web server and open HTML website\n  exit              - Close terminal\n\nFILE SYSTEM:\n  ls [options]      - List directory contents (-la for detailed)\n  cd [dir]          - Change directory\n  mkdir [dir]       - Create directory\n  rmdir [dir]       - Remove directory\n  touch [file]      - Create file\n  rm [file]         - Remove file\n  cat [file]        - Display file contents\n  nano [file]       - Edit file with nano\n  vim [file]        - Edit file with vim\n  find [pattern]    - Find files/directories\n  grep [pattern]    - Search text patterns\n  chmod [mode]      - Change file permissions\n  chown [user]      - Change file ownership\n\nSYSTEM MANAGEMENT:\n  ps                - Show running processes\n  top               - Show system monitor\n  htop              - Enhanced system monitor\n  kill [pid]        - Kill process by ID\n  killall [name]    - Kill processes by name\n  systemctl [cmd]   - Control system services\n  mount [device]    - Mount filesystem\n  umount [device]   - Unmount filesystem\n  df -h             - Show disk usage\n  free -h           - Show memory usage\n  lscpu             - Show CPU information\n  lsblk             - Show block devices\n\nNETWORK COMMANDS:\n  ping [host]       - Ping network host\n  wget [url]        - Download file from URL\n  curl [url]        - Transfer data from/to servers\n  ssh [user@host]   - Connect via SSH\n  scp [src] [dst]   - Secure copy files\n  netstat           - Show network connections\n  ip addr           - Show network interfaces\n  ifconfig          - Configure network interface\n\nDEVELOPMENT TOOLS:\n  git [command]     - Git version control\n  npm [command]     - Node package manager\n  node [file]       - Run Node.js file\n  python [file]     - Run Python script\n  gcc [file]        - Compile C programs\n  make              - Build projects\n  docker [cmd]      - Container management\n  code [file]       - Launch WebOS IDE\n\nPACKAGE MANAGEMENT:\n  pacman [options]  - Arch Linux package manager\n  yay [package]     - AUR helper\n  pip [package]     - Python package installer\n  npm install [pkg] - Install Node.js packages\n\nSYSTEM INSTALLATION:\n  install-webos     - Install WebOS desktop environment\n  install-arch      - Install Arch Linux base system\n  install-driver    - Install hardware drivers\n  update-system     - Update all packages\n\nUTILITIES:\n  echo [text]       - Display text\n  man [command]     - Show manual pages\n  which [command]   - Locate command\n  alias [name=cmd]  - Create command alias\n  env               - Show environment variables\n  export [var=val]  - Set environment variable\n  crontab           - Schedule tasks\n  tar [options]     - Archive files\n  zip/unzip         - Compress/extract files\n\nAPPLICATIONS:\n  pacman-game       - Launch Pac-Man arcade game\n  emulator          - Launch retro gaming emulator\n  videotube         - Launch VideoTube platform\n  browser           - Launch web browser\n  calculator        - Launch calculator\n  settings          - Open system settings\n\nType 'install-webos --help' for WebOS installation guide.`;\n    } else if (cmd === 'clear') {\n      setLines([]);\n      setCommandHistory([]);\n      return;\n    } else if (cmd === 'ls' || cmd === 'ls -la') {\n      output = `total 64\ndrwxr-xr-x  8 user user 4096 Dec  2 23:10 .\ndrwxr-xr-x  3 root root 4096 Dec  2 22:55 ..\n-rw-------  1 user user  220 Dec  2 22:55 .bash_logout\n-rw-------  1 user user 3771 Dec  2 22:55 .bashrc\ndrwx------  2 user user 4096 Dec  2 23:05 .cache\ndrwxr-xr-x  3 user user 4096 Dec  2 23:05 .config\ndrwxr-xr-x  2 user user 4096 Dec  2 23:05 Desktop\ndrwxr-xr-x  2 user user 4096 Dec  2 23:05 Documents\ndrwxr-xr-x  2 user user 4096 Dec  2 23:05 Downloads\ndrwxr-xr-x  2 user user 4096 Dec  2 23:05 Pictures\n-rw-------  1 user user  807 Dec  2 22:55 .profile\ndrwxr-xr-x  2 user user 4096 Dec  2 23:05 Videos`;\n    } else if (cmd === 'pwd') {\n      output = `/home/user`;\n    } else if (cmd.startsWith('cd ')) {\n      const dir = args[1] || '~';\n      if (dir === '..') {\n        output = `Changed to parent directory`;\n      } else if (dir === '~' || dir === '/home/user') {\n        output = `Changed to home directory`;\n      } else {\n        output = `bash: cd: ${dir}: No such file or directory`;\n      }\n    } else if (cmd.startsWith('mkdir ')) {\n      output = args[1] ? `mkdir: created directory '${args[1]}'` : 'mkdir: missing operand';\n    } else if (cmd.startsWith('touch ')) {\n      output = args[1] ? `touch: created file '${args[1]}'` : 'touch: missing file operand';\n    } else if (cmd.startsWith('cat ')) {\n      const file = args[1];\n      if (file === '.bashrc') {\n        output = `# ~/.bashrc: executed by bash(1) for non-login shells\nexport PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin\nexport PS1='[\\\\u@\\\\h \\\\W]\\\\$ '\nexport EDITOR=nano\nexport BROWSER=firefox\n\n# Aliases\nalias ll='ls -alF'\nalias la='ls -A'\nalias l='ls -CF'\nalias grep='grep --color=auto'\nalias ..='cd ..'\nalias ...='cd ../..'\n\n# WebOS specific\nexport WEBOS_VERSION=\"3.0\"\nexport WEBOS_HOME=\"/opt/webos\"`;\n      } else if (file === '.profile') {\n        output = `# ~/.profile: executed by the command interpreter for login shells\nexport PATH=\"$HOME/bin:$PATH\"\nexport LANG=en_US.UTF-8\nexport TERM=xterm-256color\n\n# Load .bashrc if it exists\nif [ -f \"$HOME/.bashrc\" ]; then\n    . \"$HOME/.bashrc\"\nfi`;\n      } else {\n        output = file ? `cat: ${file}: No such file or directory` : 'cat: missing file operand';\n      }\n    } else if (cmd === 'date') {\n      output = new Date().toString();\n    } else if (cmd === 'whoami') {\n      output = `user`;\n    } else if (cmd === 'uptime') {\n      const now = new Date();\n      const uptime = Math.floor((Date.now() - (Date.now() - 2 * 24 * 60 * 60 * 1000)) / 1000);\n      output = `${now.toTimeString().split(' ')[0]} up 2 days, 14:23, 1 user, load average: 0.08, 0.03, 0.01`;\n    } else if (cmd === 'ps' || cmd === 'ps aux') {\n      output = `USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nuser      1234  0.1  2.3  45672  8920 ?        S    Dec02   0:03 webos-kernel\nuser      1235  0.5  4.1  78432 15680 ?        S    Dec02   0:12 webos-desktop  \nuser      1236  0.0  0.8  12340  3456 pts/0    R    23:05   0:00 bash\nuser      1237  0.2  3.2  56789 12345 ?        S    23:03   0:01 browser\nuser      1238  0.1  1.5  23456  5678 ?        S    23:04   0:00 package-manager\nuser      1239  0.3  2.1  34567  8901 ?        S    23:06   0:01 office-suite`;\n    } else if (cmd === 'top') {\n      output = `top - ${new Date().toTimeString().split(' ')[0]} up 2 days, 14:23, 1 user, load average: 0.08, 0.03, 0.01\nTasks: 6 total, 1 running, 5 sleeping, 0 stopped, 0 zombie\n%Cpu(s): 2.1 us, 0.9 sy, 0.0 ni, 96.8 id, 0.2 wa, 0.0 hi, 0.0 si, 0.0 st\nMiB Mem: 7892.2 total, 3456.1 free, 2134.5 used, 2301.6 buff/cache\n\nPID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND\n1234 user      20   0   45672   8920   4560 S   0.3   0.1   0:03.12 webos-kernel\n1235 user      20   0   78432  15680   8234 S   0.7   0.2   0:12.45 webos-desktop\n1239 user      20   0   34567   8901   4321 S   0.4   0.1   0:01.23 office-suite`;\n    } else if (cmd === 'install-webos' || cmd === 'install-webos --help') {\n      if (args.includes('--help')) {\n        output = `WebOS Installation Guide\n========================\n\nOVERVIEW:\nWebOS is a modern desktop environment built with web technologies.\nThis installer will set up the complete WebOS ecosystem on your system.\n\nINSTALLATION COMMANDS:\n  install-webos              - Start interactive installation\n  install-webos --quick      - Quick installation with defaults\n  install-webos --custom     - Custom installation with options\n  install-webos --check      - Check system requirements\n  install-webos --remove     - Uninstall WebOS\n\nSYSTEM REQUIREMENTS:\n- RAM: 4GB minimum, 8GB recommended\n- Storage: 20GB free space minimum\n- Network: Internet connection required\n- Graphics: Hardware acceleration supported\n\nINSTALLATION PROCESS:\n1. System compatibility check\n2. Download WebOS components\n3. Configure desktop environment\n4. Install applications and services\n5. User account setup\n6. Final configuration\n\nUse 'install-webos' to begin installation.`;\n      } else if (args.includes('--check')) {\n        output = `System Requirements Check\n========================\n✓ RAM: 8GB available (4GB minimum required)\n✓ Storage: 45GB free space (20GB minimum required)  \n✓ Network: Connected to internet\n✓ Graphics: Hardware acceleration available\n✓ CPU: x86_64 architecture supported\n\nSystem Status: READY FOR INSTALLATION\nRun 'install-webos' to proceed with installation.`;\n      } else if (args.includes('--remove')) {\n        output = `WebOS Removal Process\n====================\nWARNING: This will remove all WebOS components and user data.\n\nSteps:\n1. Stop all WebOS services\n2. Remove desktop environment\n3. Clean application data\n4. Remove system files\n5. Restore original configuration\n\nType 'install-webos --remove --confirm' to proceed.\nThis action cannot be undone.`;\n      } else if (args.includes('--quick')) {\n        output = `Starting WebOS Quick Installation...\n\n[1/8] Checking system requirements... ✓\n[2/8] Downloading WebOS core (450MB)... ✓\n[3/8] Installing desktop environment... ✓\n[4/8] Setting up applications... ✓\n[5/8] Configuring services... ✓\n[6/8] Creating user profile... ✓\n[7/8] Applying desktop theme... ✓\n[8/8] Starting WebOS desktop... ✓\n\nInstallation completed successfully!\nWebOS v4.0 is now ready.\n\nInstalled Components:\n- WebOS Desktop Environment\n- Application Suite (Browser, Office, Games)\n- Development Tools (IDE, Terminal, Package Manager)\n- Media Center (VideoTube, Image Viewer, Audio Player)\n- System Utilities (Settings, File Manager, Task Manager)\n\nRestart required to complete installation.\nType 'reboot' or restart the system manually.`;\n      } else {\n        output = `WebOS Interactive Installation\n============================\n\nWelcome to WebOS v4.0 Installation!\n\nThis installer will guide you through setting up WebOS desktop environment.\nThe installation includes:\n- Modern desktop interface with dynamic theming\n- Comprehensive application suite\n- Development environment with IDE and tools  \n- Media and entertainment platform\n- System management utilities\n\nChoose installation type:\n1. Quick Install (recommended settings)\n2. Custom Install (advanced options)\n3. Check Requirements\n4. Exit\n\nEnter choice [1-4]: 1\n\nStarting installation...\nWould you like to continue? (y/n)`;\n      }\n    } else if (cmd === 'install-arch') {\n      output = `Arch Linux Base System Installation\n===================================\n\nThis will install a minimal Arch Linux system.\n\nSteps:\n1. Partition disk\n2. Format filesystems  \n3. Mount partitions\n4. Install base packages\n5. Configure system\n6. Install bootloader\n\nWARNING: This will erase all data on the target disk.\nUse 'install-arch --help' for detailed instructions.`;\n    } else if (cmd === 'update-system') {\n      output = `System Update Process\n===================\n\nUpdating package database...\nChecking for available updates...\n\nAvailable updates:\n- linux: 6.6.8 → 6.6.9 (kernel update)\n- webos-desktop: 4.0.1 → 4.0.2 (bug fixes)\n- browser: 1.5.2 → 1.5.3 (security update)\n- office-suite: 2.1.0 → 2.1.1 (feature update)\n\nTotal download size: 245MB\nTotal install size: 1.2GB\n\nProceed with update? (y/n)`;\n    } else if (cmd.startsWith('uname')) {\n      if (args.includes('-a')) {\n        output = `Linux webos-desktop 6.6.8-arch1-1 #1 SMP PREEMPT_DYNAMIC Mon, 04 Dec 2023 x86_64 GNU/Linux`;\n      } else {\n        output = `Linux`;\n      }\n    } else if (cmd === 'free' || cmd === 'free -h') {\n      output = `              total        used        free      shared  buff/cache   available\nMem:           7.7G        2.1G        3.4G        234M        2.3G        5.2G\nSwap:          2.0G          0B        2.0G`;\n    } else if (cmd === 'df' || cmd === 'df -h') {\n      output = `Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda1        50G   25G   23G  53% /\n/dev/sda2       200G   45G  145G  24% /home\ntmpfs           3.9G     0  3.9G   0% /dev/shm\ntmpfs           3.9G  1.2M  3.9G   1% /run`;\n    } else if (cmd === 'lscpu') {\n      output = `Architecture:                    x86_64\nCPU op-mode(s):                  32-bit, 64-bit\nByte Order:                      Little Endian\nCPU(s):                          8\nThread(s) per core:              2\nCore(s) per socket:              4\nSocket(s):                       1\nModel name:                      Intel(R) Core(TM) i7-10700K CPU @ 3.80GHz\nCPU family:                      6\nModel:                           165\nStepping:                        5\nCPU MHz:                         3800.000\nBogoMIPS:                        7600.00\nVirtualization:                  VT-x\nL1d cache:                       128 KiB\nL1i cache:                       128 KiB\nL2 cache:                        1 MiB\nL3 cache:                        16 MiB`;\n    } else if (cmd === 'lsblk') {\n      output = `NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\nsda      8:0    0   250G  0 disk \n├─sda1   8:1    0    50G  0 part /\n├─sda2   8:2    0   200G  0 part /home\n└─sda3   8:3    0     2G  0 part [SWAP]\nsr0     11:0    1  1024M  0 rom`;\n    } else if (cmd.startsWith('systemctl ')) {\n      const service = args[2] || 'unknown';\n      const action = args[1] || 'status';\n      if (action === 'status') {\n        output = `● ${service}.service - ${service} service\n     Loaded: loaded (/usr/lib/systemd/system/${service}.service; enabled; vendor preset: enabled)\n     Active: active (running) since Mon 2023-12-04 22:30:15 UTC; 2h 15min ago\n   Main PID: 1234 (${service})\n      Tasks: 3 (limit: 4915)\n     Memory: 45.2M\n        CPU: 1min 23.456s\n     CGroup: /system.slice/${service}.service\n             └─1234 /usr/bin/${service}`;\n      } else {\n        output = `${action}ing ${service} service...`;\n      }\n    } else if (cmd.startsWith('pacman ')) {\n      const operation = args[1];\n      if (operation === '-Syu') {\n        output = `:: Synchronizing package databases...\n core                     130.6 KiB   890 KiB/s 00:00\n extra                   1645.9 KiB  2.15 MiB/s 00:01\n community                  6.9 MiB  3.42 MiB/s 00:02\n:: Starting full system upgrade...\nresolving dependencies...\nlooking for conflicting packages...\n\nPackages (15) glibc-2.38-6  linux-6.6.8.arch1-1  webos-desktop-4.0.2-1\n\nTotal Download Size:   245.67 MiB\nTotal Installed Size: 1205.43 MiB\n\n:: Proceed with installation? [Y/n]`;\n      } else if (operation === '-S') {\n        const package_name = args[2] || 'package';\n        output = `resolving dependencies...\nlooking for conflicting packages...\n\nPackages (1) ${package_name}-1.0.0-1\n\nTotal Download Size:   5.67 MiB\nTotal Installed Size: 23.45 MiB\n\n:: Proceed with installation? [Y/n]`;\n      } else if (operation === '-Q') {\n        output = `linux 6.6.8.arch1-1\nwebos-desktop 4.0.1-1\nbrowser 1.5.2-1\noffice-suite 2.1.0-1\npackage-manager 1.2.1-1\nterminal 1.8.0-1\ncalculator 1.0.5-1\nsettings 2.3.1-1`;\n      } else {\n        output = `usage:  pacman <operation> [...]\noperations:\n    pacman -S <pkg>      install package\n    pacman -R <pkg>      remove package  \n    pacman -Syu          upgrade system\n    pacman -Q            list installed packages\n    pacman -Ss <query>   search packages`;\n      }\n    } else if (cmd.startsWith('git ')) {\n      const gitCmd = args[1];\n      if (gitCmd === 'status') {\n        output = `On branch main\nYour branch is up to date with 'origin/main'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes)\n\n        modified:   README.md\n        modified:   src/terminal.tsx\n\nno changes added to commit (use \"git add\" or \"git commit -a\")`;\n      } else if (gitCmd === 'log') {\n        output = `commit a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0 (HEAD -> main)\nAuthor: WebOS Developer <dev@webos.org>\nDate:   Mon Dec 4 23:15:32 2023 +0000\n\n    Enhanced terminal with comprehensive command support\n\ncommit b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1\nAuthor: WebOS Developer <dev@webos.org>\nDate:   Sun Dec 3 18:45:12 2023 +0000\n\n    Added WebOS installation system`;\n      } else {\n        output = `git version 2.42.0\nusage: git [--version] [--help] [-C <path>] [-c <name>=<value>]\n           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]\n           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]\n           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]\n           <command> [<args>]`;\n      }\n    } else if (cmd.startsWith('npm ')) {\n      const npmCmd = args[1];\n      if (npmCmd === 'install') {\n        const package_name = args[2] || 'package';\n        output = `npm notice Beginning October 4, 2021, all connections to the npm registry\nnpm notice must use TLS 1.2 or higher.\nnpm WARN deprecated ${package_name}@1.0.0: This package is deprecated\n\nadded 1 package, and audited 245 packages in 2s\n\n24 packages are looking for funding\n  run \\`npm fund\\` for details\n\nfound 0 vulnerabilities`;\n      } else if (npmCmd === 'list') {\n        output = `webos-desktop@4.0.1 /opt/webos\n├── react@18.2.0\n├── typescript@5.2.2\n├── vite@4.5.0\n├── tailwindcss@3.3.5\n└── lucide-react@0.294.0`;\n      } else {\n        output = `npm@10.2.3 /usr/bin/npm\n\nUsage: npm <command>\n\nMost commonly used commands:\n  install     Install packages\n  list        List installed packages\n  run         Run scripts\n  start       Start application\n  test        Run tests\n  update      Update packages`;\n      }\n    } else if (cmd.startsWith('docker ')) {\n      const dockerCmd = args[1];\n      if (dockerCmd === 'ps') {\n        output = `CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES\na1b2c3d4e5f6   webos:latest   \"/bin/bash\"              2 hours ago     Up 2 hours               webos-dev\nb2c3d4e5f6g7   nginx:alpine   \"/docker-entrypoint.…\"   3 hours ago     Up 3 hours     80/tcp    webserver`;\n      } else if (dockerCmd === 'images') {\n        output = `REPOSITORY   TAG       IMAGE ID       CREATED         SIZE\nwebos        latest    a1b2c3d4e5f6   2 hours ago     1.2GB\nnginx        alpine    b2c3d4e5f6g7   3 days ago      23.5MB\nubuntu       22.04     c3d4e5f6g7h8   1 week ago      77.8MB`;\n      } else {\n        output = `Docker version 24.0.7, build afdd53b\n\nUsage:  docker [OPTIONS] COMMAND\n\nManagement Commands:\n  container   Manage containers\n  image       Manage images\n  network     Manage networks\n  volume      Manage volumes\n\nCommands:\n  build       Build an image from a Dockerfile\n  pull        Pull an image from a registry\n  push        Push an image to a registry\n  run         Run a command in a new container`;\n      }\n    } else if (cmd.startsWith('ping ')) {\n      const host = args[1] || 'google.com';\n      output = `PING ${host} (172.217.14.110) 56(84) bytes of data.\n64 bytes from ${host}: icmp_seq=1 ttl=117 time=12.4 ms\n64 bytes from ${host}: icmp_seq=2 ttl=117 time=11.8 ms  \n64 bytes from ${host}: icmp_seq=3 ttl=117 time=12.1 ms\n^C\n--- ${host} ping statistics ---\n3 packets transmitted, 3 received, 0% packet loss, time 2003ms\nrtt min/avg/max/mdev = 11.832/12.100/12.419/0.241 ms`;\n    } else if (cmd.startsWith('curl ') || cmd.startsWith('wget ')) {\n      const url = args[1] || 'example.com';\n      output = `--${new Date().toISOString()}-- https://${url}/\nResolving ${url}... 93.184.216.34\nConnecting to ${url}|93.184.216.34|:443... connected.\nHTTP request sent, awaiting response... 200 OK\nLength: 1256 [text/html]\nSaving to: 'index.html'\nindex.html 100%[===================>] 1.23K --.-KB/s in 0s\n${new Date().toISOString()} (1.23 KB/s) - 'index.html' saved [1256/1256]`;\n    } else if (cmd.startsWith('ssh ')) {\n      const host = args[1] || 'server.com';\n      output = `ssh: connect to host ${host} port 22: Connection refused\nssh: Could not resolve hostname ${host}: Name or service not known`;\n    } else if (cmd.startsWith('git ')) {\n      const gitCmd = args[1] || 'status';\n      if (gitCmd === 'status') {\n        output = `On branch main\nYour branch is up to date with 'origin/main'.\n\nChanges not staged for commit:\n  (use \"git add <file>...\" to update what will be committed)\n  (use \"git checkout -- <file>...\" to discard changes in working directory)\n\n        modified:   webos-config.json\n\nno changes added to commit (use \"git add\" and \"git commit\")`;\n      } else if (gitCmd === 'log') {\n        output = `commit a1b2c3d4e5f6789012345678901234567890abcd (HEAD -> main, origin/main)\nAuthor: WebOS Developer <dev@webos.local>  \nDate: Mon Dec 2 23:05:00 2024 +0000\n\n    feat: Enhanced terminal with advanced command support\n    \n    - Added comprehensive command library\n    - Improved system monitoring capabilities\n    - Enhanced file operations\n\ncommit b2c3d4e5f6789012345678901234567890abcde1\nAuthor: WebOS Developer <dev@webos.local>\nDate: Sun Dec 1 18:30:00 2024 +0000\n\n    Initial WebOS installation and setup`;\n      } else if (gitCmd === 'branch') {\n        output = `* main\n  development\n  feature/office-suite`;\n      } else {\n        output = `git: '${gitCmd}' is not a git command. See 'git --help'.`;\n      }\n    } else if (cmd.startsWith('npm ')) {\n      const npmCmd = args[1] || 'help';\n      if (npmCmd === 'version') {\n        output = `{\n  npm: '10.2.3',\n  node: '20.9.0',\n  acorn: '8.10.0',\n  ada: '2.6.0',\n  ares: '1.19.1',\n  base64: '0.5.0',\n  brotli: '1.0.9',\n  cares: '1.19.1',\n  cldr: '43.1',\n  icu: '73.2',\n  llhttp: '8.1.1',\n  modules: '115',\n  napi: '9',\n  nghttp2: '1.57.0',\n  nghttp3: '0.7.0',\n  ngtcp2: '0.8.1',\n  openssl: '3.0.10',\n  simdutf: '3.2.18',\n  tz: '2023c',\n  undici: '5.26.3',\n  unicode: '15.0',\n  uv: '1.46.0',\n  uvwasi: '0.0.19',\n  v8: '11.3.244.8-node.16',\n  zlib: '1.2.13'\n}`;\n      } else if (npmCmd === 'list') {\n        output = `webos-project@3.0.0 /home/user\n├── @types/react@18.2.0\n├── @types/node@20.9.0\n├── react@18.2.0\n├── typescript@5.2.2  \n├── vite@4.5.0\n├── tailwindcss@3.3.0\n└── lucide-react@0.292.0`;\n      } else if (npmCmd === 'start') {\n        output = `> webos-project@3.0.0 start\n> vite\n\n  VITE v4.5.0  ready in 423 ms\n\n  ➜  Local:   http://localhost:5173/\n  ➜  Network: use --host to expose\n  ➜  press h to show help`;\n      } else {\n        output = `npm ${npmCmd}\nUsage: npm <command>\n\nnpm install        install all the dependencies in the local node_modules folder\nnpm install <pkg>  install package\nnpm list           list installed packages\nnpm start          start the application\nnpm run <script>   run arbitrary package scripts\nnpm version        show version info`;\n      }\n    } else if (cmd.startsWith('node ')) {\n      const file = args[1] || 'app.js';\n      if (file.endsWith('.js')) {\n        output = `Hello World from ${file}!\nWebOS Node.js Runtime v20.9.0\nApplication executed successfully.`;\n      } else {\n        output = `node: can't open file '${file}': No such file or directory`;\n      }\n    } else if (cmd.startsWith('python ') || cmd.startsWith('python3 ')) {\n      const file = args[1] || 'app.py';\n      if (file.endsWith('.py')) {\n        output = `Python 3.11.5 (main, Aug 24 2023, 15:18:16) [GCC 13.2.1 20230801] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n>>> Hello from ${file}!\n>>> WebOS Python Runtime initialized\n>>> Execution completed successfully`;\n      } else {\n        output = `python: can't open file '${file}': [Errno 2] No such file or directory`;\n      }\n    } else if (cmd.startsWith('echo ')) {\n      output = command.substring(5);\n    } else if (cmd === 'serve-website') {\n      output = `🌐 NeonTech Website Console View\n=====================================\n\n    ███╗   ██╗███████╗ ██████╗ ███╗   ██╗████████╗███████╗ ██████╗██╗  ██╗\n    ████╗  ██║██╔════╝██╔═══██╗████╗  ██║╚══██╔══╝██╔════╝██╔════╝██║  ██║\n    ██╔██╗ ██║█████╗  ██║   ██║██╔██╗ ██║   ██║   █████╗  ██║     ███████║\n    ██║╚██╗██║██╔══╝  ██║   ██║██║╚██╗██║   ██║   ██╔══╝  ██║     ██╔══██║\n    ██║ ╚████║███████╗╚██████╔╝██║ ╚████║   ██║   ███████╗╚██████╗██║  ██║\n    ╚═╝  ╚═══╝╚══════╝ ╚═════╝ ╚═╝  ╚═══╝   ╚═╝   ╚══════╝ ╚═════╝╚═╝  ╚═╝\n\n                    🚀 FUTURE OF DIGITAL INNOVATION 🚀\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n🏠 HOME SECTION\n   Welcome to NeonTech - Where innovation meets design\n   Transforming ideas into digital reality with cutting-edge technology\n\n🔧 FEATURES\n   ⚡ Lightning Fast Performance\n   🔐 Enterprise Security\n   ☁️  Cloud Integration\n   📱 Mobile Responsive\n   🎨 Modern UI/UX Design\n   🚀 Scalable Architecture\n\n📊 STATISTICS\n   ├─ 50,000+ Users Worldwide\n   ├─ 99.9% Uptime Guarantee\n   ├─ 24/7 Support Available\n   └─ 1000+ Projects Completed\n\n👥 ABOUT US\n   Leading digital innovation company specializing in:\n   • Web Development & Design\n   • Mobile App Development\n   • Cloud Solutions\n   • AI & Machine Learning\n   • DevOps & Infrastructure\n\n📞 CONTACT INFORMATION\n   📧 Email: contact@neontech.com\n   📱 Phone: +1 (555) 123-4567\n   🌐 Website: https://neontech.com\n   📍 Address: 123 Innovation Drive, Tech City\n\n🔗 SOCIAL MEDIA\n   📘 Facebook: /neontech\n   🐦 Twitter: @neontech\n   💼 LinkedIn: /company/neontech\n   📷 Instagram: @neontech_official\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n💻 Website served successfully in console mode\n🎯 All content displayed above with interactive ASCII design\n✨ Full website experience delivered through terminal interface`;\n    } else if (cmd === 'history') {\n      output = commandHistory.map((cmd, i) => `${String(i + 1).padStart(4)} ${cmd}`).join('\\n');\n    } else if (cmd.startsWith('killall ')) {\n      const process = args[1];\n      output = process ? `killall: ${process}: no process found` : 'killall: no process specified';\n    } else if (cmd === 'pacman') {\n      // Launch Pac-Man game\n      output = `Starting Pac-Man...\n\n    ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄\n    █  PAC-MAN Classic Arcade Game v1.0  █\n    ▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀\n\n🟡 Launching graphical Pac-Man interface...\n🎮 Use arrow keys or WASD to move\n🟠 Eat power pellets to turn ghosts blue\n👻 Avoid ghosts or eat them when vulnerable\n\nOpening Pac-Man window...`;\n      \n      // Launch the Pac-Man app\n      setTimeout(() => {\n        // Trigger window manager to open Pac-Man\n        const event = new CustomEvent('openApp', { detail: { appId: 'pacman' } });\n        window.dispatchEvent(event);\n      }, 1000);\n    } else if (cmd === 'emulator') {\n      // Launch Educational Gaming Emulator\n      output = `Starting Educational Gaming Emulator...\n\n    ███████╗██████╗ ██╗   ██╗     ██████╗  █████╗ ███╗   ███╗███████╗███████╗\n    ██╔════╝██╔══██╗██║   ██║    ██╔════╝ ██╔══██╗████╗ ████║██╔════╝██╔════╝\n    █████╗  ██║  ██║██║   ██║    ██║  ███╗███████║██╔████╔██║█████╗  ███████╗\n    ██╔══╝  ██║  ██║██║   ██║    ██║   ██║██╔══██║██║╚██╔╝██║██╔══╝  ╚════██║\n    ███████╗██████╔╝╚██████╔╝    ╚██████╔╝██║  ██║██║ ╚═╝ ██║███████╗███████║\n    ╚══════╝╚═════╝  ╚═════╝      ╚═════╝ ╚═╝  ╚═╝╚═╝     ╚═╝╚══════╝╚══════╝\n\n📚 Learn programming through classic games\n🎮 Available: Snake, Pong, Breakout, Tetris, Maze Solver\n🧠 Educational features: Algorithm visualization, code examples\n⚡ Interactive tutorials and programming concepts\n\nLaunching emulator interface...`;\n      \n      // Launch the Educational Emulator\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'retro-emulator' } });\n        window.dispatchEvent(event);\n      }, 1000);\n    } else if (cmd === 'code') {\n      // Launch WebOS IDE\n      output = `Starting WebOS IDE...\n\n    ██╗    ██╗███████╗██████╗  ██████╗ ███████╗    ██╗██████╗ ███████╗\n    ██║    ██║██╔════╝██╔══██╗██╔═══██╗██╔════╝    ██║██╔══██╗██╔════╝\n    ██║ █╗ ██║█████╗  ██████╔╝██║   ██║███████╗    ██║██║  ██║█████╗  \n    ██║███╗██║██╔══╝  ██╔══██╗██║   ██║╚════██║    ██║██║  ██║██╔══╝  \n    ╚███╔███╔╝███████╗██████╔╝╚██████╔╝███████║    ██║██████╔╝███████╗\n     ╚══╝╚══╝ ╚══════╝╚═════╝  ╚═════╝ ╚══════╝    ╚═╝╚═════╝ ╚══════╝\n\n💻 Professional development environment\n📝 Multi-language support: JavaScript, TypeScript, Python, CSS, HTML\n🔧 Integrated terminal and debugging tools\n📁 Project management and file explorer\n🎯 Version control with Git integration\n\nLoading IDE interface...`;\n      \n      // Launch the IDE\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'ide' } });\n        window.dispatchEvent(event);\n      }, 1000);\n    } else if (cmd === 'vmmanager') {\n      // Launch Virtual Machine Manager\n      output = `Starting Virtual Machine Manager...\n\n    ██╗   ██╗██╗██████╗ ████████╗██╗   ██╗ █████╗ ██╗         ██╗   ██╗███╗   ███╗\n    ██║   ██║██║██╔══██╗╚══██╔══╝██║   ██║██╔══██╗██║         ██║   ██║████╗ ████║\n    ██║   ██║██║██████╔╝   ██║   ██║   ██║███████║██║         ██║   ██║██╔████╔██║\n    ╚██╗ ██╔╝██║██╔══██╗   ██║   ██║   ██║██╔══██║██║         ╚██╗ ██╔╝██║╚██╔╝██║\n     ╚████╔╝ ██║██║  ██║   ██║   ╚██████╔╝██║  ██║███████╗     ╚████╔╝ ██║ ╚═╝ ██║\n      ╚═══╝  ╚═╝╚═╝  ╚═╝   ╚═╝    ╚═════╝ ╚═╝  ╚═╝╚══════╝      ╚═══╝  ╚═╝     ╚═╝\n\n🖥️ Advanced virtualization platform\n🐧 Run Ubuntu, Windows, macOS, Alpine Linux\n⚡ Hardware acceleration support\n🔧 Complete VM lifecycle management\n📊 Real-time performance monitoring\n🌐 Virtual networking capabilities\n\nInitializing hypervisor...`;\n      \n      // Launch the Virtual Machine Manager\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'virtual-machine' } });\n        window.dispatchEvent(event);\n      }, 1000);\n    } else if (cmd === 'downloads' || cmd === 'download') {\n      // Launch Download Manager\n      output = `Starting Download Manager...\n\n    ██████╗  ██████╗ ██╗    ██╗███╗   ██╗██╗      ██████╗  █████╗ ██████╗ \n    ██╔══██╗██╔═══██╗██║    ██║████╗  ██║██║     ██╔═══██╗██╔══██╗██╔══██╗\n    ██║  ██║██║   ██║██║ █╗ ██║██╔██╗ ██║██║     ██║   ██║███████║██║  ██║\n    ██║  ██║██║   ██║██║███╗██║██║╚██╗██║██║     ██║   ██║██╔══██║██║  ██║\n    ██████╔╝╚██████╔╝╚███╔███╔╝██║ ╚████║███████╗╚██████╔╝██║  ██║██████╔╝\n    ╚═════╝  ╚═════╝  ╚══╝╚══╝ ╚═╝  ╚═══╝╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚═════╝ \n\n📥 Multi-threaded download manager\n⏸️ Pause/resume downloads\n📋 Queue management\n📊 Real-time progress monitoring\n🗂️ Automatic file type detection\n🚀 Optimized transfer speeds\n\nLoading download interface...`;\n      \n      // Launch the Download Manager\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'download-manager' } });\n        window.dispatchEvent(event);\n      }, 1000);\n    } else if (cmd === 'installwebos') {\n      output = `WebOS Installation Wizard\n═══════════════════════════════════════════════════════\n\n██╗    ██╗███████╗██████╗  ██████╗ ███████╗\n██║    ██║██╔════╝██╔══██╗██╔═══██╗██╔════╝\n██║ █╗ ██║█████╗  ██████╔╝██║   ██║███████╗\n██║███╗██║██╔══╝  ██╔══██╗██║   ██║╚════██║\n╚███╔███╔╝███████╗██████╔╝╚██████╔╝███████║\n ╚══╝╚══╝ ╚══════╝╚═════╝  ╚═════╝ ╚══════╝\n\nInstallation Status: ✅ COMPLETE\nVersion: 3.0.0 Professional Edition\n\n✅ Kernel modules loaded\n✅ Desktop environment initialized  \n✅ Package manager configured\n✅ Office suite installed\n✅ Browser engine enabled\n✅ Terminal enhanced\n\nWelcome to WebOS! Your system is ready.\nType 'help' for available commands.`;\n    } else if (cmd === 'exit') {\n      output = 'Terminal session ended. Use Ctrl+Alt+T to open a new terminal.';\n    } else if (cmd === 'free' || cmd === 'free -h') {\n      output = `               total        used        free      shared  buff/cache   available\nMem:           7.7Gi       2.1Gi       3.4Gi       301Mi       2.3Gi       5.1Gi\nSwap:          2.0Gi          0B       2.0Gi`;\n    } else if (cmd === 'df' || cmd === 'df -h') {\n      output = `Filesystem      Size  Used Avail Use% Mounted on\n/dev/sda1       512G   89G  423G  18% /\n/dev/sdb1       2.0T  650G  1.4T  32% /home\n/dev/sdc1       4.0T  1.2T  2.8T  30% /media/storage\n/dev/sdd1        64G   23G   41G  36% /media/usb\ntmpfs           7.7G     0  7.7G   0% /dev/shm\ntmpfs           7.7G  8.0K  7.7G   1% /tmp\n\nTotal Storage: 6.6TB (1.96TB used, 4.64TB available)`;\n    } else {\n      output = `bash: ${command}: command not found\n\nDid you mean:\n${getSuggestion(command)}\n\nType 'help' for available commands.`;\n    }\n\n    const outputLine: TerminalLine = {\n      type: cmd === 'exit' ? 'error' : 'output',\n      content: output,\n      timestamp: new Date()\n    };\n\n    setLines(prev => [...prev, outputLine]);\n    \n    // Add to command history\n    if (command.trim()) {\n      setCommandHistory(prev => [...prev, command.trim()]);\n    }\n  };\n\n  const getSuggestion = (command: string): string => {\n    const commands = ['help', 'clear', 'ls', 'pwd', 'cd', 'mkdir', 'touch', 'cat', 'date', 'whoami', 'uptime', 'ps', 'top', 'ping', 'curl', 'wget', 'ssh', 'git', 'npm', 'node', 'python', 'echo', 'history', 'killall', 'exit', 'installwebos', 'free', 'df'];\n    const similar = commands.find(cmd => \n      cmd.toLowerCase().includes(command.toLowerCase().substring(0, 2)) || \n      command.toLowerCase().includes(cmd.toLowerCase().substring(0, 2))\n    );\n    return similar || 'help';\n  };\n\n  const commands = {\n    help: () => [\n      'WebOS Terminal - Command Reference',\n      '═══════════════════════════════════════════════════════════',\n      '',\n      'SYSTEM INFORMATION:',\n      '  help        - Show this help message',\n      '  clear       - Clear the terminal screen',\n      '  whoami      - Display current user',\n      '  uname       - System kernel information', \n      '  neofetch    - Detailed system info with ASCII art',\n      '  uptime      - System uptime and load',\n      '  date        - Display current date and time',\n      '  history     - Show command history',\n      '',\n      'FILE SYSTEM:',\n      '  ls          - List directory contents',\n      '  pwd         - Print working directory',\n      '  cd          - Change directory',\n      '  mkdir       - Create directories',\n      '  touch       - Create files',\n      '  cat         - Display file contents',\n      '  tree        - Display directory tree',\n      '',\n      'SYSTEM MONITORING:',\n      '  ps          - Show running processes',\n      '  top         - Real-time process monitor',\n      '  free        - Display memory usage',\n      '  df          - Display filesystem usage',\n      '  lscpu       - CPU information',\n      '  lsblk       - List block devices',\n      '',\n      'NETWORK:',\n      '  ping        - Test network connectivity',\n      '  curl        - Transfer data from servers',\n      '  wget        - Download files from web',\n      '  netstat     - Display network connections',\n      '  ifconfig    - Configure network interface',\n      '  ip          - Show/manipulate routing',\n      '',\n      'PACKAGE MANAGEMENT:',\n      '  pacman      - Arch Linux package manager',\n      '  yay         - AUR helper',\n      '  flatpak     - Flatpak package manager',\n      '',\n      'DEVELOPMENT:',\n      '  git         - Version control system',\n      '  node        - JavaScript runtime',\n      '  npm         - Node package manager',\n      '  python      - Python interpreter',\n      '  code        - Launch IDE',\n      '  vim         - Text editor',\n      '  nano        - Simple text editor',\n      '',\n      'SYSTEM CONTROL:',\n      '  systemctl   - System service control',\n      '  journalctl  - View system logs',\n      '  mount       - Mount filesystems',\n      '  umount      - Unmount filesystems',\n      '  killall     - Kill processes by name',\n      '',\n      'APPLICATIONS:',\n      '  browser     - Launch web browser',\n      '  downloads   - Launch download manager',\n      '  emulator    - Launch retro emulator',\n      '  vmmanager   - Launch virtual machine manager',\n      '  roblox      - Launch Roblox platform',\n      '',\n      'SYSTEM MANAGEMENT:',\n      '  installwebos - WebOS installation wizard',\n      '  reboot      - Restart the system',\n      '  shutdown    - Power off the system',\n      '  exit        - Close terminal session',\n      '',\n      'HIDDEN COMMANDS:',\n      '  matrix      - Enter the Matrix',\n      '  hack        - Hacker simulator',\n      '  cowsay      - ASCII cow messages',\n      '  fortune     - Random fortune cookies',\n      '  cmatrix     - Matrix rain effect',\n      '',\n      'Type any command for detailed help or usage examples.'\n    ],\n    clear: () => {\n      setLines([]);\n      return [];\n    },\n    ls: () => [\n      'total 8',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Desktop',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Documents',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Downloads',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Music',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Pictures',\n      'drwxr-xr-x 2 user user 4096 Dec  2 14:24 Videos'\n    ],\n    pwd: () => ['/home/user'],\n    whoami: () => ['user'],\n    uname: () => ['Linux desktop 6.6.8-arch1-1 #1 SMP PREEMPT_DYNAMIC x86_64 GNU/Linux'],\n    neofetch: () => [\n      '                   -`                    user@desktop',\n      '                  .o+`                   -------------',\n      '                 `ooo/                   OS: Arch Linux x86_64',\n      '                `+oooo:                  Host: Virtual Machine',\n      '               `+oooooo:                 Kernel: 6.6.8-arch1-1',\n      '               -+oooooo+:                Uptime: 2 hours, 24 mins',\n      '             `/:-:++oooo+:               Packages: 1247 (pacman)',\n      '            `/++++/+++++++:              Shell: bash 5.2.15',\n      '           `/++++++++++++++:             Resolution: 1920x1080',\n      '          `/+++ooooooooo++++/            DE: Custom Desktop',\n      '         ./ooosssso++osssssso+`          WM: Custom Window Manager',\n      '        .oossssso-````/ossssss+`         Theme: Arch [GTK3]',\n      '       -osssssso.      :ssssssso.        Icons: Arch [GTK3]',\n      '      :osssssss/        osssso+++.       Terminal: web-terminal',\n      '     /ossssssss/        +ssssooo/-       CPU: Virtual CPU',\n      '   `/ossssso+/:-        -:/+osssso+-     Memory: 8192MB',\n      '  `+sso+:-`                 `.-/+oso:    ',\n      ' `++:.                           `-/+/   ',\n      ' .`                                 `/   '\n    ],\n    pacman: (args: string[]) => {\n      if (args.length === 0) {\n        return ['usage: pacman <operation> [...]'];\n      }\n      if (args[0] === '-Syu') {\n        return [\n          ':: Synchronizing package databases...',\n          ' core is up to date',\n          ' extra is up to date',\n          ' community is up to date',\n          ':: Starting full system upgrade...',\n          'there is nothing to do'\n        ];\n      }\n      if (args[0] === '-Q') {\n        return ['Package database contains 1247 packages'];\n      }\n      return ['Invalid pacman operation. Try \"pacman -Syu\" or \"pacman -Q\"'];\n    },\n    systemctl: (args: string[]) => {\n      if (args.length === 0) {\n        return ['Usage: systemctl [OPTIONS...] COMMAND [UNIT...]'];\n      }\n      if (args[0] === 'status') {\n        return [\n          '● desktop - Web Desktop Environment',\n          '   Loaded: loaded (/etc/systemd/system/desktop.service; enabled)',\n          '   Active: active (running) since ' + new Date().toLocaleString(),\n          '     Main PID: 1234 (desktop)',\n          '      Tasks: 12 (limit: 4915)',\n          '     Memory: 256.8M',\n          '        CPU: 5.432s'\n        ];\n      }\n      return ['Unit not found or invalid command'];\n    },\n    ps: () => [\n      '  PID TTY          TIME CMD',\n      ' 1234 tty1     00:00:05 desktop',\n      ' 1235 tty1     00:00:01 file-manager',\n      ' 1236 tty1     00:00:00 terminal',\n      ' 1237 tty1     00:00:00 bash'\n    ],\n    free: () => [\n      '               total        used        free      shared  buff/cache   available',\n      'Mem:         8388608     2097152     4194304           0     2097152     6291456',\n      'Swap:        2097152           0     2097152'\n    ],\n    df: () => [\n      'Filesystem     1K-blocks    Used Available Use% Mounted on',\n      '/dev/vda1       20971520 8388608  12582912  41% /',\n      'tmpfs            4194304       0   4194304   0% /dev/shm',\n      'tmpfs            4194304    1024   4193280   1% /run'\n    ],\n    'reset-install': () => {\n      localStorage.removeItem('archInstalled');\n      location.reload();\n      return ['Resetting installation... Please wait for reboot.'];\n    },\n    // Hidden discovery commands\n    'find': (args: string[]) => {\n      if (args.length === 0) {\n        return ['find: missing operand', 'Try \"find /system\" or \"find /boot\"'];\n      }\n      if (args[0] === '/system' || args[0] === '/boot') {\n        return [\n          '/system/bin/bash',\n          '/system/bin/install',\n          '/system/boot/kernel.img',\n          '/system/boot/webos-installer',\n          '/system/sbin/installwebOS',\n          '/system/lib/libwebos.so'\n        ];\n      }\n      if (args[0] === '/usr') {\n        return [\n          '/usr/bin/webos-setup',\n          '/usr/sbin/system-installer',\n          '/usr/share/webos/installer.sh'\n        ];\n      }\n      return ['find: no matches found'];\n    },\n    'locate': (args: string[]) => {\n      if (args.length === 0) {\n        return ['locate: missing search term'];\n      }\n      if (args[0].includes('install') || args[0].includes('webos')) {\n        return [\n          '/system/sbin/installwebOS',\n          '/usr/bin/webos-setup',\n          '/boot/webos-installer'\n        ];\n      }\n      return ['locate: no matches found'];\n    },\n    'which': (args: string[]) => {\n      if (args.length === 0) {\n        return ['which: missing command name'];\n      }\n      if (args[0] === 'installwebOS') {\n        return ['/system/sbin/installwebOS'];\n      }\n      const commonCommands: Record<string, string> = {\n        'bash': '/bin/bash',\n        'ls': '/bin/ls',\n        'cat': '/bin/cat',\n        'grep': '/bin/grep',\n        'find': '/usr/bin/find',\n        'locate': '/usr/bin/locate'\n      };\n      return [commonCommands[args[0]] || `which: no ${args[0]} in PATH`];\n    },\n    'cat': (args: string[]) => {\n      if (args.length === 0) {\n        return ['cat: missing file operand'];\n      }\n      if (args[0] === '/etc/motd' || args[0] === '/etc/issue') {\n        return [\n          'Welcome to the WebOS Installation Environment',\n          '',\n          'This is a minimal boot environment for system installation.',\n          'To install WebOS, run the system installer located in /system/sbin/',\n          '',\n          'For help, try running diagnostic commands or explore the filesystem.'\n        ];\n      }\n      if (args[0] === '/proc/cmdline') {\n        return ['root=/dev/ram0 init=/sbin/init console=tty0 installmode=1'];\n      }\n      if (args[0] === '/boot/grub/menu.lst') {\n        return [\n          'title WebOS Installation',\n          'root (hd0,0)',\n          'kernel /boot/vmlinuz-webos',\n          'initrd /boot/initrd-webos.img'\n        ];\n      }\n      return [`cat: ${args[0]}: No such file or directory`];\n    },\n    'lsblk': () => [\n      'NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT',\n      'sda      8:0    0   20G  0 disk',\n      '├─sda1   8:1    0    1G  0 part /boot',\n      '└─sda2   8:2    0   19G  0 part',\n      'sr0     11:0    1    4G  0 rom  /media/cdrom'\n    ],\n    'mount': () => [\n      '/dev/sda1 on /boot type ext4 (rw,relatime)',\n      'tmpfs on /tmp type tmpfs (rw,nosuid,nodev)',\n      'proc on /proc type proc (rw,nosuid,nodev,noexec)',\n      'sysfs on /sys type sysfs (rw,nosuid,nodev,noexec)',\n      '/dev/sr0 on /media/cdrom type iso9660 (ro,relatime)'\n    ],\n    'env': () => [\n      'PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin',\n      'HOME=/root',\n      'TERM=xterm-256color',\n      'SHELL=/bin/bash',\n      'USER=root',\n      'INSTALL_MODE=1',\n      'WEBOS_VERSION=1.0'\n    ],\n    'installWebOS': () => {\n      // Hidden alias for the main installer\n      return ['Loading WebOS installer...', 'Please use the main \"installwebOS\" command.'];\n    },\n    ping: (args: string[]) => {\n      const target = args[0] || 'localhost';\n      return [\n        `PING ${target} (127.0.0.1) 56(84) bytes of data.`,\n        `64 bytes from ${target} (127.0.0.1): icmp_seq=1 ttl=64 time=0.045 ms`,\n        `64 bytes from ${target} (127.0.0.1): icmp_seq=2 ttl=64 time=0.039 ms`,\n        `64 bytes from ${target} (127.0.0.1): icmp_seq=3 ttl=64 time=0.042 ms`,\n        '',\n        `--- ${target} ping statistics ---`,\n        `3 packets transmitted, 3 received, 0% packet loss, time 2043ms`,\n        `rtt min/avg/max/mdev = 0.039/0.042/0.045/0.002 ms`\n      ];\n    },\n    curl: (args: string[]) => {\n      if (args.length === 0) {\n        return ['curl: missing URL'];\n      }\n      const url = args[0];\n      return [\n        `curl: (6) Could not resolve host: ${url}`,\n        'Note: Network access is simulated in this environment'\n      ];\n    },\n    wget: (args: string[]) => {\n      if (args.length === 0) {\n        return ['wget: missing URL'];\n      }\n      const url = args[0];\n      return [\n        `--${new Date().toISOString().slice(0, 19)}--  ${url}`,\n        'Resolving host... failed: Name or service not known.',\n        'Note: Network access is simulated in this environment'\n      ];\n    },\n    netstat: () => [\n      'Active Internet connections (w/o servers)',\n      'Proto Recv-Q Send-Q Local Address           Foreign Address         State',\n      'tcp        0      0 localhost:5000          localhost:54321         ESTABLISHED',\n      'tcp        0      0 localhost:3000          localhost:45678         ESTABLISHED'\n    ],\n    ifconfig: () => [\n      'lo: flags=73<UP,LOOPBACK,RUNNING>  mtu 65536',\n      '        inet 127.0.0.1  netmask 255.0.0.0',\n      '        inet6 ::1  prefixlen 128  scopeid 0x10<host>',\n      '        loop  txqueuelen 1000  (Local Loopback)',\n      '',\n      'eth0: flags=4163<UP,BROADCAST,RUNNING,MULTICAST>  mtu 1500',\n      '        inet 192.168.1.100  netmask 255.255.255.0  broadcast 192.168.1.255',\n      '        ether 02:42:ac:11:00:02  txqueuelen 0  (Ethernet)'\n    ],\n    top: () => [\n      'top - ' + new Date().toLocaleTimeString() + ' up 2:47,  1 user,  load average: 0.08, 0.03, 0.01',\n      'Tasks: 124 total,   1 running, 123 sleeping,   0 stopped,   0 zombie',\n      '%Cpu(s):  0.3 us,  0.7 sy,  0.0 ni, 99.0 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st',\n      'MiB Mem :   8192.0 total,   4096.0 free,   2048.0 used,   2048.0 buff/cache',\n      'MiB Swap:   2048.0 total,   2048.0 free,      0.0 used.   6144.0 avail Mem',\n      '',\n      '  PID USER      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND',\n      ' 1234 html      20   0  123456  12345   1234 S   0.3   0.2   0:05.67 desktop',\n      ' 1235 html      20   0   98765   9876    987 S   0.0   0.1   0:01.23 terminal'\n    ],\n    htop: () => [\n      'htop is not installed. Try: pacman -S htop',\n      'Alternative: use \"top\" command'\n    ],\n    ssh: (args: string[]) => {\n      if (args.length === 0) {\n        return ['usage: ssh [-46AaCfGgKkMNnqsTtVvXxYy] destination [command]'];\n      }\n      return [\n        `ssh: connect to host ${args[0]} port 22: Network is unreachable`,\n        'Note: SSH access is simulated in this environment'\n      ];\n    },\n    git: (args: string[]) => {\n      if (args.length === 0) {\n        return [\n          'usage: git [--version] [-C <path>] [-c <name>=<value>]',\n          '           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]',\n          '           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]',\n          '           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]',\n          '           <command> [<args>]'\n        ];\n      }\n      if (args[0] === 'status') {\n        return [\n          'fatal: not a git repository (or any of the parent directories): .git'\n        ];\n      }\n      if (args[0] === 'clone') {\n        return [\n          'fatal: repository does not exist',\n          'Note: Git operations are simulated in this environment'\n        ];\n      }\n      return [`git: '${args[0]}' is not a git command.`];\n    },\n    node: (args: string[]) => {\n      if (args.length === 0) {\n        return [\n          'Welcome to Node.js v18.17.0.',\n          'Type \".help\" for more information.',\n          '> // Interactive mode not available in terminal'\n        ];\n      }\n      return [`node: can't open file '${args[0]}'`];\n    },\n    npm: (args: string[]) => {\n      if (args.length === 0) {\n        return [\n          'npm <command>',\n          '',\n          'Usage:',\n          'npm install        install all the dependencies in your project',\n          'npm test           run this project\\'s tests',\n          'npm run <command>  run the script named <command>'\n        ];\n      }\n      return [`npm ERR! Unknown command: \"${args[0]}\"`];\n    },\n    python: (args: string[]) => {\n      if (args.length === 0) {\n        return [\n          'Python 3.11.0 (main, Oct 24 2022, 18:26:48) [GCC 12.2.0] on linux',\n          'Type \"help\", \"copyright\", \"credits\" or \"license\" for more information.',\n          '>>> # Interactive mode not available in terminal'\n        ];\n      }\n      return [`python: can't open file '${args[0]}': [Errno 2] No such file or directory`];\n    },\n    // Additional commands\n    uptime: () => [\n      ` ${new Date().toLocaleTimeString()} up 2:47,  1 user,  load average: 0.08, 0.03, 0.01`\n    ],\n    date: () => [new Date().toString()],\n    history: () => commandHistory.slice(-20).map((cmd, i) => `${i + 1}  ${cmd}`),\n    cd: (args: string[]) => {\n      const dir = args[0] || '~';\n      return [`cd: changed directory to ${dir}`];\n    },\n    mkdir: (args: string[]) => {\n      if (args.length === 0) {\n        return ['mkdir: missing operand'];\n      }\n      return [`mkdir: created directory '${args[0]}'`];\n    },\n    touch: (args: string[]) => {\n      if (args.length === 0) {\n        return ['touch: missing file operand'];\n      }\n      return [`touch: created file '${args[0]}'`];\n    },\n    tree: () => [\n      '.',\n      '├── Desktop',\n      '├── Documents',\n      '├── Downloads',\n      '├── Music',\n      '├── Pictures',\n      '├── Videos',\n      '└── .config',\n      '    ├── webos',\n      '    └── applications'\n    ],\n    lscpu: () => [\n      'Architecture:        x86_64',\n      'CPU op-mode(s):      32-bit, 64-bit',\n      'Byte Order:          Little Endian',\n      'Address sizes:       48 bits physical, 48 bits virtual',\n      'CPU(s):              8',\n      'On-line CPU(s) list: 0-7',\n      'Thread(s) per core:  2',\n      'Core(s) per socket:  4',\n      'Socket(s):           1',\n      'NUMA node(s):        1',\n      'Vendor ID:           AuthenticAMD',\n      'CPU family:          23',\n      'Model:               113',\n      'Model name:          AMD Ryzen 7 3700X 8-Core Processor',\n      'Stepping:            0',\n      'CPU MHz:             3593.324',\n      'BogoMIPS:            7186.64',\n      'Hypervisor vendor:   KVM',\n      'Virtualization type: full'\n    ],\n    ip: (args: string[]) => {\n      if (args.length === 0 || args[0] === 'addr') {\n        return [\n          '1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN',\n          '    inet 127.0.0.1/8 scope host lo',\n          '2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc pfifo_fast state UP',\n          '    inet 192.168.1.100/24 brd 192.168.1.255 scope global eth0'\n        ];\n      }\n      return [`ip: command not recognized: ${args[0]}`];\n    },\n    yay: (args: string[]) => {\n      if (args.length === 0) {\n        return ['Yay v11.3.2 - libalpm v13.0.2'];\n      }\n      return ['yay: AUR helper - packages not available in simulation'];\n    },\n    flatpak: (args: string[]) => {\n      if (args.length === 0) {\n        return ['Usage: flatpak [OPTION…] COMMAND'];\n      }\n      if (args[0] === 'list') {\n        return ['No applications installed'];\n      }\n      return ['flatpak: Flatpak not configured in this environment'];\n    },\n    vim: () => [\n      'Vim - Vi IMproved 9.0 (2022 Jun 28)',\n      'Terminal vim interface not available in web environment',\n      'Use the built-in text editor instead'\n    ],\n    nano: () => [\n      'GNU nano, version 6.4',\n      'Terminal nano interface not available in web environment',\n      'Use the built-in text editor instead'\n    ],\n    journalctl: () => [\n      '-- Logs begin at ' + new Date(Date.now() - 86400000).toISOString() + ' --',\n      new Date().toISOString() + ' webos systemd[1]: Started WebOS Desktop Environment.',\n      new Date().toISOString() + ' webos systemd[1]: Started Network Manager.',\n      new Date().toISOString() + ' webos systemd[1]: Reached target Multi-User System.'\n    ],\n    umount: (args: string[]) => {\n      if (args.length === 0) {\n        return ['umount: no filesystem specified'];\n      }\n      return [`umount: ${args[0]} unmounted`];\n    },\n    killall: (args: string[]) => {\n      if (args.length === 0) {\n        return ['killall: no process name specified'];\n      }\n      return [`killall: no process found for ${args[0]}`];\n    },\n    // Application launchers\n    browser: () => {\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'browser' } });\n        window.dispatchEvent(event);\n      }, 1000);\n      return ['Starting web browser...'];\n    },\n    emulator: () => {\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'retro-emulator' } });\n        window.dispatchEvent(event);\n      }, 1000);\n      return ['Starting retro emulator...'];\n    },\n    roblox: () => {\n      setTimeout(() => {\n        const event = new CustomEvent('openApp', { detail: { appId: 'roblox' } });\n        window.dispatchEvent(event);\n      }, 1000);\n      return ['Starting Roblox platform...'];\n    },\n    // System management\n    reboot: () => {\n      return ['System restart initiated... (simulated)'];\n    },\n    shutdown: () => {\n      return ['System shutdown initiated... (simulated)'];\n    },\n    // Hidden/Fun commands\n    matrix: () => [\n      'Wake up, Neo...',\n      'The Matrix has you...',\n      'Follow the white rabbit.',\n      '',\n      '01001000 01100101 01101100 01101100 01101111',\n      '01001110 01100101 01101111'\n    ],\n    hack: () => [\n      'INITIATING HACK SEQUENCE...',\n      '[████████████████████████████████] 100%',\n      '',\n      'ACCESSING MAINFRAME...',\n      'BYPASSING FIREWALL...',\n      'DOWNLOADING DATABASE...',\n      '',\n      'HACK COMPLETE!',\n      'Just kidding :) This is just a terminal simulator.'\n    ],\n    cowsay: (args: string[]) => {\n      const message = args.join(' ') || 'Hello, WebOS!';\n      const border = '_'.repeat(message.length + 2);\n      return [\n        ` ${border}`,\n        `< ${message} >`,\n        ` ${'-'.repeat(message.length + 2)}`,\n        '        \\\\   ^__^',\n        '         \\\\  (oo)\\\\_______',\n        '            (__)\\\\       )\\\\/\\\\',\n        '                ||----w |',\n        '                ||     ||'\n      ];\n    },\n    fortune: () => {\n      const fortunes = [\n        'The best way to predict the future is to invent it.',\n        'Life is what happens while you are making other plans.',\n        'In the middle of difficulty lies opportunity.',\n        'It is during our darkest moments that we must focus to see the light.',\n        'Success is not final, failure is not fatal: it is the courage to continue that counts.',\n        'The only impossible journey is the one you never begin.',\n        'In WebOS, all commands are possible.',\n        'Sometimes the terminal knows more than you think.'\n      ];\n      return [fortunes[Math.floor(Math.random() * fortunes.length)]];\n    },\n    cmatrix: () => [\n      'cmatrix - terminal Matrix effect',\n      'Press Ctrl+C to stop (simulation)',\n      '',\n      '01001001 01001001 01001001 01001001',\n      '11011101 11011101 11011101 11011101',\n      '00110011 00110011 00110011 00110011',\n      '10101010 10101010 10101010 10101010',\n      '',\n      'Matrix effect would be running...'\n    ]\n  };\n\n  const executeCommand = (cmd: string) => {\n    const trimmedCmd = cmd.trim();\n    if (!trimmedCmd) return;\n\n    // Add command to history\n    setCommandHistory(prev => [...prev, trimmedCmd]);\n    setHistoryIndex(-1);\n\n    // Add command line to output\n    const commandLine: TerminalLine = {\n      type: 'command',\n      content: `[${localStorage.getItem('webos-username') || 'html'}@javascriptiso ~]$ ${trimmedCmd}`,\n      timestamp: new Date()\n    };\n\n    const parts = trimmedCmd.split(' ');\n    const command = parts[0];\n    const args = parts.slice(1);\n\n    let output: string[] = [];\n\n    if (commands[command as keyof typeof commands]) {\n      const commandFunc = commands[command as keyof typeof commands];\n      if (typeof commandFunc === 'function') {\n        output = commandFunc(args);\n      }\n    } else {\n      output = [`bash: ${command}: command not found`];\n    }\n\n    const outputLines: TerminalLine[] = output.map(line => ({\n      type: line.startsWith('bash:') ? 'error' : 'output',\n      content: line,\n      timestamp: new Date()\n    }));\n\n    if (command === 'clear') {\n      // Clear command already handled in the function\n      return;\n    }\n\n    setLines(prev => [...prev, commandLine, ...outputLines]);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      executeCommand(currentCommand);\n      setCurrentCommand('');\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        const newIndex = historyIndex + 1;\n        if (newIndex < commandHistory.length) {\n          setHistoryIndex(newIndex);\n          setCurrentCommand(commandHistory[commandHistory.length - 1 - newIndex]);\n        }\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex > 0) {\n        const newIndex = historyIndex - 1;\n        setHistoryIndex(newIndex);\n        setCurrentCommand(commandHistory[commandHistory.length - 1 - newIndex]);\n      } else if (historyIndex === 0) {\n        setHistoryIndex(-1);\n        setCurrentCommand('');\n      }\n    } else if (e.key === 'Tab') {\n      e.preventDefault();\n      // Simple tab completion for commands\n      const availableCommands = Object.keys(commands);\n      const matches = availableCommands.filter(cmd => cmd.startsWith(currentCommand));\n      if (matches.length === 1) {\n        setCurrentCommand(matches[0]);\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [lines]);\n\n  useEffect(() => {\n    if (inputRef.current) {\n      inputRef.current.focus();\n    }\n  }, []);\n\n  return (\n    <div className=\"h-full bg-background text-foreground font-mono text-sm flex flex-col\">\n      <div \n        ref={terminalRef}\n        className=\"flex-1 overflow-auto p-3 space-y-1\"\n        onClick={() => inputRef.current?.focus()}\n      >\n        {lines.map((line, index) => (\n          <div key={index} className={`whitespace-pre-wrap ${\n            line.type === 'command' ? 'text-primary' : \n            line.type === 'error' ? 'text-destructive' : \n            'text-foreground'\n          }`}>\n            {line.content}\n          </div>\n        ))}\n        \n        <div className=\"flex\">\n          <span className=\"text-primary\">\n            [{localStorage.getItem('webos-username') || 'html'}@javascriptiso ~]$ \n          </span>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={currentCommand}\n            onChange={(e) => setCurrentCommand(e.target.value)}\n            onKeyDown={handleKeyDown}\n            className=\"flex-1 bg-transparent border-none outline-none text-foreground ml-1\"\n            autoFocus\n          />\n          <span className=\"animate-pulse\">█</span>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":67052},"client/src/components/apps/Tetris.tsx":{"content":"import { FC, useState, useEffect, useCallback, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Play, Pause, RotateCw, ArrowDown, ArrowLeft, ArrowRight } from 'lucide-react';\n\nconst BOARD_WIDTH = 10;\nconst BOARD_HEIGHT = 20;\nconst PIECE_SIZE = 25;\n\ntype TetrominoType = 'I' | 'O' | 'T' | 'S' | 'Z' | 'J' | 'L';\n\ninterface Position {\n  x: number;\n  y: number;\n}\n\ninterface Tetromino {\n  type: TetrominoType;\n  shape: number[][];\n  color: string;\n}\n\nconst TETROMINOES: Record<TetrominoType, Tetromino> = {\n  I: {\n    type: 'I',\n    shape: [[1, 1, 1, 1]],\n    color: '#00FFFF'\n  },\n  O: {\n    type: 'O',\n    shape: [\n      [1, 1],\n      [1, 1]\n    ],\n    color: '#FFFF00'\n  },\n  T: {\n    type: 'T',\n    shape: [\n      [0, 1, 0],\n      [1, 1, 1]\n    ],\n    color: '#800080'\n  },\n  S: {\n    type: 'S',\n    shape: [\n      [0, 1, 1],\n      [1, 1, 0]\n    ],\n    color: '#00FF00'\n  },\n  Z: {\n    type: 'Z',\n    shape: [\n      [1, 1, 0],\n      [0, 1, 1]\n    ],\n    color: '#FF0000'\n  },\n  J: {\n    type: 'J',\n    shape: [\n      [1, 0, 0],\n      [1, 1, 1]\n    ],\n    color: '#0000FF'\n  },\n  L: {\n    type: 'L',\n    shape: [\n      [0, 0, 1],\n      [1, 1, 1]\n    ],\n    color: '#FFA500'\n  }\n};\n\nexport const Tetris: FC = () => {\n  const [board, setBoard] = useState<string[][]>(() => \n    Array(BOARD_HEIGHT).fill(null).map(() => Array(BOARD_WIDTH).fill(''))\n  );\n  const [currentPiece, setCurrentPiece] = useState<Tetromino | null>(null);\n  const [currentPosition, setCurrentPosition] = useState<Position>({ x: 0, y: 0 });\n  const [nextPiece, setNextPiece] = useState<Tetromino | null>(null);\n  const [score, setScore] = useState(0);\n  const [level, setLevel] = useState(1);\n  const [lines, setLines] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [gameOver, setGameOver] = useState(false);\n  const [dropTime, setDropTime] = useState(1000);\n\n  const gameLoopRef = useRef<NodeJS.Timeout | null>(null);\n\n  const getRandomTetromino = useCallback((): Tetromino => {\n    const types: TetrominoType[] = ['I', 'O', 'T', 'S', 'Z', 'J', 'L'];\n    const randomType = types[Math.floor(Math.random() * types.length)];\n    return TETROMINOES[randomType];\n  }, []);\n\n  const rotatePiece = useCallback((piece: Tetromino): Tetromino => {\n    const rotated = piece.shape[0].map((_, index) =>\n      piece.shape.map(row => row[index]).reverse()\n    );\n    return { ...piece, shape: rotated };\n  }, []);\n\n  const isValidMove = useCallback((piece: Tetromino, position: Position, gameBoard: string[][]): boolean => {\n    for (let y = 0; y < piece.shape.length; y++) {\n      for (let x = 0; x < piece.shape[y].length; x++) {\n        if (piece.shape[y][x]) {\n          const newX = position.x + x;\n          const newY = position.y + y;\n          \n          if (\n            newX < 0 || \n            newX >= BOARD_WIDTH || \n            newY >= BOARD_HEIGHT ||\n            (newY >= 0 && gameBoard[newY][newX])\n          ) {\n            return false;\n          }\n        }\n      }\n    }\n    return true;\n  }, []);\n\n  const placePiece = useCallback((piece: Tetromino, position: Position, gameBoard: string[][]): string[][] => {\n    const newBoard = gameBoard.map(row => [...row]);\n    \n    for (let y = 0; y < piece.shape.length; y++) {\n      for (let x = 0; x < piece.shape[y].length; x++) {\n        if (piece.shape[y][x] && position.y + y >= 0) {\n          newBoard[position.y + y][position.x + x] = piece.color;\n        }\n      }\n    }\n    \n    return newBoard;\n  }, []);\n\n  const clearLines = useCallback((gameBoard: string[][]): { newBoard: string[][]; clearedLines: number } => {\n    const fullLines: number[] = [];\n    \n    for (let y = BOARD_HEIGHT - 1; y >= 0; y--) {\n      if (gameBoard[y].every(cell => cell !== '')) {\n        fullLines.push(y);\n      }\n    }\n    \n    if (fullLines.length === 0) {\n      return { newBoard: gameBoard, clearedLines: 0 };\n    }\n    \n    const newBoard = gameBoard.filter((_, index) => !fullLines.includes(index));\n    const emptyRows = Array(fullLines.length).fill(null).map(() => Array(BOARD_WIDTH).fill(''));\n    \n    return { \n      newBoard: [...emptyRows, ...newBoard], \n      clearedLines: fullLines.length \n    };\n  }, []);\n\n  const spawnPiece = useCallback(() => {\n    const piece = nextPiece || getRandomTetromino();\n    const newNextPiece = getRandomTetromino();\n    const startPosition = { x: Math.floor(BOARD_WIDTH / 2) - Math.floor(piece.shape[0].length / 2), y: 0 };\n    \n    if (!isValidMove(piece, startPosition, board)) {\n      setGameOver(true);\n      setIsPlaying(false);\n      return;\n    }\n    \n    setCurrentPiece(piece);\n    setCurrentPosition(startPosition);\n    setNextPiece(newNextPiece);\n  }, [nextPiece, getRandomTetromino, isValidMove, board]);\n\n  const movePiece = useCallback((direction: 'left' | 'right' | 'down') => {\n    if (!currentPiece || gameOver) return;\n    \n    const newPosition = { ...currentPosition };\n    \n    switch (direction) {\n      case 'left':\n        newPosition.x -= 1;\n        break;\n      case 'right':\n        newPosition.x += 1;\n        break;\n      case 'down':\n        newPosition.y += 1;\n        break;\n    }\n    \n    if (isValidMove(currentPiece, newPosition, board)) {\n      setCurrentPosition(newPosition);\n    } else if (direction === 'down') {\n      // Place the piece and spawn a new one\n      const newBoard = placePiece(currentPiece, currentPosition, board);\n      const { newBoard: clearedBoard, clearedLines } = clearLines(newBoard);\n      \n      setBoard(clearedBoard);\n      setLines(prev => prev + clearedLines);\n      setScore(prev => prev + (clearedLines * 100 * level) + 10);\n      setLevel(Math.floor((lines + clearedLines) / 10) + 1);\n      \n      spawnPiece();\n    }\n  }, [currentPiece, currentPosition, board, gameOver, isValidMove, placePiece, clearLines, level, lines, spawnPiece]);\n\n  const hardDrop = useCallback(() => {\n    if (!currentPiece || gameOver) return;\n    \n    let newPosition = { ...currentPosition };\n    while (isValidMove(currentPiece, { ...newPosition, y: newPosition.y + 1 }, board)) {\n      newPosition.y += 1;\n    }\n    \n    setCurrentPosition(newPosition);\n    movePiece('down');\n  }, [currentPiece, currentPosition, board, gameOver, isValidMove, movePiece]);\n\n  const rotatePieceAction = useCallback(() => {\n    if (!currentPiece || gameOver) return;\n    \n    const rotated = rotatePiece(currentPiece);\n    if (isValidMove(rotated, currentPosition, board)) {\n      setCurrentPiece(rotated);\n    }\n  }, [currentPiece, currentPosition, board, gameOver, rotatePiece, isValidMove]);\n\n  const startGame = useCallback(() => {\n    setBoard(Array(BOARD_HEIGHT).fill(null).map(() => Array(BOARD_WIDTH).fill('')));\n    setScore(0);\n    setLevel(1);\n    setLines(0);\n    setGameOver(false);\n    setIsPlaying(true);\n    setDropTime(1000);\n    \n    const firstPiece = getRandomTetromino();\n    const secondPiece = getRandomTetromino();\n    setCurrentPiece(firstPiece);\n    setNextPiece(secondPiece);\n    setCurrentPosition({ x: Math.floor(BOARD_WIDTH / 2) - Math.floor(firstPiece.shape[0].length / 2), y: 0 });\n  }, [getRandomTetromino]);\n\n  const pauseGame = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  // Game loop\n  useEffect(() => {\n    if (isPlaying && !gameOver) {\n      gameLoopRef.current = setInterval(() => {\n        movePiece('down');\n      }, Math.max(50, dropTime - (level - 1) * 50));\n    } else {\n      if (gameLoopRef.current) {\n        clearInterval(gameLoopRef.current);\n      }\n    }\n    \n    return () => {\n      if (gameLoopRef.current) {\n        clearInterval(gameLoopRef.current);\n      }\n    };\n  }, [isPlaying, gameOver, movePiece, dropTime, level]);\n\n  // Keyboard controls\n  useEffect(() => {\n    const handleKeyPress = (event: KeyboardEvent) => {\n      if (!isPlaying || gameOver) return;\n      \n      switch (event.key) {\n        case 'ArrowLeft':\n          event.preventDefault();\n          movePiece('left');\n          break;\n        case 'ArrowRight':\n          event.preventDefault();\n          movePiece('right');\n          break;\n        case 'ArrowDown':\n          event.preventDefault();\n          movePiece('down');\n          break;\n        case 'ArrowUp':\n          event.preventDefault();\n          rotatePieceAction();\n          break;\n        case ' ':\n          event.preventDefault();\n          hardDrop();\n          break;\n        case 'p':\n        case 'P':\n          pauseGame();\n          break;\n      }\n    };\n    \n    window.addEventListener('keydown', handleKeyPress);\n    return () => window.removeEventListener('keydown', handleKeyPress);\n  }, [isPlaying, gameOver, movePiece, rotatePieceAction, hardDrop]);\n\n  // Initialize game\n  useEffect(() => {\n    if (!currentPiece && !nextPiece) {\n      const firstPiece = getRandomTetromino();\n      const secondPiece = getRandomTetromino();\n      setCurrentPiece(firstPiece);\n      setNextPiece(secondPiece);\n      setCurrentPosition({ x: Math.floor(BOARD_WIDTH / 2) - Math.floor(firstPiece.shape[0].length / 2), y: 0 });\n    }\n  }, [currentPiece, nextPiece, getRandomTetromino]);\n\n  const renderBoard = () => {\n    const displayBoard = board.map(row => [...row]);\n    \n    // Add current piece to display board\n    if (currentPiece) {\n      for (let y = 0; y < currentPiece.shape.length; y++) {\n        for (let x = 0; x < currentPiece.shape[y].length; x++) {\n          if (currentPiece.shape[y][x] && currentPosition.y + y >= 0) {\n            const boardY = currentPosition.y + y;\n            const boardX = currentPosition.x + x;\n            if (boardY < BOARD_HEIGHT && boardX >= 0 && boardX < BOARD_WIDTH) {\n              displayBoard[boardY][boardX] = currentPiece.color;\n            }\n          }\n        }\n      }\n    }\n    \n    return displayBoard.map((row, y) => (\n      <div key={y} className=\"flex\">\n        {row.map((cell, x) => (\n          <div\n            key={`${y}-${x}`}\n            className=\"border border-gray-300\"\n            style={{\n              width: PIECE_SIZE,\n              height: PIECE_SIZE,\n              backgroundColor: cell || '#f8f9fa'\n            }}\n          />\n        ))}\n      </div>\n    ));\n  };\n\n  const renderNextPiece = () => {\n    if (!nextPiece) return null;\n    \n    return nextPiece.shape.map((row, y) => (\n      <div key={y} className=\"flex\">\n        {row.map((cell, x) => (\n          <div\n            key={`${y}-${x}`}\n            className=\"border border-gray-200\"\n            style={{\n              width: 20,\n              height: 20,\n              backgroundColor: cell ? nextPiece.color : 'transparent'\n            }}\n          />\n        ))}\n      </div>\n    ));\n  };\n\n  return (\n    <div className=\"h-full p-6 bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white\">\n      <div className=\"flex gap-6 h-full\">\n        {/* Game Board */}\n        <div className=\"flex flex-col items-center\">\n          <h1 className=\"text-3xl font-bold mb-4 text-center bg-gradient-to-r from-yellow-400 to-orange-500 bg-clip-text text-transparent\">\n            TETRIS\n          </h1>\n          \n          <div className=\"bg-black/30 p-4 rounded-lg border-2 border-cyan-400 shadow-2xl\">\n            <div className=\"border-2 border-white/50 bg-black/50\">\n              {renderBoard()}\n            </div>\n          </div>\n\n          {/* Controls */}\n          <div className=\"mt-4 flex gap-2\">\n            <Button\n              onClick={isPlaying ? pauseGame : startGame}\n              className=\"bg-green-600 hover:bg-green-700\"\n            >\n              {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n              {isPlaying ? 'Pause' : 'Start'}\n            </Button>\n            <Button onClick={() => movePiece('left')} variant=\"outline\" className=\"text-black\">\n              <ArrowLeft className=\"w-4 h-4\" />\n            </Button>\n            <Button onClick={rotatePieceAction} variant=\"outline\" className=\"text-black\">\n              <RotateCw className=\"w-4 h-4\" />\n            </Button>\n            <Button onClick={() => movePiece('right')} variant=\"outline\" className=\"text-black\">\n              <ArrowRight className=\"w-4 h-4\" />\n            </Button>\n            <Button onClick={hardDrop} variant=\"outline\" className=\"text-black\">\n              <ArrowDown className=\"w-4 h-4\" />\n              Drop\n            </Button>\n          </div>\n        </div>\n\n        {/* Sidebar */}\n        <div className=\"flex flex-col gap-4 min-w-[200px]\">\n          {/* Score */}\n          <Card className=\"bg-black/30 border-cyan-400 text-white\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-lg\">Score</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold text-yellow-400\">{score.toLocaleString()}</div>\n              <div className=\"text-sm mt-2\">\n                <div>Level: {level}</div>\n                <div>Lines: {lines}</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Next Piece */}\n          <Card className=\"bg-black/30 border-cyan-400 text-white\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-lg\">Next</CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"flex justify-center\">\n                <div className=\"bg-black/50 p-2 rounded\">\n                  {renderNextPiece()}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {/* Controls Guide */}\n          <Card className=\"bg-black/30 border-cyan-400 text-white\">\n            <CardHeader className=\"pb-2\">\n              <CardTitle className=\"text-lg\">Controls</CardTitle>\n            </CardHeader>\n            <CardContent className=\"text-sm\">\n              <div className=\"space-y-1\">\n                <div>← → Move</div>\n                <div>↑ Rotate</div>\n                <div>↓ Soft Drop</div>\n                <div>Space: Hard Drop</div>\n                <div>P: Pause</div>\n              </div>\n            </CardContent>\n          </Card>\n\n          {gameOver && (\n            <Card className=\"bg-red-900/50 border-red-400 text-white\">\n              <CardContent className=\"text-center p-4\">\n                <h2 className=\"text-xl font-bold mb-2\">Game Over!</h2>\n                <p className=\"mb-4\">Final Score: {score.toLocaleString()}</p>\n                <Button onClick={startGame} className=\"bg-blue-600 hover:bg-blue-700\">\n                  Play Again\n                </Button>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":14645},"client/src/components/apps/TextEditor.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { FileText, Save, FolderOpen } from 'lucide-react';\n\nexport const TextEditor: FC = () => {\n  const [content, setContent] = useState('Welcome to the Text Editor!\\n\\nStart typing to create your document...');\n  const [filename, setFilename] = useState('untitled.txt');\n  const [isModified, setIsModified] = useState(false);\n\n  const handleContentChange = (value: string) => {\n    setContent(value);\n    setIsModified(true);\n  };\n\n  const handleSave = () => {\n    // Simulate saving\n    console.log('Saving file:', filename, content);\n    setIsModified(false);\n    // In a real implementation, this would save to a backend or local storage\n  };\n\n  const handleNew = () => {\n    setContent('');\n    setFilename('untitled.txt');\n    setIsModified(false);\n  };\n\n  const handleOpen = () => {\n    // Simulate opening a file\n    const sampleContent = `Sample Document\n\nThis is a sample document loaded from the file system.\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. \nSed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n\n• Bullet point 1\n• Bullet point 2\n• Bullet point 3\n\nThank you for using the Text Editor!`;\n    \n    setContent(sampleContent);\n    setFilename('sample.txt');\n    setIsModified(false);\n  };\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      {/* Toolbar */}\n      <div className=\"flex items-center justify-between mb-4 p-3 bg-gray-50 rounded-lg border\">\n        <div className=\"flex items-center space-x-2\">\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={handleNew}\n            className=\"px-3 py-1 text-sm\"\n          >\n            <FileText className=\"w-4 h-4 mr-1\" />\n            New\n          </Button>\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={handleOpen}\n            className=\"px-3 py-1 text-sm\"\n          >\n            <FolderOpen className=\"w-4 h-4 mr-1\" />\n            Open\n          </Button>\n          <Button \n            variant=\"outline\" \n            size=\"sm\"\n            onClick={handleSave}\n            className=\"px-3 py-1 text-sm\"\n          >\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n        </div>\n        <div className=\"text-sm text-gray-600\">\n          {filename}{isModified && ' •'}\n        </div>\n      </div>\n\n      {/* Editor */}\n      <div className=\"flex-1 flex flex-col\">\n        <Textarea\n          value={content}\n          onChange={(e) => handleContentChange(e.target.value)}\n          className=\"flex-1 resize-none border border-gray-200 rounded-lg p-3 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-400\"\n          placeholder=\"Start typing...\"\n          style={{ minHeight: '300px' }}\n        />\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"mt-4 p-2 bg-gray-50 rounded-lg text-sm text-gray-600 flex justify-between border-t\">\n        <span>Lines: {content.split('\\n').length}</span>\n        <span>Characters: {content.length}</span>\n      </div>\n    </div>\n  );\n};\n","size_bytes":3180},"client/src/components/apps/VMManager.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Play, Pause, Square, Monitor, HardDrive, Cpu, MemoryStick, Settings, Plus, Trash2 } from 'lucide-react';\n\ninterface VirtualMachine {\n  id: string;\n  name: string;\n  os: string;\n  status: 'running' | 'stopped' | 'paused' | 'starting' | 'stopping';\n  cpu: number;\n  memory: number;\n  storage: number;\n  network: string;\n  uptime?: string;\n  screenshot?: string;\n}\n\nexport const VMManager: FC = () => {\n  const [vms, setVms] = useState<VirtualMachine[]>([]);\n  const [selectedVM, setSelectedVM] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState('overview');\n\n  useEffect(() => {\n    loadVirtualMachines();\n  }, []);\n\n  const loadVirtualMachines = () => {\n    const mockVMs: VirtualMachine[] = [\n      {\n        id: 'vm1',\n        name: 'Ubuntu Desktop',\n        os: 'Ubuntu 22.04 LTS',\n        status: 'running',\n        cpu: 4,\n        memory: 8192,\n        storage: 50,\n        network: 'NAT',\n        uptime: '2h 15m',\n        screenshot: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjRjY5MjJBIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPnVidW50dTwvdGV4dD48L3N2Zz4='\n      },\n      {\n        id: 'vm2',\n        name: 'Windows 11 Dev',\n        os: 'Windows 11 Pro',\n        status: 'stopped',\n        cpu: 6,\n        memory: 16384,\n        storage: 100,\n        network: 'Bridged'\n      },\n      {\n        id: 'vm3',\n        name: 'Kali Linux',\n        os: 'Kali Linux 2023.4',\n        status: 'paused',\n        cpu: 2,\n        memory: 4096,\n        storage: 25,\n        network: 'Host-only'\n      }\n    ];\n    setVms(mockVMs);\n  };\n\n  const startVM = (vmId: string) => {\n    setVms(prev => prev.map(vm => \n      vm.id === vmId ? { ...vm, status: 'starting' as const } : vm\n    ));\n\n    setTimeout(() => {\n      setVms(prev => prev.map(vm => \n        vm.id === vmId ? { ...vm, status: 'running' as const, uptime: '0m' } : vm\n      ));\n    }, 3000);\n  };\n\n  const stopVM = (vmId: string) => {\n    setVms(prev => prev.map(vm => \n      vm.id === vmId ? { ...vm, status: 'stopping' as const } : vm\n    ));\n\n    setTimeout(() => {\n      setVms(prev => prev.map(vm => \n        vm.id === vmId ? { ...vm, status: 'stopped' as const, uptime: undefined } : vm\n      ));\n    }, 2000);\n  };\n\n  const pauseVM = (vmId: string) => {\n    setVms(prev => prev.map(vm => \n      vm.id === vmId ? { ...vm, status: 'paused' as const } : vm\n    ));\n  };\n\n  const getStatusBadge = (status: string) => {\n    switch (status) {\n      case 'running':\n        return <Badge className=\"bg-green-500\">Running</Badge>;\n      case 'stopped':\n        return <Badge variant=\"outline\">Stopped</Badge>;\n      case 'paused':\n        return <Badge variant=\"secondary\">Paused</Badge>;\n      case 'starting':\n        return <Badge variant=\"secondary\">Starting...</Badge>;\n      case 'stopping':\n        return <Badge variant=\"secondary\">Stopping...</Badge>;\n      default:\n        return <Badge variant=\"outline\">Unknown</Badge>;\n    }\n  };\n\n  const selectedVMData = vms.find(vm => vm.id === selectedVM);\n\n  return (\n    <div className=\"h-full flex flex-col bg-background\">\n      <div className=\"border-b p-4\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center gap-2\">\n            <Monitor className=\"h-6 w-6 text-primary\" />\n            <h1 className=\"text-xl font-semibold\">Virtual Machine Manager</h1>\n          </div>\n          <Button>\n            <Plus className=\"h-4 w-4 mr-2\" />\n            New VM\n          </Button>\n        </div>\n\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList>\n            <TabsTrigger value=\"overview\">Overview</TabsTrigger>\n            <TabsTrigger value=\"console\">Console</TabsTrigger>\n            <TabsTrigger value=\"snapshots\">Snapshots</TabsTrigger>\n            <TabsTrigger value=\"settings\">Settings</TabsTrigger>\n          </TabsList>\n        </Tabs>\n      </div>\n\n      <div className=\"flex-1 overflow-auto\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsContent value=\"overview\" className=\"p-4\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n              <div className=\"lg:col-span-2 space-y-4\">\n                <h2 className=\"text-lg font-semibold\">Virtual Machines</h2>\n                \n                {vms.map((vm) => (\n                  <Card \n                    key={vm.id} \n                    className={`cursor-pointer transition-all ${selectedVM === vm.id ? 'ring-2 ring-primary' : 'hover:shadow-lg'}`}\n                    onClick={() => setSelectedVM(vm.id)}\n                  >\n                    <CardContent className=\"p-4\">\n                      <div className=\"flex justify-between items-start\">\n                        <div className=\"flex gap-4\">\n                          {vm.screenshot && (\n                            <img \n                              src={vm.screenshot} \n                              alt={vm.name}\n                              className=\"w-16 h-12 rounded border object-cover\"\n                            />\n                          )}\n                          <div>\n                            <div className=\"flex items-center gap-2 mb-1\">\n                              <h3 className=\"font-semibold\">{vm.name}</h3>\n                              {getStatusBadge(vm.status)}\n                            </div>\n                            <p className=\"text-sm text-muted-foreground\">{vm.os}</p>\n                            <div className=\"flex gap-4 text-xs text-muted-foreground mt-1\">\n                              <span>{vm.cpu} vCPU</span>\n                              <span>{vm.memory} MB RAM</span>\n                              <span>{vm.storage} GB Storage</span>\n                              {vm.uptime && <span>Uptime: {vm.uptime}</span>}\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className=\"flex gap-1\">\n                          {vm.status === 'stopped' && (\n                            <Button size=\"sm\" onClick={(e) => { e.stopPropagation(); startVM(vm.id); }}>\n                              <Play className=\"h-3 w-3\" />\n                            </Button>\n                          )}\n                          {vm.status === 'running' && (\n                            <>\n                              <Button size=\"sm\" variant=\"outline\" onClick={(e) => { e.stopPropagation(); pauseVM(vm.id); }}>\n                                <Pause className=\"h-3 w-3\" />\n                              </Button>\n                              <Button size=\"sm\" variant=\"outline\" onClick={(e) => { e.stopPropagation(); stopVM(vm.id); }}>\n                                <Square className=\"h-3 w-3\" />\n                              </Button>\n                            </>\n                          )}\n                          {vm.status === 'paused' && (\n                            <Button size=\"sm\" onClick={(e) => { e.stopPropagation(); startVM(vm.id); }}>\n                              <Play className=\"h-3 w-3\" />\n                            </Button>\n                          )}\n                        </div>\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))}\n              </div>\n\n              <div className=\"space-y-4\">\n                {selectedVMData ? (\n                  <>\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"text-base\">{selectedVMData.name}</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-3\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-sm\">Status:</span>\n                          {getStatusBadge(selectedVMData.status)}\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-sm\">OS:</span>\n                          <span className=\"text-sm\">{selectedVMData.os}</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-sm\">Network:</span>\n                          <span className=\"text-sm\">{selectedVMData.network}</span>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <Card>\n                      <CardHeader>\n                        <CardTitle className=\"text-base flex items-center gap-2\">\n                          <Cpu className=\"h-4 w-4\" />\n                          Resources\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"space-y-3\">\n                        <div>\n                          <div className=\"flex justify-between text-sm mb-1\">\n                            <span>CPU Usage</span>\n                            <span>45%</span>\n                          </div>\n                          <Progress value={45} className=\"h-2\" />\n                        </div>\n                        \n                        <div>\n                          <div className=\"flex justify-between text-sm mb-1\">\n                            <span>Memory</span>\n                            <span>{selectedVMData.memory} MB</span>\n                          </div>\n                          <Progress value={65} className=\"h-2\" />\n                        </div>\n                        \n                        <div>\n                          <div className=\"flex justify-between text-sm mb-1\">\n                            <span>Storage</span>\n                            <span>{selectedVMData.storage} GB</span>\n                          </div>\n                          <Progress value={30} className=\"h-2\" />\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    <div className=\"space-y-2\">\n                      <Button className=\"w-full\" size=\"sm\">\n                        <Monitor className=\"h-4 w-4 mr-2\" />\n                        Open Console\n                      </Button>\n                      <Button variant=\"outline\" className=\"w-full\" size=\"sm\">\n                        <Settings className=\"h-4 w-4 mr-2\" />\n                        Settings\n                      </Button>\n                      <Button variant=\"outline\" className=\"w-full\" size=\"sm\">\n                        <Trash2 className=\"h-4 w-4 mr-2\" />\n                        Delete VM\n                      </Button>\n                    </div>\n                  </>\n                ) : (\n                  <Card>\n                    <CardContent className=\"p-6 text-center\">\n                      <Monitor className=\"h-12 w-12 text-muted-foreground mx-auto mb-3\" />\n                      <p className=\"text-muted-foreground\">Select a virtual machine to view details</p>\n                    </CardContent>\n                  </Card>\n                )}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"console\" className=\"p-4\">\n            {selectedVMData ? (\n              <Card>\n                <CardHeader>\n                  <CardTitle>Console - {selectedVMData.name}</CardTitle>\n                </CardHeader>\n                <CardContent>\n                  <div className=\"bg-black text-green-400 p-4 rounded font-mono text-sm h-96 flex items-center justify-center\">\n                    {selectedVMData.status === 'running' ? (\n                      <div className=\"text-center\">\n                        <Monitor className=\"h-16 w-16 mx-auto mb-4 opacity-50\" />\n                        <p>VM Console would be displayed here</p>\n                        <p className=\"text-xs mt-2\">WebRTC or VNC connection required</p>\n                      </div>\n                    ) : (\n                      <div className=\"text-center\">\n                        <p>Virtual machine is not running</p>\n                        <p className=\"text-xs mt-2\">Start the VM to access console</p>\n                      </div>\n                    )}\n                  </div>\n                </CardContent>\n              </Card>\n            ) : (\n              <div className=\"text-center py-12\">\n                <Monitor className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                <p className=\"text-muted-foreground\">Select a virtual machine to access console</p>\n              </div>\n            )}\n          </TabsContent>\n\n          <TabsContent value=\"snapshots\" className=\"p-4\">\n            <Card>\n              <CardHeader>\n                <CardTitle>VM Snapshots</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-center py-8\">\n                  <HardDrive className=\"h-16 w-16 text-muted-foreground mx-auto mb-4\" />\n                  <h3 className=\"text-lg font-medium mb-2\">No snapshots found</h3>\n                  <p className=\"text-muted-foreground mb-4\">Create snapshots to save VM states</p>\n                  <Button>Create Snapshot</Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"settings\" className=\"p-4\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <Card>\n                <CardHeader>\n                  <CardTitle>Hypervisor Settings</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Default VM Location</label>\n                    <Input value=\"/home/user/VirtualMachines\" readOnly />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">Memory Allocation (MB)</label>\n                    <Input type=\"number\" value=\"8192\" />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">CPU Cores</label>\n                    <Input type=\"number\" value=\"4\" />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card>\n                <CardHeader>\n                  <CardTitle>Network Configuration</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"text-sm font-medium\">Default Network Mode</label>\n                    <Input value=\"NAT\" readOnly />\n                  </div>\n                  \n                  <div>\n                    <label className=\"text-sm font-medium\">Host Interface</label>\n                    <Input value=\"eth0\" readOnly />\n                  </div>\n                  \n                  <Button variant=\"outline\" className=\"w-full\">\n                    Configure Networks\n                  </Button>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </Tabs>\n      </div>\n    </div>\n  );\n};","size_bytes":15693},"client/src/components/apps/VideoEditor.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Slider } from '@/components/ui/slider';\nimport { Input } from '@/components/ui/input';\nimport { \n  Play, Pause, SkipBack, SkipForward, Volume2, Scissors, \n  Download, Upload, Settings, Eye, Layers, Type, Image,\n  Music, Video, Wand2, Undo, Redo, Save, FolderOpen\n} from 'lucide-react';\n\ninterface VideoClip {\n  id: string;\n  name: string;\n  duration: number;\n  startTime: number;\n  endTime: number;\n  trimStart: number;\n  trimEnd: number;\n  volume: number;\n  effects: string[];\n  transitions: string[];\n}\n\ninterface AudioTrack {\n  id: string;\n  name: string;\n  duration: number;\n  volume: number;\n  startTime: number;\n}\n\ninterface TextOverlay {\n  id: string;\n  text: string;\n  startTime: number;\n  duration: number;\n  style: {\n    fontSize: number;\n    color: string;\n    position: { x: number; y: number };\n    fontFamily: string;\n  };\n}\n\nexport const VideoEditor: FC = () => {\n  const [currentTime, setCurrentTime] = useState(0);\n  const [duration, setDuration] = useState(300); // 5 minutes\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [zoom, setZoom] = useState(100);\n  const [selectedTool, setSelectedTool] = useState('select');\n  const [videoClips, setVideoClips] = useState<VideoClip[]>([\n    {\n      id: '1',\n      name: 'intro.mp4',\n      duration: 30,\n      startTime: 0,\n      endTime: 30,\n      trimStart: 0,\n      trimEnd: 30,\n      volume: 100,\n      effects: [],\n      transitions: []\n    },\n    {\n      id: '2',\n      name: 'main_content.mp4',\n      duration: 120,\n      startTime: 30,\n      endTime: 150,\n      trimStart: 0,\n      trimEnd: 120,\n      volume: 100,\n      effects: ['color_correction'],\n      transitions: ['fade_in']\n    }\n  ]);\n  \n  const [audioTracks, setAudioTracks] = useState<AudioTrack[]>([\n    {\n      id: '1',\n      name: 'background_music.mp3',\n      duration: 180,\n      volume: 60,\n      startTime: 0\n    }\n  ]);\n\n  const [textOverlays, setTextOverlays] = useState<TextOverlay[]>([\n    {\n      id: '1',\n      text: 'Welcome to WebOS',\n      startTime: 5,\n      duration: 10,\n      style: {\n        fontSize: 48,\n        color: '#ffffff',\n        position: { x: 50, y: 20 },\n        fontFamily: 'Arial'\n      }\n    }\n  ]);\n\n  const [projectName, setProjectName] = useState('Untitled Project');\n  const videoRef = useRef<HTMLVideoElement>(null);\n  const timelineRef = useRef<HTMLDivElement>(null);\n\n  const formatTime = (seconds: number): string => {\n    const mins = Math.floor(seconds / 60);\n    const secs = Math.floor(seconds % 60);\n    const frames = Math.floor((seconds % 1) * 30);\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}:${frames.toString().padStart(2, '0')}`;\n  };\n\n  const togglePlayback = () => {\n    setIsPlaying(!isPlaying);\n  };\n\n  const seekTo = (time: number) => {\n    setCurrentTime(Math.max(0, Math.min(time, duration)));\n  };\n\n  const exportProject = () => {\n    // In a real implementation, this would render the video\n    console.log('Exporting project:', {\n      videoClips,\n      audioTracks,\n      textOverlays,\n      duration,\n      projectName\n    });\n  };\n\n  const addVideoClip = () => {\n    const newClip: VideoClip = {\n      id: Date.now().toString(),\n      name: `clip_${videoClips.length + 1}.mp4`,\n      duration: 60,\n      startTime: duration,\n      endTime: duration + 60,\n      trimStart: 0,\n      trimEnd: 60,\n      volume: 100,\n      effects: [],\n      transitions: []\n    };\n    setVideoClips([...videoClips, newClip]);\n    setDuration(duration + 60);\n  };\n\n  const addAudioTrack = () => {\n    const newTrack: AudioTrack = {\n      id: Date.now().toString(),\n      name: `audio_${audioTracks.length + 1}.mp3`,\n      duration: 120,\n      volume: 80,\n      startTime: 0\n    };\n    setAudioTracks([...audioTracks, newTrack]);\n  };\n\n  const addTextOverlay = () => {\n    const newText: TextOverlay = {\n      id: Date.now().toString(),\n      text: 'New Text',\n      startTime: currentTime,\n      duration: 5,\n      style: {\n        fontSize: 32,\n        color: '#ffffff',\n        position: { x: 50, y: 50 },\n        fontFamily: 'Arial'\n      }\n    };\n    setTextOverlays([...textOverlays, newText]);\n  };\n\n  // Playback simulation\n  useEffect(() => {\n    let interval: NodeJS.Timeout;\n    if (isPlaying) {\n      interval = setInterval(() => {\n        setCurrentTime(prev => {\n          if (prev >= duration) {\n            setIsPlaying(false);\n            return duration;\n          }\n          return prev + 0.1;\n        });\n      }, 100);\n    }\n    return () => clearInterval(interval);\n  }, [isPlaying, duration]);\n\n  const timelineScale = zoom / 100;\n  const timelineWidth = duration * 10 * timelineScale;\n\n  return (\n    <div className=\"h-full flex flex-col bg-gray-900 text-white\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 bg-gray-800 border-b border-gray-700\">\n        <div className=\"flex items-center gap-4\">\n          <Video className=\"w-6 h-6 text-blue-400\" />\n          <Input\n            value={projectName}\n            onChange={(e) => setProjectName(e.target.value)}\n            className=\"bg-gray-700 border-gray-600 text-white w-48\"\n          />\n        </div>\n        \n        <div className=\"flex items-center gap-2\">\n          <Button variant=\"outline\" size=\"sm\" className=\"text-white border-gray-600\">\n            <FolderOpen className=\"w-4 h-4 mr-1\" />\n            Open\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" className=\"text-white border-gray-600\">\n            <Save className=\"w-4 h-4 mr-1\" />\n            Save\n          </Button>\n          <Button size=\"sm\" className=\"bg-blue-600 hover:bg-blue-700\">\n            <Download className=\"w-4 h-4 mr-1\" />\n            Export\n          </Button>\n        </div>\n      </div>\n\n      <div className=\"flex-1 flex\">\n        {/* Toolbar */}\n        <div className=\"w-16 bg-gray-800 border-r border-gray-700 flex flex-col items-center py-4 gap-2\">\n          {[\n            { id: 'select', icon: Eye, label: 'Select' },\n            { id: 'cut', icon: Scissors, label: 'Cut' },\n            { id: 'text', icon: Type, label: 'Text' },\n            { id: 'image', icon: Image, label: 'Image' },\n            { id: 'effects', icon: Wand2, label: 'Effects' }\n          ].map(tool => (\n            <Button\n              key={tool.id}\n              variant={selectedTool === tool.id ? 'default' : 'ghost'}\n              size=\"sm\"\n              className=\"w-10 h-10 p-0\"\n              onClick={() => setSelectedTool(tool.id)}\n              title={tool.label}\n            >\n              <tool.icon className=\"w-4 h-4\" />\n            </Button>\n          ))}\n        </div>\n\n        {/* Main Content */}\n        <div className=\"flex-1 flex flex-col\">\n          {/* Preview Area */}\n          <div className=\"flex-1 flex\">\n            {/* Video Preview */}\n            <div className=\"flex-1 bg-black flex items-center justify-center relative\">\n              <div className=\"w-full max-w-2xl aspect-video bg-gray-800 rounded-lg flex items-center justify-center relative overflow-hidden\">\n                {/* Video placeholder */}\n                <div className=\"absolute inset-0 bg-gradient-to-br from-blue-600 to-purple-600 opacity-50\"></div>\n                \n                {/* Text overlays */}\n                {textOverlays.map(overlay => {\n                  const isVisible = currentTime >= overlay.startTime && currentTime <= overlay.startTime + overlay.duration;\n                  return isVisible ? (\n                    <div\n                      key={overlay.id}\n                      className=\"absolute text-white font-bold pointer-events-none\"\n                      style={{\n                        left: `${overlay.style.position.x}%`,\n                        top: `${overlay.style.position.y}%`,\n                        fontSize: `${overlay.style.fontSize}px`,\n                        color: overlay.style.color,\n                        fontFamily: overlay.style.fontFamily,\n                        transform: 'translate(-50%, -50%)'\n                      }}\n                    >\n                      {overlay.text}\n                    </div>\n                  ) : null;\n                })}\n                \n                {/* Playback indicator */}\n                <div className=\"absolute bottom-4 left-4 bg-black/70 px-2 py-1 rounded text-sm\">\n                  {formatTime(currentTime)} / {formatTime(duration)}\n                </div>\n              </div>\n            </div>\n\n            {/* Properties Panel */}\n            <div className=\"w-80 bg-gray-800 border-l border-gray-700\">\n              <Tabs defaultValue=\"video\" className=\"h-full\">\n                <TabsList className=\"grid w-full grid-cols-3 bg-gray-700\">\n                  <TabsTrigger value=\"video\">Video</TabsTrigger>\n                  <TabsTrigger value=\"audio\">Audio</TabsTrigger>\n                  <TabsTrigger value=\"effects\">Effects</TabsTrigger>\n                </TabsList>\n                \n                <TabsContent value=\"video\" className=\"p-4 space-y-4\">\n                  <Card className=\"bg-gray-700 border-gray-600\">\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Video Properties</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-3\">\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Resolution</label>\n                        <select className=\"w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm\">\n                          <option>1920x1080 (Full HD)</option>\n                          <option>1280x720 (HD)</option>\n                          <option>3840x2160 (4K)</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Frame Rate</label>\n                        <select className=\"w-full bg-gray-600 border border-gray-500 rounded px-2 py-1 text-sm\">\n                          <option>30 fps</option>\n                          <option>60 fps</option>\n                          <option>24 fps</option>\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Brightness</label>\n                        <Slider defaultValue={[0]} min={-100} max={100} step={1} className=\"mt-1\" />\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Contrast</label>\n                        <Slider defaultValue={[0]} min={-100} max={100} step={1} className=\"mt-1\" />\n                      </div>\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Saturation</label>\n                        <Slider defaultValue={[0]} min={-100} max={100} step={1} className=\"mt-1\" />\n                      </div>\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n                \n                <TabsContent value=\"audio\" className=\"p-4 space-y-4\">\n                  <Card className=\"bg-gray-700 border-gray-600\">\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Audio Mixer</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-3\">\n                      <div>\n                        <label className=\"text-xs text-gray-400\">Master Volume</label>\n                        <Slider defaultValue={[100]} min={0} max={100} step={1} className=\"mt-1\" />\n                      </div>\n                      {audioTracks.map(track => (\n                        <div key={track.id} className=\"p-2 bg-gray-600 rounded\">\n                          <div className=\"text-xs font-medium mb-1\">{track.name}</div>\n                          <Slider defaultValue={[track.volume]} min={0} max={100} step={1} />\n                        </div>\n                      ))}\n                      <Button size=\"sm\" className=\"w-full\" onClick={addAudioTrack}>\n                        <Music className=\"w-4 h-4 mr-1\" />\n                        Add Audio Track\n                      </Button>\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n                \n                <TabsContent value=\"effects\" className=\"p-4 space-y-4\">\n                  <Card className=\"bg-gray-700 border-gray-600\">\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Effects Library</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {[\n                        'Blur', 'Sharpen', 'Color Grade', 'Film Grain', \n                        'Vignette', 'Chromatic Aberration', 'Lens Flare', 'Glow'\n                      ].map(effect => (\n                        <Button\n                          key={effect}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full justify-start text-white border-gray-600\"\n                        >\n                          {effect}\n                        </Button>\n                      ))}\n                    </CardContent>\n                  </Card>\n                  \n                  <Card className=\"bg-gray-700 border-gray-600\">\n                    <CardHeader className=\"pb-2\">\n                      <CardTitle className=\"text-sm\">Transitions</CardTitle>\n                    </CardHeader>\n                    <CardContent className=\"space-y-2\">\n                      {[\n                        'Cut', 'Fade', 'Dissolve', 'Wipe', 'Slide', 'Zoom'\n                      ].map(transition => (\n                        <Button\n                          key={transition}\n                          variant=\"outline\"\n                          size=\"sm\"\n                          className=\"w-full justify-start text-white border-gray-600\"\n                        >\n                          {transition}\n                        </Button>\n                      ))}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n              </Tabs>\n            </div>\n          </div>\n\n          {/* Timeline */}\n          <div className=\"h-64 bg-gray-800 border-t border-gray-700 flex flex-col\">\n            {/* Timeline Controls */}\n            <div className=\"flex items-center justify-between p-2 bg-gray-700 border-b border-gray-600\">\n              <div className=\"flex items-center gap-2\">\n                <Button size=\"sm\" variant=\"ghost\" onClick={togglePlayback}>\n                  {isPlaying ? <Pause className=\"w-4 h-4\" /> : <Play className=\"w-4 h-4\" />}\n                </Button>\n                <Button size=\"sm\" variant=\"ghost\" onClick={() => seekTo(0)}>\n                  <SkipBack className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"sm\" variant=\"ghost\" onClick={() => seekTo(duration)}>\n                  <SkipForward className=\"w-4 h-4\" />\n                </Button>\n                <div className=\"text-sm font-mono\">\n                  {formatTime(currentTime)}\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-2\">\n                <Button size=\"sm\" variant=\"ghost\" onClick={addVideoClip}>\n                  <Upload className=\"w-4 h-4 mr-1\" />\n                  Add Media\n                </Button>\n                <Button size=\"sm\" variant=\"ghost\" onClick={addTextOverlay}>\n                  <Type className=\"w-4 h-4 mr-1\" />\n                  Add Text\n                </Button>\n                <div className=\"flex items-center gap-1\">\n                  <label className=\"text-xs\">Zoom:</label>\n                  <Slider\n                    value={[zoom]}\n                    onValueChange={(value) => setZoom(value[0])}\n                    min={25}\n                    max={400}\n                    step={25}\n                    className=\"w-16\"\n                  />\n                  <span className=\"text-xs w-8\">{zoom}%</span>\n                </div>\n              </div>\n            </div>\n\n            {/* Timeline Tracks */}\n            <div className=\"flex-1 overflow-auto\" ref={timelineRef}>\n              <div className=\"relative\" style={{ width: Math.max(800, timelineWidth) }}>\n                {/* Time ruler */}\n                <div className=\"h-6 bg-gray-600 border-b border-gray-500 relative\">\n                  {Array.from({ length: Math.ceil(duration / 10) + 1 }, (_, i) => (\n                    <div\n                      key={i}\n                      className=\"absolute top-0 bottom-0 border-l border-gray-400\"\n                      style={{ left: i * 100 * timelineScale }}\n                    >\n                      <span className=\"text-xs text-gray-300 ml-1\">{i * 10}s</span>\n                    </div>\n                  ))}\n                  \n                  {/* Playhead */}\n                  <div\n                    className=\"absolute top-0 bottom-0 w-0.5 bg-red-500 z-10\"\n                    style={{ left: currentTime * 10 * timelineScale }}\n                  />\n                </div>\n\n                {/* Video Track */}\n                <div className=\"h-12 bg-gray-700 border-b border-gray-600 relative\">\n                  <div className=\"absolute left-0 top-0 h-full flex items-center px-2 text-xs font-medium bg-gray-600 border-r border-gray-500 w-16\">\n                    Video 1\n                  </div>\n                  {videoClips.map(clip => (\n                    <div\n                      key={clip.id}\n                      className=\"absolute top-1 bottom-1 bg-blue-600 rounded border border-blue-400 cursor-pointer hover:bg-blue-500\"\n                      style={{\n                        left: clip.startTime * 10 * timelineScale + 64,\n                        width: (clip.endTime - clip.startTime) * 10 * timelineScale\n                      }}\n                    >\n                      <div className=\"p-1 text-xs text-white truncate\">{clip.name}</div>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Audio Track */}\n                <div className=\"h-12 bg-gray-700 border-b border-gray-600 relative\">\n                  <div className=\"absolute left-0 top-0 h-full flex items-center px-2 text-xs font-medium bg-gray-600 border-r border-gray-500 w-16\">\n                    Audio 1\n                  </div>\n                  {audioTracks.map(track => (\n                    <div\n                      key={track.id}\n                      className=\"absolute top-1 bottom-1 bg-green-600 rounded border border-green-400 cursor-pointer hover:bg-green-500\"\n                      style={{\n                        left: track.startTime * 10 * timelineScale + 64,\n                        width: track.duration * 10 * timelineScale\n                      }}\n                    >\n                      <div className=\"p-1 text-xs text-white truncate\">{track.name}</div>\n                    </div>\n                  ))}\n                </div>\n\n                {/* Text Track */}\n                <div className=\"h-12 bg-gray-700 border-b border-gray-600 relative\">\n                  <div className=\"absolute left-0 top-0 h-full flex items-center px-2 text-xs font-medium bg-gray-600 border-r border-gray-500 w-16\">\n                    Text\n                  </div>\n                  {textOverlays.map(overlay => (\n                    <div\n                      key={overlay.id}\n                      className=\"absolute top-1 bottom-1 bg-yellow-600 rounded border border-yellow-400 cursor-pointer hover:bg-yellow-500\"\n                      style={{\n                        left: overlay.startTime * 10 * timelineScale + 64,\n                        width: overlay.duration * 10 * timelineScale\n                      }}\n                    >\n                      <div className=\"p-1 text-xs text-white truncate\">{overlay.text}</div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":20459},"client/src/components/apps/VideoTube.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Play, Upload, Search, ThumbsUp, ThumbsDown, Share, MessageCircle, Bell, User, Settings, Home, TrendingUp, Users, Library, Heart, Eye, Clock, Loader2, RefreshCw, PlaySquare, List } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { useQuery, useQueryClient } from '@tanstack/react-query';\n\ninterface YouTubeVideo {\n  id: string;\n  title: string;\n  description: string;\n  thumbnail: string;\n  duration: string;\n  views: number;\n  publishedAt: string;\n  channelTitle: string;\n  channelId: string;\n}\n\ninterface User {\n  id: string;\n  username: string;\n  displayName: string;\n  avatar: string;\n  subscribers: number;\n  verified: boolean;\n  joinDate: string;\n}\n\ninterface Comment {\n  id: string;\n  videoId: string;\n  author: User;\n  text: string;\n  timestamp: string;\n  likes: number;\n  replies: Comment[];\n}\n\ninterface Playlist {\n  id: string;\n  title: string;\n  description: string;\n  creator: string;\n  creatorId: string;\n  thumbnail: string;\n  videoCount: number;\n  totalDuration: string;\n  createdAt: string;\n  videos: YouTubeVideo[];\n  isPublic: boolean;\n}\n\nconst sampleUsers: User[] = [\n  {\n    id: 'user1',\n    username: 'techguru',\n    displayName: 'Tech Guru',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=tech',\n    subscribers: 1250000,\n    verified: true,\n    joinDate: '2019-03-15'\n  },\n  {\n    id: 'user2',\n    username: 'gamemaster',\n    displayName: 'Game Master',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=game',\n    subscribers: 850000,\n    verified: true,\n    joinDate: '2020-07-22'\n  },\n  {\n    id: 'user3',\n    username: 'cookingwithsarah',\n    displayName: 'Cooking with Sarah',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=cooking',\n    subscribers: 2100000,\n    verified: true,\n    joinDate: '2018-11-08'\n  },\n  {\n    id: 'user4',\n    username: 'fitnessjoe',\n    displayName: 'Fitness Joe',\n    avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=fitness',\n    subscribers: 675000,\n    verified: true,\n    joinDate: '2021-01-10'\n  }\n];\n\n// Diverse video content categories\nconst fallbackVideos: YouTubeVideo[] = [\n  // Gaming Content - GeekaWhat & Bog\n  {\n    id: 'geeka1',\n    title: 'GeekaWhat: The Evolution of Gaming Graphics - 1980 to 2024',\n    description: 'An incredible journey through gaming graphics evolution, showcasing how far we have come from pixels to photorealism.',\n    thumbnail: 'https://i.ytimg.com/vi/ROjZy1WbCIA/maxresdefault.jpg',\n    duration: '25:45',\n    views: 3200000,\n    publishedAt: '2024-03-15T00:00:00Z',\n    channelTitle: 'GeekaWhat',\n    channelId: 'geekawhat'\n  },\n  {\n    id: 'bog1',\n    title: 'Bog: Speedrunning Elden Ring in Under 2 Hours',\n    description: 'Watch Bog attempt to speedrun Elden Ring using the most optimized strategies and routing techniques.',\n    thumbnail: 'https://i.ytimg.com/vi/NCwa_xi0Uuc/maxresdefault.jpg',\n    duration: '1:58:30',\n    views: 1800000,\n    publishedAt: '2024-03-12T00:00:00Z',\n    channelTitle: 'Bog',\n    channelId: 'bog_speedruns'\n  },\n  // Tech Content - Linus Tech Tips\n  {\n    id: 'ltt1',\n    title: 'Linus Tech Tips: Building a $5000 Gaming PC - Ultimate Performance',\n    description: 'We build the ultimate gaming PC with top-tier components. Does more money really mean better performance?',\n    thumbnail: 'https://i.ytimg.com/vi/BwuLxPH8IDs/maxresdefault.jpg',\n    duration: '18:22',\n    views: 4500000,\n    publishedAt: '2024-03-10T00:00:00Z',\n    channelTitle: 'Linus Tech Tips',\n    channelId: 'linustechtips'\n  },\n  {\n    id: 'ltt2',\n    title: 'Linus Tech Tips: RTX 4090 vs RTX 4080 - Is the Price Worth It?',\n    description: 'Comprehensive testing of NVIDIA RTX 4090 vs 4080 across games, productivity, and value metrics.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '15:45',\n    views: 6200000,\n    publishedAt: '2024-03-08T00:00:00Z',\n    channelTitle: 'Linus Tech Tips',\n    channelId: 'linustechtips'\n  },\n  // SFM Content\n  {\n    id: 'sfm1',\n    title: 'Team Fortress 2 SFM: The Ultimate Spy vs Engineer Battle',\n    description: 'An epic Source Filmmaker animation featuring an intense battle between Spy and Engineer with cinematic quality.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '8:30',\n    views: 2100000,\n    publishedAt: '2024-03-14T00:00:00Z',\n    channelTitle: 'SFM Cinema',\n    channelId: 'sfm_cinema'\n  },\n  {\n    id: 'sfm2',\n    title: 'Half-Life SFM: Gordon Freeman vs G-Man - Epic Confrontation',\n    description: 'A stunning Source Filmmaker short film depicting the ultimate confrontation between Gordon Freeman and G-Man.',\n    thumbnail: 'https://i.ytimg.com/vi/BwuLxPH8IDs/maxresdefault.jpg',\n    duration: '12:15',\n    views: 1750000,\n    publishedAt: '2024-03-11T00:00:00Z',\n    channelTitle: 'Valve Animations',\n    channelId: 'valve_animations'\n  },\n  // Programming Content\n  {\n    id: 'prog1',\n    title: 'JavaScript: Build a Full-Stack App in 1 Hour',\n    description: 'Complete tutorial covering React frontend, Node.js backend, and MongoDB database integration.',\n    thumbnail: 'https://i.ytimg.com/vi/ROjZy1WbCIA/maxresdefault.jpg',\n    duration: '1:02:30',\n    views: 890000,\n    publishedAt: '2024-03-13T00:00:00Z',\n    channelTitle: 'Code Academy Pro',\n    channelId: 'code_academy_pro'\n  },\n  {\n    id: 'prog2',\n    title: 'Python: Machine Learning for Beginners - Complete Course',\n    description: 'Learn machine learning fundamentals with Python, covering scikit-learn, pandas, and real-world projects.',\n    thumbnail: 'https://i.ytimg.com/vi/NCwa_xi0Uuc/maxresdefault.jpg',\n    duration: '3:15:45',\n    views: 1320000,\n    publishedAt: '2024-03-09T00:00:00Z',\n    channelTitle: 'Python Mastery',\n    channelId: 'python_mastery'\n  },\n  {\n    id: 'prog3',\n    title: 'React vs Vue vs Angular: 2024 Framework Comparison',\n    description: 'Comprehensive comparison of the top JavaScript frameworks with performance tests and real-world examples.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '28:45',\n    views: 567000,\n    publishedAt: '2024-03-07T00:00:00Z',\n    channelTitle: 'Frontend Masters',\n    channelId: 'frontend_masters'\n  },\n  // More Gaming\n  {\n    id: 'gaming1',\n    title: 'Minecraft: Building a Functional Computer Inside the Game',\n    description: 'Watch as we build a working computer using redstone circuits in Minecraft - it actually runs programs!',\n    thumbnail: 'https://i.ytimg.com/vi/BwuLxPH8IDs/maxresdefault.jpg',\n    duration: '42:20',\n    views: 5800000,\n    publishedAt: '2024-03-06T00:00:00Z',\n    channelTitle: 'Redstone Engineers',\n    channelId: 'redstone_engineers'\n  },\n  {\n    id: 'gaming2',\n    title: 'Counter-Strike 2: Professional Movement Guide',\n    description: 'Learn advanced movement techniques used by professional CS2 players to gain competitive advantage.',\n    thumbnail: 'https://i.ytimg.com/vi/ROjZy1WbCIA/maxresdefault.jpg',\n    duration: '22:35',\n    views: 1450000,\n    publishedAt: '2024-03-05T00:00:00Z',\n    channelTitle: 'CS Pro Guide',\n    channelId: 'cs_pro_guide'\n  },\n  // DanTDM Content\n  {\n    id: 'dantdm1',\n    title: 'DanTDM: Minecraft Hardcore Survival - Episode 200 FINALE!',\n    description: 'The epic conclusion to DanTDM hardcore survival series! After 200 episodes, will he finally defeat the Ender Dragon?',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '35:42',\n    views: 8500000,\n    publishedAt: '2024-03-14T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm2',\n    title: 'DanTDM: I Built the BIGGEST Minecraft Castle Ever!',\n    description: 'DanTDM spends 10 hours building an absolutely massive castle in Minecraft with incredible detail and secret rooms.',\n    thumbnail: 'https://i.ytimg.com/vi/BwuLxPH8IDs/maxresdefault.jpg',\n    duration: '28:15',\n    views: 12300000,\n    publishedAt: '2024-03-12T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm3',\n    title: 'DanTDM: Reacting to My First Ever Minecraft Video!',\n    description: 'DanTDM reacts to his very first Minecraft video from 10 years ago and reflects on his YouTube journey.',\n    thumbnail: 'https://i.ytimg.com/vi/NCwa_xi0Uuc/maxresdefault.jpg',\n    duration: '18:30',\n    views: 6700000,\n    publishedAt: '2024-03-10T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm4',\n    title: 'DanTDM: Testing Viral Minecraft Tricks - Do They Actually Work?',\n    description: 'DanTDM tests the most popular Minecraft tricks and hacks from TikTok and YouTube to see if they really work.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '24:45',\n    views: 9800000,\n    publishedAt: '2024-03-08T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm5',\n    title: 'DanTDM: Among Us But Its Actually Minecraft!',\n    description: 'DanTDM plays a custom Among Us map built entirely in Minecraft with his friends - chaos ensues!',\n    thumbnail: 'https://i.ytimg.com/vi/ROjZy1WbCIA/maxresdefault.jpg',\n    duration: '32:20',\n    views: 15400000,\n    publishedAt: '2024-03-06T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  // More Programming\n  {\n    id: 'prog4',\n    title: 'Rust Programming: Building a Web Server from Scratch',\n    description: 'Learn Rust by building a high-performance web server with async/await and advanced error handling.',\n    thumbnail: 'https://i.ytimg.com/vi/NCwa_xi0Uuc/maxresdefault.jpg',\n    duration: '1:18:20',\n    views: 425000,\n    publishedAt: '2024-03-04T00:00:00Z',\n    channelTitle: 'Rust Systems',\n    channelId: 'rust_systems'\n  },\n  {\n    id: 'prog5',\n    title: 'TypeScript: Advanced Patterns and Best Practices',\n    description: 'Deep dive into TypeScript advanced features including generics, decorators, and type manipulation.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '45:15',\n    views: 680000,\n    publishedAt: '2024-03-03T00:00:00Z',\n    channelTitle: 'TypeScript Guru',\n    channelId: 'typescript_guru'\n  },\n  // More DanTDM Content\n  {\n    id: 'dantdm6',\n    title: 'DanTDM: I Spent 24 Hours in a Minecraft Horror Map',\n    description: 'DanTDM attempts to survive 24 hours in the scariest Minecraft horror map ever created. Will he make it through the night?',\n    thumbnail: 'https://i.ytimg.com/vi/BwuLxPH8IDs/maxresdefault.jpg',\n    duration: '41:30',\n    views: 18700000,\n    publishedAt: '2024-03-04T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm7',\n    title: 'DanTDM: Minecraft But Every Block is Different',\n    description: 'DanTDM plays Minecraft with a crazy mod where every single block behaves completely differently. Chaos ensues!',\n    thumbnail: 'https://i.ytimg.com/vi/NCwa_xi0Uuc/maxresdefault.jpg',\n    duration: '26:45',\n    views: 14200000,\n    publishedAt: '2024-03-02T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'dantdm8',\n    title: 'DanTDM: Building the Most Secure Minecraft Base Ever',\n    description: 'DanTDM creates the ultimate secure base in Minecraft with redstone traps, hidden entrances, and unbreakable defenses.',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    duration: '33:15',\n    views: 11800000,\n    publishedAt: '2024-02-28T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm'\n  },\n  {\n    id: 'proglang1',\n    title: 'I Created My Own Programming Language!',\n    description: 'Building a custom programming language from scratch using Rust. Complete lexer, parser, and interpreter implementation.',\n    thumbnail: 'https://i.ytimg.com/vi/Cz2gO51bD4g/maxresdefault.jpg',\n    duration: '28:45',\n    views: 750000,\n    publishedAt: '2024-02-10T00:00:00Z',\n    channelTitle: 'CodeCrafters',\n    channelId: 'codecrafters'\n  },\n  \n  // Gaming Content - Sampey Style\n  {\n    id: 'sampey1',\n    title: 'GTA San Andreas Multiplayer - Epic Gang War!',\n    description: 'Join me for an intense gang war battle in SA:MP with crazy stunts and epic moments!',\n    thumbnail: 'https://i.ytimg.com/vi/qI6yQwh3A78/maxresdefault.jpg',\n    duration: '15:32',\n    views: 3200000,\n    publishedAt: '2024-02-05T00:00:00Z',\n    channelTitle: 'Sampey',\n    channelId: 'sampey_official'\n  },\n  \n  // DanTDM Style Gaming\n  {\n    id: 'dantdm1',\n    title: 'Minecraft: Testing CRAZY New Mods!',\n    description: 'Today we are testing some absolutely insane Minecraft mods that completely change the game!',\n    thumbnail: 'https://i.ytimg.com/vi/F0eYU1XvL4E/maxresdefault.jpg',\n    duration: '20:15',\n    views: 5400000,\n    publishedAt: '2024-02-12T00:00:00Z',\n    channelTitle: 'DanTDM',\n    channelId: 'dantdm_official'\n  },\n  \n  // Roblox Content\n  {\n    id: 'roblox1',\n    title: 'Building the ULTIMATE Roblox Obby!',\n    description: 'Creating the most challenging obby course in Roblox Studio with impossible jumps and secret areas!',\n    thumbnail: 'https://i.ytimg.com/vi/pRpeEdMmmQ0/maxresdefault.jpg',\n    duration: '18:47',\n    views: 2800000,\n    publishedAt: '2024-02-08T00:00:00Z',\n    channelTitle: 'RobloxMaster',\n    channelId: 'robloxmaster'\n  },\n  {\n    id: 'roblox2',\n    title: 'Roblox Brookhaven RP - Family Roleplay!',\n    description: 'Living my best life in Brookhaven with crazy family adventures and roleplaying scenarios!',\n    thumbnail: 'https://i.ytimg.com/vi/x8VYWazR5mE/maxresdefault.jpg',\n    duration: '22:33',\n    views: 4100000,\n    publishedAt: '2024-02-14T00:00:00Z',\n    channelTitle: 'BrookhavenQueen',\n    channelId: 'brookhavenqueen'\n  },\n  \n  // TF2 SFM Content\n  {\n    id: 'tf2sfm1',\n    title: 'TF2 SFM: Heavy vs Scout Epic Battle',\n    description: 'An epic Source Filmmaker animation featuring Heavy and Scout in an intense battle with amazing cinematics!',\n    thumbnail: 'https://i.ytimg.com/vi/junBCVaJYkA/maxresdefault.jpg',\n    duration: '8:15',\n    views: 1200000,\n    publishedAt: '2024-01-28T00:00:00Z',\n    channelTitle: 'SFM Animator',\n    channelId: 'sfmanimator'\n  },\n  {\n    id: 'tf2sfm2',\n    title: 'Team Fortress 2 - Meet the Pyro Remake SFM',\n    description: 'A complete remake of the classic \"Meet the Pyro\" video using advanced Source Filmmaker techniques.',\n    thumbnail: 'https://i.ytimg.com/vi/WUhOnX8qt3I/maxresdefault.jpg',\n    duration: '4:32',\n    views: 890000,\n    publishedAt: '2024-02-03T00:00:00Z',\n    channelTitle: 'TF2 Remastered',\n    channelId: 'tf2remastered'\n  },\n  \n  // More Gaming & Entertainment\n  {\n    id: 'minecraft1',\n    title: 'Minecraft but Everything is BACKWARDS!',\n    description: 'What happens when you play Minecraft completely backwards? This experiment will blow your mind!',\n    thumbnail: 'https://i.ytimg.com/vi/hFZFjoX2cGg/maxresdefault.jpg',\n    duration: '16:28',\n    views: 3500000,\n    publishedAt: '2024-02-16T00:00:00Z',\n    channelTitle: 'PopularMMOs',\n    channelId: 'popularmmos'\n  },\n  {\n    id: 'L_jWHffIx5E',\n    title: 'Smash Mouth - All Star (Official Music Video)',\n    description: 'Official music video for All Star by Smash Mouth from the album Astro Lounge.',\n    thumbnail: 'https://i.ytimg.com/vi/L_jWHffIx5E/maxresdefault.jpg',\n    duration: '3:21',\n    views: 800000000,\n    publishedAt: '2009-06-16T00:00:00Z',\n    channelTitle: 'Smash Mouth',\n    channelId: 'UCLp3yEOdE6Cwe1D3xqKiPBw'\n  },\n  {\n    id: 'kJQP7kiw5Fk',\n    title: 'Despacito ft. Daddy Yankee',\n    description: '\"Despacito\" available on iTunes: http://smarturl.it/DespacitoiTunes Listen on Spotify: http://smarturl.it/DespacitoSpotify',\n    thumbnail: 'https://i.ytimg.com/vi/kJQP7kiw5Fk/maxresdefault.jpg',\n    duration: '4:42',\n    views: 8100000000,\n    publishedAt: '2017-01-12T00:00:00Z',\n    channelTitle: 'Luis Fonsi',\n    channelId: 'UCmT5bgI_8Ux3qE88L-o2bOQ'\n  },\n  {\n    id: 'YQHsXMglC9A',\n    title: 'Adele - Hello (Official Music Video)',\n    description: 'Official music video for Hello by Adele from the album 25.',\n    thumbnail: 'https://i.ytimg.com/vi/YQHsXMglC9A/maxresdefault.jpg',\n    duration: '6:07',\n    views: 3200000000,\n    publishedAt: '2015-10-22T00:00:00Z',\n    channelTitle: 'Adele',\n    channelId: 'UCsRM0YB_dabtEPGPTKo-gcw'\n  },\n  {\n    id: '9bZkp7q19f0',\n    title: 'PSY - GANGNAM STYLE(강남스타일) M/V',\n    description: 'PSY - GANGNAM STYLE(강남스타일) M/V @ https://youtu.be/9bZkp7q19f0',\n    thumbnail: 'https://i.ytimg.com/vi/9bZkp7q19f0/maxresdefault.jpg',\n    duration: '4:13',\n    views: 4800000000,\n    publishedAt: '2012-07-15T00:00:00Z',\n    channelTitle: 'officialpsy',\n    channelId: 'UCrDkAvF9ZWdo5OukAhI7H3Q'\n  },\n  {\n    id: 'JGwWNGJdvx8',\n    title: 'Ed Sheeran - Shape of You (Official Video)',\n    description: 'Ed Sheeran - Shape of You (Official Video)',\n    thumbnail: 'https://i.ytimg.com/vi/JGwWNGJdvx8/maxresdefault.jpg',\n    duration: '3:54',\n    views: 5700000000,\n    publishedAt: '2017-01-30T00:00:00Z',\n    channelTitle: 'Ed Sheeran',\n    channelId: 'UC0C-w0YjGpqDXGB8IHb662A'\n  },\n  {\n    id: 'CevxZvSJLk8',\n    title: 'Katy Perry - Roar (Official)',\n    description: 'Katy Perry - Roar (Official) from Prism',\n    thumbnail: 'https://i.ytimg.com/vi/CevxZvSJLk8/maxresdefault.jpg',\n    duration: '3:43',\n    views: 3500000000,\n    publishedAt: '2013-09-05T00:00:00Z',\n    channelTitle: 'Katy Perry',\n    channelId: 'UC347FC-2Zj5MTtMfsTc97xQ'\n  },\n  {\n    id: 'RgKAFK5djSk',\n    title: 'Wiz Khalifa - See You Again ft. Charlie Puth [Official Video]',\n    description: 'From \"Furious 7\" Original Motion Picture Soundtrack',\n    thumbnail: 'https://i.ytimg.com/vi/RgKAFK5djSk/maxresdefault.jpg',\n    duration: '3:57',\n    views: 5300000000,\n    publishedAt: '2015-04-06T00:00:00Z',\n    channelTitle: 'Wiz Khalifa',\n    channelId: 'UCGwegR-rWjYETlrwNzJTNFQ'\n  },\n  {\n    id: 'hT_nvWreIhg',\n    title: 'Mark Ronson - Uptown Funk (Official Video) ft. Bruno Mars',\n    description: 'Mark Ronson - Uptown Funk (Official Video) ft. Bruno Mars',\n    thumbnail: 'https://i.ytimg.com/vi/hT_nvWreIhg/maxresdefault.jpg',\n    duration: '4:30',\n    views: 4500000000,\n    publishedAt: '2014-11-19T00:00:00Z',\n    channelTitle: 'Mark Ronson',\n    channelId: 'UCBnxxPnWlJjdTvnxIh6M14Q'\n  },\n  {\n    id: 'lp-EO5I60KA',\n    title: 'Thinking Out Loud - Ed Sheeran (Official Video)',\n    description: 'Ed Sheeran - Thinking Out Loud (Official Video)',\n    thumbnail: 'https://i.ytimg.com/vi/lp-EO5I60KA/maxresdefault.jpg',\n    duration: '4:41',\n    views: 3100000000,\n    publishedAt: '2014-10-07T00:00:00Z',\n    channelTitle: 'Ed Sheeran',\n    channelId: 'UC0C-w0YjGpqDXGB8IHb662A'\n  },\n  {\n    id: 'pt8VYOfr8To',\n    title: 'Taylor Swift - We Are Never Ever Getting Back Together',\n    description: 'Music video by Taylor Swift performing We Are Never Ever Getting Back Together.',\n    thumbnail: 'https://i.ytimg.com/vi/pt8VYOfr8To/maxresdefault.jpg',\n    duration: '3:13',\n    views: 1200000000,\n    publishedAt: '2012-08-30T00:00:00Z',\n    channelTitle: 'Taylor Swift',\n    channelId: 'UCqECaJ8Gagnn7YCbPEzWH6g'\n  },\n  {\n    id: 'M11SvDtPBhA',\n    title: 'Maroon 5 - Sugar (Official Music Video)',\n    description: 'Maroon 5 - Sugar (Official Music Video)',\n    thumbnail: 'https://i.ytimg.com/vi/M11SvDtPBhA/maxresdefault.jpg',\n    duration: '3:55',\n    views: 3400000000,\n    publishedAt: '2015-01-14T00:00:00Z',\n    channelTitle: 'Maroon 5',\n    channelId: 'UC78fGeRSClyf9g0IqI9vJlA'\n  },\n  {\n    id: 'QcIy9NiNbmo',\n    title: 'Taylor Swift - Bad Blood ft. Kendrick Lamar',\n    description: 'Taylor Swift - Bad Blood ft. Kendrick Lamar (Official Music Video)',\n    thumbnail: 'https://i.ytimg.com/vi/QcIy9NiNbmo/maxresdefault.jpg',\n    duration: '4:04',\n    views: 1600000000,\n    publishedAt: '2015-05-17T00:00:00Z',\n    channelTitle: 'Taylor Swift',\n    channelId: 'UCqECaJ8Gagnn7YCbPEzWH6g'\n  },\n  {\n    id: 'OPf0YbXqDm0',\n    title: 'Mark Ronson - Uptown Funk ft. Bruno Mars',\n    description: 'Mark Ronson - Uptown Funk ft. Bruno Mars (Official Video)',\n    thumbnail: 'https://i.ytimg.com/vi/OPf0YbXqDm0/maxresdefault.jpg',\n    duration: '4:30',\n    views: 4500000000,\n    publishedAt: '2014-11-19T00:00:00Z',\n    channelTitle: 'Mark Ronson',\n    channelId: 'UCBnxxPnWlJjdTvnxIh6M14Q'\n  },\n  {\n    id: 'nfWlot6h_JM',\n    title: 'Taylor Swift - Shake It Off',\n    description: 'Get the song on iTunes: http://smarturl.it/1989deluxe',\n    thumbnail: 'https://i.ytimg.com/vi/nfWlot6h_JM/maxresdefault.jpg',\n    duration: '3:39',\n    views: 3200000000,\n    publishedAt: '2014-08-18T00:00:00Z',\n    channelTitle: 'Taylor Swift',\n    channelId: 'UCqECaJ8Gagnn7YCbPEzWH6g'\n  },\n  {\n    id: 'FlsCjmMhFmw',\n    title: 'Baby Shark Dance | #babyshark Most Viewed Video on YouTube',\n    description: 'Baby Shark Dance | #babyshark Most Viewed Video on YouTube | PINKFONG Songs for Children',\n    thumbnail: 'https://i.ytimg.com/vi/FlsCjmMhFmw/maxresdefault.jpg',\n    duration: '2:17',\n    views: 13000000000,\n    publishedAt: '2016-06-17T00:00:00Z',\n    channelTitle: 'Pinkfong Baby Shark - Kids\\' Songs & Stories',\n    channelId: 'UCcdwLMPsaU2ezNSJU1nFoBQ'\n  },\n  {\n    id: 'uelHwf8o7_U',\n    title: 'Eminem - Love The Way You Lie ft. Rihanna',\n    description: 'Music video by Eminem performing Love The Way You Lie featuring Rihanna.',\n    thumbnail: 'https://i.ytimg.com/vi/uelHwf8o7_U/maxresdefault.jpg',\n    duration: '4:23',\n    views: 2200000000,\n    publishedAt: '2010-08-05T00:00:00Z',\n    channelTitle: 'Eminem',\n    channelId: 'UCedvOgsKFzcK3hA5taf3KoQ'\n  },\n  {\n    id: 'mWRsgZuwf_8',\n    title: 'Gangnam Style - Behind the Scenes',\n    description: 'Behind the scenes of PSY - GANGNAM STYLE M/V',\n    thumbnail: 'https://i.ytimg.com/vi/mWRsgZuwf_8/maxresdefault.jpg',\n    duration: '3:45',\n    views: 450000000,\n    publishedAt: '2012-08-15T00:00:00Z',\n    channelTitle: 'officialpsy',\n    channelId: 'UCrDkAvF9ZWdo5OukAhI7H3Q'\n  },\n  {\n    id: 'rYEDA3JcQqw',\n    title: 'Adele - Rolling in the Deep (Official Music Video)',\n    description: 'Adele - Rolling in the Deep (Official Music Video)',\n    thumbnail: 'https://i.ytimg.com/vi/rYEDA3JcQqw/maxresdefault.jpg',\n    duration: '3:48',\n    views: 2100000000,\n    publishedAt: '2010-11-29T00:00:00Z',\n    channelTitle: 'Adele',\n    channelId: 'UCsRM0YB_dabtEPGPTKo-gcw'\n  },\n  // Tech and Programming Videos\n  {\n    id: 'Mus_vwhTCq0',\n    title: 'JavaScript in 100 Seconds',\n    description: 'Learn the basics of JavaScript in 100 seconds. From variables to functions, this video covers the essential concepts every developer should know.',\n    thumbnail: 'https://i.ytimg.com/vi/Mus_vwhTCq0/maxresdefault.jpg',\n    duration: '2:44',\n    views: 2800000,\n    publishedAt: '2021-04-20T00:00:00Z',\n    channelTitle: 'Fireship',\n    channelId: 'UCsBjURrPoezykLs9EqgamOA'\n  },\n  {\n    id: 'SqcY0GlETPk',\n    title: 'React in 100 Seconds',\n    description: 'Learn React.js fundamentals in 100 seconds. Understand components, JSX, state, and props in this quick tutorial.',\n    thumbnail: 'https://i.ytimg.com/vi/SqcY0GlETPk/maxresdefault.jpg',\n    duration: '2:31',\n    views: 1900000,\n    publishedAt: '2020-08-11T00:00:00Z',\n    channelTitle: 'Fireship',\n    channelId: 'UCsBjURrPoezykLs9EqgamOA'\n  },\n  {\n    id: 'zOjov-2OZ0E',\n    title: 'Docker Explained in 100 Seconds',\n    description: 'Docker containers explained for beginners. Learn containerization, images, and why Docker revolutionized software deployment.',\n    thumbnail: 'https://i.ytimg.com/vi/zOjov-2OZ0E/maxresdefault.jpg',\n    duration: '2:07',\n    views: 2200000,\n    publishedAt: '2021-03-15T00:00:00Z',\n    channelTitle: 'Fireship',\n    channelId: 'UCsBjURrPoezykLs9EqgamOA'\n  },\n  {\n    id: 'y8OnoxKotPQ',\n    title: 'The Complete Linux Course: Beginner to Power User!',\n    description: 'Master Linux from scratch! This comprehensive course covers command line, file systems, networking, and system administration.',\n    thumbnail: 'https://i.ytimg.com/vi/y8OnoxKotPQ/maxresdefault.jpg',\n    duration: '7:23:42',\n    views: 1400000,\n    publishedAt: '2022-01-10T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'ROjZy1WbCIA',\n    title: 'Vim Basics in 8 Minutes',\n    description: 'Learn Vim text editor basics in 8 minutes. Essential commands, modes, and tips to become productive with Vim.',\n    thumbnail: 'https://i.ytimg.com/vi/ROjZy1WbCIA/maxresdefault.jpg',\n    duration: '8:12',\n    views: 890000,\n    publishedAt: '2021-09-22T00:00:00Z',\n    channelTitle: 'tutoriaLinux',\n    channelId: 'UCvA_wgsX6eFAOXI8Rbg_WiQ'\n  },\n  {\n    id: 'SPTfmiYiuok',\n    title: 'Learn Python - Full Course for Beginners [Tutorial]',\n    description: 'Complete Python tutorial for beginners. Learn programming fundamentals, data types, functions, and object-oriented programming.',\n    thumbnail: 'https://i.ytimg.com/vi/SPTfmiYiuok/maxresdefault.jpg',\n    duration: '4:26:52',\n    views: 25000000,\n    publishedAt: '2018-07-11T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'PkZNo7MFNFg',\n    title: 'Learn JavaScript - Full Course for Beginners',\n    description: 'Complete JavaScript course covering ES6+, DOM manipulation, async programming, and modern development practices.',\n    thumbnail: 'https://i.ytimg.com/vi/PkZNo7MFNFg/maxresdefault.jpg',\n    duration: '3:26:41',\n    views: 18000000,\n    publishedAt: '2018-12-18T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'ZtqBQ68cfJc',\n    title: 'Node.js Tutorial for Beginners: Learn Node in 1 Hour',\n    description: 'Complete Node.js tutorial covering modules, npm, Express.js, and building REST APIs. Perfect for backend development.',\n    thumbnail: 'https://i.ytimg.com/vi/ZtqBQ68cfJc/maxresdefault.jpg',\n    duration: '1:08:35',\n    views: 3200000,\n    publishedAt: '2018-01-16T00:00:00Z',\n    channelTitle: 'Programming with Mosh',\n    channelId: 'UCWv7vMbMWH4-V0ZXdmDpPBA'\n  },\n  // Gaming Videos\n  {\n    id: 'XHrskkHf958',\n    title: 'Minecraft but I survive in ONLY the Nether for 100 Days',\n    description: 'Surviving 100 days in Minecraft Nether-only challenge. Building, farming, and exploring the dangerous Nether dimension.',\n    thumbnail: 'https://i.ytimg.com/vi/XHrskkHf958/maxresdefault.jpg',\n    duration: '36:42',\n    views: 15000000,\n    publishedAt: '2021-05-15T00:00:00Z',\n    channelTitle: 'Luke TheNotable',\n    channelId: 'UC6JKng_wYLO9H_LYFGUOqKQ'\n  },\n  {\n    id: 'qmRe0fdt7Ag',\n    title: 'The History of Speedrunning',\n    description: 'Complete history of video game speedrunning from arcade era to modern world records. Featuring legendary runs and runners.',\n    thumbnail: 'https://i.ytimg.com/vi/qmRe0fdt7Ag/maxresdefault.jpg',\n    duration: '1:23:17',\n    views: 4200000,\n    publishedAt: '2020-11-03T00:00:00Z',\n    channelTitle: 'Summoning Salt',\n    channelId: 'UCtUbO6rBht0daVIOGML3c8w'\n  },\n  {\n    id: 'AjGXn249Fc0',\n    title: 'Getting Over It with Bennett Foddy - Complete Analysis',\n    description: 'Deep dive into the philosophy and design of Getting Over It. How frustration became art in this climbing simulator.',\n    thumbnail: 'https://i.ytimg.com/vi/AjGXn249Fc0/maxresdefault.jpg',\n    duration: '27:43',\n    views: 8900000,\n    publishedAt: '2017-12-08T00:00:00Z',\n    channelTitle: 'Joseph Anderson',\n    channelId: 'UCyhnYIvIKK_--PiJXCMKxQQ'\n  },\n  {\n    id: 'kpk2tdsPh0A',\n    title: 'Portal 2 - The Perpetual Testing Initiative',\n    description: 'Portal 2 level editor and community maps showcase. Creating impossible puzzles with advanced portal mechanics.',\n    thumbnail: 'https://i.ytimg.com/vi/kpk2tdsPh0A/maxresdefault.jpg',\n    duration: '19:32',\n    views: 2100000,\n    publishedAt: '2012-04-26T00:00:00Z',\n    channelTitle: 'Valve',\n    channelId: 'UCKaOkELCp-5juVQB1qKDhng'\n  },\n  // Linux and System Administration\n  {\n    id: 'V1y-mbWM3B8',\n    title: 'Linux Server Setup and Hardening',\n    description: 'Complete guide to setting up and securing a Linux server. Firewall configuration, SSH hardening, and security best practices.',\n    thumbnail: 'https://i.ytimg.com/vi/V1y-mbWM3B8/maxresdefault.jpg',\n    duration: '42:17',\n    views: 567000,\n    publishedAt: '2022-03-12T00:00:00Z',\n    channelTitle: 'NetworkChuck',\n    channelId: 'UC9x0AN7BWHpCDHSm9NiJFJQ'\n  },\n  {\n    id: 'gMsAS-mGQ_4',\n    title: 'Bash Scripting Tutorial for Beginners',\n    description: 'Learn Bash scripting from basics to advanced topics. Automation, system administration, and shell programming essentials.',\n    thumbnail: 'https://i.ytimg.com/vi/gMsAS-mGQ_4/maxresdefault.jpg',\n    duration: '1:32:45',\n    views: 890000,\n    publishedAt: '2021-08-15T00:00:00Z',\n    channelTitle: 'tutoriaLinux',\n    channelId: 'UCvA_wgsX6eFAOXI8Rbg_WiQ'\n  },\n  {\n    id: 'mBykDHjVOgU',\n    title: 'Arch Linux Installation Guide 2024',\n    description: 'Complete Arch Linux installation guide with UEFI, encryption, and desktop environment setup. From bootable USB to full system.',\n    thumbnail: 'https://i.ytimg.com/vi/mBykDHjVOgU/maxresdefault.jpg',\n    duration: '52:33',\n    views: 423000,\n    publishedAt: '2024-01-08T00:00:00Z',\n    channelTitle: 'Mental Outlaw',\n    channelId: 'UC7YOGHUfC1Tb6E4pudI9STA'\n  },\n  {\n    id: 'rOpo6CQtAuE',\n    title: 'Docker Compose Tutorial - Multi-Container Applications',\n    description: 'Master Docker Compose for multi-container applications. Microservices, databases, and orchestration made simple.',\n    thumbnail: 'https://i.ytimg.com/vi/rOpo6CQtAuE/maxresdefault.jpg',\n    duration: '28:19',\n    views: 1200000,\n    publishedAt: '2022-06-20T00:00:00Z',\n    channelTitle: 'TechWorld with Nana',\n    channelId: 'UCdngmbVKX1Tgre699-XLlUA'\n  },\n  // Additional Programming and Web Development\n  {\n    id: 'rfscVS0vtbw',\n    title: 'Learn CSS Grid in 20 Minutes',\n    description: 'Complete CSS Grid tutorial covering grid containers, grid items, responsive layouts, and advanced grid techniques.',\n    thumbnail: 'https://i.ytimg.com/vi/rfscVS0vtbw/maxresdefault.jpg',\n    duration: '21:45',\n    views: 1800000,\n    publishedAt: '2019-03-14T00:00:00Z',\n    channelTitle: 'Web Dev Simplified',\n    channelId: 'UCFbNIlppjAuEX4znoulh0Cw'\n  },\n  {\n    id: 'SqcY0GlETPk',\n    title: 'TypeScript in 100 Seconds',\n    description: 'Learn TypeScript fundamentals in 100 seconds. Static typing, interfaces, and why TypeScript is essential for large applications.',\n    thumbnail: 'https://i.ytimg.com/vi/zQnBQ4tB3ZA/maxresdefault.jpg',\n    duration: '2:15',\n    views: 3200000,\n    publishedAt: '2020-10-05T00:00:00Z',\n    channelTitle: 'Fireship',\n    channelId: 'UCsBjURrPoezykLs9EqgamOA'\n  },\n  {\n    id: 'SzJ46YA_RaA',\n    title: 'Rust Programming Course - Tutorial for Beginners',\n    description: 'Complete Rust programming tutorial covering ownership, borrowing, structs, enums, and building safe systems programming.',\n    thumbnail: 'https://i.ytimg.com/vi/SzJ46YA_RaA/maxresdefault.jpg',\n    duration: '5:59:58',\n    views: 2400000,\n    publishedAt: '2021-11-30T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: '2JYT5f2isg4',\n    title: 'API Design Best Practices',\n    description: 'Learn REST API design principles, HTTP methods, status codes, authentication, and building scalable web APIs.',\n    thumbnail: 'https://i.ytimg.com/vi/2JYT5f2isg4/maxresdefault.jpg',\n    duration: '35:42',\n    views: 1600000,\n    publishedAt: '2021-05-18T00:00:00Z',\n    channelTitle: 'Programming with Mosh',\n    channelId: 'UCWv7vMbMWH4-V0ZXdmDpPBA'\n  },\n  // Cybersecurity and Networking\n  {\n    id: 'hxI8NfHFdtc',\n    title: 'Ethical Hacking Full Course - Learn Penetration Testing!',\n    description: 'Complete ethical hacking course covering network scanning, vulnerability assessment, exploitation, and security fundamentals.',\n    thumbnail: 'https://i.ytimg.com/vi/hxI8NfHFdtc/maxresdefault.jpg',\n    duration: '15:25:36',\n    views: 3500000,\n    publishedAt: '2020-08-12T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'qmRe0fdt7Ag',\n    title: 'Network Security Essentials',\n    description: 'Learn network security fundamentals including firewalls, VPNs, intrusion detection, and securing network infrastructure.',\n    thumbnail: 'https://i.ytimg.com/vi/qmRe0fdt7Ag/maxresdefault.jpg',\n    duration: '45:23',\n    views: 890000,\n    publishedAt: '2022-09-15T00:00:00Z',\n    channelTitle: 'NetworkChuck',\n    channelId: 'UC9x0AN7BWHpCDHSm9NiJFJQ'\n  },\n  // Gaming and Entertainment\n  {\n    id: 'PDNZX2nql2Y',\n    title: 'The Last of Us Part II - Story Analysis and Review',\n    description: 'Deep dive into The Last of Us Part II narrative structure, character development, and controversial story decisions.',\n    thumbnail: 'https://i.ytimg.com/vi/PDNZX2nql2Y/maxresdefault.jpg',\n    duration: '2:15:45',\n    views: 8700000,\n    publishedAt: '2020-07-15T00:00:00Z',\n    channelTitle: 'Joseph Anderson',\n    channelId: 'UCyhnYIvIKK_--PiJXCMKxQQ'\n  },\n  {\n    id: 'BxV14h0kFs0',\n    title: 'Super Mario 64 Speedrun World Record History',\n    description: 'Complete history of Super Mario 64 120 star world record progression from 1996 to present day.',\n    thumbnail: 'https://i.ytimg.com/vi/BxV14h0kFs0/maxresdefault.jpg',\n    duration: '52:38',\n    views: 6200000,\n    publishedAt: '2018-05-22T00:00:00Z',\n    channelTitle: 'Summoning Salt',\n    channelId: 'UCtUbO6rBht0daVIOGML3c8w'\n  },\n  {\n    id: 'VjXTddVwFmw',\n    title: 'Building the Perfect Minecraft Castle',\n    description: 'Step-by-step guide to building an epic medieval castle in Minecraft with advanced building techniques and design principles.',\n    thumbnail: 'https://i.ytimg.com/vi/VjXTddVwFmw/maxresdefault.jpg',\n    duration: '28:17',\n    views: 4500000,\n    publishedAt: '2021-12-03T00:00:00Z',\n    channelTitle: 'Grian',\n    channelId: 'UCR9Gcq0CMm6YgTzsDxIoVFg'\n  },\n  // AI and Machine Learning\n  {\n    id: 'aircAruvnKk',\n    title: 'Neural Networks Explained - Machine Learning Tutorial',\n    description: 'Visual introduction to neural networks, deep learning fundamentals, and how artificial intelligence actually works.',\n    thumbnail: 'https://i.ytimg.com/vi/aircAruvnKk/maxresdefault.jpg',\n    duration: '19:13',\n    views: 9200000,\n    publishedAt: '2017-10-05T00:00:00Z',\n    channelTitle: '3Blue1Brown',\n    channelId: 'UCYO_jab_esuFRV4b17AJtAw'\n  },\n  {\n    id: 'tPYj3fFJGjk',\n    title: 'Machine Learning Full Course - Learn ML in 12 Hours',\n    description: 'Complete machine learning course covering supervised learning, unsupervised learning, neural networks, and practical projects.',\n    thumbnail: 'https://i.ytimg.com/vi/tPYj3fFJGjk/maxresdefault.jpg',\n    duration: '12:14:33',\n    views: 4800000,\n    publishedAt: '2019-11-18T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  // Mobile Development\n  {\n    id: 'VPvVD8t02Z8',\n    title: 'Flutter Course for Beginners – 37-hour Cross Platform App Development Tutorial',\n    description: 'Complete Flutter development course for building cross-platform mobile apps with Dart programming language.',\n    thumbnail: 'https://i.ytimg.com/vi/VPvVD8t02Z8/maxresdefault.jpg',\n    duration: '37:15:20',\n    views: 3600000,\n    publishedAt: '2020-09-30T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'fq4N0hgOWzU',\n    title: 'React Native Tutorial for Beginners - Build a React Native App',\n    description: 'Learn React Native development from scratch. Build cross-platform mobile apps using JavaScript and React concepts.',\n    thumbnail: 'https://i.ytimg.com/vi/fq4N0hgOWzU/maxresdefault.jpg',\n    duration: '6:11:54',\n    views: 2800000,\n    publishedAt: '2021-01-20T00:00:00Z',\n    channelTitle: 'Programming with Mosh',\n    channelId: 'UCWv7vMbMWH4-V0ZXdmDpPBA'\n  },\n  // DevOps and Cloud Computing\n  {\n    id: 'Ge6Udbqp23s',\n    title: 'AWS Tutorial for Beginners - Amazon Web Services Full Course',\n    description: 'Complete AWS tutorial covering EC2, S3, RDS, Lambda, and cloud architecture fundamentals for beginners.',\n    thumbnail: 'https://i.ytimg.com/vi/Ge6Udbqp23s/maxresdefault.jpg',\n    duration: '10:26:30',\n    views: 5200000,\n    publishedAt: '2020-04-25T00:00:00Z',\n    channelTitle: 'Edureka!',\n    channelId: 'UCkw4JCwteGrDHIsyIIKo4tQ'\n  },\n  {\n    id: 'YFl2mCHdv24',\n    title: 'Kubernetes Tutorial for Beginners [FULL COURSE in 4 Hours]',\n    description: 'Complete Kubernetes tutorial covering pods, services, deployments, and container orchestration fundamentals.',\n    thumbnail: 'https://i.ytimg.com/vi/YFl2mCHdv24/maxresdefault.jpg',\n    duration: '3:51:18',\n    views: 3900000,\n    publishedAt: '2021-07-14T00:00:00Z',\n    channelTitle: 'TechWorld with Nana',\n    channelId: 'UCdngmbVKX1Tgre699-XLlUA'\n  },\n  // Data Science and Analytics\n  {\n    id: 'ua-CiDNNj30',\n    title: 'Data Science Full Course - Learn Data Science in 12 Hours',\n    description: 'Complete data science course covering Python, pandas, matplotlib, machine learning, and data visualization.',\n    thumbnail: 'https://i.ytimg.com/vi/ua-CiDNNj30/maxresdefault.jpg',\n    duration: '12:08:42',\n    views: 7300000,\n    publishedAt: '2019-05-08T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  },\n  {\n    id: 'GPVsHOlRBBI',\n    title: 'SQL Tutorial - Full Database Course for Beginners',\n    description: 'Complete SQL course covering database design, queries, joins, stored procedures, and database management.',\n    thumbnail: 'https://i.ytimg.com/vi/GPVsHOlRBBI/maxresdefault.jpg',\n    duration: '4:20:33',\n    views: 9800000,\n    publishedAt: '2018-12-18T00:00:00Z',\n    channelTitle: 'freeCodeCamp.org',\n    channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n  }\n];\n\n// Sample playlists with gaming series\nconst samplePlaylists: Playlist[] = [\n  // Keeping minimal playlists for navigation only\n  {\n    id: 'playlist1',\n    title: 'DanTDM Minecraft Hardcore Series',\n    description: 'Follow DanTDM\\'s epic Minecraft Hardcore journey from the beginning! Watch as he builds, explores, and survives in the most challenging Minecraft mode.',\n    creator: 'DanTDM',\n    creatorId: 'UC4rqhyiTs7XyuODcECvuiiQ',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 25,\n    totalDuration: '8:45:30',\n    createdAt: '2023-01-15T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'hardcore1',\n        title: 'Starting My HARDCORE Minecraft World!',\n        description: 'Welcome to my new Minecraft Hardcore series! One life, no respawning - let\\'s see how far we can go!',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '20:45',\n        views: 3200000,\n        publishedAt: '2023-01-15T00:00:00Z',\n        channelTitle: 'DanTDM',\n        channelId: 'UC4rqhyiTs7XyuODcECvuiiQ'\n      },\n      {\n        id: 'hardcore2',\n        title: 'Building My First Base in Hardcore!',\n        description: 'Setting up my starter base and gathering essential resources for survival in this hardcore world.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '18:32',\n        views: 2800000,\n        publishedAt: '2023-01-18T00:00:00Z',\n        channelTitle: 'DanTDM',\n        channelId: 'UC4rqhyiTs7XyuODcECvuiiQ'\n      },\n      {\n        id: 'hardcore3',\n        title: 'First Nether Trip in Hardcore Mode!',\n        description: 'Taking my first dangerous trip to the Nether in hardcore mode - will I make it back alive?',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '25:17',\n        views: 3500000,\n        publishedAt: '2023-01-22T00:00:00Z',\n        channelTitle: 'DanTDM',\n        channelId: 'UC4rqhyiTs7XyuODcECvuiiQ'\n      }\n    ]\n  },\n  {\n    id: 'playlist2',\n    title: 'Team Fortress 2 SFM Masterpieces',\n    description: 'The best Source Filmmaker animations featuring Team Fortress 2 characters in epic adventures and comedic situations.',\n    creator: 'SFM Community',\n    creatorId: 'community',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 15,\n    totalDuration: '2:30:45',\n    createdAt: '2023-02-01T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'sfm1',\n        title: 'Heavy\\'s Sandwich Adventure [SFM]',\n        description: 'Heavy goes on an epic quest to find the perfect sandwich ingredients in this hilarious SFM animation.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '8:24',\n        views: 1200000,\n        publishedAt: '2023-02-01T00:00:00Z',\n        channelTitle: 'SFM Animator',\n        channelId: 'sfm_channel'\n      },\n      {\n        id: 'sfm2',\n        title: 'Spy vs Engineer: The Ultimate Battle [SFM]',\n        description: 'An intense showdown between Spy and Engineer featuring amazing action sequences and plot twists.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '12:15',\n        views: 2100000,\n        publishedAt: '2023-02-05T00:00:00Z',\n        channelTitle: 'TF2 SFM Pro',\n        channelId: 'tf2_sfm_channel'\n      }\n    ]\n  },\n  {\n    id: 'playlist3',\n    title: 'Programming Tutorial Marathon',\n    description: 'Complete programming courses from beginner to advanced. Master JavaScript, Python, and web development.',\n    creator: 'freeCodeCamp.org',\n    creatorId: 'UC8butISFwT-Wl7EV0hUK0BQ',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 20,\n    totalDuration: '45:30:00',\n    createdAt: '2023-03-01T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'prog1',\n        title: 'JavaScript Full Course for Beginners',\n        description: 'Learn JavaScript from scratch with this comprehensive tutorial covering all the fundamentals.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '3:26:41',\n        views: 8900000,\n        publishedAt: '2023-03-01T00:00:00Z',\n        channelTitle: 'freeCodeCamp.org',\n        channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n      },\n      {\n        id: 'prog2',\n        title: 'Python for Everybody - Complete Course',\n        description: 'Master Python programming with this complete course covering data structures, web scraping, and databases.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '4:20:17',\n        views: 6700000,\n        publishedAt: '2023-03-05T00:00:00Z',\n        channelTitle: 'freeCodeCamp.org',\n        channelId: 'UC8butISFwT-Wl7EV0hUK0BQ'\n      }\n    ]\n  },\n  {\n    id: 'playlist4',\n    title: 'Roblox Adventures Collection',\n    description: 'Epic Roblox gameplay featuring the most popular games including Adopt Me, Arsenal, and Jailbreak adventures.',\n    creator: 'Roblox Gamer',\n    creatorId: 'roblox_gamer',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 30,\n    totalDuration: '12:15:30',\n    createdAt: '2023-04-01T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'roblox1',\n        title: 'GETTING THE RAREST PET IN ADOPT ME!',\n        description: 'Spending 24 hours trying to get the legendary diamond pet in Adopt Me - will I succeed?',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '15:42',\n        views: 4200000,\n        publishedAt: '2023-04-01T00:00:00Z',\n        channelTitle: 'Roblox Gamer',\n        channelId: 'roblox_gamer'\n      },\n      {\n        id: 'roblox2',\n        title: 'ESCAPING PRISON IN JAILBREAK!',\n        description: 'The ultimate jailbreak challenge - can I escape the maximum security prison and pull off the biggest heist?',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '22:18',\n        views: 3800000,\n        publishedAt: '2023-04-05T00:00:00Z',\n        channelTitle: 'Roblox Gamer',\n        channelId: 'roblox_gamer'\n      }\n    ]\n  },\n  {\n    id: 'playlist5',\n    title: 'Pride Month Celebration 2024',\n    description: 'Celebrating diversity, love, and acceptance with content from LGBTQ+ creators and allies. Stories of courage, creativity, and community.',\n    creator: 'VideoTube Community',\n    creatorId: 'videotube_official',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 15,\n    totalDuration: '6:20:45',\n    createdAt: '2024-06-01T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'pride1',\n        title: 'The History of Pride: 55 Years of Progress',\n        description: 'A comprehensive look at the history of Pride Month, from Stonewall to today. Understanding the journey of LGBTQ+ rights and celebration.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '25:30',\n        views: 2100000,\n        publishedAt: '2024-06-01T00:00:00Z',\n        channelTitle: 'History Explained',\n        channelId: 'history_channel'\n      },\n      {\n        id: 'pride2',\n        title: 'Coming Out Stories: Courage and Love',\n        description: 'Heartwarming and inspiring coming out stories from people around the world. Celebrating authenticity and the power of being true to yourself.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '18:45',\n        views: 1800000,\n        publishedAt: '2024-06-03T00:00:00Z',\n        channelTitle: 'Stories of Hope',\n        channelId: 'stories_hope'\n      },\n      {\n        id: 'pride3',\n        title: 'Rainbow Coding: Building Inclusive Tech',\n        description: 'How LGBTQ+ developers are creating more inclusive technology and fostering diversity in the tech industry.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '32:15',\n        views: 950000,\n        publishedAt: '2024-06-05T00:00:00Z',\n        channelTitle: 'Tech for Everyone',\n        channelId: 'tech_inclusive'\n      },\n      {\n        id: 'pride4',\n        title: 'Pride Around the World: Global Celebrations',\n        description: 'A beautiful journey through Pride celebrations across different countries and cultures, showcasing the universal language of love and acceptance.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '28:20',\n        views: 3200000,\n        publishedAt: '2024-06-07T00:00:00Z',\n        channelTitle: 'World Celebrations',\n        channelId: 'world_events'\n      },\n      {\n        id: 'pride5',\n        title: 'Creating Safe Spaces: Building Inclusive Communities',\n        description: 'How to create and maintain safe, welcoming spaces for LGBTQ+ individuals in schools, workplaces, and communities.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '22:35',\n        views: 1400000,\n        publishedAt: '2024-06-10T00:00:00Z',\n        channelTitle: 'Community Building',\n        channelId: 'safe_spaces'\n      }\n    ]\n  },\n  {\n    id: 'playlist6',\n    title: 'Ultimate Gaming Collection',\n    description: 'The best gaming content across all genres - from epic gameplay moments to pro strategies, speedruns, and gaming culture.',\n    creator: 'Gaming Central',\n    creatorId: 'gaming_central',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 50,\n    totalDuration: '18:45:30',\n    createdAt: '2024-01-15T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'game1',\n        title: 'Minecraft: Building the Ultimate Castle - 24 Hour Build',\n        description: 'Watch as we construct an incredible medieval castle in Minecraft, complete with working mechanisms, hidden rooms, and epic detail.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '45:20',\n        views: 8500000,\n        publishedAt: '2024-03-15T00:00:00Z',\n        channelTitle: 'BuildCraft Masters',\n        channelId: 'buildcraft_masters'\n      },\n      {\n        id: 'game2',\n        title: 'Elden Ring: No Death Challenge - World Record Attempt',\n        description: 'Attempting the impossible - completing Elden Ring without dying once. Watch every boss fight and strategy unfold.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '3:42:15',\n        views: 12300000,\n        publishedAt: '2024-02-20T00:00:00Z',\n        channelTitle: 'Challenge Gamers',\n        channelId: 'challenge_gamers'\n      },\n      {\n        id: 'game3',\n        title: 'Valorant: From Bronze to Radiant - Complete Guide',\n        description: 'A comprehensive guide covering everything you need to know to climb from Bronze to Radiant rank in Valorant.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '28:45',\n        views: 5600000,\n        publishedAt: '2024-04-10T00:00:00Z',\n        channelTitle: 'Tactical FPS Pro',\n        channelId: 'tactical_fps'\n      },\n      {\n        id: 'game4',\n        title: 'Cyberpunk 2077: Hidden Secrets and Easter Eggs',\n        description: 'Discover the most amazing hidden secrets, easter eggs, and details you missed in Cyberpunk 2077.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '35:30',\n        views: 7200000,\n        publishedAt: '2024-01-25T00:00:00Z',\n        channelTitle: 'Game Mysteries',\n        channelId: 'game_mysteries'\n      },\n      {\n        id: 'game5',\n        title: 'Among Us: 200 IQ Impostor Plays Compilation',\n        description: 'The most genius, creative, and mind-blowing impostor plays ever seen in Among Us. These strategies will amaze you.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '22:15',\n        views: 15800000,\n        publishedAt: '2024-03-05T00:00:00Z',\n        channelTitle: 'Social Gaming Hub',\n        channelId: 'social_gaming'\n      },\n      {\n        id: 'game6',\n        title: 'Fortnite: Zero Build Victory Royale Strategies',\n        description: 'Master the art of winning in Fortnite Zero Build mode with positioning, weapon choice, and rotation strategies.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '16:45',\n        views: 4200000,\n        publishedAt: '2024-04-01T00:00:00Z',\n        channelTitle: 'Battle Royale Pro',\n        channelId: 'br_pro'\n      },\n      {\n        id: 'game7',\n        title: 'Apex Legends: Movement Tech That Pros Use',\n        description: 'Advanced movement techniques including wall-bouncing, tap-strafing, and momentum conservation in Apex Legends.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '24:30',\n        views: 6800000,\n        publishedAt: '2024-03-28T00:00:00Z',\n        channelTitle: 'Apex Movement Guide',\n        channelId: 'apex_movement'\n      },\n      {\n        id: 'game8',\n        title: 'Genshin Impact: Free-to-Play Team Building Guide',\n        description: 'Build powerful teams using only free characters and weapons in Genshin Impact. Perfect for F2P players.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '33:20',\n        views: 8900000,\n        publishedAt: '2024-02-14T00:00:00Z',\n        channelTitle: 'Genshin F2P Guide',\n        channelId: 'genshin_f2p'\n      },\n      {\n        id: 'game9',\n        title: 'Rocket League: From Gold to Champion Mechanics',\n        description: 'Essential mechanical skills to master for climbing from Gold to Champion rank in Rocket League.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '28:15',\n        views: 5600000,\n        publishedAt: '2024-04-08T00:00:00Z',\n        channelTitle: 'Rocket League Academy',\n        channelId: 'rl_academy'\n      },\n      {\n        id: 'game10',\n        title: 'The Witcher 3: Hidden Quests and Secrets',\n        description: 'Discover the most obscure and rewarding hidden quests, easter eggs, and secrets in The Witcher 3.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '41:50',\n        views: 12700000,\n        publishedAt: '2024-01-18T00:00:00Z',\n        channelTitle: 'RPG Secrets',\n        channelId: 'rpg_secrets'\n      }\n    ]\n  },\n  {\n    id: 'playlist7',\n    title: 'PC Building & Tech Mastery',\n    description: 'Everything you need to know about building, upgrading, and optimizing PCs. From budget builds to extreme gaming rigs.',\n    creator: 'Tech Builder Pro',\n    creatorId: 'tech_builder_pro',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 35,\n    totalDuration: '12:30:45',\n    createdAt: '2024-01-10T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'pc1',\n        title: 'Building a $500 Gaming PC That Beats Consoles',\n        description: 'Step-by-step guide to building an incredible budget gaming PC that outperforms PS5 and Xbox Series X.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '32:45',\n        views: 9800000,\n        publishedAt: '2024-02-15T00:00:00Z',\n        channelTitle: 'Budget PC Builds',\n        channelId: 'budget_pc'\n      },\n      {\n        id: 'pc2',\n        title: 'RTX 4090 vs RTX 4080: Ultimate Comparison',\n        description: 'Comprehensive testing and comparison between RTX 4090 and RTX 4080 across 50+ games and applications.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '25:30',\n        views: 6700000,\n        publishedAt: '2024-03-20T00:00:00Z',\n        channelTitle: 'GPU Reviews Pro',\n        channelId: 'gpu_reviews'\n      },\n      {\n        id: 'pc3',\n        title: 'Custom Water Cooling Loop - Complete Build Guide',\n        description: 'Learn how to build a custom water cooling loop from scratch. Covering planning, installation, and troubleshooting.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '48:20',\n        views: 4200000,\n        publishedAt: '2024-01-30T00:00:00Z',\n        channelTitle: 'Cooling Solutions',\n        channelId: 'cooling_tech'\n      },\n      {\n        id: 'pc4',\n        title: 'Cable Management: From Mess to Masterpiece',\n        description: 'Transform your messy PC build into a clean, professional-looking masterpiece with proper cable management techniques.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '18:45',\n        views: 3800000,\n        publishedAt: '2024-04-05T00:00:00Z',\n        channelTitle: 'Clean Build Guide',\n        channelId: 'clean_builds'\n      },\n      {\n        id: 'pc5',\n        title: 'AMD vs Intel: 2024 CPU Battle Royale',\n        description: 'The ultimate showdown between AMD and Intel CPUs across gaming, productivity, and value metrics.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '35:15',\n        views: 8900000,\n        publishedAt: '2024-02-28T00:00:00Z',\n        channelTitle: 'CPU Benchmark Lab',\n        channelId: 'cpu_lab'\n      },\n      {\n        id: 'pc6',\n        title: 'DDR5 vs DDR4: Is the Upgrade Worth It?',\n        description: 'Comprehensive testing of DDR5 vs DDR4 memory across gaming, productivity, and synthetic benchmarks.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '22:30',\n        views: 5400000,\n        publishedAt: '2024-03-18T00:00:00Z',\n        channelTitle: 'Memory Tech Reviews',\n        channelId: 'memory_tech'\n      },\n      {\n        id: 'pc7',\n        title: 'First Time PC Builder? Avoid These 10 Mistakes',\n        description: 'Common mistakes new PC builders make and how to avoid them. Save money and prevent headaches.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '19:45',\n        views: 11200000,\n        publishedAt: '2024-01-22T00:00:00Z',\n        channelTitle: 'PC Building 101',\n        channelId: 'pc_building_101'\n      },\n      {\n        id: 'pc8',\n        title: 'PSU Calculator: How Much Power Do You Really Need?',\n        description: 'Learn how to properly calculate PSU requirements and choose the right power supply for your build.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '16:20',\n        views: 3800000,\n        publishedAt: '2024-04-12T00:00:00Z',\n        channelTitle: 'Power Supply Guide',\n        channelId: 'psu_guide'\n      },\n      {\n        id: 'pc9',\n        title: 'Motherboard Features Explained: What You Need to Know',\n        description: 'Decode motherboard specifications and features to choose the perfect board for your needs.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '27:10',\n        views: 6700000,\n        publishedAt: '2024-02-08T00:00:00Z',\n        channelTitle: 'Motherboard Masters',\n        channelId: 'mobo_masters'\n      },\n      {\n        id: 'pc10',\n        title: 'SSD vs HDD vs NVMe: Storage Showdown 2024',\n        description: 'Complete comparison of storage technologies including speed tests, capacity, and value analysis.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '24:55',\n        views: 8100000,\n        publishedAt: '2024-03-22T00:00:00Z',\n        channelTitle: 'Storage Solutions',\n        channelId: 'storage_solutions'\n      }\n    ]\n  },\n  {\n    id: 'playlist8',\n    title: 'Indie Gaming Gems',\n    description: 'Discover amazing indie games that deserve more attention. Hidden gems, innovative gameplay, and artistic masterpieces.',\n    creator: 'Indie Explorer',\n    creatorId: 'indie_explorer',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 25,\n    totalDuration: '8:15:30',\n    createdAt: '2024-02-01T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'indie1',\n        title: 'Hollow Knight: Why This Indie Game Is Perfect',\n        description: 'Deep dive into what makes Hollow Knight one of the greatest indie games ever created. Exploring mechanics, art, and design.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '28:30',\n        views: 5400000,\n        publishedAt: '2024-02-15T00:00:00Z',\n        channelTitle: 'Indie Game Analysis',\n        channelId: 'indie_analysis'\n      },\n      {\n        id: 'indie2',\n        title: 'Celeste: How Difficulty Creates Meaning',\n        description: 'An exploration of how Celeste uses challenging gameplay to tell a powerful story about mental health and perseverance.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '22:45',\n        views: 3200000,\n        publishedAt: '2024-03-01T00:00:00Z',\n        channelTitle: 'Games as Art',\n        channelId: 'games_art'\n      },\n      {\n        id: 'indie3',\n        title: 'Hades: The Perfect Roguelike Formula',\n        description: 'Breaking down what makes Hades the gold standard for roguelike games and narrative design.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '26:15',\n        views: 4800000,\n        publishedAt: '2024-02-20T00:00:00Z',\n        channelTitle: 'Roguelike Reviews',\n        channelId: 'roguelike_reviews'\n      },\n      {\n        id: 'indie4',\n        title: 'Stardew Valley: The Ultimate Relaxation Game',\n        description: 'Why Stardew Valley became the perfect escape game and how it revolutionized farming simulators.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '31:20',\n        views: 6100000,\n        publishedAt: '2024-03-10T00:00:00Z',\n        channelTitle: 'Cozy Gaming',\n        channelId: 'cozy_gaming'\n      }\n    ]\n  },\n  {\n    id: 'playlist9',\n    title: 'Esports & Competitive Gaming',\n    description: 'Professional gaming highlights, tournament coverage, and competitive strategy guides from the biggest esports titles.',\n    creator: 'Esports Central',\n    creatorId: 'esports_central',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 40,\n    totalDuration: '15:20:15',\n    createdAt: '2024-01-20T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'esport1',\n        title: 'League of Legends Worlds 2024: Most Epic Plays',\n        description: 'The most incredible, game-changing plays from the League of Legends World Championship 2024.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '42:30',\n        views: 18500000,\n        publishedAt: '2024-04-15T00:00:00Z',\n        channelTitle: 'LoL Esports',\n        channelId: 'lol_esports'\n      },\n      {\n        id: 'esport2',\n        title: 'CS2: Pro Movement and Aim Training Guide',\n        description: 'Learn movement techniques and aim training routines used by professional Counter-Strike 2 players.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '38:45',\n        views: 7800000,\n        publishedAt: '2024-03-25T00:00:00Z',\n        channelTitle: 'CS Pro Tips',\n        channelId: 'cs_pro'\n      },\n      {\n        id: 'esport3',\n        title: 'Dota 2: The International 2024 Grand Finals',\n        description: 'Complete coverage of the most intense Dota 2 International grand finals match ever played.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '2:15:20',\n        views: 12300000,\n        publishedAt: '2024-04-20T00:00:00Z',\n        channelTitle: 'Dota Pro Scene',\n        channelId: 'dota_pro'\n      }\n    ]\n  },\n  {\n    id: 'playlist10',\n    title: 'Advanced PC Building & Overclocking',\n    description: 'Master-level PC building techniques, extreme overclocking, and custom modifications for enthusiasts.',\n    creator: 'Extreme PC Builds',\n    creatorId: 'extreme_pc',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 30,\n    totalDuration: '14:45:30',\n    createdAt: '2024-02-05T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'extremepc1',\n        title: 'Building a $10,000 Dream Gaming Setup',\n        description: 'Complete build process for the ultimate gaming setup with custom desk, lighting, and top-tier components.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '58:30',\n        views: 14200000,\n        publishedAt: '2024-03-30T00:00:00Z',\n        channelTitle: 'Dream Builds',\n        channelId: 'dream_builds'\n      },\n      {\n        id: 'extremepc2',\n        title: 'Liquid Nitrogen Overclocking: Breaking World Records',\n        description: 'Watch extreme overclocking with liquid nitrogen cooling, pushing hardware beyond its limits.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '35:45',\n        views: 5600000,\n        publishedAt: '2024-02-18T00:00:00Z',\n        channelTitle: 'Extreme OC',\n        channelId: 'extreme_oc'\n      },\n      {\n        id: 'extremepc3',\n        title: 'Silent PC Build: Zero Noise Gaming Machine',\n        description: 'Building the quietest gaming PC possible while maintaining maximum performance.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '41:20',\n        views: 7300000,\n        publishedAt: '2024-03-12T00:00:00Z',\n        channelTitle: 'Silent Computing',\n        channelId: 'silent_pc'\n      },\n      {\n        id: 'extremepc4',\n        title: 'Mini-ITX Beast: Max Power in Minimum Space',\n        description: 'Cramming flagship performance into the smallest possible form factor with innovative cooling solutions.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '44:15',\n        views: 9100000,\n        publishedAt: '2024-02-25T00:00:00Z',\n        channelTitle: 'Small Form Factor',\n        channelId: 'sff_builds'\n      }\n    ]\n  },\n  {\n    id: 'playlist11',\n    title: 'Retro Gaming Revival',\n    description: 'Celebrating classic games, retro hardware, and gaming history. From arcade classics to console generations.',\n    creator: 'Retro Gaming Hub',\n    creatorId: 'retro_gaming',\n    thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n    videoCount: 45,\n    totalDuration: '16:30:45',\n    createdAt: '2024-01-25T00:00:00Z',\n    isPublic: true,\n    videos: [\n      {\n        id: 'retro1',\n        title: 'Nintendo 64: The Console That Changed Gaming Forever',\n        description: 'Exploring how the Nintendo 64 revolutionized 3D gaming and influenced an entire generation.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '38:20',\n        views: 8900000,\n        publishedAt: '2024-02-10T00:00:00Z',\n        channelTitle: 'Console History',\n        channelId: 'console_history'\n      },\n      {\n        id: 'retro2',\n        title: 'Arcade Perfect: Recreating Classic Arcade Cabinets',\n        description: 'Building authentic arcade cabinets and restoring classic arcade machines to their original glory.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '52:15',\n        views: 4700000,\n        publishedAt: '2024-03-05T00:00:00Z',\n        channelTitle: 'Arcade Revival',\n        channelId: 'arcade_revival'\n      },\n      {\n        id: 'retro3',\n        title: 'PlayStation vs Saturn vs N64: The Console War of 1996',\n        description: 'Deep dive into the epic console battle that shaped modern gaming.',\n        thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/maxresdefault.jpg',\n        duration: '46:30',\n        views: 6200000,\n        publishedAt: '2024-01-30T00:00:00Z',\n        channelTitle: 'Gaming History',\n        channelId: 'gaming_history'\n      }\n    ]\n  }\n];\n\nexport const VideoTube: FC = () => {\n  const [currentView, setCurrentView] = useState<'home' | 'watch' | 'upload' | 'profile' | 'playlists' | 'playlist'>('home');\n  const [selectedPlaylist, setSelectedPlaylist] = useState<Playlist | null>(null);\n  const [selectedVideo, setSelectedVideo] = useState<YouTubeVideo | null>(null);\n  const [currentUser, setCurrentUser] = useState<User>(sampleUsers[0]);\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [newComment, setNewComment] = useState('');\n  const [subscribedChannels, setSubscribedChannels] = useState<Set<string>>(new Set());\n  const [likedVideos, setLikedVideos] = useState<Set<string>>(new Set());\n  const [dislikedVideos, setDislikedVideos] = useState<Set<string>>(new Set());\n  const [likeAnimation, setLikeAnimation] = useState<string | null>(null);\n\n  const queryClient = useQueryClient();\n\n  // Try to fetch YouTube videos, fallback to sample data\n  const { data: youtubeVideos, isLoading, error } = useQuery({\n    queryKey: ['/api/youtube/popular'],\n    queryFn: async () => {\n      const response = await fetch('/api/youtube/popular?maxResults=30');\n      if (!response.ok) {\n        throw new Error('Failed to fetch YouTube videos');\n      }\n      return response.json();\n    },\n    staleTime: 5 * 60 * 1000,\n    retry: false\n  });\n\n  // Use YouTube videos if available, otherwise use fallback\n  const videos: YouTubeVideo[] = youtubeVideos || fallbackVideos;\n\n  const handleRefresh = () => {\n    queryClient.invalidateQueries({ queryKey: ['/api/youtube/popular'] });\n  };\n\n  // Generate sample comments for selected video\n  useEffect(() => {\n    if (selectedVideo) {\n      const sampleComments: Comment[] = [\n        {\n          id: 'comment1',\n          videoId: selectedVideo.id,\n          author: sampleUsers[1],\n          text: 'Great video! Really helpful content.',\n          timestamp: '2 hours ago',\n          likes: 15,\n          replies: []\n        },\n        {\n          id: 'comment2',\n          videoId: selectedVideo.id,\n          author: sampleUsers[2],\n          text: 'Thanks for sharing this!',\n          timestamp: '5 hours ago',\n          likes: 8,\n          replies: []\n        }\n      ];\n      setComments(sampleComments);\n    }\n  }, [selectedVideo]);\n\n  const formatViews = (views: number) => {\n    if (views >= 1000000000) return `${(views / 1000000000).toFixed(1)}B`;\n    if (views >= 1000000) return `${(views / 1000000).toFixed(1)}M`;\n    if (views >= 1000) return `${(views / 1000).toFixed(1)}K`;\n    return views.toString();\n  };\n\n  const formatDate = (dateString: string) => {\n    const date = new Date(dateString);\n    const now = new Date();\n    const diffTime = Math.abs(now.getTime() - date.getTime());\n    const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays === 0) return 'Today';\n    if (diffDays === 1) return '1 day ago';\n    if (diffDays < 7) return `${diffDays} days ago`;\n    if (diffDays < 30) return `${Math.floor(diffDays / 7)} weeks ago`;\n    if (diffDays < 365) return `${Math.floor(diffDays / 30)} months ago`;\n    return `${Math.floor(diffDays / 365)} years ago`;\n  };\n\n  const handleVideoClick = (video: YouTubeVideo) => {\n    setSelectedVideo(video);\n    setCurrentView('watch');\n  };\n\n  const handleLike = (videoId: string) => {\n    if (dislikedVideos.has(videoId)) {\n      setDislikedVideos(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(videoId);\n        return newSet;\n      });\n    }\n    \n    if (likedVideos.has(videoId)) {\n      setLikedVideos(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(videoId);\n        return newSet;\n      });\n    } else {\n      setLikedVideos(prev => new Set(prev).add(videoId));\n      setLikeAnimation(videoId);\n      setTimeout(() => setLikeAnimation(null), 1000);\n    }\n  };\n\n  const handleDislike = (videoId: string) => {\n    if (likedVideos.has(videoId)) {\n      setLikedVideos(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(videoId);\n        return newSet;\n      });\n    }\n    \n    if (dislikedVideos.has(videoId)) {\n      setDislikedVideos(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(videoId);\n        return newSet;\n      });\n    } else {\n      setDislikedVideos(prev => new Set(prev).add(videoId));\n    }\n  };\n\n  const handleSubscribe = (channelId: string) => {\n    if (subscribedChannels.has(channelId)) {\n      setSubscribedChannels(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(channelId);\n        return newSet;\n      });\n    } else {\n      setSubscribedChannels(prev => new Set(prev).add(channelId));\n    }\n  };\n\n  const handleAddComment = () => {\n    if (newComment.trim() && selectedVideo) {\n      const comment: Comment = {\n        id: `comment-${Date.now()}`,\n        videoId: selectedVideo.id,\n        author: currentUser,\n        text: newComment,\n        timestamp: 'Just now',\n        likes: 0,\n        replies: []\n      };\n      setComments(prev => [comment, ...prev]);\n      setNewComment('');\n    }\n  };\n\n  const handleUserSwitch = (user: User) => {\n    setCurrentUser(user);\n  };\n\n  const getChannelAvatar = (channelId: string, channelTitle: string) => {\n    const avatarMap: { [key: string]: string } = {\n      // Programming and Tech Channels\n      'UCsBjURrPoezykLs9EqgamOA': 'https://yt3.ggpht.com/ytc/AIdro_mNKzQhPnbKVAJ7_h1B2gBRpkOCQYbJHGQotFqKGGXTrA=s176-c-k-c0x00ffffff-no-rj', // Fireship\n      'UC8butISFwT-Wl7EV0hUK0BQ': 'https://yt3.ggpht.com/ytc/AIdro_n8vw7YcXiNWqBKFJBRayR_A3BI-Gh04AGSdPMjUJHikg=s176-c-k-c0x00ffffff-no-rj', // freeCodeCamp\n      'UCWv7vMbMWH4-V0ZXdmDpPBA': 'https://yt3.ggpht.com/ytc/AIdro_lB1xeDWG0JgNaLOBhppKnHDc_Sn8s_7A0RM1t7RyMtfw=s176-c-k-c0x00ffffff-no-rj', // Programming with Mosh\n      'UC9x0AN7BWHpCDHSm9NiJFJQ': 'https://yt3.ggpht.com/ytc/AIdro_mQdkW-TM5K34AhT2JQ9MnZOGY8Kj-bfD4LyPGQ9LpTtw=s176-c-k-c0x00ffffff-no-rj', // NetworkChuck\n      'UCvA_wgsX6eFAOXI8Rbg_WiQ': 'https://yt3.ggpht.com/ytc/AIdro_l9rCVAI8ZQPjCnTqvzGtDj5vG-8_dH6zQQ9XrS9Q9c1Q=s176-c-k-c0x00ffffff-no-rj', // tutoriaLinux\n      'UC7YOGHUfC1Tb6E4pudI9STA': 'https://yt3.ggpht.com/ytc/AIdro_kAqJ_rJsNL5xpvXsJ3hF6XJ8Qg4w_K1yV6cBmSm_dB7A=s176-c-k-c0x00ffffff-no-rj', // Mental Outlaw\n      'UCdngmbVKX1Tgre699-XLlUA': 'https://yt3.ggpht.com/ytc/AIdro_mF6vGpBgHY8QH8jGtJ4wQF2L3m9K8pJk6qW5VxEr6TdA=s176-c-k-c0x00ffffff-no-rj', // TechWorld with Nana\n      'UCFbNIlppjAuEX4znoulh0Cw': 'https://yt3.ggpht.com/ytc/AIdro_kF8vH9mNpzGHJ4R2L3bQ9tP1xVzC6nT8YrF7dQ5w=s176-c-k-c0x00ffffff-no-rj', // Web Dev Simplified\n      'UCYO_jab_esuFRV4b17AJtAw': 'https://yt3.ggpht.com/ytc/AIdro_mG7K8Q4wV6pJ2tS8L1RhN3qG7bP0xVzC5mT4YrF6dQ1w=s176-c-k-c0x00ffffff-no-rj', // 3Blue1Brown\n      'UCkw4JCwteGrDHIsyIIKo4tQ': 'https://yt3.ggpht.com/ytc/AIdro_nH9L8Q6wV8pJ4tS0L3RhG5qN9bP2xVzC8mT6YrF8dQ3w=s176-c-k-c0x00ffffff-no-rj', // Edureka!\n      \n      // Gaming Channels\n      'UC6JKng_wYLO9H_LYFGUOqKQ': 'https://yt3.ggpht.com/ytc/AIdro_nG8hJ3dK6V8qMpS4FxQ2L7vB9tN1cQzR8kP5YxF9mXwA=s176-c-k-c0x00ffffff-no-rj', // Luke TheNotable\n      'UCtUbO6rBht0daVIOGML3c8w': 'https://yt3.ggpht.com/ytc/AIdro_lQ5M8vJ2kF7wPqJ8R6QhG4tN9bL1xVzC8mS9KpT5dA2w=s176-c-k-c0x00ffffff-no-rj', // Summoning Salt\n      'UCyhnYIvIKK_--PiJXCMKxQQ': 'https://yt3.ggpht.com/ytc/AIdro_mB9K5L8wQ6vF3pS7J1RhN4qG8tP2xVzC9nT6YrF8dQ3w=s176-c-k-c0x00ffffff-no-rj', // Joseph Anderson\n      'UCKaOkELCp-5juVQB1qKDhng': 'https://yt3.ggpht.com/ytc/AIdro_nF6K8Q5wV7pJ3tS9L2RhG4qN8bP1xVzC7mT5YrF9dQ2w=s176-c-k-c0x00ffffff-no-rj', // Valve\n      'UCR9Gcq0CMm6YgTzsDxIoVFg': 'https://yt3.ggpht.com/ytc/AIdro_mJ0L8Q7wV9pJ5tS2L4RhG6qN0bP3xVzC9mT7YrF0dQ4w=s176-c-k-c0x00ffffff-no-rj', // Grian\n      \n      // Music Artists\n      'UCuAXFkgsw1L7xaCfnd5JJOw': 'https://yt3.ggpht.com/ytc/AIdro_lK1M8Q8wV0pJ6tS3L5RhG7qN1bP4xVzC0mT8YrF1dQ5w=s176-c-k-c0x00ffffff-no-rj', // Rick Astley\n      'UCiMhD4jzUqG-IgPzUmmytRQ': 'https://yt3.ggpht.com/ytc/AIdro_mL2N8Q9wV1pJ7tS4L6RhG8qN2bP5xVzC1mT9YrF2dQ6w=s176-c-k-c0x00ffffff-no-rj', // Queen Official\n      'UCLp3yEOdE6Cwe1D3xqKiPBw': 'https://yt3.ggpht.com/ytc/AIdro_nM3O8Q0wV2pJ8tS5L7RhG9qN3bP6xVzC2mT0YrF3dQ7w=s176-c-k-c0x00ffffff-no-rj', // Smash Mouth\n      'UCmT5bgI_8Ux3qE88L-o2bOQ': 'https://yt3.ggpht.com/ytc/AIdro_oN4P8Q1wV3pJ9tS6L8RhG0qN4bP7xVzC3mT1YrF4dQ8w=s176-c-k-c0x00ffffff-no-rj', // Luis Fonsi\n      'UCsRM0YB_dabtEPGPTKo-gcw': 'https://yt3.ggpht.com/ytc/AIdro_pO5Q8Q2wV4pJ0tS7L9RhG1qN5bP8xVzC4mT2YrF5dQ9w=s176-c-k-c0x00ffffff-no-rj', // Adele\n      'UCrDkAvF9ZWdo5OukAhI7H3Q': 'https://yt3.ggpht.com/ytc/AIdro_qP6R8Q3wV5pJ1tS8L0RhG2qN6bP9xVzC5mT3YrF6dQ0w=s176-c-k-c0x00ffffff-no-rj', // officialpsy\n      'UC0C-w0YjGpqDXGB8IHb662A': 'https://yt3.ggpht.com/ytc/AIdro_rQ7S8Q4wV6pJ2tS9L1RhG3qN7bP0xVzC6mT4YrF7dQ1w=s176-c-k-c0x00ffffff-no-rj', // Ed Sheeran\n      'UC347FC-2Zj5MTtMfsTc97xQ': 'https://yt3.ggpht.com/ytc/AIdro_sR8T8Q5wV7pJ3tS0L2RhG4qN8bP1xVzC7mT5YrF8dQ2w=s176-c-k-c0x00ffffff-no-rj', // Katy Perry\n      'UCGwegR-rWjYETlrwNzJTNFQ': 'https://yt3.ggpht.com/ytc/AIdro_tS9U8Q6wV8pJ4tS1L3RhG5qN9bP2xVzC8mT6YrF9dQ3w=s176-c-k-c0x00ffffff-no-rj', // Wiz Khalifa\n      'UCBnxxPnWlJjdTvnxIh6M14Q': 'https://yt3.ggpht.com/ytc/AIdro_uT0V8Q7wV9pJ5tS2L4RhG6qN0bP3xVzC9mT7YrF0dQ4w=s176-c-k-c0x00ffffff-no-rj', // Mark Ronson\n      'UCqECaJ8Gagnn7YCbPEzWH6g': 'https://yt3.ggpht.com/ytc/AIdro_vU1W8Q8wV0pJ6tS3L5RhG7qN1bP4xVzC0mT8YrF1dQ5w=s176-c-k-c0x00ffffff-no-rj', // Taylor Swift\n      'UC78fGeRSClyf9g0IqI9vJlA': 'https://yt3.ggpht.com/ytc/AIdro_wV2X8Q9wV1pJ7tS4L6RhG8qN2bP5xVzC1mT9YrF2dQ6w=s176-c-k-c0x00ffffff-no-rj', // Maroon 5\n      'UCcdwLMPsaU2ezNSJU1nFoBQ': 'https://yt3.ggpht.com/ytc/AIdro_xW3Y8Q0wV2pJ8tS5L7RhG9qN3bP6xVzC2mT0YrF3dQ7w=s176-c-k-c0x00ffffff-no-rj', // Pinkfong Baby Shark\n      'UCedvOgsKFzcK3hA5taf3KoQ': 'https://yt3.ggpht.com/ytc/AIdro_yX4Z8Q1wV3pJ9tS6L8RhG0qN4bP7xVzC3mT1YrF4dQ8w=s176-c-k-c0x00ffffff-no-rj'  // Eminem\n    };\n    \n    return avatarMap[channelId] || `https://api.dicebear.com/7.x/initials/svg?seed=${channelTitle}&backgroundColor=random`;\n  };\n\n  const filteredVideos = videos.filter(video =>\n    video.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    video.channelTitle.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  return (\n    <div className=\"h-full bg-gray-900 text-white flex\">\n      {/* Sidebar */}\n      <div className=\"w-64 bg-gray-800 border-r border-gray-700 flex flex-col\">\n        <div className=\"p-4 border-b border-gray-700\">\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 bg-red-600 rounded flex items-center justify-center\">\n              <Play className=\"w-5 h-5 text-white\" />\n            </div>\n            <span className=\"text-xl font-bold\">VideoTube</span>\n          </div>\n        </div>\n\n        <div className=\"flex-1 p-4\">\n          <div className=\"space-y-2\">\n            <Button\n              variant={currentView === 'home' ? 'default' : 'ghost'}\n              className=\"w-full justify-start\"\n              onClick={() => setCurrentView('home')}\n            >\n              <Home className=\"w-5 h-5 mr-3\" />\n              Home\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start\">\n              <TrendingUp className=\"w-5 h-5 mr-3\" />\n              Trending\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start\">\n              <Users className=\"w-5 h-5 mr-3\" />\n              Subscriptions\n            </Button>\n            <Button variant=\"ghost\" className=\"w-full justify-start\">\n              <Library className=\"w-5 h-5 mr-3\" />\n              Library\n            </Button>\n            <Button\n              variant={currentView === 'playlists' ? 'default' : 'ghost'}\n              className=\"w-full justify-start\"\n              onClick={() => setCurrentView('playlists')}\n            >\n              <List className=\"w-5 h-5 mr-3\" />\n              Playlists\n            </Button>\n          </div>\n\n          <div className=\"border-t border-gray-700 mt-6 pt-6\">\n            <h3 className=\"text-sm font-semibold text-gray-400 mb-3\">SUBSCRIPTIONS</h3>\n            <div className=\"space-y-2\">\n              {sampleUsers.map(user => (\n                <div key={user.id} className=\"flex items-center gap-3 p-2 rounded hover:bg-gray-700 cursor-pointer\">\n                  <img src={user.avatar} alt={user.displayName} className=\"w-6 h-6 rounded-full\" />\n                  <span className=\"text-sm\">{user.displayName}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-4 border-t border-gray-700\">\n          <div className=\"flex items-center gap-3 mb-3\">\n            <img src={currentUser.avatar} alt={currentUser.displayName} className=\"w-8 h-8 rounded-full\" />\n            <div>\n              <div className=\"text-sm font-medium\">{currentUser.displayName}</div>\n              <div className=\"text-xs text-gray-400\">{formatViews(currentUser.subscribers)} subscribers</div>\n            </div>\n          </div>\n          <div className=\"space-y-1\">\n            {sampleUsers.map(user => (\n              <Button\n                key={user.id}\n                variant=\"ghost\"\n                size=\"sm\"\n                className={`w-full justify-start text-xs ${currentUser.id === user.id ? 'bg-gray-700' : ''}`}\n                onClick={() => handleUserSwitch(user)}\n              >\n                <img src={user.avatar} alt={user.displayName} className=\"w-4 h-4 rounded-full mr-2\" />\n                {user.displayName}\n              </Button>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Main Content */}\n      <div className=\"flex-1 flex flex-col\">\n        <div className=\"bg-gray-800 border-b border-gray-700 p-4\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"flex-1 max-w-2xl\">\n              <div className=\"relative\">\n                <Input\n                  type=\"text\"\n                  placeholder=\"Search videos...\"\n                  value={searchTerm}\n                  onChange={(e) => setSearchTerm(e.target.value)}\n                  className=\"w-full bg-gray-700 border-gray-600 text-white placeholder-gray-400\"\n                />\n                <Button size=\"sm\" className=\"absolute right-1 top-1 bg-gray-600 hover:bg-gray-500\">\n                  <Search className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </div>\n            <Button \n              variant=\"outline\" \n              size=\"sm\" \n              onClick={handleRefresh}\n              disabled={isLoading}\n              className=\"flex items-center gap-2\"\n            >\n              <RefreshCw className={`w-4 h-4 ${isLoading ? 'animate-spin' : ''}`} />\n              Refresh\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Upload className=\"w-4 h-4 mr-2\" />\n              Upload\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <Bell className=\"w-4 h-4\" />\n            </Button>\n            <Button variant=\"outline\" size=\"sm\">\n              <User className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-auto\">\n          {currentView === 'home' && (\n            <div className=\"p-6\">\n              {error && (\n                <div className=\"mb-4 p-4 bg-yellow-900/50 border border-yellow-700 rounded-lg\">\n                  <p className=\"text-yellow-200 text-sm\">\n                    YouTube API temporarily unavailable. Showing sample content.\n                  </p>\n                </div>\n              )}\n              \n              <h2 className=\"text-2xl font-bold mb-6\">Popular Videos</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n                {filteredVideos.map(video => (\n                  <div key={video.id} className=\"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition-colors cursor-pointer\" onClick={() => handleVideoClick(video)}>\n                    <div className=\"relative\">\n                      <img src={video.thumbnail} alt={video.title} className=\"w-full h-48 object-cover\" />\n                      <div className=\"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded\">\n                        {video.duration}\n                      </div>\n                    </div>\n                    <div className=\"p-4\">\n                      <h3 className=\"font-semibold text-white mb-2 line-clamp-2\">{video.title}</h3>\n                      <p className=\"text-gray-400 text-sm mb-1\">{video.channelTitle}</p>\n                      <div className=\"flex items-center gap-2 text-xs text-gray-500\">\n                        <span>{formatViews(video.views)} views</span>\n                        <span>•</span>\n                        <span>{formatDate(video.publishedAt)}</span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {currentView === 'watch' && selectedVideo && (\n            <div className=\"p-6\">\n              <div className=\"max-w-6xl mx-auto\">\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n                  <div className=\"lg:col-span-2\">\n                    <div className=\"bg-black rounded-lg overflow-hidden mb-4\">\n                      <iframe\n                        src={`https://www.youtube.com/embed/${selectedVideo.id}`}\n                        title={selectedVideo.title}\n                        className=\"w-full h-96\"\n                        allowFullScreen\n                      />\n                    </div>\n                    \n                    <div className=\"space-y-4\">\n                      <h1 className=\"text-2xl font-bold\">{selectedVideo.title}</h1>\n                      \n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n                          <span>{formatViews(selectedVideo.views)} views</span>\n                          <span>•</span>\n                          <span>{formatDate(selectedVideo.publishedAt)}</span>\n                        </div>\n                        <div className=\"flex items-center gap-2\">\n                          <Button\n                            variant={likedVideos.has(selectedVideo.id) ? \"default\" : \"outline\"}\n                            size=\"sm\"\n                            onClick={() => handleLike(selectedVideo.id)}\n                            className={`relative ${likeAnimation === selectedVideo.id ? 'animate-pulse bg-green-500 text-white' : ''} ${likedVideos.has(selectedVideo.id) ? 'bg-blue-600 text-white' : ''}`}\n                          >\n                            <ThumbsUp className={`w-4 h-4 mr-1 ${likeAnimation === selectedVideo.id ? 'animate-bounce' : ''}`} />\n                            Like\n                            {likeAnimation === selectedVideo.id && (\n                              <Heart className=\"absolute -top-2 -right-2 w-4 h-4 text-red-500 animate-ping\" />\n                            )}\n                          </Button>\n                          <Button\n                            variant={dislikedVideos.has(selectedVideo.id) ? \"default\" : \"outline\"}\n                            size=\"sm\"\n                            onClick={() => handleDislike(selectedVideo.id)}\n                            className={dislikedVideos.has(selectedVideo.id) ? 'bg-red-600 text-white' : ''}\n                          >\n                            <ThumbsDown className=\"w-4 h-4 mr-1\" />\n                            Dislike\n                          </Button>\n                          <Button variant=\"outline\" size=\"sm\">\n                            <Share className=\"w-4 h-4 mr-1\" />\n                            Share\n                          </Button>\n                        </div>\n                      </div>\n\n                      <div className=\"flex items-center justify-between p-4 bg-gray-800 rounded-lg\">\n                        <div className=\"flex items-center gap-3\">\n                          <img \n                            src={getChannelAvatar(selectedVideo.channelId, selectedVideo.channelTitle)} \n                            alt={selectedVideo.channelTitle}\n                            className=\"w-12 h-12 rounded-full object-cover\"\n                          />\n                          <div>\n                            <h3 className=\"font-semibold\">{selectedVideo.channelTitle}</h3>\n                            <p className=\"text-sm text-gray-400\">Creator on VideoTube</p>\n                          </div>\n                        </div>\n                        <Button\n                          variant={subscribedChannels.has(selectedVideo.channelId) ? \"outline\" : \"default\"}\n                          onClick={() => handleSubscribe(selectedVideo.channelId)}\n                          className={subscribedChannels.has(selectedVideo.channelId) ? 'text-gray-400' : 'bg-red-600 hover:bg-red-700'}\n                        >\n                          {subscribedChannels.has(selectedVideo.channelId) ? 'Subscribed' : 'Subscribe'}\n                        </Button>\n                      </div>\n\n                      <div className=\"bg-gray-800 p-4 rounded-lg\">\n                        <p className=\"text-gray-300 text-sm leading-relaxed\">\n                          {selectedVideo.description}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"space-y-6\">\n                    <div className=\"bg-gray-800 p-4 rounded-lg\">\n                      <h3 className=\"font-semibold mb-4\">Comments</h3>\n                      \n                      <div className=\"mb-4\">\n                        <div className=\"flex gap-3\">\n                          <img src={currentUser.avatar} alt={currentUser.displayName} className=\"w-8 h-8 rounded-full\" />\n                          <div className=\"flex-1\">\n                            <Input\n                              placeholder=\"Add a comment...\"\n                              value={newComment}\n                              onChange={(e) => setNewComment(e.target.value)}\n                              className=\"bg-gray-700 border-gray-600 text-white\"\n                            />\n                            <div className=\"flex gap-2 mt-2\">\n                              <Button size=\"sm\" onClick={handleAddComment} disabled={!newComment.trim()}>\n                                Comment\n                              </Button>\n                              <Button size=\"sm\" variant=\"outline\" onClick={() => setNewComment('')}>\n                                Cancel\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                      <div className=\"space-y-4\">\n                        {comments.map(comment => (\n                          <div key={comment.id} className=\"flex gap-3\">\n                            <img src={comment.author.avatar} alt={comment.author.displayName} className=\"w-8 h-8 rounded-full\" />\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-1\">\n                                <span className=\"font-medium text-sm\">{comment.author.displayName}</span>\n                                <span className=\"text-xs text-gray-400\">{comment.timestamp}</span>\n                              </div>\n                              <p className=\"text-sm text-gray-300\">{comment.text}</p>\n                              <div className=\"flex items-center gap-4 mt-2\">\n                                <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">\n                                  <ThumbsUp className=\"w-3 h-3 mr-1\" />\n                                  {comment.likes}\n                                </Button>\n                                <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">\n                                  <ThumbsDown className=\"w-3 h-3\" />\n                                </Button>\n                                <Button variant=\"ghost\" size=\"sm\" className=\"text-xs\">\n                                  Reply\n                                </Button>\n                              </div>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    <div>\n                      <h3 className=\"font-semibold mb-4\">Related Videos</h3>\n                      <div className=\"space-y-3\">\n                        {videos.slice(0, 5).map(video => (\n                          <div key={video.id} className=\"flex gap-3 cursor-pointer hover:bg-gray-800 p-2 rounded\" onClick={() => handleVideoClick(video)}>\n                            <img src={video.thumbnail} alt={video.title} className=\"w-24 h-16 object-cover rounded\" />\n                            <div className=\"flex-1\">\n                              <h4 className=\"text-sm font-medium line-clamp-2 mb-1\">{video.title}</h4>\n                              <p className=\"text-xs text-gray-400\">{video.channelTitle}</p>\n                              <p className=\"text-xs text-gray-500\">{formatViews(video.views)} views</p>\n                            </div>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n\n          {currentView === 'playlists' && (\n            <div className=\"p-6\">\n              <h2 className=\"text-2xl font-bold mb-6\">Curated Playlists</h2>\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n                {samplePlaylists.map(playlist => (\n                  <div \n                    key={playlist.id} \n                    className=\"bg-gray-800 rounded-lg overflow-hidden hover:bg-gray-750 transition-colors cursor-pointer\"\n                    onClick={() => {\n                      setSelectedPlaylist(playlist);\n                      setCurrentView('playlist');\n                    }}\n                  >\n                    <div className=\"relative\">\n                      <img src={playlist.thumbnail} alt={playlist.title} className=\"w-full h-48 object-cover\" />\n                      <div className=\"absolute bottom-2 right-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded flex items-center gap-1\">\n                        <PlaySquare className=\"w-3 h-3\" />\n                        {playlist.videoCount} videos\n                      </div>\n                      <div className=\"absolute bottom-2 left-2 bg-black bg-opacity-80 text-white text-xs px-2 py-1 rounded\">\n                        {playlist.totalDuration}\n                      </div>\n                    </div>\n                    <div className=\"p-4\">\n                      <h3 className=\"font-semibold text-white mb-2 line-clamp-2\">{playlist.title}</h3>\n                      <p className=\"text-gray-400 text-sm mb-2 line-clamp-2\">{playlist.description}</p>\n                      <p className=\"text-gray-500 text-xs\">By {playlist.creator}</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n\n          {currentView === 'playlist' && selectedPlaylist && (\n            <div className=\"p-6\">\n              <div className=\"mb-6\">\n                <Button \n                  variant=\"ghost\" \n                  onClick={() => setCurrentView('playlists')}\n                  className=\"mb-4\"\n                >\n                  ← Back to Playlists\n                </Button>\n                \n                <div className=\"bg-gray-800 rounded-lg p-6 mb-6\">\n                  <div className=\"flex gap-6\">\n                    <img \n                      src={selectedPlaylist.thumbnail} \n                      alt={selectedPlaylist.title}\n                      className=\"w-48 h-32 object-cover rounded-lg\"\n                    />\n                    <div className=\"flex-1\">\n                      <h1 className=\"text-3xl font-bold mb-2\">{selectedPlaylist.title}</h1>\n                      <p className=\"text-gray-400 mb-4\">{selectedPlaylist.description}</p>\n                      <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                        <span>By {selectedPlaylist.creator}</span>\n                        <span>•</span>\n                        <span>{selectedPlaylist.videoCount} videos</span>\n                        <span>•</span>\n                        <span>{selectedPlaylist.totalDuration} total</span>\n                        <span>•</span>\n                        <span>{formatDate(selectedPlaylist.createdAt)}</span>\n                      </div>\n                      <div className=\"mt-4\">\n                        <Button \n                          className=\"bg-red-600 hover:bg-red-700 mr-3\"\n                          onClick={() => {\n                            if (selectedPlaylist.videos.length > 0) {\n                              setSelectedVideo(selectedPlaylist.videos[0]);\n                              setCurrentView('watch');\n                            }\n                          }}\n                        >\n                          <Play className=\"w-4 h-4 mr-2\" />\n                          Play All\n                        </Button>\n                        <Button variant=\"outline\">\n                          <Heart className=\"w-4 h-4 mr-2\" />\n                          Save Playlist\n                        </Button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <div className=\"space-y-3\">\n                {selectedPlaylist.videos.map((video, index) => (\n                  <div \n                    key={video.id}\n                    className=\"flex gap-4 p-3 bg-gray-800 rounded-lg hover:bg-gray-750 transition-colors cursor-pointer\"\n                    onClick={() => {\n                      setSelectedVideo(video);\n                      setCurrentView('watch');\n                    }}\n                  >\n                    <div className=\"flex-shrink-0 w-8 text-center text-gray-400 font-mono\">\n                      {index + 1}\n                    </div>\n                    <img \n                      src={video.thumbnail} \n                      alt={video.title}\n                      className=\"w-32 h-20 object-cover rounded\"\n                    />\n                    <div className=\"flex-1\">\n                      <h3 className=\"font-semibold text-white mb-1 line-clamp-2\">{video.title}</h3>\n                      <p className=\"text-gray-400 text-sm mb-1\">{video.channelTitle}</p>\n                      <div className=\"flex items-center gap-2 text-xs text-gray-500\">\n                        <span>{formatViews(video.views)} views</span>\n                        <span>•</span>\n                        <span>{video.duration}</span>\n                        <span>•</span>\n                        <span>{formatDate(video.publishedAt)}</span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":97852},"client/src/components/apps/VirtualMachine.tsx":{"content":"import { FC, useState, useEffect, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Textarea } from '@/components/ui/textarea';\nimport { \n  Play, Pause, Square, RotateCcw, Settings, Monitor, Cpu, \n  HardDrive, Zap, Wifi, Download, Upload, Terminal,\n  Power, PowerOff, RefreshCw, Volume2, VolumeX, \n  Maximize2, Minimize2, MoreVertical, ChevronRight\n} from 'lucide-react';\n\ninterface VirtualMachine {\n  id: string;\n  name: string;\n  os: string;\n  status: 'stopped' | 'running' | 'paused' | 'booting';\n  cpu: number;\n  memory: number;\n  storage: number;\n  uptime: number;\n  created: Date;\n  lastUsed: Date;\n}\n\ninterface SystemStats {\n  cpu: number;\n  memory: number;\n  disk: number;\n  network: { upload: number; download: number };\n}\n\nexport const VirtualMachine: FC = () => {\n  const [currentTab, setCurrentTab] = useState('dashboard');\n  const [selectedVM, setSelectedVM] = useState<string | null>(null);\n  const [isCreating, setIsCreating] = useState(false);\n  const [systemStats, setSystemStats] = useState<SystemStats>({\n    cpu: 0,\n    memory: 0,\n    disk: 0,\n    network: { upload: 0, download: 0 }\n  });\n  const [bootSequence, setBootSequence] = useState<string[]>([]);\n  const [isBooting, setIsBooting] = useState(false);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  const [virtualMachines, setVirtualMachines] = useState<VirtualMachine[]>([\n    {\n      id: 'vm-1',\n      name: 'Ubuntu Desktop 24.04',\n      os: 'ubuntu',\n      status: 'stopped',\n      cpu: 2,\n      memory: 4096,\n      storage: 25600,\n      uptime: 0,\n      created: new Date('2024-11-15'),\n      lastUsed: new Date('2024-12-30')\n    },\n    {\n      id: 'vm-2',\n      name: 'Windows 11 Pro',\n      os: 'windows',\n      status: 'stopped',\n      cpu: 4,\n      memory: 8192,\n      storage: 51200,\n      uptime: 0,\n      created: new Date('2024-11-20'),\n      lastUsed: new Date('2024-12-28')\n    },\n    {\n      id: 'vm-3',\n      name: 'macOS Sonoma',\n      os: 'macos',\n      status: 'running',\n      cpu: 4,\n      memory: 8192,\n      storage: 76800,\n      uptime: 2847,\n      created: new Date('2024-11-25'),\n      lastUsed: new Date()\n    },\n    {\n      id: 'vm-4',\n      name: 'Alpine Linux',\n      os: 'alpine',\n      status: 'paused',\n      cpu: 1,\n      memory: 512,\n      storage: 2048,\n      uptime: 156,\n      created: new Date('2024-12-01'),\n      lastUsed: new Date('2024-12-29')\n    }\n  ]);\n\n  // Simulate system stats updates\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setSystemStats(prev => ({\n        cpu: Math.random() * 100,\n        memory: Math.random() * 100,\n        disk: Math.random() * 100,\n        network: {\n          upload: Math.random() * 1000,\n          download: Math.random() * 5000\n        }\n      }));\n    }, 2000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  // Update VM uptimes\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setVirtualMachines(prev => prev.map(vm => \n        vm.status === 'running' \n          ? { ...vm, uptime: vm.uptime + 1 }\n          : vm\n      ));\n    }, 1000);\n\n    return () => clearInterval(interval);\n  }, []);\n\n  const getOSIcon = (os: string) => {\n    switch (os) {\n      case 'ubuntu': return '🐧';\n      case 'windows': return '🪟';\n      case 'macos': return '🍎';\n      case 'alpine': return '🏔️';\n      default: return '💻';\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case 'running': return 'bg-green-500';\n      case 'paused': return 'bg-yellow-500';\n      case 'booting': return 'bg-blue-500';\n      default: return 'bg-gray-500';\n    }\n  };\n\n  const formatUptime = (seconds: number) => {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = seconds % 60;\n    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;\n  };\n\n  const formatBytes = (bytes: number) => {\n    const sizes = ['B', 'KB', 'MB', 'GB', 'TB'];\n    if (bytes === 0) return '0 B';\n    const i = Math.floor(Math.log(bytes) / Math.log(1024));\n    return Math.round((bytes / Math.pow(1024, i)) * 100) / 100 + ' ' + sizes[i];\n  };\n\n  const startVM = async (vmId: string) => {\n    const vm = virtualMachines.find(v => v.id === vmId);\n    if (!vm) return;\n\n    setIsBooting(true);\n    setBootSequence([]);\n    \n    // Simulate boot sequence\n    const bootMessages = [\n      'BIOS v2.1.0 - WebOS Virtual Machine',\n      'Checking system memory... OK',\n      'Initializing CPU cores... OK',\n      'Loading virtual hardware drivers...',\n      'Starting disk check...',\n      `Booting ${vm.name}...`,\n      'Loading kernel modules...',\n      'Mounting file systems...',\n      'Starting system services...',\n      'Initializing network interfaces...',\n      'Boot sequence complete!'\n    ];\n\n    for (let i = 0; i < bootMessages.length; i++) {\n      await new Promise(resolve => setTimeout(resolve, 800));\n      setBootSequence(prev => [...prev, bootMessages[i]]);\n    }\n\n    setVirtualMachines(prev => prev.map(v =>\n      v.id === vmId \n        ? { ...v, status: 'running', lastUsed: new Date(), uptime: 0 }\n        : v\n    ));\n\n    setIsBooting(false);\n    setSelectedVM(vmId);\n  };\n\n  const stopVM = (vmId: string) => {\n    setVirtualMachines(prev => prev.map(v =>\n      v.id === vmId \n        ? { ...v, status: 'stopped', uptime: 0 }\n        : v\n    ));\n  };\n\n  const pauseVM = (vmId: string) => {\n    setVirtualMachines(prev => prev.map(v =>\n      v.id === vmId \n        ? { ...v, status: v.status === 'paused' ? 'running' : 'paused' }\n        : v\n    ));\n  };\n\n  const resetVM = (vmId: string) => {\n    stopVM(vmId);\n    setTimeout(() => startVM(vmId), 1000);\n  };\n\n  // Virtual screen rendering\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas) return;\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    const renderScreen = () => {\n      // Clear screen\n      ctx.fillStyle = '#000';\n      ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n      if (selectedVM) {\n        const vm = virtualMachines.find(v => v.id === selectedVM);\n        if (vm && vm.status === 'running') {\n          // Render desktop environment\n          ctx.fillStyle = '#1e40af';\n          ctx.fillRect(0, 0, canvas.width, 30); // Title bar\n\n          ctx.fillStyle = '#fff';\n          ctx.font = '12px monospace';\n          ctx.fillText(`${vm.name} - Virtual Desktop`, 10, 20);\n\n          // Render desktop\n          ctx.fillStyle = '#3b82f6';\n          ctx.fillRect(0, 30, canvas.width, canvas.height - 30);\n\n          // Add some desktop icons\n          const icons = ['📁 Documents', '🖼️ Pictures', '⚙️ Settings', '🔧 Terminal'];\n          icons.forEach((icon, i) => {\n            const x = 20 + (i % 4) * 100;\n            const y = 60 + Math.floor(i / 4) * 80;\n            \n            ctx.fillStyle = '#1e40af';\n            ctx.fillRect(x, y, 80, 60);\n            ctx.fillStyle = '#fff';\n            ctx.font = '10px sans-serif';\n            ctx.fillText(icon, x + 5, y + 40);\n          });\n\n          // Add time display\n          ctx.fillStyle = '#fff';\n          ctx.font = '14px monospace';\n          const time = new Date().toLocaleTimeString();\n          ctx.fillText(time, canvas.width - 100, 20);\n        }\n      }\n\n      if (isBooting) {\n        // Boot screen\n        ctx.fillStyle = '#000';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        \n        ctx.fillStyle = '#00ff00';\n        ctx.font = '12px monospace';\n        bootSequence.forEach((message, i) => {\n          ctx.fillText(message, 10, 20 + i * 16);\n        });\n\n        // Add cursor\n        const cursorY = 20 + bootSequence.length * 16;\n        ctx.fillText('_', 10, cursorY);\n      }\n    };\n\n    const animationFrame = requestAnimationFrame(renderScreen);\n    return () => cancelAnimationFrame(animationFrame);\n  }, [selectedVM, virtualMachines, isBooting, bootSequence]);\n\n  return (\n    <div className=\"h-full bg-gray-900 text-white\">\n      <Tabs value={currentTab} onValueChange={setCurrentTab} className=\"h-full flex flex-col\">\n        <div className=\"bg-gray-800 border-b border-gray-700 p-4\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h1 className=\"text-2xl font-bold\">Virtual Machine Manager</h1>\n            <div className=\"flex items-center gap-2\">\n              <Badge variant=\"outline\" className=\"text-green-400 border-green-400\">\n                {virtualMachines.filter(vm => vm.status === 'running').length} Running\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-yellow-400 border-yellow-400\">\n                {virtualMachines.filter(vm => vm.status === 'paused').length} Paused\n              </Badge>\n              <Badge variant=\"outline\" className=\"text-gray-400 border-gray-400\">\n                {virtualMachines.filter(vm => vm.status === 'stopped').length} Stopped\n              </Badge>\n            </div>\n          </div>\n\n          <TabsList className=\"bg-gray-700\">\n            <TabsTrigger value=\"dashboard\" className=\"data-[state=active]:bg-gray-600\">\n              <Monitor className=\"w-4 h-4 mr-1\" />\n              Dashboard\n            </TabsTrigger>\n            <TabsTrigger value=\"console\" className=\"data-[state=active]:bg-gray-600\">\n              <Terminal className=\"w-4 h-4 mr-1\" />\n              Console\n            </TabsTrigger>\n            <TabsTrigger value=\"settings\" className=\"data-[state=active]:bg-gray-600\">\n              <Settings className=\"w-4 h-4 mr-1\" />\n              Settings\n            </TabsTrigger>\n          </TabsList>\n        </div>\n\n        <div className=\"flex-1 overflow-auto\">\n          <TabsContent value=\"dashboard\" className=\"p-6 space-y-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              {/* VM List */}\n              <div className=\"lg:col-span-2\">\n                <Card className=\"bg-gray-800 border-gray-700\">\n                  <CardHeader>\n                    <CardTitle className=\"text-white flex items-center justify-between\">\n                      Virtual Machines\n                      <Button size=\"sm\" className=\"bg-blue-600 hover:bg-blue-700\">\n                        <Play className=\"w-4 h-4 mr-1\" />\n                        Create New\n                      </Button>\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      {virtualMachines.map((vm) => (\n                        <Card key={vm.id} className=\"bg-gray-700 border-gray-600 hover:bg-gray-650 transition-colors\">\n                          <CardContent className=\"p-4\">\n                            <div className=\"flex items-center justify-between\">\n                              <div className=\"flex items-center gap-3\">\n                                <div className=\"text-2xl\">{getOSIcon(vm.os)}</div>\n                                <div>\n                                  <h3 className=\"font-medium text-white\">{vm.name}</h3>\n                                  <div className=\"flex items-center gap-2 text-sm text-gray-400\">\n                                    <div className={`w-2 h-2 rounded-full ${getStatusColor(vm.status)}`}></div>\n                                    <span className=\"capitalize\">{vm.status}</span>\n                                    {vm.status === 'running' && (\n                                      <span>• Uptime: {formatUptime(vm.uptime)}</span>\n                                    )}\n                                  </div>\n                                </div>\n                              </div>\n\n                              <div className=\"flex items-center gap-2\">\n                                <div className=\"text-right text-sm text-gray-400 mr-4\">\n                                  <div>{vm.cpu} CPU • {formatBytes(vm.memory * 1024 * 1024)}</div>\n                                  <div>{formatBytes(vm.storage * 1024 * 1024)} Storage</div>\n                                </div>\n\n                                <div className=\"flex gap-1\">\n                                  {vm.status === 'stopped' ? (\n                                    <Button\n                                      size=\"sm\"\n                                      variant=\"outline\"\n                                      className=\"border-green-600 text-green-400 hover:bg-green-600\"\n                                      onClick={() => startVM(vm.id)}\n                                    >\n                                      <Play className=\"w-4 h-4\" />\n                                    </Button>\n                                  ) : (\n                                    <>\n                                      <Button\n                                        size=\"sm\"\n                                        variant=\"outline\"\n                                        className=\"border-yellow-600 text-yellow-400 hover:bg-yellow-600\"\n                                        onClick={() => pauseVM(vm.id)}\n                                      >\n                                        {vm.status === 'paused' ? <Play className=\"w-4 h-4\" /> : <Pause className=\"w-4 h-4\" />}\n                                      </Button>\n                                      <Button\n                                        size=\"sm\"\n                                        variant=\"outline\"\n                                        className=\"border-red-600 text-red-400 hover:bg-red-600\"\n                                        onClick={() => stopVM(vm.id)}\n                                      >\n                                        <Square className=\"w-4 h-4\" />\n                                      </Button>\n                                    </>\n                                  )}\n                                  <Button\n                                    size=\"sm\"\n                                    variant=\"outline\"\n                                    className=\"border-blue-600 text-blue-400 hover:bg-blue-600\"\n                                    onClick={() => resetVM(vm.id)}\n                                  >\n                                    <RotateCcw className=\"w-4 h-4\" />\n                                  </Button>\n                                </div>\n                              </div>\n                            </div>\n                          </CardContent>\n                        </Card>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* System Stats */}\n              <div>\n                <Card className=\"bg-gray-800 border-gray-700\">\n                  <CardHeader>\n                    <CardTitle className=\"text-white\">System Resources</CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div>\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span className=\"text-gray-400\">CPU Usage</span>\n                        <span className=\"text-white\">{systemStats.cpu.toFixed(1)}%</span>\n                      </div>\n                      <Progress value={systemStats.cpu} className=\"h-2\" />\n                    </div>\n\n                    <div>\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span className=\"text-gray-400\">Memory</span>\n                        <span className=\"text-white\">{systemStats.memory.toFixed(1)}%</span>\n                      </div>\n                      <Progress value={systemStats.memory} className=\"h-2\" />\n                    </div>\n\n                    <div>\n                      <div className=\"flex justify-between text-sm mb-1\">\n                        <span className=\"text-gray-400\">Disk I/O</span>\n                        <span className=\"text-white\">{systemStats.disk.toFixed(1)}%</span>\n                      </div>\n                      <Progress value={systemStats.disk} className=\"h-2\" />\n                    </div>\n\n                    <div className=\"border-t border-gray-600 pt-4\">\n                      <h4 className=\"text-sm font-medium text-white mb-2\">Network Activity</h4>\n                      <div className=\"space-y-2 text-sm\">\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-400\">Upload</span>\n                          <span className=\"text-green-400\">{formatBytes(systemStats.network.upload)}/s</span>\n                        </div>\n                        <div className=\"flex justify-between\">\n                          <span className=\"text-gray-400\">Download</span>\n                          <span className=\"text-blue-400\">{formatBytes(systemStats.network.download)}/s</span>\n                        </div>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"console\" className=\"p-6\">\n            <Card className=\"bg-gray-800 border-gray-700\">\n              <CardHeader>\n                <CardTitle className=\"text-white flex items-center justify-between\">\n                  Virtual Console\n                  {selectedVM && (\n                    <div className=\"flex items-center gap-2\">\n                      <Badge variant=\"outline\" className=\"text-blue-400 border-blue-400\">\n                        {virtualMachines.find(vm => vm.id === selectedVM)?.name}\n                      </Badge>\n                      <Button size=\"sm\" variant=\"outline\">\n                        <Maximize2 className=\"w-4 h-4\" />\n                      </Button>\n                    </div>\n                  )}\n                </CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"relative\">\n                  <canvas\n                    ref={canvasRef}\n                    width={800}\n                    height={500}\n                    className=\"w-full bg-black border border-gray-600 rounded\"\n                  />\n                  {!selectedVM && !isBooting && (\n                    <div className=\"absolute inset-0 flex items-center justify-center bg-black/50 rounded\">\n                      <div className=\"text-center text-gray-400\">\n                        <Monitor className=\"w-12 h-12 mx-auto mb-4 opacity-50\" />\n                        <p>Select a running VM to view console</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n                \n                <div className=\"flex justify-center gap-2 mt-4\">\n                  <Button size=\"sm\" variant=\"outline\" className=\"border-gray-600\">\n                    <Volume2 className=\"w-4 h-4 mr-1\" />\n                    Audio\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\" className=\"border-gray-600\">\n                    <Wifi className=\"w-4 h-4 mr-1\" />\n                    Network\n                  </Button>\n                  <Button size=\"sm\" variant=\"outline\" className=\"border-gray-600\">\n                    <HardDrive className=\"w-4 h-4 mr-1\" />\n                    Storage\n                  </Button>\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"settings\" className=\"p-6\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <Card className=\"bg-gray-800 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Hypervisor Settings</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Default CPU Cores\n                    </label>\n                    <Select defaultValue=\"2\">\n                      <SelectTrigger className=\"bg-gray-700 border-gray-600\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent className=\"bg-gray-700 border-gray-600\">\n                        <SelectItem value=\"1\">1 Core</SelectItem>\n                        <SelectItem value=\"2\">2 Cores</SelectItem>\n                        <SelectItem value=\"4\">4 Cores</SelectItem>\n                        <SelectItem value=\"8\">8 Cores</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Default RAM (MB)\n                    </label>\n                    <Select defaultValue=\"4096\">\n                      <SelectTrigger className=\"bg-gray-700 border-gray-600\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent className=\"bg-gray-700 border-gray-600\">\n                        <SelectItem value=\"512\">512 MB</SelectItem>\n                        <SelectItem value=\"1024\">1 GB</SelectItem>\n                        <SelectItem value=\"2048\">2 GB</SelectItem>\n                        <SelectItem value=\"4096\">4 GB</SelectItem>\n                        <SelectItem value=\"8192\">8 GB</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Storage Path\n                    </label>\n                    <Input \n                      defaultValue=\"/home/user/VirtualMachines\"\n                      className=\"bg-gray-700 border-gray-600 text-white\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-gray-800 border-gray-700\">\n                <CardHeader>\n                  <CardTitle className=\"text-white\">Network Configuration</CardTitle>\n                </CardHeader>\n                <CardContent className=\"space-y-4\">\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Network Mode\n                    </label>\n                    <Select defaultValue=\"nat\">\n                      <SelectTrigger className=\"bg-gray-700 border-gray-600\">\n                        <SelectValue />\n                      </SelectTrigger>\n                      <SelectContent className=\"bg-gray-700 border-gray-600\">\n                        <SelectItem value=\"nat\">NAT</SelectItem>\n                        <SelectItem value=\"bridge\">Bridged</SelectItem>\n                        <SelectItem value=\"internal\">Internal</SelectItem>\n                        <SelectItem value=\"host\">Host-only</SelectItem>\n                      </SelectContent>\n                    </Select>\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      Virtual Network\n                    </label>\n                    <Input \n                      defaultValue=\"192.168.1.0/24\"\n                      className=\"bg-gray-700 border-gray-600 text-white\"\n                    />\n                  </div>\n\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-300 mb-2\">\n                      DHCP Range\n                    </label>\n                    <Input \n                      defaultValue=\"192.168.1.100-200\"\n                      className=\"bg-gray-700 border-gray-600 text-white\"\n                    />\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </TabsContent>\n        </div>\n      </Tabs>\n    </div>\n  );\n};","size_bytes":24402},"client/src/components/apps/WeatherApp.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card, CardHeader, CardContent, CardTitle } from '@/components/ui/card';\nimport { CloudSun, Search, Thermometer, Droplets, Wind, Eye } from 'lucide-react';\n\nexport const WeatherApp: FC = () => {\n  const [city, setCity] = useState('New York');\n  const [weather, setWeather] = useState<any>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const fetchWeather = async (cityName: string) => {\n    setLoading(true);\n    setError('');\n    \n    try {\n      // This would need an API key from the user for real weather data\n      // For now, show a realistic interface with sample data\n      await new Promise(resolve => setTimeout(resolve, 1000)); // Simulate API call\n      \n      setWeather({\n        location: cityName,\n        temperature: Math.floor(Math.random() * 30) + 5,\n        description: ['Sunny', 'Partly Cloudy', 'Cloudy', 'Light Rain'][Math.floor(Math.random() * 4)],\n        humidity: Math.floor(Math.random() * 40) + 40,\n        windSpeed: Math.floor(Math.random() * 20) + 5,\n        visibility: Math.floor(Math.random() * 10) + 5,\n        feelsLike: Math.floor(Math.random() * 35) + 0\n      });\n    } catch (err) {\n      setError('Weather service unavailable. Please provide API key for real data.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchWeather(city);\n  }, []);\n\n  const handleSearch = () => {\n    if (city.trim()) {\n      fetchWeather(city);\n    }\n  };\n\n  return (\n    <div className=\"h-full bg-gradient-to-br from-blue-400 to-blue-600 p-6 overflow-auto\">\n      <div className=\"max-w-2xl mx-auto\">\n        <div className=\"flex items-center gap-3 mb-6\">\n          <CloudSun className=\"w-8 h-8 text-white\" />\n          <h1 className=\"text-2xl font-bold text-white\">Weather App</h1>\n        </div>\n\n        <div className=\"flex gap-2 mb-6\">\n          <Input\n            value={city}\n            onChange={(e) => setCity(e.target.value)}\n            placeholder=\"Enter city name...\"\n            className=\"bg-white/20 border-white/30 text-white placeholder:text-white/70\"\n            onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n          />\n          <Button \n            onClick={handleSearch} \n            disabled={loading}\n            className=\"bg-white/20 hover:bg-white/30 text-white border-white/30\"\n          >\n            <Search className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        {error && (\n          <Card className=\"mb-6 bg-red-500/20 border-red-300\">\n            <CardContent className=\"p-4\">\n              <p className=\"text-white\">{error}</p>\n            </CardContent>\n          </Card>\n        )}\n\n        {loading && (\n          <Card className=\"bg-white/10 border-white/20\">\n            <CardContent className=\"p-6 text-center\">\n              <div className=\"animate-spin w-8 h-8 border-2 border-white/30 border-t-white rounded-full mx-auto mb-4\"></div>\n              <p className=\"text-white\">Loading weather data...</p>\n            </CardContent>\n          </Card>\n        )}\n\n        {weather && !loading && (\n          <div className=\"space-y-4\">\n            <Card className=\"bg-white/10 border-white/20\">\n              <CardHeader>\n                <CardTitle className=\"text-white text-center\">\n                  {weather.location}\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"text-center\">\n                <div className=\"text-6xl font-bold text-white mb-2\">\n                  {weather.temperature}°C\n                </div>\n                <p className=\"text-white/80 text-xl\">{weather.description}</p>\n                <p className=\"text-white/60 mt-2\">Feels like {weather.feelsLike}°C</p>\n              </CardContent>\n            </Card>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <Card className=\"bg-white/10 border-white/20\">\n                <CardContent className=\"p-4 flex items-center gap-3\">\n                  <Droplets className=\"w-6 h-6 text-white\" />\n                  <div>\n                    <p className=\"text-white/60 text-sm\">Humidity</p>\n                    <p className=\"text-white font-semibold\">{weather.humidity}%</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-white/10 border-white/20\">\n                <CardContent className=\"p-4 flex items-center gap-3\">\n                  <Wind className=\"w-6 h-6 text-white\" />\n                  <div>\n                    <p className=\"text-white/60 text-sm\">Wind Speed</p>\n                    <p className=\"text-white font-semibold\">{weather.windSpeed} km/h</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-white/10 border-white/20\">\n                <CardContent className=\"p-4 flex items-center gap-3\">\n                  <Eye className=\"w-6 h-6 text-white\" />\n                  <div>\n                    <p className=\"text-white/60 text-sm\">Visibility</p>\n                    <p className=\"text-white font-semibold\">{weather.visibility} km</p>\n                  </div>\n                </CardContent>\n              </Card>\n\n              <Card className=\"bg-white/10 border-white/20\">\n                <CardContent className=\"p-4 flex items-center gap-3\">\n                  <Thermometer className=\"w-6 h-6 text-white\" />\n                  <div>\n                    <p className=\"text-white/60 text-sm\">Pressure</p>\n                    <p className=\"text-white font-semibold\">{Math.floor(Math.random() * 50) + 990} hPa</p>\n                  </div>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":5867},"client/src/components/apps/WeatherStation.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { X, Cloud, Sun, CloudRain, Wind, Thermometer, Droplets, Eye, Gauge, Loader2 } from 'lucide-react';\nimport { useQuery } from '@tanstack/react-query';\n\ninterface WeatherData {\n  location: string;\n  temperature: number;\n  condition: string;\n  humidity: number;\n  windSpeed: number;\n  pressure: number;\n  visibility: number;\n  uvIndex: number;\n  forecast: DayForecast[];\n}\n\ninterface DayForecast {\n  day: string;\n  high: number;\n  low: number;\n  condition: string;\n  precipitation: number;\n}\n\nexport const WeatherStation: FC = () => {\n  const [location, setLocation] = useState('San Francisco, CA');\n\n  const { data: weather, isLoading, error, refetch } = useQuery({\n    queryKey: ['/api/weather', location],\n    queryFn: async () => {\n      const response = await fetch(`/api/weather?location=${encodeURIComponent(location)}`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch weather data');\n      }\n      return response.json();\n    },\n    enabled: false\n  });\n\n  const handleGetWeather = () => {\n    refetch();\n  };\n\n  const getWeatherIcon = (condition: string) => {\n    switch (condition.toLowerCase()) {\n      case 'sunny': return <Sun className=\"w-8 h-8 text-yellow-500\" />;\n      case 'cloudy': return <Cloud className=\"w-8 h-8 text-gray-500\" />;\n      case 'rainy': return <CloudRain className=\"w-8 h-8 text-blue-500\" />;\n      default: return <Cloud className=\"w-8 h-8 text-gray-400\" />;\n    }\n  };\n\n  return (\n    <div className=\"bg-gradient-to-br from-blue-400 to-blue-600 rounded-lg shadow-2xl w-full max-w-4xl h-[600px] flex flex-col text-white\">\n      <div className=\"bg-blue-800/50 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Cloud className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Weather Station</span>\n        </div>\n      </div>\n\n      <div className=\"flex-1 p-6\">\n        <div className=\"mb-6\">\n          <div className=\"flex space-x-2 mb-4\">\n            <Input\n              value={location}\n              onChange={(e) => setLocation(e.target.value)}\n              placeholder=\"Enter city name...\"\n              className=\"flex-1 bg-white/20 border-white/30 text-white placeholder-white/70\"\n            />\n            <Button onClick={handleGetWeather} className=\"bg-white/20 hover:bg-white/30\" disabled={isLoading}>\n              {isLoading ? (\n                <>\n                  <Loader2 className=\"w-4 h-4 mr-2 animate-spin\" />\n                  Loading...\n                </>\n              ) : (\n                'Get Weather'\n              )}\n            </Button>\n          </div>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-500/20 backdrop-blur-sm rounded-xl p-6 text-center\">\n            <h3 className=\"text-lg font-semibold mb-2\">Weather Data Unavailable</h3>\n            <p className=\"text-white/80 mb-4\">\n              {error.message.includes('not configured') \n                ? 'OpenWeatherMap API key required for real weather data'\n                : 'Unable to fetch weather information'\n              }\n            </p>\n            <p className=\"text-sm text-white/60\">\n              Configure OPENWEATHERMAP_API_KEY to display authentic weather data\n            </p>\n          </div>\n        )}\n\n        {weather && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center\">\n              <h2 className=\"text-3xl font-bold mb-2\">{weather.location}</h2>\n              <div className=\"flex items-center justify-center space-x-4 mb-4\">\n                {getWeatherIcon(weather.condition)}\n                <span className=\"text-6xl font-light\">{weather.temperature}°C</span>\n              </div>\n              <p className=\"text-xl opacity-90\">{weather.condition}</p>\n            </div>\n\n            <div className=\"grid grid-cols-4 gap-4\">\n              <div className=\"bg-white/20 p-4 rounded-lg text-center\">\n                <Droplets className=\"w-6 h-6 mx-auto mb-2\" />\n                <div className=\"text-sm opacity-80\">Humidity</div>\n                <div className=\"text-xl font-bold\">{weather.humidity}%</div>\n              </div>\n              <div className=\"bg-white/20 p-4 rounded-lg text-center\">\n                <Wind className=\"w-6 h-6 mx-auto mb-2\" />\n                <div className=\"text-sm opacity-80\">Wind</div>\n                <div className=\"text-xl font-bold\">{weather.windSpeed} km/h</div>\n              </div>\n              <div className=\"bg-white/20 p-4 rounded-lg text-center\">\n                <Gauge className=\"w-6 h-6 mx-auto mb-2\" />\n                <div className=\"text-sm opacity-80\">Pressure</div>\n                <div className=\"text-xl font-bold\">{weather.pressure} hPa</div>\n              </div>\n              <div className=\"bg-white/20 p-4 rounded-lg text-center\">\n                <Eye className=\"w-6 h-6 mx-auto mb-2\" />\n                <div className=\"text-sm opacity-80\">Visibility</div>\n                <div className=\"text-xl font-bold\">{weather.visibility} km</div>\n              </div>\n            </div>\n\n            <div className=\"bg-white/20 p-4 rounded-lg\">\n              <h3 className=\"text-lg font-semibold mb-4\">5-Day Forecast</h3>\n              <div className=\"grid grid-cols-5 gap-4\">\n                {weather.forecast.map((day: any, index: number) => (\n                  <div key={index} className=\"text-center\">\n                    <div className=\"font-medium mb-2\">{day.day}</div>\n                    {getWeatherIcon(day.condition)}\n                    <div className=\"text-sm mt-2\">\n                      <div className=\"font-bold\">{day.high}°</div>\n                      <div className=\"opacity-70\">{day.low}°</div>\n                    </div>\n                    <div className=\"text-xs opacity-60 mt-1\">{day.precipitation}% rain</div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":6074},"client/src/components/apps/WebBrowser.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card } from '@/components/ui/card';\nimport { \n  ArrowLeft, \n  ArrowRight, \n  RotateCcw, \n  Home, \n  Star, \n  Plus, \n  X, \n  Search,\n  Shield,\n  Download,\n  Menu,\n  Globe,\n  History,\n  BookmarkPlus\n} from 'lucide-react';\nimport { soundManager } from '@/lib/soundManager';\n\ninterface Tab {\n  id: string;\n  title: string;\n  url: string;\n  isLoading: boolean;\n  favicon?: string;\n  content?: string;\n}\n\ninterface Bookmark {\n  id: string;\n  title: string;\n  url: string;\n  favicon?: string;\n}\n\ninterface HistoryEntry {\n  id: string;\n  title: string;\n  url: string;\n  timestamp: Date;\n}\n\nconst defaultBookmarks: Bookmark[] = [\n  { id: '1', title: 'WebOS Search', url: 'webos://search', favicon: '🔍' },\n  { id: '2', title: 'WebOS Home', url: 'webos://home', favicon: '🏠' },\n  { id: '3', title: 'WebOS Apps', url: 'webos://apps', favicon: '📱' },\n  { id: '4', title: 'Settings', url: 'webos://settings', favicon: '⚙️' },\n  { id: '5', title: 'Terminal', url: 'webos://terminal', favicon: '💻' },\n  { id: '6', title: 'File Manager', url: 'webos://files', favicon: '📁' }\n];\n\n// Search engine functionality\nconst searchEngines = {\n  webos: {\n    name: 'WebOS Search',\n    url: (query: string) => `webos://search?q=${encodeURIComponent(query)}`,\n    suggestion: (query: string) => `Search WebOS for \"${query}\"`\n  },\n  google: {\n    name: 'Google',\n    url: (query: string) => `https://www.google.com/search?q=${encodeURIComponent(query)}`,\n    suggestion: (query: string) => `Search Google for \"${query}\"`\n  },\n  duckduckgo: {\n    name: 'DuckDuckGo',\n    url: (query: string) => `https://duckduckgo.com/?q=${encodeURIComponent(query)}`,\n    suggestion: (query: string) => `Search DuckDuckGo for \"${query}\"`\n  },\n  wikipedia: {\n    name: 'Wikipedia',\n    url: (query: string) => `https://en.wikipedia.org/wiki/Special:Search?search=${encodeURIComponent(query)}`,\n    suggestion: (query: string) => `Search Wikipedia for \"${query}\"`\n  }\n};\n\nconst webContent: Record<string, { title: string; content: string }> = {\n  'webos://home': {\n    title: 'WebOS - Home',\n    content: `\n      <div style=\"font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; color: white;\">\n        <header style=\"text-align: center; margin-bottom: 60px;\">\n          <h1 style=\"font-size: 3rem; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.5);\">Welcome to WebOS</h1>\n          <p style=\"font-size: 1.2rem; opacity: 0.9;\">A powerful web-based operating system built with modern technologies</p>\n        </header>\n        \n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 40px;\">\n          <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px);\">\n            <h2 style=\"margin-bottom: 15px;\">🚀 Getting Started</h2>\n            <p>Explore the desktop, open applications, and customize your experience.</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px);\">\n            <h2 style=\"margin-bottom: 15px;\">💻 Terminal</h2>\n            <p>Access the powerful terminal with 60+ commands including package management.</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; text-align: center; backdrop-filter: blur(10px);\">\n            <h2 style=\"margin-bottom: 15px;\">🎮 Applications</h2>\n            <p>Use the built-in applications including IDE, games, and productivity tools.</p>\n          </div>\n        </div>\n        \n        <div style=\"background: rgba(255,255,255,0.1); padding: 40px; border-radius: 15px; backdrop-filter: blur(10px);\">\n          <h2 style=\"margin-bottom: 20px; text-align: center;\">System Information</h2>\n          <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;\">\n            <div><strong>OS:</strong> WebOS (Arch Linux based)</div>\n            <div><strong>Architecture:</strong> x86_64</div>\n            <div><strong>Kernel:</strong> 6.6.8-arch1-1</div>\n            <div><strong>Package Manager:</strong> pacman</div>\n            <div><strong>Desktop:</strong> Custom Web Environment</div>\n            <div><strong>Browser:</strong> WebOS Browser v1.0</div>\n          </div>\n        </div>\n      </div>\n    `\n  },\n  'webos://apps': {\n    title: 'WebOS - Applications',\n    content: `\n      <div style=\"font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%); min-height: 100vh; color: white;\">\n        <h1 style=\"text-align: center; margin-bottom: 40px; font-size: 2.5rem;\">WebOS Applications</h1>\n        \n        <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;\">\n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">💻</div>\n            <h3>Terminal</h3>\n            <p>Full-featured terminal with 60+ commands</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">📁</div>\n            <h3>File Manager</h3>\n            <p>Browse and manage your files</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">🎮</div>\n            <h3>Retro Emulator</h3>\n            <p>Play classic games</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">🔧</div>\n            <h3>IDE</h3>\n            <p>Code editor with syntax highlighting</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">⚙️</div>\n            <h3>Settings</h3>\n            <p>Customize your WebOS experience</p>\n          </div>\n          \n          <div style=\"background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; text-align: center;\">\n            <div style=\"font-size: 3rem; margin-bottom: 10px;\">📥</div>\n            <h3>Download Manager</h3>\n            <p>Manage your downloads</p>\n          </div>\n        </div>\n      </div>\n    `\n  },\n  'webos://settings': {\n    title: 'WebOS - Settings',\n    content: `\n      <div style=\"font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%); min-height: 100vh; color: white;\">\n        <h1 style=\"text-align: center; margin-bottom: 40px;\">WebOS Settings</h1>\n        \n        <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin-bottom: 20px;\">\n          <h2>Customization</h2>\n          <p>• Choose from 12+ beautiful wallpaper gradients</p>\n          <p>• Upload custom background images</p>\n          <p>• Light and dark theme options</p>\n          <p>• Desktop icon visibility controls</p>\n        </div>\n        \n        <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; margin-bottom: 20px;\">\n          <h2>Audio</h2>\n          <p>• System-wide sound effects</p>\n          <p>• Volume controls</p>\n          <p>• Notification sounds</p>\n          <p>• Interactive sound testing</p>\n        </div>\n        \n        <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px;\">\n          <h2>System</h2>\n          <p>• Power management</p>\n          <p>• Account settings</p>\n          <p>• Factory reset options</p>\n          <p>• Multi-user support</p>\n        </div>\n      </div>\n    `\n  },\n  'webos://terminal': {\n    title: 'WebOS - Terminal Guide',\n    content: `\n      <div style=\"font-family: 'Courier New', monospace; max-width: 1000px; margin: 0 auto; padding: 20px; background: #0a0a0a; color: #00ff00; min-height: 100vh;\">\n        <h1 style=\"color: #00ff00; text-align: center; margin-bottom: 30px;\">WebOS Terminal</h1>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px; margin-bottom: 20px;\">\n          <h2 style=\"color: #ffff00;\">System Commands</h2>\n          <p>ls, pwd, cd, mkdir, touch, cat, tree, ps, top, free, df, lscpu, lsblk</p>\n        </div>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px; margin-bottom: 20px;\">\n          <h2 style=\"color: #ffff00;\">Network Tools</h2>\n          <p>ping, curl, wget, netstat, ifconfig, ip</p>\n        </div>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px; margin-bottom: 20px;\">\n          <h2 style=\"color: #ffff00;\">Development</h2>\n          <p>git, node, npm, python, vim, nano, code</p>\n        </div>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px; margin-bottom: 20px;\">\n          <h2 style=\"color: #ffff00;\">Package Management</h2>\n          <p>pacman, yay, flatpak</p>\n        </div>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px; margin-bottom: 20px;\">\n          <h2 style=\"color: #ffff00;\">Fun Commands</h2>\n          <p>matrix, hack, cowsay, fortune, cmatrix, neofetch</p>\n        </div>\n        \n        <div style=\"background: #111; padding: 20px; border: 1px solid #333; border-radius: 5px;\">\n          <h2 style=\"color: #ffff00;\">Application Launchers</h2>\n          <p>browser, downloads, emulator, roblox, code</p>\n        </div>\n      </div>\n    `\n  },\n  'webos://files': {\n    title: 'WebOS - File System',\n    content: `\n      <div style=\"font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #16a085 0%, #f4d03f 100%); min-height: 100vh; color: white;\">\n        <h1 style=\"text-align: center; margin-bottom: 40px;\">WebOS File System</h1>\n        \n        <div style=\"background: rgba(0,0,0,0.2); padding: 20px; border-radius: 10px; font-family: monospace;\">\n          <h2>Directory Structure</h2>\n          <pre style=\"color: #fff; font-size: 14px;\">\n/\n├── home/\n│   ├── user/\n│   │   ├── Desktop/\n│   │   ├── Documents/\n│   │   ├── Downloads/\n│   │   ├── Music/\n│   │   ├── Pictures/\n│   │   └── Videos/\n│   └── .config/\n│       ├── webos/\n│       └── applications/\n├── etc/\n│   ├── motd\n│   └── passwd\n├── usr/\n│   ├── bin/\n│   ├── sbin/\n│   └── share/\n└── var/\n    ├── log/\n    └── tmp/\n          </pre>\n        </div>\n      </div>\n    `\n  },\n  'webos://search': {\n    title: 'WebOS Search Engine',\n    content: `\n      <div style=\"font-family: Arial, sans-serif; max-width: 1200px; margin: 0 auto; padding: 20px; background: linear-gradient(135deg, #4285f4 0%, #34a853 50%, #fbbc05 75%, #ea4335 100%); min-height: 100vh; color: white;\">\n        <div style=\"text-align: center; padding: 100px 20px;\">\n          <h1 style=\"font-size: 4rem; margin-bottom: 30px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);\">WebOS Search</h1>\n          <p style=\"font-size: 1.2rem; margin-bottom: 40px; opacity: 0.9;\">Your gateway to the web and WebOS ecosystem</p>\n          \n          <div style=\"max-width: 600px; margin: 0 auto;\">\n            <div style=\"background: rgba(255,255,255,0.95); border-radius: 25px; padding: 15px 25px; margin-bottom: 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.2);\">\n              <input \n                type=\"text\" \n                placeholder=\"Search the web or WebOS...\" \n                style=\"width: 100%; border: none; outline: none; font-size: 1.1rem; padding: 10px; background: transparent; color: #333;\"\n                onkeydown=\"if(event.key==='Enter') window.parent.postMessage({type:'search', query: event.target.value}, '*')\"\n              />\n            </div>\n            \n            <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 40px;\">\n              <button onclick=\"window.parent.postMessage({type:'quickSearch', engine: 'google', query: ''}, '*')\" style=\"background: rgba(255,255,255,0.2); border: none; padding: 15px; border-radius: 10px; color: white; font-size: 1rem; cursor: pointer; transition: all 0.3s;\">\n                🔍 Google Search\n              </button>\n              <button onclick=\"window.parent.postMessage({type:'quickSearch', engine: 'wikipedia', query: ''}, '*')\" style=\"background: rgba(255,255,255,0.2); border: none; padding: 15px; border-radius: 10px; color: white; font-size: 1rem; cursor: pointer; transition: all 0.3s;\">\n                📚 Wikipedia\n              </button>\n              <button onclick=\"window.parent.postMessage({type:'quickSearch', engine: 'duckduckgo', query: ''}, '*')\" style=\"background: rgba(255,255,255,0.2); border: none; padding: 15px; border-radius: 10px; color: white; font-size: 1rem; cursor: pointer; transition: all 0.3s;\">\n                🦆 DuckDuckGo\n              </button>\n            </div>\n            \n            <div style=\"background: rgba(255,255,255,0.1); padding: 30px; border-radius: 15px; backdrop-filter: blur(10px);\">\n              <h3 style=\"margin-bottom: 20px;\">Quick Links</h3>\n              <div style=\"display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;\">\n                <a href=\"webos://home\" style=\"color: white; text-decoration: none; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;\">🏠 WebOS Home</a>\n                <a href=\"webos://apps\" style=\"color: white; text-decoration: none; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;\">📱 Applications</a>\n                <a href=\"webos://terminal\" style=\"color: white; text-decoration: none; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;\">💻 Terminal</a>\n                <a href=\"webos://settings\" style=\"color: white; text-decoration: none; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;\">⚙️ Settings</a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `\n  }\n};\n\nexport const WebBrowser: FC = () => {\n  const [tabs, setTabs] = useState<Tab[]>([\n    { id: '1', title: 'WebOS Search', url: 'webos://search', isLoading: false }\n  ]);\n  const [activeTabId, setActiveTabId] = useState('1');\n  const [bookmarks, setBookmarks] = useState<Bookmark[]>(defaultBookmarks);\n  const [history, setHistory] = useState<HistoryEntry[]>([]);\n  const [showBookmarks, setShowBookmarks] = useState(false);\n  const [addressBarValue, setAddressBarValue] = useState('webos://search');\n  const [selectedSearchEngine, setSelectedSearchEngine] = useState('webos');\n  const [searchSuggestions, setSearchSuggestions] = useState<string[]>([]);\n  const [showSuggestions, setShowSuggestions] = useState(false);\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  useEffect(() => {\n    if (activeTab) {\n      setAddressBarValue(activeTab.url);\n      loadContent(activeTab.url);\n    }\n  }, [activeTabId]);\n\n  // Listen for search messages from iframe\n  useEffect(() => {\n    const handleMessage = (event: MessageEvent) => {\n      if (event.data?.type === 'search') {\n        const query = event.data.query;\n        if (query) {\n          const searchUrl = searchEngines[selectedSearchEngine as keyof typeof searchEngines].url(query);\n          navigate(searchUrl);\n        }\n      } else if (event.data?.type === 'quickSearch') {\n        const engine = event.data.engine;\n        const query = event.data.query || '';\n        if (engine && searchEngines[engine as keyof typeof searchEngines]) {\n          const searchUrl = searchEngines[engine as keyof typeof searchEngines].url(query || 'WebOS');\n          navigate(searchUrl);\n        }\n      }\n    };\n\n    window.addEventListener('message', handleMessage);\n    return () => window.removeEventListener('message', handleMessage);\n  }, [selectedSearchEngine]);\n\n  const loadContent = (url: string) => {\n    const content = webContent[url];\n    if (content && iframeRef.current) {\n      const iframe = iframeRef.current;\n      const doc = iframe.contentDocument || iframe.contentWindow?.document;\n      if (doc) {\n        doc.open();\n        doc.write(content.content);\n        doc.close();\n        \n        // Update tab title\n        setTabs(prev => prev.map(tab => \n          tab.id === activeTabId ? { ...tab, title: content.title, isLoading: false } : tab\n        ));\n      }\n    } else if (url.startsWith('http')) {\n      // Handle external URLs with proxy support\n      if (iframeRef.current) {\n        const proxyUrl = `/api/proxy?url=${encodeURIComponent(url)}`;\n        \n        setTabs(prev => prev.map(tab => \n          tab.id === activeTabId ? { ...tab, isLoading: true } : tab\n        ));\n\n        // Try to load through proxy first\n        fetch(proxyUrl)\n          .then(response => {\n            if (!response.ok) {\n              throw new Error(`HTTP ${response.status}`);\n            }\n            return response.text();\n          })\n          .then(html => {\n            if (iframeRef.current) {\n              const iframe = iframeRef.current;\n              const doc = iframe.contentDocument || iframe.contentWindow?.document;\n              if (doc) {\n                doc.open();\n                // Fix relative URLs and resources\n                const baseUrl = new URL(url).origin;\n                const fixedHtml = html\n                  .replace(/href=\"\\/([^\"]*)/g, `href=\"${baseUrl}/$1`)\n                  .replace(/src=\"\\/([^\"]*)/g, `src=\"${baseUrl}/$1`)\n                  .replace(/url\\(\\/([^)]*)/g, `url(${baseUrl}/$1`);\n                \n                doc.write(fixedHtml);\n                doc.close();\n                \n                // Update tab title from page content\n                const titleMatch = html.match(/<title[^>]*>([^<]+)<\\/title>/i);\n                if (titleMatch) {\n                  setTabs(prev => prev.map(tab => \n                    tab.id === activeTabId ? { \n                      ...tab, \n                      title: titleMatch[1].substring(0, 50),\n                      isLoading: false \n                    } : tab\n                  ));\n                } else {\n                  setTabs(prev => prev.map(tab => \n                    tab.id === activeTabId ? { ...tab, isLoading: false } : tab\n                  ));\n                }\n              }\n            }\n          })\n          .catch((error) => {\n            console.log('Proxy failed, using direct iframe:', error);\n            // Fallback to direct iframe loading with better error handling\n            if (iframeRef.current) {\n              const iframe = iframeRef.current;\n              iframe.src = url;\n              \n              const handleLoad = () => {\n                setTabs(prev => prev.map(tab => \n                  tab.id === activeTabId ? { ...tab, isLoading: false } : tab\n                ));\n                iframe.removeEventListener('load', handleLoad);\n                iframe.removeEventListener('error', handleError);\n              };\n              \n              const handleError = () => {\n                setTabs(prev => prev.map(tab => \n                  tab.id === activeTabId ? { ...tab, isLoading: false } : tab\n                ));\n                // Show connection error page\n                const doc = iframe.contentDocument || iframe.contentWindow?.document;\n                if (doc) {\n                  doc.open();\n                  doc.write(`\n                    <div style=\"font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f0f0f0; min-height: 100vh;\">\n                      <h1 style=\"color: #e74c3c;\">Connection Failed</h1>\n                      <p>Unable to connect to \"${url}\"</p>\n                      <p>The site may be unreachable or blocked by CORS policy.</p>\n                      <button onclick=\"window.location.reload()\" style=\"padding: 10px 20px; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer;\">\n                        Try Again\n                      </button>\n                    </div>\n                  `);\n                  doc.close();\n                }\n                iframe.removeEventListener('load', handleLoad);\n                iframe.removeEventListener('error', handleError);\n              };\n              \n              iframe.addEventListener('load', handleLoad);\n              iframe.addEventListener('error', handleError);\n            }\n          });\n      }\n    } else {\n      // Show 404 page for unknown URLs\n      if (iframeRef.current) {\n        const iframe = iframeRef.current;\n        const doc = iframe.contentDocument || iframe.contentWindow?.document;\n        if (doc) {\n          doc.open();\n          doc.write(`\n            <div style=\"font-family: Arial, sans-serif; text-align: center; padding: 50px; background: #f0f0f0; min-height: 100vh;\">\n              <h1 style=\"color: #e74c3c;\">404 - Page Not Found</h1>\n              <p>The page \"${url}\" could not be found.</p>\n              <p>Try visiting one of the WebOS pages like webos://home</p>\n            </div>\n          `);\n          doc.close();\n        }\n      }\n    }\n  };\n\n  const navigate = (url: string) => {\n    if (!activeTab) return;\n    \n    // Add to history\n    const historyEntry: HistoryEntry = {\n      id: Date.now().toString(),\n      title: activeTab.title,\n      url: activeTab.url,\n      timestamp: new Date()\n    };\n    setHistory(prev => [historyEntry, ...prev.slice(0, 99)]);\n\n    // Update active tab\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId ? { ...tab, url, isLoading: true } : tab\n    ));\n    setAddressBarValue(url);\n    loadContent(url);\n    soundManager.play('click');\n  };\n\n  const createNewTab = () => {\n    const newTab: Tab = {\n      id: Date.now().toString(),\n      title: 'WebOS Search',\n      url: 'webos://search',\n      isLoading: false\n    };\n    setTabs(prev => [...prev, newTab]);\n    setActiveTabId(newTab.id);\n    soundManager.play('open');\n  };\n\n  const closeTab = (tabId: string) => {\n    if (tabs.length === 1) return; // Don't close the last tab\n    \n    setTabs(prev => prev.filter(tab => tab.id !== tabId));\n    \n    if (activeTabId === tabId) {\n      const tabIndex = tabs.findIndex(tab => tab.id === tabId);\n      const newActiveTab = tabs[tabIndex - 1] || tabs[tabIndex + 1];\n      if (newActiveTab) {\n        setActiveTabId(newActiveTab.id);\n      }\n    }\n    soundManager.play('close');\n  };\n\n  const addBookmark = () => {\n    if (!activeTab) return;\n    \n    const bookmark: Bookmark = {\n      id: Date.now().toString(),\n      title: activeTab.title,\n      url: activeTab.url,\n      favicon: '⭐'\n    };\n    setBookmarks(prev => [...prev, bookmark]);\n    soundManager.play('success');\n  };\n\n  const handleAddressBarSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    let url = addressBarValue.trim();\n    \n    if (!url.startsWith('http') && !url.startsWith('webos://')) {\n      if (url.includes('.') && !url.includes(' ')) {\n        // Looks like a domain\n        url = 'https://' + url;\n      } else {\n        // Treat as search query\n        const searchEngine = searchEngines[selectedSearchEngine as keyof typeof searchEngines];\n        url = searchEngine.url(url);\n      }\n    }\n    \n    navigate(url);\n    setShowSuggestions(false);\n  };\n\n  const handleAddressBarChange = (value: string) => {\n    setAddressBarValue(value);\n    \n    // Generate search suggestions\n    if (value.trim() && !value.startsWith('http') && !value.startsWith('webos://')) {\n      const suggestions = [\n        `Search ${searchEngines[selectedSearchEngine as keyof typeof searchEngines].name} for \"${value}\"`,\n        `Visit ${value}.com`,\n        `Visit ${value}.org`,\n        `Search Wikipedia for \"${value}\"`\n      ];\n      setSearchSuggestions(suggestions);\n      setShowSuggestions(true);\n    } else {\n      setShowSuggestions(false);\n    }\n  };\n\n  return (\n    <div className=\"flex flex-col h-full bg-white dark:bg-gray-900\">\n      {/* Tab Bar */}\n      <div className=\"flex items-center bg-gray-100 dark:bg-gray-800 border-b\">\n        <div className=\"flex-1 flex items-center overflow-x-auto\">\n          {tabs.map(tab => (\n            <div\n              key={tab.id}\n              className={`flex items-center px-4 py-2 border-r cursor-pointer min-w-0 max-w-48 ${\n                activeTabId === tab.id \n                  ? 'bg-white dark:bg-gray-700 border-b-2 border-blue-500' \n                  : 'hover:bg-gray-200 dark:hover:bg-gray-700'\n              }`}\n              onClick={() => setActiveTabId(tab.id)}\n            >\n              <span className=\"truncate flex-1 text-sm\">{tab.title}</span>\n              {tabs.length > 1 && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  className=\"ml-2 h-4 w-4 p-0\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    closeTab(tab.id);\n                  }}\n                >\n                  <X className=\"h-3 w-3\" />\n                </Button>\n              )}\n            </div>\n          ))}\n        </div>\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"mx-2\"\n          onClick={createNewTab}\n        >\n          <Plus className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      {/* Navigation Bar */}\n      <div className=\"flex items-center gap-2 p-2 bg-gray-50 dark:bg-gray-800 border-b\">\n        <Button variant=\"ghost\" size=\"sm\" onClick={() => window.history.back()}>\n          <ArrowLeft className=\"h-4 w-4\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"sm\" onClick={() => window.history.forward()}>\n          <ArrowRight className=\"h-4 w-4\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"sm\" onClick={() => loadContent(activeTab?.url || 'webos://home')}>\n          <RotateCcw className=\"h-4 w-4\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"sm\" onClick={() => navigate('webos://search')}>\n          <Home className=\"h-4 w-4\" />\n        </Button>\n        \n        <form onSubmit={handleAddressBarSubmit} className=\"flex-1 flex gap-2\">\n          <div className=\"flex-1 relative\">\n            <Globe className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400\" />\n            <Input\n              value={addressBarValue}\n              onChange={(e) => handleAddressBarChange(e.target.value)}\n              onFocus={() => {\n                if (addressBarValue.trim() && !addressBarValue.startsWith('http') && !addressBarValue.startsWith('webos://')) {\n                  setShowSuggestions(true);\n                }\n              }}\n              onBlur={() => setTimeout(() => setShowSuggestions(false), 200)}\n              className=\"pl-10 pr-20\"\n              placeholder={`Search ${searchEngines[selectedSearchEngine as keyof typeof searchEngines].name} or enter URL...`}\n            />\n            \n            {/* Search Engine Selector */}\n            <div className=\"absolute right-2 top-1/2 transform -translate-y-1/2\">\n              <select\n                value={selectedSearchEngine}\n                onChange={(e) => setSelectedSearchEngine(e.target.value)}\n                className=\"text-xs bg-transparent border-none outline-none cursor-pointer\"\n              >\n                <option value=\"webos\">WebOS</option>\n                <option value=\"google\">Google</option>\n                <option value=\"duckduckgo\">DuckDuckGo</option>\n                <option value=\"wikipedia\">Wikipedia</option>\n              </select>\n            </div>\n\n            {/* Search Suggestions */}\n            {showSuggestions && searchSuggestions.length > 0 && (\n              <div className=\"absolute top-full left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-b-md shadow-lg z-10\">\n                {searchSuggestions.map((suggestion, index) => (\n                  <button\n                    key={index}\n                    type=\"button\"\n                    className=\"w-full px-4 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center gap-2\"\n                    onClick={() => {\n                      if (suggestion.includes('Visit ')) {\n                        const domain = suggestion.split('Visit ')[1];\n                        navigate(`https://${domain}`);\n                      } else if (suggestion.includes('Search ')) {\n                        const query = addressBarValue.trim();\n                        if (suggestion.includes('Wikipedia')) {\n                          navigate(searchEngines.wikipedia.url(query));\n                        } else {\n                          const searchEngine = searchEngines[selectedSearchEngine as keyof typeof searchEngines];\n                          navigate(searchEngine.url(query));\n                        }\n                      }\n                      setShowSuggestions(false);\n                    }}\n                  >\n                    <Search className=\"h-3 w-3 text-gray-400\" />\n                    <span className=\"text-sm\">{suggestion}</span>\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n          <Button type=\"submit\" variant=\"ghost\" size=\"sm\">\n            <Search className=\"h-4 w-4\" />\n          </Button>\n        </form>\n\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          onClick={() => setShowBookmarks(!showBookmarks)}\n        >\n          <Star className=\"h-4 w-4\" />\n        </Button>\n        <Button variant=\"ghost\" size=\"sm\" onClick={addBookmark}>\n          <BookmarkPlus className=\"h-4 w-4\" />\n        </Button>\n      </div>\n\n      {/* Bookmarks Bar */}\n      {showBookmarks && (\n        <div className=\"flex items-center gap-2 p-2 bg-gray-100 dark:bg-gray-700 border-b overflow-x-auto\">\n          {bookmarks.map(bookmark => (\n            <Button\n              key={bookmark.id}\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"flex items-center gap-2 whitespace-nowrap\"\n              onClick={() => navigate(bookmark.url)}\n            >\n              <span>{bookmark.favicon}</span>\n              <span className=\"text-xs\">{bookmark.title}</span>\n            </Button>\n          ))}\n        </div>\n      )}\n\n      {/* Content Area */}\n      <div className=\"flex-1 relative\">\n        <iframe\n          ref={iframeRef}\n          className=\"w-full h-full border-0\"\n          sandbox=\"allow-same-origin allow-scripts allow-forms allow-popups\"\n          title=\"WebOS Browser Content\"\n          onLoad={() => {\n            setTabs(prev => prev.map(tab => \n              tab.id === activeTabId ? { ...tab, isLoading: false } : tab\n            ));\n          }}\n          onError={() => {\n            setTabs(prev => prev.map(tab => \n              tab.id === activeTabId ? { ...tab, isLoading: false } : tab\n            ));\n          }}\n        />\n        \n        {activeTab?.isLoading && (\n          <div className=\"absolute inset-0 bg-white dark:bg-gray-900 flex items-center justify-center z-10\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4\"></div>\n              <p className=\"text-lg\">Loading {activeTab.url}</p>\n              <p className=\"text-sm text-gray-500 mt-2\">Connecting through WebOS proxy...</p>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":32500},"client/src/components/bumblebee-apps/BumblebeeBrowser.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { \n  X, \n  ArrowLeft, \n  ArrowRight, \n  RotateCcw, \n  Home, \n  Star, \n  Plus, \n  Settings, \n  Menu,\n  Shield,\n  Download,\n  Bookmark\n} from 'lucide-react';\n\ninterface Tab {\n  id: string;\n  title: string;\n  url: string;\n  favicon?: string;\n}\n\ninterface BumblebeeBrowserProps {\n  onClose: () => void;\n}\n\nexport const BumblebeeBrowser: FC<BumblebeeBrowserProps> = ({ onClose }) => {\n  const [tabs, setTabs] = useState<Tab[]>([\n    { id: '1', title: 'Ubuntu Home', url: 'https://ubuntu.com', favicon: '🐧' }\n  ]);\n  const [activeTabId, setActiveTabId] = useState('1');\n  const [addressBar, setAddressBar] = useState('https://ubuntu.com');\n  const [bookmarks, setBookmarks] = useState([\n    { title: 'Ubuntu', url: 'https://ubuntu.com' },\n    { title: 'Mozilla Firefox', url: 'https://mozilla.org/firefox' },\n    { title: 'GNOME', url: 'https://gnome.org' },\n    { title: 'GitHub', url: 'https://github.com' }\n  ]);\n\n  const activeTab = tabs.find(tab => tab.id === activeTabId);\n\n  const createNewTab = () => {\n    const newTab: Tab = {\n      id: Date.now().toString(),\n      title: 'New Tab',\n      url: 'about:blank'\n    };\n    setTabs(prev => [...prev, newTab]);\n    setActiveTabId(newTab.id);\n    setAddressBar('');\n  };\n\n  const closeTab = (tabId: string) => {\n    const newTabs = tabs.filter(tab => tab.id !== tabId);\n    if (newTabs.length === 0) {\n      onClose();\n      return;\n    }\n    setTabs(newTabs);\n    if (activeTabId === tabId) {\n      setActiveTabId(newTabs[0].id);\n      setAddressBar(newTabs[0].url);\n    }\n  };\n\n  const navigateToUrl = (url: string) => {\n    if (!url) return;\n    \n    let finalUrl = url;\n    if (!url.startsWith('http://') && !url.startsWith('https://') && !url.startsWith('about:')) {\n      finalUrl = `https://${url}`;\n    }\n\n    setTabs(prev => prev.map(tab => \n      tab.id === activeTabId \n        ? { ...tab, url: finalUrl, title: getDomainFromUrl(finalUrl) }\n        : tab\n    ));\n    setAddressBar(finalUrl);\n  };\n\n  const getDomainFromUrl = (url: string) => {\n    try {\n      const domain = new URL(url).hostname;\n      return domain.replace('www.', '');\n    } catch {\n      return url;\n    }\n  };\n\n  const getPageContent = (url: string) => {\n    if (url === 'about:blank' || !url) {\n      return (\n        <div className=\"flex flex-col items-center justify-center h-full bg-gray-50\">\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4\">🦊</div>\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-4\">Firefox for Bumblebee OS</h2>\n            <p className=\"text-gray-600 mb-6\">Your privacy-focused browser experience</p>\n            <div className=\"grid grid-cols-2 gap-4 max-w-md\">\n              {bookmarks.map((bookmark, index) => (\n                <Button\n                  key={index}\n                  onClick={() => navigateToUrl(bookmark.url)}\n                  variant=\"outline\"\n                  className=\"p-4 h-auto\"\n                >\n                  <div className=\"text-center\">\n                    <div className=\"font-medium\">{bookmark.title}</div>\n                    <div className=\"text-sm text-gray-500\">{getDomainFromUrl(bookmark.url)}</div>\n                  </div>\n                </Button>\n              ))}\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    // Simulate different websites\n    const domain = getDomainFromUrl(url);\n    \n    if (domain.includes('ubuntu.com')) {\n      return (\n        <div className=\"p-8 bg-white\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"text-4xl mr-4\">🐧</div>\n              <h1 className=\"text-4xl font-bold text-orange-600\">Ubuntu</h1>\n            </div>\n            <h2 className=\"text-2xl font-semibold mb-4\">The open source operating system</h2>\n            <p className=\"text-gray-700 mb-6\">\n              Ubuntu is a complete Linux operating system, freely available with both community and professional support.\n            </p>\n            <div className=\"grid grid-cols-3 gap-6\">\n              <div className=\"bg-gray-100 p-4 rounded-lg\">\n                <h3 className=\"font-semibold mb-2\">Ubuntu Desktop</h3>\n                <p className=\"text-sm text-gray-600\">The open source desktop operating system</p>\n              </div>\n              <div className=\"bg-gray-100 p-4 rounded-lg\">\n                <h3 className=\"font-semibold mb-2\">Ubuntu Server</h3>\n                <p className=\"text-sm text-gray-600\">Secure, fast and economically scalable</p>\n              </div>\n              <div className=\"bg-gray-100 p-4 rounded-lg\">\n                <h3 className=\"font-semibold mb-2\">Ubuntu Core</h3>\n                <p className=\"text-sm text-gray-600\">Optimised Ubuntu for IoT and embedded systems</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (domain.includes('mozilla.org') || domain.includes('firefox')) {\n      return (\n        <div className=\"p-8 bg-white\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"text-4xl mr-4\">🦊</div>\n              <h1 className=\"text-4xl font-bold text-blue-600\">Mozilla Firefox</h1>\n            </div>\n            <h2 className=\"text-2xl font-semibold mb-4\">Fast, Private & Safe Web Browser</h2>\n            <p className=\"text-gray-700 mb-6\">\n              Firefox is a free web browser backed by Mozilla, a non-profit dedicated to internet health and privacy.\n            </p>\n            <div className=\"bg-blue-50 p-6 rounded-lg\">\n              <h3 className=\"font-semibold mb-3\">Why Firefox?</h3>\n              <ul className=\"space-y-2 text-gray-700\">\n                <li>• Enhanced Tracking Protection</li>\n                <li>• Private browsing with extra protection</li>\n                <li>• Sync across all your devices</li>\n                <li>• Thousands of extensions</li>\n              </ul>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    if (domain.includes('github.com')) {\n      return (\n        <div className=\"p-8 bg-white\">\n          <div className=\"max-w-4xl mx-auto\">\n            <div className=\"flex items-center mb-6\">\n              <div className=\"text-4xl mr-4\">🐙</div>\n              <h1 className=\"text-4xl font-bold text-gray-900\">GitHub</h1>\n            </div>\n            <h2 className=\"text-2xl font-semibold mb-4\">Where the world builds software</h2>\n            <p className=\"text-gray-700 mb-6\">\n              Millions of developers and companies build, ship, and maintain their software on GitHub.\n            </p>\n            <div className=\"grid grid-cols-2 gap-6\">\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h3 className=\"font-semibold mb-2\">🔧 Collaborative coding</h3>\n                <p className=\"text-sm text-gray-600\">Work together from anywhere</p>\n              </div>\n              <div className=\"bg-gray-50 p-4 rounded-lg\">\n                <h3 className=\"font-semibold mb-2\">🚀 Automation & CI/CD</h3>\n                <p className=\"text-sm text-gray-600\">Built-in CI/CD and automation</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    // Default content for other sites\n    return (\n      <div className=\"flex items-center justify-center h-full bg-gray-100\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">🌐</div>\n          <h2 className=\"text-xl font-semibold mb-2\">{domain}</h2>\n          <p className=\"text-gray-600\">Website content would be displayed here</p>\n          <p className=\"text-sm text-gray-500 mt-2\">This is a simulated browser environment</p>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl overflow-hidden border border-orange-300 w-full max-w-5xl h-[700px] flex flex-col\">\n      {/* Title Bar */}\n      <div className=\"bg-orange-600 px-4 py-2 flex items-center justify-between text-white\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"text-lg\">🦊</div>\n          <span className=\"font-medium\">Firefox</span>\n        </div>\n        <Button onClick={onClose} size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-orange-700\">\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Tab Bar */}\n      <div className=\"bg-gray-200 flex items-center\">\n        {tabs.map(tab => (\n          <div\n            key={tab.id}\n            className={`flex items-center px-4 py-2 cursor-pointer border-r border-gray-300 min-w-0 max-w-48 ${\n              tab.id === activeTabId ? 'bg-white' : 'bg-gray-100 hover:bg-gray-50'\n            }`}\n            onClick={() => {\n              setActiveTabId(tab.id);\n              setAddressBar(tab.url);\n            }}\n          >\n            <span className=\"mr-2\">{tab.favicon || '📄'}</span>\n            <span className=\"truncate flex-1 text-sm\">{tab.title}</span>\n            <Button\n              onClick={(e) => {\n                e.stopPropagation();\n                closeTab(tab.id);\n              }}\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"ml-2 h-6 w-6 p-0 hover:bg-gray-200\"\n            >\n              <X className=\"w-3 h-3\" />\n            </Button>\n          </div>\n        ))}\n        <Button onClick={createNewTab} size=\"sm\" variant=\"ghost\" className=\"px-3\">\n          <Plus className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Navigation Bar */}\n      <div className=\"bg-gray-100 px-4 py-2 flex items-center space-x-2 border-b\">\n        <Button size=\"sm\" variant=\"ghost\">\n          <ArrowLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <ArrowRight className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <RotateCcw className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" onClick={() => navigateToUrl('about:blank')}>\n          <Home className=\"w-4 h-4\" />\n        </Button>\n        \n        <div className=\"flex-1 flex items-center space-x-2\">\n          <div className=\"flex items-center bg-white rounded border px-3 py-1 flex-1\">\n            <Shield className=\"w-4 h-4 text-green-600 mr-2\" />\n            <Input\n              value={addressBar}\n              onChange={(e) => setAddressBar(e.target.value)}\n              onKeyPress={(e) => e.key === 'Enter' && navigateToUrl(addressBar)}\n              className=\"border-0 bg-transparent flex-1 focus:ring-0\"\n              placeholder=\"Search or enter address\"\n            />\n          </div>\n          <Button size=\"sm\" variant=\"ghost\">\n            <Star className=\"w-4 h-4\" />\n          </Button>\n        </div>\n\n        <Button size=\"sm\" variant=\"ghost\">\n          <Download className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <Menu className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Content Area */}\n      <div className=\"flex-1 overflow-auto\">\n        {activeTab && getPageContent(activeTab.url)}\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-gray-100 px-4 py-1 border-t text-xs text-gray-600\">\n        {activeTab?.url !== 'about:blank' && activeTab?.url && (\n          <span>Connected to {getDomainFromUrl(activeTab.url)}</span>\n        )}\n      </div>\n    </div>\n  );\n};","size_bytes":11532},"client/src/components/bumblebee-apps/BumblebeeFileManager.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { \n  X, \n  Folder, \n  File, \n  Home, \n  ChevronLeft, \n  ChevronRight, \n  ChevronUp,\n  Search,\n  Grid,\n  List,\n  Plus,\n  Trash2,\n  Copy,\n  Scissors,\n  Download,\n  Upload\n} from 'lucide-react';\n\ninterface FileItem {\n  name: string;\n  type: 'folder' | 'file';\n  size?: string;\n  modified: string;\n  icon?: string;\n}\n\ninterface BumblebeeFileManagerProps {\n  onClose: () => void;\n}\n\nexport const BumblebeeFileManager: FC<BumblebeeFileManagerProps> = ({ onClose }) => {\n  const [currentPath, setCurrentPath] = useState('/home/ubuntu');\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('list');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedItems, setSelectedItems] = useState<string[]>([]);\n\n  const homeItems: FileItem[] = [\n    { name: 'Desktop', type: 'folder', modified: '2024-01-15 10:30' },\n    { name: 'Documents', type: 'folder', modified: '2024-01-15 09:15' },\n    { name: 'Downloads', type: 'folder', modified: '2024-01-15 14:22' },\n    { name: 'Music', type: 'folder', modified: '2024-01-14 16:45' },\n    { name: 'Pictures', type: 'folder', modified: '2024-01-15 11:30' },\n    { name: 'Videos', type: 'folder', modified: '2024-01-14 20:15' },\n    { name: 'Public', type: 'folder', modified: '2024-01-10 08:00' },\n    { name: 'Templates', type: 'folder', modified: '2024-01-10 08:00' },\n    { name: '.bashrc', type: 'file', size: '3.2 KB', modified: '2024-01-10 08:00' },\n    { name: '.profile', type: 'file', size: '807 B', modified: '2024-01-10 08:00' },\n    { name: 'README.txt', type: 'file', size: '1.5 KB', modified: '2024-01-15 12:00' }\n  ];\n\n  const documentsItems: FileItem[] = [\n    { name: 'report.pdf', type: 'file', size: '2.4 MB', modified: '2024-01-15 09:15' },\n    { name: 'presentation.pptx', type: 'file', size: '5.1 MB', modified: '2024-01-14 15:30' },\n    { name: 'notes.txt', type: 'file', size: '847 B', modified: '2024-01-15 11:45' },\n    { name: 'budget.xlsx', type: 'file', size: '156 KB', modified: '2024-01-13 16:20' },\n    { name: 'Projects', type: 'folder', modified: '2024-01-12 10:00' }\n  ];\n\n  const downloadsItems: FileItem[] = [\n    { name: 'ubuntu-22.04.3-desktop-amd64.iso', type: 'file', size: '4.7 GB', modified: '2024-01-14 14:22' },\n    { name: 'VSCode-linux-x64.tar.gz', type: 'file', size: '156 MB', modified: '2024-01-13 11:15' },\n    { name: 'image.jpg', type: 'file', size: '2.3 MB', modified: '2024-01-15 13:45' },\n    { name: 'document.pdf', type: 'file', size: '890 KB', modified: '2024-01-15 10:30' }\n  ];\n\n  const getCurrentItems = () => {\n    if (currentPath === '/home/ubuntu/Documents') return documentsItems;\n    if (currentPath === '/home/ubuntu/Downloads') return downloadsItems;\n    return homeItems;\n  };\n\n  const filteredItems = getCurrentItems().filter(item =>\n    item.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const navigateToFolder = (folderName: string) => {\n    if (folderName === '..') {\n      const pathParts = currentPath.split('/');\n      pathParts.pop();\n      setCurrentPath(pathParts.join('/') || '/');\n    } else {\n      setCurrentPath(`${currentPath}/${folderName}`);\n    }\n  };\n\n  const navigateHome = () => {\n    setCurrentPath('/home/ubuntu');\n  };\n\n  const navigateBack = () => {\n    const pathParts = currentPath.split('/');\n    pathParts.pop();\n    setCurrentPath(pathParts.join('/') || '/');\n  };\n\n  const toggleItemSelection = (itemName: string) => {\n    setSelectedItems(prev =>\n      prev.includes(itemName)\n        ? prev.filter(name => name !== itemName)\n        : [...prev, itemName]\n    );\n  };\n\n  const getFileIcon = (item: FileItem) => {\n    if (item.type === 'folder') return <Folder className=\"w-5 h-5 text-yellow-600\" />;\n    \n    const ext = item.name.split('.').pop()?.toLowerCase();\n    switch (ext) {\n      case 'pdf': return <File className=\"w-5 h-5 text-red-600\" />;\n      case 'txt': return <File className=\"w-5 h-5 text-gray-600\" />;\n      case 'jpg': case 'png': case 'gif': return <File className=\"w-5 h-5 text-green-600\" />;\n      case 'mp3': case 'wav': return <File className=\"w-5 h-5 text-purple-600\" />;\n      case 'mp4': case 'avi': return <File className=\"w-5 h-5 text-blue-600\" />;\n      default: return <File className=\"w-5 h-5 text-gray-500\" />;\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl overflow-hidden border border-orange-300 w-full max-w-4xl h-[600px] flex flex-col\">\n      {/* Title Bar */}\n      <div className=\"bg-orange-600 px-4 py-2 flex items-center justify-between text-white\">\n        <div className=\"flex items-center space-x-2\">\n          <Folder className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Nautilus - File Manager</span>\n        </div>\n        <Button onClick={onClose} size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-orange-700\">\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"bg-gray-100 px-4 py-2 border-b flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <Button onClick={navigateBack} size=\"sm\" variant=\"ghost\" disabled={currentPath === '/home/ubuntu'}>\n            <ChevronLeft className=\"w-4 h-4\" />\n          </Button>\n          <Button onClick={navigateHome} size=\"sm\" variant=\"ghost\">\n            <Home className=\"w-4 h-4\" />\n          </Button>\n          <span className=\"text-sm text-gray-600 bg-white px-3 py-1 rounded border\">\n            {currentPath}\n          </span>\n        </div>\n        \n        <div className=\"flex items-center space-x-2\">\n          <div className=\"relative\">\n            <Search className=\"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\n            <Input\n              placeholder=\"Search files...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10 w-64\"\n            />\n          </div>\n          <Button \n            onClick={() => setViewMode(viewMode === 'grid' ? 'list' : 'grid')}\n            size=\"sm\" \n            variant=\"ghost\"\n          >\n            {viewMode === 'grid' ? <List className=\"w-4 h-4\" /> : <Grid className=\"w-4 h-4\" />}\n          </Button>\n        </div>\n      </div>\n\n      {/* Action Bar */}\n      <div className=\"bg-gray-50 px-4 py-2 border-b flex items-center space-x-2\">\n        <Button size=\"sm\" variant=\"ghost\" disabled={selectedItems.length === 0}>\n          <Copy className=\"w-4 h-4 mr-1\" />\n          Copy\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" disabled={selectedItems.length === 0}>\n          <Scissors className=\"w-4 h-4 mr-1\" />\n          Cut\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" disabled={selectedItems.length === 0}>\n          <Trash2 className=\"w-4 h-4 mr-1\" />\n          Delete\n        </Button>\n        <div className=\"border-l border-gray-300 h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\">\n          <Plus className=\"w-4 h-4 mr-1\" />\n          New Folder\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\">\n          <Upload className=\"w-4 h-4 mr-1\" />\n          Upload\n        </Button>\n      </div>\n\n      {/* File List */}\n      <div className=\"flex-1 overflow-auto p-4\">\n        {currentPath !== '/home/ubuntu' && (\n          <div \n            onClick={() => navigateToFolder('..')}\n            className=\"flex items-center p-2 hover:bg-gray-100 rounded cursor-pointer mb-2\"\n          >\n            <ChevronUp className=\"w-5 h-5 text-gray-500 mr-3\" />\n            <span className=\"text-gray-700\">.. (Parent Directory)</span>\n          </div>\n        )}\n\n        {viewMode === 'list' ? (\n          <div className=\"space-y-1\">\n            {filteredItems.map((item, index) => (\n              <div\n                key={index}\n                onClick={() => {\n                  if (item.type === 'folder') {\n                    navigateToFolder(item.name);\n                  } else {\n                    toggleItemSelection(item.name);\n                  }\n                }}\n                className={`flex items-center p-2 hover:bg-gray-100 rounded cursor-pointer ${\n                  selectedItems.includes(item.name) ? 'bg-blue-100' : ''\n                }`}\n              >\n                <div className=\"mr-3\">\n                  {getFileIcon(item)}\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"font-medium text-gray-900\">{item.name}</div>\n                  <div className=\"text-sm text-gray-500\">\n                    {item.size && `${item.size} • `}{item.modified}\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-6 gap-4\">\n            {filteredItems.map((item, index) => (\n              <div\n                key={index}\n                onClick={() => {\n                  if (item.type === 'folder') {\n                    navigateToFolder(item.name);\n                  } else {\n                    toggleItemSelection(item.name);\n                  }\n                }}\n                className={`flex flex-col items-center p-3 hover:bg-gray-100 rounded cursor-pointer ${\n                  selectedItems.includes(item.name) ? 'bg-blue-100' : ''\n                }`}\n              >\n                <div className=\"mb-2\">\n                  {getFileIcon(item)}\n                </div>\n                <div className=\"text-sm text-center text-gray-900 truncate w-full\">\n                  {item.name}\n                </div>\n                {item.size && (\n                  <div className=\"text-xs text-gray-500 mt-1\">{item.size}</div>\n                )}\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-gray-100 px-4 py-2 border-t text-sm text-gray-600\">\n        {filteredItems.length} items • {selectedItems.length} selected\n      </div>\n    </div>\n  );\n};","size_bytes":10057},"client/src/components/bumblebee-apps/BumblebeeTerminal.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { X, Minus, Square } from 'lucide-react';\n\ninterface TerminalLine {\n  type: 'command' | 'output' | 'error';\n  content: string;\n  timestamp: Date;\n}\n\ninterface BumblebeeTerminalProps {\n  onClose: () => void;\n}\n\nexport const BumblebeeTerminal: FC<BumblebeeTerminalProps> = ({ onClose }) => {\n  const [lines, setLines] = useState<TerminalLine[]>([\n    {\n      type: 'output',\n      content: 'Welcome to Bumblebee OS Terminal',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: 'Ubuntu 22.04 LTS - GNOME Desktop Environment',\n      timestamp: new Date()\n    },\n    {\n      type: 'output',\n      content: 'Type \"help\" for available commands',\n      timestamp: new Date()\n    }\n  ]);\n  const [currentCommand, setCurrentCommand] = useState('');\n  const [commandHistory, setCommandHistory] = useState<string[]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const inputRef = useRef<HTMLInputElement>(null);\n  const terminalRef = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    if (terminalRef.current) {\n      terminalRef.current.scrollTop = terminalRef.current.scrollHeight;\n    }\n  }, [lines]);\n\n  const executeCommand = (cmd: string) => {\n    const trimmedCmd = cmd.trim();\n    if (!trimmedCmd) return;\n\n    const commandLine: TerminalLine = {\n      type: 'command',\n      content: `ubuntu@bumblebee:~$ ${trimmedCmd}`,\n      timestamp: new Date()\n    };\n\n    let output = '';\n\n    if (trimmedCmd === 'help') {\n      output = `Bumblebee OS Terminal Commands:\n=================================\nhelp              - Show this help message\nclear             - Clear terminal\nls                - List directory contents\npwd               - Print working directory\nwhoami            - Show current user\ndate              - Show current date and time\nuname -a          - Show system information\nneofetch          - Show system info with logo\nhtop              - Show system monitor\nps aux            - Show running processes\napt list          - Show available packages\nsnap list         - Show installed snap packages\nfirefox           - Launch Firefox browser\ncode              - Launch VS Code\nnautilus          - Launch file manager\ngnome-settings    - Open system settings\nsystemctl status  - Show system services\ndf -h             - Show disk usage\nfree -h           - Show memory usage\nip addr           - Show network interfaces\nping google.com   - Test network connectivity\nexit              - Close terminal`;\n    } else if (trimmedCmd === 'clear') {\n      setLines([]);\n      return;\n    } else if (trimmedCmd === 'ls') {\n      output = `Desktop    Documents    Downloads    Music    Pictures    Videos\nPublic     Templates    snap         .bashrc  .profile     .cache`;\n    } else if (trimmedCmd === 'pwd') {\n      output = '/home/ubuntu';\n    } else if (trimmedCmd === 'whoami') {\n      output = 'ubuntu';\n    } else if (trimmedCmd === 'date') {\n      output = new Date().toString();\n    } else if (trimmedCmd === 'uname -a') {\n      output = 'Linux bumblebee 5.15.0-91-generic #101-Ubuntu SMP Tue Nov 14 13:30:08 UTC 2023 x86_64 x86_64 x86_64 GNU/Linux';\n    } else if (trimmedCmd === 'neofetch') {\n      output = `            .-/+oossssoo+/-.               ubuntu@bumblebee\n        \\`:+ssssssssssssssssss+:\\`           ------------------\n      -+ssssssssssssssssssyyssss+-         OS: Ubuntu 22.04.3 LTS x86_64\n    .ossssssssssssssssssdMMMNysssso.       Host: Bumblebee Virtual Machine\n   /ssssssssssshdmmNNmmyNMMMMhssssss/      Kernel: 5.15.0-91-generic\n  +ssssssssshmydMMMMMMMNddddyssssssss+     Uptime: 2 hours, 15 mins\n /sssssssshNMMMyhhyyyyhmNMMMNhssssssss/    Packages: 1834 (dpkg), 63 (snap)\n.ssssssssdMMMNhsssssssssshNMMMdssssssss.   Shell: bash 5.1.16\n+sssshhhyNMMNyssssssssssssyNMMMysssssss+   Resolution: 1920x1080\nossyNMMMNyMMhsssssssssssssshmmmhssssssso   DE: GNOME 42.9\nossyNMMMNyMMhsssssssssssssshmmmhssssssso   WM: Mutter\n+sssshhhyNMMNyssssssssssssyNMMMysssssss+   Terminal: gnome-terminal\n.ssssssssdMMMNhsssssssssshNMMMdssssssss.   CPU: Intel i5-8265U (4) @ 1.600GHz\n /sssssssshNMMMyhhyyyyhdNMMMNhssssssss/    Memory: 2048MiB / 8192MiB`;\n    } else if (trimmedCmd === 'exit') {\n      onClose();\n      return;\n    } else {\n      output = `bash: ${trimmedCmd}: command not found\nTry 'help' for available commands`;\n    }\n\n    const outputLine: TerminalLine = {\n      type: output.includes('command not found') ? 'error' : 'output',\n      content: output,\n      timestamp: new Date()\n    };\n\n    setLines(prev => [...prev, commandLine, outputLine]);\n    setCommandHistory(prev => [...prev, trimmedCmd]);\n    setCurrentCommand('');\n    setHistoryIndex(-1);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      executeCommand(currentCommand);\n    } else if (e.key === 'ArrowUp') {\n      e.preventDefault();\n      if (commandHistory.length > 0) {\n        const newIndex = historyIndex === -1 ? commandHistory.length - 1 : Math.max(0, historyIndex - 1);\n        setHistoryIndex(newIndex);\n        setCurrentCommand(commandHistory[newIndex]);\n      }\n    } else if (e.key === 'ArrowDown') {\n      e.preventDefault();\n      if (historyIndex !== -1) {\n        const newIndex = historyIndex + 1;\n        if (newIndex >= commandHistory.length) {\n          setHistoryIndex(-1);\n          setCurrentCommand('');\n        } else {\n          setHistoryIndex(newIndex);\n          setCurrentCommand(commandHistory[newIndex]);\n        }\n      }\n    }\n  };\n\n  const formatTime = (timestamp: Date) => {\n    return timestamp.toLocaleTimeString();\n  };\n\n  return (\n    <div className=\"bg-black rounded-lg shadow-2xl overflow-hidden border border-orange-500/20\">\n      <div className=\"bg-orange-800 px-4 py-2 flex items-center justify-between\">\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-3 h-3 bg-red-500 rounded-full\"></div>\n          <div className=\"w-3 h-3 bg-yellow-500 rounded-full\"></div>\n          <div className=\"w-3 h-3 bg-green-500 rounded-full\"></div>\n        </div>\n        <span className=\"text-white font-medium\">Bumblebee Terminal</span>\n        <Button onClick={onClose} size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-orange-700\">\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      <div \n        ref={terminalRef}\n        className=\"bg-black text-green-400 p-4 h-96 overflow-y-auto font-mono text-sm\"\n      >\n        {lines.map((line, index) => (\n          <div key={index} className=\"mb-1\">\n            <span className=\"text-gray-500 text-xs mr-2\">\n              {formatTime(line.timestamp)}\n            </span>\n            <span className={\n              line.type === 'command' ? 'text-yellow-400' :\n              line.type === 'error' ? 'text-red-400' : 'text-green-400'\n            }>\n              {line.content.split('\\n').map((subLine, subIndex) => (\n                <div key={subIndex}>{subLine}</div>\n              ))}\n            </span>\n          </div>\n        ))}\n        \n        <div className=\"flex items-center\">\n          <span className=\"text-yellow-400 mr-2\">\n            {formatTime(new Date())} ubuntu@bumblebee:~$\n          </span>\n          <input\n            ref={inputRef}\n            type=\"text\"\n            value={currentCommand}\n            onChange={(e) => setCurrentCommand(e.target.value)}\n            onKeyDown={handleKeyDown}\n            className=\"bg-transparent text-green-400 outline-none flex-1 font-mono\"\n            autoFocus\n          />\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":7613},"client/src/components/bumblebee-apps/BumblebeeTextEditor.tsx":{"content":"import { FC, useState, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { \n  X, \n  Save, \n  FileText, \n  Bold, \n  Italic, \n  Underline,\n  AlignLeft,\n  AlignCenter,\n  AlignRight,\n  Undo,\n  Redo,\n  Search,\n  Replace,\n  Settings\n} from 'lucide-react';\n\ninterface BumblebeeTextEditorProps {\n  onClose: () => void;\n}\n\nexport const BumblebeeTextEditor: FC<BumblebeeTextEditorProps> = ({ onClose }) => {\n  const [content, setContent] = useState(`Welcome to Bumblebee Text Editor\n\nThis is a fully functional text editor built for Bumblebee OS.\n\nFeatures:\n• Rich text formatting\n• File operations (New, Open, Save)\n• Find and Replace\n• Multiple document support\n• Syntax highlighting for code\n• Auto-save functionality\n\nStart typing to create your document. Use the toolbar above for formatting options.\n\nExample content:\n- Create documents\n- Edit existing files\n- Format text with bold, italic, underline\n- Align text left, center, or right\n- Search and replace text\n- Undo and redo operations\n\nThis text editor provides a complete writing experience similar to gedit or other Linux text editors.`);\n  \n  const [fileName, setFileName] = useState('Untitled Document');\n  const [isModified, setIsModified] = useState(false);\n  const [findText, setFindText] = useState('');\n  const [replaceText, setReplaceText] = useState('');\n  const [showFindReplace, setShowFindReplace] = useState(false);\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n\n  const handleContentChange = (newContent: string) => {\n    setContent(newContent);\n    setIsModified(true);\n  };\n\n  const handleSave = () => {\n    setIsModified(false);\n    // In a real implementation, this would save to the file system\n    console.log('Saving file:', fileName, content);\n  };\n\n  const handleNew = () => {\n    if (isModified) {\n      const shouldDiscard = confirm('You have unsaved changes. Create new document anyway?');\n      if (!shouldDiscard) return;\n    }\n    setContent('');\n    setFileName('Untitled Document');\n    setIsModified(false);\n  };\n\n  const handleOpen = () => {\n    // Simulate opening a file\n    const sampleFiles = [\n      { name: 'README.txt', content: 'This is a sample README file.\\n\\nContents:\\n1. Introduction\\n2. Installation\\n3. Usage\\n4. License' },\n      { name: 'notes.txt', content: 'Meeting Notes - January 15, 2024\\n\\nAttendees:\\n- John Smith\\n- Jane Doe\\n- Bob Johnson\\n\\nAgenda:\\n1. Project status\\n2. Next milestones\\n3. Resource allocation' },\n      { name: 'code.js', content: 'function hello() {\\n    console.log(\"Hello, Bumblebee OS!\");\\n    return \"Welcome to the text editor\";\\n}\\n\\nhello();' }\n    ];\n    \n    const randomFile = sampleFiles[Math.floor(Math.random() * sampleFiles.length)];\n    setFileName(randomFile.name);\n    setContent(randomFile.content);\n    setIsModified(false);\n  };\n\n  const handleFind = () => {\n    if (!findText) return;\n    \n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const text = textarea.value;\n    const index = text.toLowerCase().indexOf(findText.toLowerCase());\n    \n    if (index !== -1) {\n      textarea.focus();\n      textarea.setSelectionRange(index, index + findText.length);\n    } else {\n      alert(`\"${findText}\" not found`);\n    }\n  };\n\n  const handleReplace = () => {\n    if (!findText) return;\n    \n    const newContent = content.replace(new RegExp(findText, 'gi'), replaceText);\n    setContent(newContent);\n    setIsModified(true);\n  };\n\n  const insertFormatting = (before: string, after: string = '') => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selectedText = content.substring(start, end);\n    \n    const newContent = content.substring(0, start) + before + selectedText + after + content.substring(end);\n    setContent(newContent);\n    setIsModified(true);\n    \n    // Restore cursor position\n    setTimeout(() => {\n      textarea.focus();\n      textarea.setSelectionRange(start + before.length, end + before.length);\n    }, 0);\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-2xl overflow-hidden border border-orange-300 w-full max-w-5xl h-[700px] flex flex-col\">\n      {/* Title Bar */}\n      <div className=\"bg-orange-600 px-4 py-2 flex items-center justify-between text-white\">\n        <div className=\"flex items-center space-x-2\">\n          <FileText className=\"w-5 h-5\" />\n          <span className=\"font-medium\">Text Editor - {fileName}{isModified ? ' *' : ''}</span>\n        </div>\n        <Button onClick={onClose} size=\"sm\" variant=\"ghost\" className=\"text-white hover:bg-orange-700\">\n          <X className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Menu Bar */}\n      <div className=\"bg-gray-100 px-4 py-2 border-b flex items-center space-x-4\">\n        <Button onClick={handleNew} size=\"sm\" variant=\"ghost\">\n          New\n        </Button>\n        <Button onClick={handleOpen} size=\"sm\" variant=\"ghost\">\n          Open\n        </Button>\n        <Button onClick={handleSave} size=\"sm\" variant=\"ghost\" className={isModified ? 'text-blue-600' : ''}>\n          <Save className=\"w-4 h-4 mr-1\" />\n          Save\n        </Button>\n        <div className=\"border-l border-gray-300 h-6\" />\n        <Button onClick={() => setShowFindReplace(!showFindReplace)} size=\"sm\" variant=\"ghost\">\n          <Search className=\"w-4 h-4 mr-1\" />\n          Find\n        </Button>\n      </div>\n\n      {/* Toolbar */}\n      <div className=\"bg-gray-50 px-4 py-2 border-b flex items-center space-x-2\">\n        <Button \n          onClick={() => insertFormatting('**', '**')} \n          size=\"sm\" \n          variant=\"ghost\"\n          title=\"Bold\"\n        >\n          <Bold className=\"w-4 h-4\" />\n        </Button>\n        <Button \n          onClick={() => insertFormatting('*', '*')} \n          size=\"sm\" \n          variant=\"ghost\"\n          title=\"Italic\"\n        >\n          <Italic className=\"w-4 h-4\" />\n        </Button>\n        <Button \n          onClick={() => insertFormatting('_', '_')} \n          size=\"sm\" \n          variant=\"ghost\"\n          title=\"Underline\"\n        >\n          <Underline className=\"w-4 h-4\" />\n        </Button>\n        <div className=\"border-l border-gray-300 h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\" title=\"Align Left\">\n          <AlignLeft className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" title=\"Align Center\">\n          <AlignCenter className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" title=\"Align Right\">\n          <AlignRight className=\"w-4 h-4\" />\n        </Button>\n        <div className=\"border-l border-gray-300 h-6 mx-2\" />\n        <Button size=\"sm\" variant=\"ghost\" title=\"Undo\">\n          <Undo className=\"w-4 h-4\" />\n        </Button>\n        <Button size=\"sm\" variant=\"ghost\" title=\"Redo\">\n          <Redo className=\"w-4 h-4\" />\n        </Button>\n      </div>\n\n      {/* Find and Replace Bar */}\n      {showFindReplace && (\n        <div className=\"bg-yellow-50 px-4 py-2 border-b flex items-center space-x-2\">\n          <Input\n            placeholder=\"Find...\"\n            value={findText}\n            onChange={(e) => setFindText(e.target.value)}\n            className=\"w-48\"\n            onKeyPress={(e) => e.key === 'Enter' && handleFind()}\n          />\n          <Button onClick={handleFind} size=\"sm\" variant=\"outline\">\n            Find\n          </Button>\n          <Input\n            placeholder=\"Replace with...\"\n            value={replaceText}\n            onChange={(e) => setReplaceText(e.target.value)}\n            className=\"w-48\"\n          />\n          <Button onClick={handleReplace} size=\"sm\" variant=\"outline\">\n            Replace All\n          </Button>\n          <Button \n            onClick={() => setShowFindReplace(false)} \n            size=\"sm\" \n            variant=\"ghost\"\n          >\n            <X className=\"w-4 h-4\" />\n          </Button>\n        </div>\n      )}\n\n      {/* Editor Area */}\n      <div className=\"flex-1 flex\">\n        {/* Line Numbers */}\n        <div className=\"bg-gray-100 px-2 py-4 border-r text-sm text-gray-500 font-mono\">\n          {content.split('\\n').map((_, index) => (\n            <div key={index} className=\"h-6 leading-6 text-right\">\n              {index + 1}\n            </div>\n          ))}\n        </div>\n\n        {/* Text Area */}\n        <textarea\n          ref={textareaRef}\n          value={content}\n          onChange={(e) => handleContentChange(e.target.value)}\n          className=\"flex-1 p-4 font-mono text-sm resize-none outline-none border-0\"\n          placeholder=\"Start typing your document...\"\n          style={{ lineHeight: '1.5rem' }}\n        />\n      </div>\n\n      {/* Status Bar */}\n      <div className=\"bg-gray-100 px-4 py-2 border-t text-sm text-gray-600 flex items-center justify-between\">\n        <div>\n          Lines: {content.split('\\n').length} | \n          Characters: {content.length} | \n          Words: {content.trim() ? content.trim().split(/\\s+/).length : 0}\n        </div>\n        <div className=\"flex items-center space-x-4\">\n          {isModified && <span className=\"text-blue-600\">Modified</span>}\n          <span>UTF-8</span>\n          <span>Plain Text</span>\n        </div>\n      </div>\n    </div>\n  );\n};","size_bytes":9326},"client/src/components/desktop/AppFolder.tsx":{"content":"import { FC, useState, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Card } from '@/components/ui/card';\nimport { X, Plus, Edit2, Check, FolderOpen } from 'lucide-react';\n\ninterface App {\n  id: string;\n  name: string;\n  icon: string;\n}\n\ninterface AppFolderProps {\n  folder: {\n    id: string;\n    name: string;\n    apps: App[];\n    color: string;\n  };\n  position: { x: number; y: number };\n  onDoubleClick: () => void;\n  onDragStart?: (folderId: string, e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  onUpdateFolder?: (folderId: string, updates: any) => void;\n  onLaunchApp?: (appId: string) => void;\n  isDragging?: boolean;\n}\n\nexport const AppFolder: FC<AppFolderProps> = ({\n  folder,\n  position,\n  onDoubleClick,\n  onDragStart,\n  onDragEnd,\n  onUpdateFolder,\n  onLaunchApp,\n  isDragging = false\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [folderName, setFolderName] = useState(folder.name);\n  const [isBeingDragged, setIsBeingDragged] = useState(false);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (isEditing && inputRef.current) {\n      inputRef.current.focus();\n      inputRef.current.select();\n    }\n  }, [isEditing]);\n\n  const handleDragStart = (e: React.DragEvent) => {\n    setIsBeingDragged(true);\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', folder.id);\n    onDragStart?.(folder.id, e);\n  };\n\n  const handleDragEnd = (e: React.DragEvent) => {\n    setIsBeingDragged(false);\n    onDragEnd?.();\n  };\n\n  const handleSaveName = () => {\n    if (folderName.trim() && folderName !== folder.name) {\n      onUpdateFolder?.(folder.id, { name: folderName.trim() });\n    }\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSaveName();\n    } else if (e.key === 'Escape') {\n      setFolderName(folder.name);\n      setIsEditing(false);\n    }\n  };\n\n  const handleOpen = () => {\n    setIsOpen(true);\n  };\n\n  const handleClose = () => {\n    setIsOpen(false);\n  };\n\n  // Get the first 4 apps for preview\n  const previewApps = folder.apps.slice(0, 4);\n\n  return (\n    <>\n      {/* Folder Icon */}\n      <div\n        className={`absolute cursor-pointer group transition-all duration-200 ${\n          isBeingDragged || isDragging ? 'opacity-70 scale-110 z-50' : 'opacity-100'\n        }`}\n        style={{\n          left: position.x,\n          top: position.y,\n          transform: isBeingDragged ? 'rotate(3deg)' : 'none'\n        }}\n        onDoubleClick={handleOpen}\n        draggable={true}\n        onDragStart={handleDragStart}\n        onDragEnd={handleDragEnd}\n      >\n        <div className=\"flex flex-col items-center p-2 rounded-md hover:bg-primary/10 transition-all duration-200 w-20\">\n          {/* Folder Icon with App Previews */}\n          <div className=\"w-12 h-12 relative mb-2\">\n            {/* Folder Background */}\n            <div \n              className=\"w-full h-full rounded-md border-2 flex items-center justify-center relative overflow-hidden\"\n              style={{ backgroundColor: folder.color + '20', borderColor: folder.color }}\n            >\n              {/* App Preview Grid */}\n              <div className=\"grid grid-cols-2 gap-0.5 w-8 h-8\">\n                {previewApps.map((app, index) => (\n                  <div\n                    key={app.id}\n                    className=\"w-3 h-3 rounded-sm bg-card border border-border flex items-center justify-center\"\n                  >\n                    <i className={`${app.icon} text-xs text-primary`} />\n                  </div>\n                ))}\n                {/* Fill empty slots with placeholder */}\n                {Array.from({ length: 4 - previewApps.length }).map((_, index) => (\n                  <div\n                    key={`empty-${index}`}\n                    className=\"w-3 h-3 rounded-sm bg-muted/50 border border-border/50\"\n                  />\n                ))}\n              </div>\n              \n              {/* Folder Icon Overlay */}\n              <div className=\"absolute top-0 right-0 w-3 h-3 rounded-sm\" style={{ backgroundColor: folder.color }}>\n                <FolderOpen className=\"w-2 h-2 text-white m-0.5\" />\n              </div>\n            </div>\n          </div>\n\n          {/* Folder Name */}\n          {isEditing ? (\n            <div className=\"flex items-center gap-1\">\n              <Input\n                ref={inputRef}\n                value={folderName}\n                onChange={(e) => setFolderName(e.target.value)}\n                onKeyDown={handleKeyDown}\n                onBlur={handleSaveName}\n                className=\"w-16 h-5 text-xs p-1 text-center\"\n              />\n            </div>\n          ) : (\n            <div\n              className=\"text-foreground text-xs text-center font-mono max-w-20 leading-tight break-words cursor-text\"\n              onClick={(e) => {\n                e.stopPropagation();\n                setIsEditing(true);\n              }}\n            >\n              {folder.name}\n            </div>\n          )}\n          \n          {/* App Count Badge */}\n          <div className=\"text-xs text-muted-foreground mt-1\">\n            {folder.apps.length} apps\n          </div>\n        </div>\n      </div>\n\n      {/* Folder Content Modal */}\n      {isOpen && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n          <Card className=\"w-96 max-w-[90vw] max-h-[80vh] overflow-hidden\">\n            <div className=\"p-4 border-b border-border flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div \n                  className=\"w-6 h-6 rounded-md flex items-center justify-center\"\n                  style={{ backgroundColor: folder.color }}\n                >\n                  <FolderOpen className=\"w-4 h-4 text-white\" />\n                </div>\n                <h3 className=\"font-semibold\">{folder.name}</h3>\n              </div>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={handleClose}\n                className=\"h-6 w-6 p-0\"\n              >\n                <X className=\"w-4 h-4\" />\n              </Button>\n            </div>\n\n            <div className=\"p-4\">\n              {folder.apps.length === 0 ? (\n                <div className=\"text-center py-8 text-muted-foreground\">\n                  <FolderOpen className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                  <p className=\"text-sm\">This folder is empty</p>\n                  <p className=\"text-xs mt-1\">Drag apps here to organize them</p>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-4 gap-3\">\n                  {folder.apps.map((app) => (\n                    <div\n                      key={app.id}\n                      className=\"flex flex-col items-center p-2 rounded-md hover:bg-accent cursor-pointer transition-colors\"\n                      onClick={() => {\n                        onLaunchApp?.(app.id);\n                        handleClose();\n                      }}\n                    >\n                      <div className=\"w-8 h-8 bg-card border border-border rounded-md flex items-center justify-center mb-1\">\n                        <i className={`${app.icon} text-sm text-primary`} />\n                      </div>\n                      <span className=\"text-xs text-center font-mono leading-tight max-w-16 truncate\">\n                        {app.name}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            <div className=\"p-4 border-t border-border bg-muted/20\">\n              <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                <span>{folder.apps.length} applications</span>\n                <span>Double-click to rename folder</span>\n              </div>\n            </div>\n          </Card>\n        </div>\n      )}\n    </>\n  );\n};","size_bytes":8136},"client/src/components/desktop/AppLauncher.tsx":{"content":"import { FC, useState, useEffect, useRef } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem, CommandList } from '@/components/ui/command';\nimport { Dialog, DialogContent } from '@/components/ui/dialog';\nimport { Search, Zap } from 'lucide-react';\n\ninterface App {\n  id: string;\n  name: string;\n  icon: string;\n  type: 'system' | 'installed';\n}\n\ninterface AppLauncherProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onLaunchApp: (appId: string) => void;\n}\n\nexport const AppLauncher: FC<AppLauncherProps> = ({ isOpen, onClose, onLaunchApp }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [apps, setApps] = useState<App[]>([]);\n  const [selectedIndex, setSelectedIndex] = useState(0);\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  // System apps that are always available\n  const systemApps: App[] = [\n    { id: 'terminal', name: 'Terminal', icon: 'fas fa-terminal', type: 'system' },\n    { id: 'browser', name: 'Web Browser', icon: 'fas fa-globe', type: 'system' },\n    { id: 'package-manager', name: 'Package Manager', icon: 'fas fa-box', type: 'system' },\n    { id: 'file-manager', name: 'File Manager', icon: 'fas fa-folder', type: 'system' },\n    { id: 'text-editor', name: 'Text Editor', icon: 'fas fa-file-alt', type: 'system' },\n    { id: 'calculator', name: 'Calculator', icon: 'fas fa-calculator', type: 'system' },\n    { id: 'settings', name: 'Settings', icon: 'fas fa-cog', type: 'system' }\n  ];\n\n  // Load all available apps (system + installed)\n  useEffect(() => {\n    const loadApps = () => {\n      let allApps = [...systemApps];\n      \n      // Add installed apps\n      const stored = localStorage.getItem('installedApps');\n      if (stored) {\n        const installedApps = JSON.parse(stored);\n        const installedAppsList = installedApps.map((app: any) => ({\n          id: app.id,\n          name: app.name,\n          icon: app.icon,\n          type: 'installed' as const\n        }));\n        allApps = [...allApps, ...installedAppsList];\n      }\n      \n      setApps(allApps);\n    };\n\n    loadApps();\n\n    // Listen for app installation updates\n    const handleAppsUpdated = () => {\n      loadApps();\n    };\n\n    window.addEventListener('appsUpdated', handleAppsUpdated);\n    return () => window.removeEventListener('appsUpdated', handleAppsUpdated);\n  }, []);\n\n  // Filter apps based on search term\n  const filteredApps = apps.filter(app =>\n    app.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    app.id.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  // Reset selection when search changes\n  useEffect(() => {\n    setSelectedIndex(0);\n  }, [searchTerm]);\n\n  // Focus input when dialog opens\n  useEffect(() => {\n    if (isOpen) {\n      setSearchTerm('');\n      setSelectedIndex(0);\n      setTimeout(() => {\n        inputRef.current?.focus();\n      }, 100);\n    }\n  }, [isOpen]);\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (!isOpen) return;\n\n      switch (e.key) {\n        case 'ArrowDown':\n          e.preventDefault();\n          setSelectedIndex(prev => \n            prev < filteredApps.length - 1 ? prev + 1 : 0\n          );\n          break;\n        case 'ArrowUp':\n          e.preventDefault();\n          setSelectedIndex(prev => \n            prev > 0 ? prev - 1 : filteredApps.length - 1\n          );\n          break;\n        case 'Enter':\n          e.preventDefault();\n          if (filteredApps[selectedIndex]) {\n            handleLaunchApp(filteredApps[selectedIndex].id);\n          }\n          break;\n        case 'Escape':\n          e.preventDefault();\n          onClose();\n          break;\n      }\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [isOpen, filteredApps, selectedIndex, onClose]);\n\n  const handleLaunchApp = (appId: string) => {\n    onLaunchApp(appId);\n    onClose();\n    setSearchTerm('');\n  };\n\n  const handleAppClick = (appId: string, index: number) => {\n    setSelectedIndex(index);\n    handleLaunchApp(appId);\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"sm:max-w-[500px] p-0 gap-0\">\n        <div className=\"border-b border-border p-4\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center\">\n              <Zap className=\"w-4 h-4 text-primary\" />\n            </div>\n            <div>\n              <h3 className=\"font-semibold\">Quick Launch</h3>\n              <p className=\"text-sm text-muted-foreground\">Search and launch applications</p>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"p-4\">\n          <div className=\"relative mb-4\">\n            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground\" />\n            <Input\n              ref={inputRef}\n              placeholder=\"Type to search applications...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10 text-lg h-12\"\n            />\n          </div>\n\n          <div className=\"max-h-80 overflow-auto\">\n            {filteredApps.length === 0 ? (\n              <div className=\"text-center py-8 text-muted-foreground\">\n                <Search className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                <p className=\"text-sm\">No applications found</p>\n                <p className=\"text-xs mt-1\">Try searching with different keywords</p>\n              </div>\n            ) : (\n              <div className=\"space-y-1\">\n                {filteredApps.map((app, index) => (\n                  <div\n                    key={app.id}\n                    className={`flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors ${\n                      index === selectedIndex \n                        ? 'bg-accent border border-accent-foreground/20' \n                        : 'hover:bg-accent/50'\n                    }`}\n                    onClick={() => handleAppClick(app.id, index)}\n                    onMouseEnter={() => setSelectedIndex(index)}\n                  >\n                    <div className=\"w-10 h-10 rounded-lg bg-accent flex items-center justify-center\">\n                      <i className={`${app.icon} text-lg`} />\n                    </div>\n                    <div className=\"flex-1\">\n                      <div className=\"font-medium\">{app.name}</div>\n                      <div className=\"text-xs text-muted-foreground capitalize\">\n                        {app.type} application\n                      </div>\n                    </div>\n                    {index === selectedIndex && (\n                      <div className=\"text-xs text-muted-foreground\">\n                        Press Enter\n                      </div>\n                    )}\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <div className=\"mt-4 pt-3 border-t border-border\">\n            <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n              <div className=\"flex items-center gap-4\">\n                <span>↑↓ Navigate</span>\n                <span>Enter Select</span>\n                <span>Esc Close</span>\n              </div>\n              <span>{filteredApps.length} apps</span>\n            </div>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","size_bytes":7634},"client/src/components/desktop/Desktop.tsx":{"content":"import { FC, useState, useEffect, useCallback } from 'react';\nimport { DesktopIcon } from './DesktopIcon';\nimport { AppFolder } from './AppFolder';\nimport { FolderManager } from './FolderManager';\nimport { StartMenu } from './StartMenu';\nimport { Taskbar } from './Taskbar';\nimport { AppLauncher } from './AppLauncher';\nimport { AchievementNotification } from '@/components/apps/AchievementNotification';\nimport { TourGuide } from '@/components/TourGuide';\nimport { HelpSystem } from '@/components/HelpSystem';\nimport { WindowManager } from '@/components/window/WindowManager';\nimport { WorkspaceManager } from '@/components/WorkspaceManager';\nimport { PrideTheme, usePrideTheme } from '@/components/PrideTheme';\nimport { FloatingConnectionStatus } from '@/components/ui/connection-status';\nimport { Button } from '@/components/ui/button';\nimport { FolderPlus, HelpCircle } from 'lucide-react';\n\nconst getDefaultDesktopApps = () => {\n  const installationType = localStorage.getItem('webos-installation-type');\n  const isArchMode = localStorage.getItem('arch-console-mode') === 'true' || installationType === 'arch';\n  \n  // Different package managers based on installation type\n  const packageManagerApp = isArchMode \n    ? { id: 'arch-package-manager', name: 'Package Manager', icon: 'package', description: 'Arch Linux package manager (pacman)' }\n    : { id: 'app-store', name: 'App Store', icon: 'package', description: 'Download and install applications' };\n  \n  const baseApps = [\n    { id: 'browser', name: 'Firefox', icon: 'browser', description: 'firefox | chromium' },\n    { id: 'file-manager', name: 'Files', icon: 'folder', description: 'thunar | nautilus' },\n    packageManagerApp,\n    { id: 'settings', name: 'Settings', icon: 'settings', description: 'arch-config' }\n  ];\n\n  // Quick install - limited apps only\n  if (installationType === 'quick') {\n    return baseApps;\n  }\n  \n  // Custom install or default - full apps\n  const apps = [\n    { id: 'terminal', name: 'Terminal', icon: 'terminal', description: 'bash | zsh | fish' },\n    ...baseApps,\n    { id: 'calculator', name: 'Calculator', icon: 'calculator', description: 'galculator | bc' },\n    { id: 'performance-monitor', name: 'Performance Monitor', icon: 'activity', description: 'system metrics' },\n    { id: 'notepad', name: 'Text Editor', icon: 'text-editor', description: 'vim | nano | gedit' },\n    { id: 'system-monitor', name: 'System Monitor', icon: 'cpu', description: 'Advanced system metrics' },\n    { id: 'advanced-dashboard', name: 'Command Center', icon: 'activity', description: 'Live data dashboard' },\n    { id: 'proxy-test-center', name: 'Proxy Test Center', icon: 'globe', description: 'Advanced proxy system testing' },\n    { id: 'cloud-storage', name: 'Cloud Storage', icon: 'cloud', description: 'File sync and backup' },\n    { id: 'network-manager', name: 'Network Manager', icon: 'wifi', description: 'Network configuration' },\n    { id: 'network-status-monitor', name: 'Network Status', icon: 'activity', description: 'WebSocket connection monitoring' },\n    { id: 'color-palette-selector', name: 'Color Themes', icon: 'palette', description: 'Customize interface colors' },\n    { id: 'dev-tools', name: 'Developer Tools', icon: 'code', description: 'Debug and development tools' },\n\n    { id: 'vm-manager', name: 'Virtual Machines', icon: 'monitor', description: 'Virtualization management' },\n    { id: 'system-backup', name: 'Backup & Recovery', icon: 'shield', description: 'System backup and restore' }\n  ];\n\n  // Add Arch-specific apps only if Arch was installed (but not duplicate package manager)\n  if (isArchMode) {\n    apps.push(\n      { id: 'hyprland-config', name: 'Hyprland Config', icon: 'layout', description: 'Wayland compositor configuration' }\n    );\n  }\n\n  return apps;\n};\n\ninterface DesktopProps {\n  onLogout?: () => void;\n  onShutdown?: () => void;\n  onRestart?: () => void;\n}\n\nexport const Desktop: FC<DesktopProps> = ({ onLogout, onShutdown, onRestart }) => {\n  const [showStartMenu, setShowStartMenu] = useState(false);\n  const [windows, setWindows] = useState<any[]>([]);\n  const [activeWindowId, setActiveWindowId] = useState<string | null>(null);\n  const [openApp, setOpenApp] = useState<string | null>(null);\n  const [wallpaper, setWallpaper] = useState(() => {\n    const isCorrupted = localStorage.getItem('arch-desktop-corrupted') === 'true';\n    if (isCorrupted) return 'corrupted';\n    const saved = localStorage.getItem('webos-wallpaper');\n    return saved || 'default';\n  });\n  const [showIcons, setShowIcons] = useState(() => {\n    const saved = localStorage.getItem('webos-show-icons');\n    return saved !== 'false';\n  });\n  const [activeWorkspace, setActiveWorkspace] = useState(1);\n  const [desktopApps, setDesktopApps] = useState(() => getDefaultDesktopApps());\n  const [installedApps, setInstalledApps] = useState<any[]>([]);\n  const [showAppLauncher, setShowAppLauncher] = useState(false);\n  const [iconPositions, setIconPositions] = useState<Record<string, { x: number; y: number }>>({});\n  const [draggedApp, setDraggedApp] = useState<string | null>(null);\n  const [folders, setFolders] = useState<any[]>([]);\n  const [showFolderManager, setShowFolderManager] = useState(false);\n  const [achievements, setAchievements] = useState<any[]>([]);\n  const [currentAchievement, setCurrentAchievement] = useState<any>(null);\n  const [appUsageStats, setAppUsageStats] = useState<any>({});\n  const [showTour, setShowTour] = useState(false);\n  const [showHelp, setShowHelp] = useState(false);\n  const [showShutdown, setShowShutdown] = useState(false);\n  const [tourType, setTourType] = useState<'welcome' | 'features' | 'advanced'>('welcome');\n  \n  // Pride Month theme\n  const { isEnabled: isPrideThemeEnabled } = usePrideTheme();\n\n  // Load installed apps and icon positions on mount\n  useEffect(() => {\n    const loadInstalledApps = () => {\n      const stored = localStorage.getItem('desktop-apps');\n      if (stored) {\n        const apps = JSON.parse(stored);\n        setInstalledApps(apps);\n        \n        // Combine default apps with installed apps\n        const defaultApps = getDefaultDesktopApps();\n        const allApps = [...defaultApps, ...apps];\n        // Remove duplicates based on app id\n        const uniqueApps = allApps.filter((app: any, index: number, self: any[]) => \n          index === self.findIndex((a: any) => a.id === app.id)\n        );\n        setDesktopApps(uniqueApps);\n      }\n    };\n\n    const loadIconPositions = () => {\n      const stored = localStorage.getItem('webos-icon-positions');\n      if (stored) {\n        setIconPositions(JSON.parse(stored));\n      } else {\n        // Initialize default grid positions with improved spacing\n        const defaultPositions: Record<string, { x: number; y: number }> = {};\n        const ICON_WIDTH = 80;\n        const ICON_HEIGHT = 100;\n        const GRID_MARGIN_X = 20;\n        const GRID_MARGIN_Y = 20;\n        const MAX_COLUMNS = 10;\n        \n        getDefaultDesktopApps().forEach((app: any, index: number) => {\n          const row = Math.floor(index / MAX_COLUMNS);\n          const col = index % MAX_COLUMNS;\n          defaultPositions[app.id] = {\n            x: GRID_MARGIN_X + col * ICON_WIDTH,\n            y: GRID_MARGIN_Y + row * ICON_HEIGHT\n          };\n        });\n        setIconPositions(defaultPositions);\n        localStorage.setItem('webos-icon-positions', JSON.stringify(defaultPositions));\n      }\n    };\n\n    const loadFolders = () => {\n      const stored = localStorage.getItem('webos-folders');\n      if (stored) {\n        setFolders(JSON.parse(stored));\n      } else {\n        // No default folders - clean desktop\n        setFolders([]);\n      }\n    };\n\n    const loadAchievements = () => {\n      const stored = localStorage.getItem('webos-achievements');\n      const storedStats = localStorage.getItem('webos-usage-stats');\n      \n      if (stored) {\n        setAchievements(JSON.parse(stored));\n      } else {\n        // Initialize achievements\n        const initialAchievements = [\n          { id: 'first-launch', name: 'Welcome to WebOS', description: 'Launch your first application', icon: 'fas fa-rocket', current: 0, target: 1, unlocked: false, rarity: 'common' },\n          { id: 'app-explorer', name: 'App Explorer', description: 'Launch 5 different applications', icon: 'fas fa-compass', current: 0, target: 5, unlocked: false, rarity: 'common' },\n          { id: 'power-user', name: 'Power User', description: 'Launch 25 applications total', icon: 'fas fa-bolt', current: 0, target: 25, unlocked: false, rarity: 'rare' },\n          { id: 'terminal-master', name: 'Terminal Master', description: 'Use the terminal 10 times', icon: 'fas fa-terminal', current: 0, target: 10, unlocked: false, rarity: 'rare' },\n          { id: 'package-collector', name: 'Software Collector', description: 'Install 5 applications', icon: 'fas fa-download', current: 0, target: 5, unlocked: false, rarity: 'rare' },\n          { id: 'organizer', name: 'Desktop Organizer', description: 'Create your first folder', icon: 'fas fa-folder', current: 0, target: 1, unlocked: false, rarity: 'common' },\n          { id: 'speed-launcher', name: 'Speed Launcher', description: 'Use quick launch 10 times', icon: 'fas fa-search', current: 0, target: 10, unlocked: false, rarity: 'rare' },\n          { id: 'multitasker', name: 'Multitasker', description: 'Have 5 applications open simultaneously', icon: 'fas fa-layer-group', current: 0, target: 5, unlocked: false, rarity: 'epic' }\n        ];\n        setAchievements(initialAchievements);\n        localStorage.setItem('webos-achievements', JSON.stringify(initialAchievements));\n      }\n\n      if (storedStats) {\n        setAppUsageStats(JSON.parse(storedStats));\n      }\n    };\n\n    loadInstalledApps();\n    loadIconPositions();\n    loadFolders();\n    loadAchievements();\n\n    // Listen for desktop refresh events from package manager\n    const handleDesktopRefresh = () => {\n      loadInstalledApps();\n    };\n\n    window.addEventListener('desktop-refresh', handleDesktopRefresh);\n\n    // Check if user should see welcome tour\n    const hasCompletedWelcomeTour = localStorage.getItem('webos-tour-welcome-completed');\n    const isFirstTime = localStorage.getItem('webos-first-time-user') !== 'false';\n    \n    if (isFirstTime && !hasCompletedWelcomeTour) {\n      setTimeout(() => {\n        setShowTour(true);\n        setTourType('welcome');\n      }, 2000); // Show tour after 2 seconds\n    }\n\n    // Listen for app installation updates\n    const handleAppsUpdated = (event: CustomEvent) => {\n      const apps = event.detail;\n      setInstalledApps(apps);\n      const defaultApps = getDefaultDesktopApps();\n      const allApps = [...defaultApps, ...apps];\n      setDesktopApps(allApps);\n\n      // Improved positioning for new apps using stable grid system\n      const currentPositions = { ...iconPositions };\n      const ICON_WIDTH = 80;\n      const ICON_HEIGHT = 100; \n      const GRID_MARGIN_X = 20;\n      const GRID_MARGIN_Y = 20;\n      const MAX_COLUMNS = 10; // More columns for better layout\n      \n      // Create a grid occupancy map to avoid conflicts\n      const occupiedPositions = new Set();\n      Object.values(currentPositions).forEach(pos => {\n        const gridX = Math.round((pos.x - GRID_MARGIN_X) / ICON_WIDTH);\n        const gridY = Math.round((pos.y - GRID_MARGIN_Y) / ICON_HEIGHT);\n        occupiedPositions.add(`${gridX},${gridY}`);\n      });\n      \n      // Find next available grid positions for new apps\n      let currentRow = 0;\n      let currentCol = 0;\n      \n      apps.forEach((app: any) => {\n        if (!currentPositions[app.id]) {\n          // Find next available position\n          while (occupiedPositions.has(`${currentCol},${currentRow}`)) {\n            currentCol++;\n            if (currentCol >= MAX_COLUMNS) {\n              currentCol = 0;\n              currentRow++;\n            }\n          }\n          \n          const x = GRID_MARGIN_X + (currentCol * ICON_WIDTH);\n          const y = GRID_MARGIN_Y + (currentRow * ICON_HEIGHT);\n          \n          currentPositions[app.id] = { x, y };\n          occupiedPositions.add(`${currentCol},${currentRow}`);\n          \n          // Move to next position for next app\n          currentCol++;\n          if (currentCol >= MAX_COLUMNS) {\n            currentCol = 0;\n            currentRow++;\n          }\n        }\n      });\n\n      setIconPositions(currentPositions);\n      localStorage.setItem('webos-icon-positions', JSON.stringify(currentPositions));\n    };\n\n    window.addEventListener('appsUpdated', handleAppsUpdated as EventListener);\n\n    return () => {\n      window.removeEventListener('appsUpdated', handleAppsUpdated as EventListener);\n      window.removeEventListener('desktop-refresh', handleDesktopRefresh);\n    };\n  }, []);\n\n  // App launch handler\n  const handleAppLaunch = useCallback((appId: string) => {\n    console.log('handleAppLaunch called with:', appId);\n    \n    // Check if desktop is corrupted due to missing dependencies\n    const isCorrupted = localStorage.getItem('arch-desktop-corrupted') === 'true';\n    if (isCorrupted) {\n      // Show error dialog instead of launching app\n      alert(`Application Error\\n\\nERROR`);\n      return;\n    }\n    \n    setOpenApp(appId);\n    const now = new Date();\n    const newStats = { ...appUsageStats };\n    \n    if (!newStats[appId]) {\n      newStats[appId] = {\n        launches: 0,\n        totalTime: 0,\n        firstLaunch: now,\n        streakDays: 1\n      };\n    }\n    \n    newStats[appId].launches += 1;\n    newStats[appId].lastLaunch = now;\n    \n    setAppUsageStats(newStats);\n    localStorage.setItem('webos-usage-stats', JSON.stringify(newStats));\n\n    // Check achievements\n    let newAchievements = [...achievements];\n    let unlockedAchievement = null;\n    \n    // First launch\n    const totalLaunches = Object.values(newStats).reduce((total: number, app: any) => total + app.launches, 0);\n    if (totalLaunches === 1) {\n      const achievement = newAchievements.find(a => a.id === 'first-launch');\n      if (achievement && !achievement.unlocked) {\n        achievement.unlocked = true;\n        achievement.current = 1;\n        achievement.unlockedAt = now;\n        unlockedAchievement = achievement;\n      }\n    }\n    \n    // Update other achievements\n    const uniqueAppsUsed = Object.keys(newStats).length;\n    const appExplorer = newAchievements.find(a => a.id === 'app-explorer');\n    if (appExplorer) {\n      appExplorer.current = uniqueAppsUsed;\n      if (uniqueAppsUsed >= 5 && !appExplorer.unlocked) {\n        appExplorer.unlocked = true;\n        appExplorer.unlockedAt = now;\n        unlockedAchievement = appExplorer;\n      }\n    }\n    \n    setAchievements(newAchievements);\n    localStorage.setItem('webos-achievements', JSON.stringify(newAchievements));\n    \n    if (unlockedAchievement) {\n      setCurrentAchievement(unlockedAchievement);\n    }\n  }, [appUsageStats, achievements]);\n\n  // Handle quick launch events from taskbar\n  useEffect(() => {\n    const handleQuickLaunch = (event: CustomEvent) => {\n      const appId = event.detail;\n      handleAppLaunch(appId);\n    };\n\n    window.addEventListener('openApp', handleQuickLaunch as EventListener);\n\n    return () => {\n      window.removeEventListener('openApp', handleQuickLaunch as EventListener);\n    };\n  }, [handleAppLaunch]);\n\n  // Additional achievement tracking for other components\n  const trackAchievement = useCallback((achievementId: string, increment = 1) => {\n    const now = new Date();\n    let newAchievements = [...achievements];\n    let unlockedAchievement = null;\n    \n    const achievement = newAchievements.find(a => a.id === achievementId);\n    if (achievement && !achievement.unlocked) {\n      achievement.current = Math.min(achievement.current + increment, achievement.target);\n      if (achievement.current >= achievement.target) {\n        achievement.unlocked = true;\n        achievement.unlockedAt = now;\n        unlockedAchievement = achievement;\n      }\n    }\n    \n    setAchievements(newAchievements);\n    localStorage.setItem('webos-achievements', JSON.stringify(newAchievements));\n    \n    if (unlockedAchievement) {\n      setCurrentAchievement(unlockedAchievement);\n    }\n  }, [achievements]);\n\n  const trackEvent = useCallback((eventType: string, data?: any) => {\n    let newAchievements = [...achievements];\n    let unlockedAchievement = null;\n    const now = new Date();\n    \n    switch (eventType) {\n      case 'package-installed':\n        const installCount = parseInt(localStorage.getItem('webos-packages-installed') || '0') + 1;\n        localStorage.setItem('webos-packages-installed', installCount.toString());\n        const packageCollector = newAchievements.find(a => a.id === 'package-collector');\n        if (packageCollector) {\n          packageCollector.current = installCount;\n          if (installCount >= 5 && !packageCollector.unlocked) {\n            packageCollector.unlocked = true;\n            packageCollector.unlockedAt = now;\n            unlockedAchievement = packageCollector;\n          }\n        }\n        break;\n        \n      case 'folder-created':\n        const organizer = newAchievements.find(a => a.id === 'organizer');\n        if (organizer && !organizer.unlocked) {\n          organizer.unlocked = true;\n          organizer.current = 1;\n          organizer.unlockedAt = now;\n          unlockedAchievement = organizer;\n        }\n        break;\n        \n      case 'quick-launch-used':\n        const quickLaunchCount = parseInt(localStorage.getItem('webos-quick-launch-count') || '0') + 1;\n        localStorage.setItem('webos-quick-launch-count', quickLaunchCount.toString());\n        const speedLauncher = newAchievements.find(a => a.id === 'speed-launcher');\n        if (speedLauncher) {\n          speedLauncher.current = quickLaunchCount;\n          if (quickLaunchCount >= 10 && !speedLauncher.unlocked) {\n            speedLauncher.unlocked = true;\n            speedLauncher.unlockedAt = now;\n            unlockedAchievement = speedLauncher;\n          }\n        }\n        break;\n        \n      case 'windows-count':\n        if (data?.count >= 5) {\n          const multitasker = newAchievements.find(a => a.id === 'multitasker');\n          if (multitasker && !multitasker.unlocked) {\n            multitasker.unlocked = true;\n            multitasker.current = data.count;\n            multitasker.unlockedAt = now;\n            unlockedAchievement = multitasker;\n          }\n        }\n        break;\n    }\n    \n    setAchievements(newAchievements);\n    localStorage.setItem('webos-achievements', JSON.stringify(newAchievements));\n    \n    if (unlockedAchievement) {\n      setCurrentAchievement(unlockedAchievement);\n    }\n  }, [achievements]);\n\n  const handleOpenApp = useCallback((appId: string) => {\n    handleAppLaunch(appId);\n  }, [handleAppLaunch]);\n\n  const handleAppOpened = useCallback(() => {\n    setOpenApp(null);\n  }, []);\n\n  const handleStartMenuToggle = useCallback(() => {\n    setShowStartMenu(!showStartMenu);\n  }, [showStartMenu]);\n\n  const handleStartMenuClose = useCallback(() => {\n    setShowStartMenu(false);\n  }, []);\n\n  const handleWindowsChange = useCallback((windows: any[]) => {\n    setWindows(windows);\n    // Track multitasker achievement\n    trackEvent('windows-count', { count: windows.length });\n  }, [trackEvent]);\n\n  const handleActiveWindowChange = useCallback((windowId: string | null) => {\n    setActiveWindowId(windowId);\n  }, []);\n\n  const handleStartTour = useCallback((type: 'welcome' | 'features' | 'advanced') => {\n    setTourType(type);\n    setShowTour(true);\n    setShowHelp(false);\n  }, []);\n\n  const handleTourComplete = useCallback(() => {\n    setShowTour(false);\n    localStorage.setItem('webos-first-time-user', 'false');\n  }, []);\n\n  const handleTourSkip = useCallback(() => {\n    setShowTour(false);\n    localStorage.setItem('webos-first-time-user', 'false');\n  }, []);\n\n  // Drag and drop handlers for desktop icons\n  const handleIconDragStart = useCallback((appId: string, e: React.DragEvent) => {\n    setDraggedApp(appId);\n  }, []);\n\n  const handleIconDragEnd = useCallback(() => {\n    setDraggedApp(null);\n  }, []);\n\n  const handleDesktopDrop = useCallback((e: React.DragEvent) => {\n    e.preventDefault();\n    if (draggedApp) {\n      const rect = e.currentTarget.getBoundingClientRect();\n      const x = e.clientX - rect.left - 40; // Center the icon\n      const y = e.clientY - rect.top - 40;\n      \n      // Use the same grid system as the automatic positioning\n      const ICON_WIDTH = 80;\n      const ICON_HEIGHT = 100;\n      const GRID_MARGIN_X = 20;\n      const GRID_MARGIN_Y = 20;\n      \n      // Calculate grid position\n      const gridX = Math.round((x - GRID_MARGIN_X) / ICON_WIDTH);\n      const gridY = Math.round((y - GRID_MARGIN_Y) / ICON_HEIGHT);\n      \n      // Ensure minimum grid positions\n      const clampedGridX = Math.max(0, gridX);\n      const clampedGridY = Math.max(0, gridY);\n      \n      // Convert back to pixel positions\n      const snappedX = GRID_MARGIN_X + (clampedGridX * ICON_WIDTH);\n      const snappedY = GRID_MARGIN_Y + (clampedGridY * ICON_HEIGHT);\n      \n      // Ensure icon stays within bounds\n      const maxX = rect.width - 80;\n      const maxY = rect.height - 120; // Account for taskbar\n      const finalX = Math.max(0, Math.min(snappedX, maxX));\n      const finalY = Math.max(0, Math.min(snappedY, maxY));\n      \n      setIconPositions(prev => {\n        const updated = {\n          ...prev,\n          [draggedApp]: { x: finalX, y: finalY }\n        };\n        localStorage.setItem('webos-icon-positions', JSON.stringify(updated));\n        return updated;\n      });\n    }\n  }, [draggedApp]);\n\n  const handleDesktopDragOver = useCallback((e: React.DragEvent) => {\n    e.preventDefault(); // Allow drop\n  }, []);\n\n  // Folder management functions\n  const handleCreateFolder = useCallback((folderData: any) => {\n    const newFolder = {\n      id: `folder-${Date.now()}`,\n      ...folderData\n    };\n    \n    const updatedFolders = [...folders, newFolder];\n    setFolders(updatedFolders);\n    localStorage.setItem('webos-folders', JSON.stringify(updatedFolders));\n\n    // Add position for the new folder\n    const currentPositions = { ...iconPositions };\n    let nextY = 32;\n    let nextX = 300; // Start folders to the right of regular apps\n    \n    // Find available position\n    Object.values(currentPositions).forEach(pos => {\n      if (pos.x >= 300 && pos.y >= nextY) {\n        nextY = pos.y + 104;\n      }\n    });\n\n    currentPositions[newFolder.id] = { x: nextX, y: nextY };\n    setIconPositions(currentPositions);\n    localStorage.setItem('webos-icon-positions', JSON.stringify(currentPositions));\n  }, [folders, iconPositions]);\n\n  const handleUpdateFolder = useCallback((folderId: string, updates: any) => {\n    const updatedFolders = folders.map(folder => \n      folder.id === folderId ? { ...folder, ...updates } : folder\n    );\n    setFolders(updatedFolders);\n    localStorage.setItem('webos-folders', JSON.stringify(updatedFolders));\n  }, [folders]);\n\n  const handleDeleteFolder = useCallback((folderId: string) => {\n    const updatedFolders = folders.filter(folder => folder.id !== folderId);\n    setFolders(updatedFolders);\n    localStorage.setItem('webos-folders', JSON.stringify(updatedFolders));\n    \n    // Remove folder position\n    const updatedPositions = { ...iconPositions };\n    delete updatedPositions[folderId];\n    setIconPositions(updatedPositions);\n    localStorage.setItem('webos-icon-positions', JSON.stringify(updatedPositions));\n  }, [folders, iconPositions]);\n\n  // Get apps that are not in folders\n  const unorganizedApps = desktopApps.filter(app => \n    !folders.some(folder => folder.apps.some((folderApp: any) => folderApp.id === app.id))\n  );\n\n  const handleWindowRestore = useCallback((windowId: string) => {\n    // This will be handled by the WindowManager\n  }, []);\n\n  const handleWindowFocus = useCallback((windowId: string) => {\n    // This will be handled by the WindowManager\n  }, []);\n\n  // Close start menu when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as HTMLElement;\n      if (!target.closest('#start-menu') && !target.closest('#start-button')) {\n        setShowStartMenu(false);\n      }\n    };\n\n    if (showStartMenu) {\n      document.addEventListener('click', handleClickOutside);\n      return () => document.removeEventListener('click', handleClickOutside);\n    }\n  }, [showStartMenu]);\n\n  // Keyboard shortcuts and event listeners\n  useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      // App Launcher shortcuts: Cmd+Space (Mac) or Ctrl+Space (Windows/Linux)\n      if (event.key === ' ' && (event.metaKey || event.ctrlKey)) {\n        event.preventDefault();\n        setShowAppLauncher(true);\n      }\n      \n      // Also support Alt+Space for quick launch\n      if (event.key === ' ' && event.altKey) {\n        event.preventDefault();\n        setShowAppLauncher(true);\n      }\n      \n      if (event.key === 'Escape') {\n        setShowStartMenu(false);\n        setShowAppLauncher(false);\n      }\n    };\n\n    const handleWallpaperChange = (event: CustomEvent) => {\n      setWallpaper(event.detail.wallpaper);\n    };\n\n    const handleIconToggle = (event: CustomEvent) => {\n      setShowIcons(event.detail.show);\n    };\n\n    const handleOpenAppEvent = (event: CustomEvent) => {\n      const appId = event.detail;\n      console.log('Desktop received openApp event:', appId);\n      handleAppLaunch(appId);\n    };\n\n    document.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('wallpaper-change', handleWallpaperChange as EventListener);\n    window.addEventListener('desktop-icons-toggle', handleIconToggle as EventListener);\n    window.addEventListener('openApp', handleOpenAppEvent as EventListener);\n    \n    return () => {\n      document.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('wallpaper-change', handleWallpaperChange as EventListener);\n      window.removeEventListener('desktop-icons-toggle', handleIconToggle as EventListener);\n      window.removeEventListener('openApp', handleOpenAppEvent as EventListener);\n    };\n  }, [handleAppLaunch]);\n\n  const getWallpaperClass = () => {\n    switch (wallpaper) {\n      case 'corrupted':\n        return 'corrupted-wallpaper';\n      case 'terminal':\n        return 'bg-gradient-to-br from-green-900 to-black';\n      case 'code':\n        return 'bg-gradient-to-br from-blue-900 to-indigo-900';\n      case 'matrix':\n        return 'bg-gradient-to-br from-black to-green-800';\n      case 'cyber':\n        return 'bg-gradient-to-br from-purple-900 to-black';\n      case 'sunset':\n        return 'bg-gradient-to-br from-orange-600 to-red-800';\n      case 'ocean':\n        return 'bg-gradient-to-br from-blue-400 to-blue-800';\n      case 'forest':\n        return 'bg-gradient-to-br from-green-600 to-green-900';\n      case 'fire':\n        return 'bg-gradient-to-br from-red-500 to-orange-700';\n      case 'cosmic':\n        return 'bg-gradient-to-br from-indigo-600 to-purple-800';\n      case 'dawn':\n        return 'bg-gradient-to-br from-pink-400 to-purple-600';\n      case 'midnight':\n        return 'bg-gradient-to-br from-gray-900 to-blue-900';\n      case 'custom':\n        return 'bg-transparent';\n      default:\n        return 'bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900';\n    }\n  };\n\n  const getCustomWallpaperStyle = () => {\n    if (wallpaper === 'custom') {\n      const customImage = localStorage.getItem('webos-custom-wallpaper');\n      if (customImage) {\n        return {\n          backgroundImage: `url(${customImage})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat'\n        };\n      }\n    }\n    return {};\n  };\n\n  return (\n    <div className=\"h-screen bg-background font-mono overflow-hidden relative\">\n      {/* Dynamic wallpaper */}\n      <div className={`absolute inset-0 ${getWallpaperClass()}`} style={getCustomWallpaperStyle()}>\n        <div className=\"absolute inset-0 opacity-20\">\n          <svg width=\"100%\" height=\"100%\" xmlns=\"http://www.w3.org/2000/svg\">\n            <defs>\n              <pattern id=\"archGrid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n                <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"rgba(115, 176, 219, 0.3)\" strokeWidth=\"0.5\"/>\n              </pattern>\n            </defs>\n            <rect width=\"100%\" height=\"100%\" fill=\"url(#archGrid)\" />\n          </svg>\n        </div>\n        {/* Arch logo subtle background */}\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 opacity-5\">\n          <svg width=\"300\" height=\"300\" viewBox=\"0 0 64 64\" className=\"text-primary\">\n            <path fill=\"currentColor\" d=\"M32 2L4 62h56L32 2zm0 8.5L54.2 58H9.8L32 10.5z\"/>\n          </svg>\n        </div>\n      </div>\n\n      {/* Desktop Icons */}\n      {showIcons && (\n        <div \n          className=\"absolute inset-0 z-10 desktop-area\"\n          onDrop={handleDesktopDrop}\n          onDragOver={handleDesktopDragOver}\n        >\n          {/* Render unorganized apps */}\n          {unorganizedApps.map((app) => {\n            const position = iconPositions[app.id] || { x: 32, y: 32 };\n            return (\n              <DesktopIcon\n                key={app.id}\n                appId={app.id}\n                icon={app.icon}\n                label={app.name}\n                position={position}\n                onDoubleClick={() => handleOpenApp(app.id)}\n                onDragStart={handleIconDragStart}\n                onDragEnd={handleIconDragEnd}\n                isDragging={draggedApp === app.id}\n              />\n            );\n          })}\n\n          {/* Render folders */}\n          {folders.map((folder) => {\n            const position = iconPositions[folder.id] || { x: 300, y: 32 };\n            return (\n              <AppFolder\n                key={folder.id}\n                folder={folder}\n                position={position}\n                onDoubleClick={() => {}}\n                onDragStart={handleIconDragStart}\n                onDragEnd={handleIconDragEnd}\n                onUpdateFolder={handleUpdateFolder}\n                onLaunchApp={handleOpenApp}\n                isDragging={draggedApp === folder.id}\n              />\n            );\n          })}\n        </div>\n      )}\n\n      {/* Folder Management Button */}\n      <div className=\"absolute top-4 right-4 z-20 flex gap-2\">\n        <Button\n          onClick={() => setShowHelp(true)}\n          variant=\"outline\"\n          size=\"sm\"\n          className=\"bg-background/80 backdrop-blur-sm hover:bg-background/90\"\n          title=\"Help & Tours\"\n        >\n          <HelpCircle className=\"w-4 h-4\" />\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setShowFolderManager(true)}\n          className=\"bg-background/80 backdrop-blur-sm organize-button\"\n        >\n          <FolderPlus className=\"w-4 h-4 mr-2\" />\n          Organize Apps\n        </Button>\n      </div>\n\n      {/* Windows */}\n      <WindowManager\n        onWindowsChange={handleWindowsChange}\n        onActiveWindowChange={handleActiveWindowChange}\n        openApp={openApp}\n        onAppOpened={handleAppOpened}\n        onShutdown={onShutdown}\n        onRestart={onRestart}\n        onLogout={onLogout}\n      />\n\n      {/* Start Menu */}\n      <div id=\"start-menu\">\n        <StartMenu\n          isOpen={showStartMenu}\n          onClose={handleStartMenuClose}\n          onOpenApp={handleOpenApp}\n        />\n      </div>\n\n      {/* Workspace Manager */}\n      <WorkspaceManager\n        windows={windows}\n        activeWorkspace={activeWorkspace}\n        onWorkspaceChange={setActiveWorkspace}\n      />\n\n      {/* Taskbar */}\n      <Taskbar\n        windows={windows}\n        activeWindowId={activeWindowId}\n        onStartMenuToggle={handleStartMenuToggle}\n        onWindowRestore={handleWindowRestore}\n        onWindowFocus={handleWindowFocus}\n        onQuickLaunch={() => setShowAppLauncher(true)}\n        onOpenSettings={() => handleOpenApp('settings')}\n        onOpenPowerMenu={() => onShutdown && onShutdown()}\n        onToggleVolume={() => {}}\n        onLogout={onLogout}\n      />\n\n      {/* App Launcher */}\n      <AppLauncher\n        isOpen={showAppLauncher}\n        onClose={() => setShowAppLauncher(false)}\n        onLaunchApp={handleOpenApp}\n      />\n\n      {/* Folder Manager */}\n      <FolderManager\n        isOpen={showFolderManager}\n        onClose={() => setShowFolderManager(false)}\n        availableApps={desktopApps}\n        folders={folders}\n        onCreateFolder={handleCreateFolder}\n        onUpdateFolder={handleUpdateFolder}\n        onDeleteFolder={handleDeleteFolder}\n      />\n\n      {/* Achievement Notification */}\n      <AchievementNotification\n        achievement={currentAchievement}\n        onClose={() => setCurrentAchievement(null)}\n      />\n\n      {/* Tour Guide */}\n      <TourGuide\n        isActive={showTour}\n        onComplete={handleTourComplete}\n        onSkip={handleTourSkip}\n        tourType={tourType}\n      />\n\n      {/* Help System */}\n      <HelpSystem\n        isOpen={showHelp}\n        onClose={() => setShowHelp(false)}\n        onStartTour={handleStartTour}\n      />\n\n      {/* Pride Month Theme */}\n      <PrideTheme isActive={isPrideThemeEnabled} />\n\n      {/* Floating Connection Status */}\n      <FloatingConnectionStatus position=\"top-right\" />\n    </div>\n  );\n};\n","size_bytes":33500},"client/src/components/desktop/DesktopIcon.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { \n  Terminal, \n  Globe, \n  Folder, \n  Settings, \n  Calculator, \n  FileText, \n  Calendar, \n  Mail, \n  Trophy, \n  Users, \n  Download, \n  Code, \n  Image,\n  Package,\n  Cloud,\n  Activity,\n  FileSpreadsheet,\n  Monitor,\n  Briefcase,\n  Gamepad2,\n  Zap\n} from 'lucide-react';\nimport { soundManager } from '@/lib/soundManager';\n\ninterface DesktopIconProps {\n  icon: string;\n  label: string;\n  position: { x: number; y: number };\n  onDoubleClick: () => void;\n  onDragStart?: (appId: string, e: React.DragEvent) => void;\n  onDragEnd?: () => void;\n  appId: string;\n  isDragging?: boolean;\n}\n\nconst getIconComponent = (iconName: string) => {\n  const iconMap: { [key: string]: any } = {\n    'terminal': Terminal,\n    'browser': Globe,\n    'folder': Folder,\n    'package': Package,\n    'settings': Settings,\n    'calculator': Calculator,\n    'calculator-advanced': Calculator,\n    'text-editor': FileText,\n    'calendar': Calendar,\n    'email': Mail,\n    'trophy': Trophy,\n    'users': Users,\n    'download': Download,\n    'code': Code,\n    'image': Image,\n    'cloud': Cloud,\n    'activity': Activity,\n    'spreadsheet': FileSpreadsheet,\n    'presentation': Monitor,\n    'briefcase': Briefcase,\n    'gamepad': Gamepad2,\n    'monitor': Monitor,\n    'default': Zap\n  };\n  \n  return iconMap[iconName] || iconMap['default'];\n};\n\nexport const DesktopIcon: FC<DesktopIconProps> = ({ \n  icon, \n  label, \n  position,\n  onDoubleClick,\n  onDragStart,\n  onDragEnd,\n  appId,\n  isDragging = false\n}) => {\n  const [isBeingDragged, setIsBeingDragged] = useState(false);\n  const [iconColors, setIconColors] = useState({\n    background: 'from-blue-900/90 to-cyan-900/90',\n    border: 'border-blue-400/30',\n    text: 'text-cyan-200',\n    label: 'bg-blue-900/60 border-blue-400/20 text-blue-100',\n    hover: 'group-hover:from-blue-500/80 group-hover:to-cyan-500/80'\n  });\n\n  // Dynamic color adaptation based on wallpaper/theme\n  useEffect(() => {\n    const updateIconColors = () => {\n      const wallpaper = localStorage.getItem('webos-wallpaper') || 'default';\n      const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';\n      \n      let colors = {\n        background: 'from-blue-900/90 to-cyan-900/90',\n        border: 'border-blue-400/30',\n        text: 'text-cyan-200',\n        label: 'bg-blue-900/60 border-blue-400/20 text-blue-100',\n        hover: 'group-hover:from-blue-500/80 group-hover:to-cyan-500/80'\n      };\n\n      // Adapt colors based on wallpaper and theme\n      if (wallpaper.includes('dark') || theme === 'dark') {\n        colors = {\n          background: 'from-gray-800/90 to-slate-800/90',\n          border: 'border-gray-400/30',\n          text: 'text-gray-200',\n          label: 'bg-gray-800/60 border-gray-400/20 text-gray-100',\n          hover: 'group-hover:from-gray-600/80 group-hover:to-slate-600/80'\n        };\n      } else if (wallpaper.includes('nature') || wallpaper.includes('green')) {\n        colors = {\n          background: 'from-green-800/90 to-emerald-800/90',\n          border: 'border-green-400/30',\n          text: 'text-green-200',\n          label: 'bg-green-800/60 border-green-400/20 text-green-100',\n          hover: 'group-hover:from-green-600/80 group-hover:to-emerald-600/80'\n        };\n      } else if (wallpaper.includes('sunset') || wallpaper.includes('orange')) {\n        colors = {\n          background: 'from-orange-800/90 to-red-800/90',\n          border: 'border-orange-400/30',\n          text: 'text-orange-200',\n          label: 'bg-orange-800/60 border-orange-400/20 text-orange-100',\n          hover: 'group-hover:from-orange-600/80 group-hover:to-red-600/80'\n        };\n      } else if (wallpaper.includes('ocean') || wallpaper.includes('blue')) {\n        colors = {\n          background: 'from-blue-800/90 to-teal-800/90',\n          border: 'border-blue-400/30',\n          text: 'text-blue-200',\n          label: 'bg-blue-800/60 border-blue-400/20 text-blue-100',\n          hover: 'group-hover:from-blue-600/80 group-hover:to-teal-600/80'\n        };\n      } else if (wallpaper.includes('purple')) {\n        colors = {\n          background: 'from-purple-800/90 to-violet-800/90',\n          border: 'border-purple-400/30',\n          text: 'text-purple-200',\n          label: 'bg-purple-800/60 border-purple-400/20 text-purple-100',\n          hover: 'group-hover:from-purple-600/80 group-hover:to-violet-600/80'\n        };\n      }\n\n      setIconColors(colors);\n    };\n\n    updateIconColors();\n    \n    // Listen for theme/wallpaper changes\n    const observer = new MutationObserver(updateIconColors);\n    observer.observe(document.documentElement, {\n      attributes: true,\n      attributeFilter: ['class']\n    });\n\n    const handleStorageChange = () => updateIconColors();\n    window.addEventListener('storage', handleStorageChange);\n    window.addEventListener('wallpaper-change', handleStorageChange);\n    \n    return () => {\n      observer.disconnect();\n      window.removeEventListener('storage', handleStorageChange);\n      window.removeEventListener('wallpaper-change', handleStorageChange);\n    };\n  }, []);\n\n  const handleDragStart = (e: React.DragEvent) => {\n    setIsBeingDragged(true);\n    e.dataTransfer.effectAllowed = 'move';\n    e.dataTransfer.setData('text/plain', appId);\n    soundManager.play('click');\n    onDragStart?.(appId, e);\n  };\n\n  const handleDragEnd = (e: React.DragEvent) => {\n    setIsBeingDragged(false);\n    onDragEnd?.();\n  };\n\n  const handleDoubleClick = () => {\n    soundManager.play('iconClick');\n    onDoubleClick();\n  };\n\n  const handleMouseEnter = () => {\n    soundManager.play('hover');\n  };\n\n  return (\n    <div \n      className={`desktop-icon cursor-pointer group transition-all duration-200 hover:scale-105 w-20 absolute ${\n        isBeingDragged || isDragging ? 'opacity-70 scale-110 z-50' : 'opacity-100'\n      }`}\n      style={{\n        left: position.x,\n        top: position.y,\n        transform: isBeingDragged ? 'rotate(3deg)' : 'none'\n      }}\n      data-app-id={appId}\n      onDoubleClick={handleDoubleClick}\n      onMouseEnter={handleMouseEnter}\n      draggable={true}\n      onDragStart={handleDragStart}\n      onDragEnd={handleDragEnd}\n    >\n      <div className=\"flex flex-col items-center p-2 rounded-md hover:bg-white/10 transition-all duration-200\">\n        <div className={`w-12 h-12 bg-gradient-to-br ${iconColors.background} border ${iconColors.border} rounded-sm flex items-center justify-center mb-2 shadow-lg backdrop-blur-sm ${iconColors.hover} group-hover:border-opacity-60 group-hover:shadow-lg transition-all duration-200`}>\n          {(() => {\n            const IconComponent = getIconComponent(icon);\n            return <IconComponent className={`w-6 h-6 ${iconColors.text} drop-shadow-lg`} />;\n          })()}\n        </div>\n        <span className={`text-xs text-center font-mono max-w-20 leading-tight break-words ${iconColors.label} px-1.5 py-0.5 rounded-sm backdrop-blur border`}>\n          {label}\n        </span>\n      </div>\n    </div>\n  );\n};\n","size_bytes":7038},"client/src/components/desktop/FolderManager.tsx":{"content":"import { FC, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Card } from '@/components/ui/card';\nimport { FolderPlus, Palette, Save, X } from 'lucide-react';\n\ninterface App {\n  id: string;\n  name: string;\n  icon: string;\n}\n\ninterface Folder {\n  id: string;\n  name: string;\n  apps: App[];\n  color: string;\n}\n\ninterface FolderManagerProps {\n  isOpen: boolean;\n  onClose: () => void;\n  availableApps: App[];\n  folders: Folder[];\n  onCreateFolder: (folder: Omit<Folder, 'id'>) => void;\n  onUpdateFolder: (folderId: string, updates: Partial<Folder>) => void;\n  onDeleteFolder: (folderId: string) => void;\n}\n\nconst FOLDER_COLORS = [\n  '#3b82f6', // blue\n  '#ef4444', // red\n  '#10b981', // emerald\n  '#f59e0b', // amber\n  '#8b5cf6', // violet\n  '#ec4899', // pink\n  '#06b6d4', // cyan\n  '#84cc16', // lime\n  '#f97316', // orange\n  '#6366f1'  // indigo\n];\n\nconst FOLDER_CATEGORIES = [\n  { id: 'productivity', name: 'Productivity', apps: ['text-editor', 'notepad', 'calculator-pro', 'calendar', 'email-client'] },\n  { id: 'media', name: 'Media & Entertainment', apps: ['music-player', 'video-player', 'image-viewer'] },\n  { id: 'development', name: 'Development', apps: ['code-editor', 'terminal', 'package-manager'] },\n  { id: 'system', name: 'System Tools', apps: ['file-manager', 'settings', 'task-manager'] },\n  { id: 'internet', name: 'Internet & Communication', apps: ['browser', 'email-client'] },\n  { id: 'utilities', name: 'Utilities', apps: ['calculator', 'weather-app'] }\n];\n\nexport const FolderManager: FC<FolderManagerProps> = ({\n  isOpen,\n  onClose,\n  availableApps,\n  folders,\n  onCreateFolder,\n  onUpdateFolder,\n  onDeleteFolder\n}) => {\n  const [newFolderName, setNewFolderName] = useState('');\n  const [selectedColor, setSelectedColor] = useState(FOLDER_COLORS[0]);\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedApps, setSelectedApps] = useState<string[]>([]);\n  const [mode, setMode] = useState<'manual' | 'category'>('category');\n\n  const handleCreateFolder = () => {\n    if (!newFolderName.trim()) return;\n\n    let appsToAdd: App[] = [];\n    \n    if (mode === 'category' && selectedCategory) {\n      const category = FOLDER_CATEGORIES.find(c => c.id === selectedCategory);\n      if (category) {\n        appsToAdd = availableApps.filter(app => \n          category.apps.includes(app.id) && \n          !folders.some(folder => folder.apps.some(folderApp => folderApp.id === app.id))\n        );\n      }\n    } else if (mode === 'manual') {\n      appsToAdd = availableApps.filter(app => \n        selectedApps.includes(app.id) &&\n        !folders.some(folder => folder.apps.some(folderApp => folderApp.id === app.id))\n      );\n    }\n\n    onCreateFolder({\n      name: newFolderName.trim(),\n      apps: appsToAdd,\n      color: selectedColor\n    });\n\n    // Reset form\n    setNewFolderName('');\n    setSelectedApps([]);\n    setSelectedCategory('');\n    setSelectedColor(FOLDER_COLORS[0]);\n  };\n\n  const handleCreateCategoryFolders = () => {\n    FOLDER_CATEGORIES.forEach(category => {\n      const categoryApps = availableApps.filter(app => \n        category.apps.includes(app.id) && \n        !folders.some(folder => folder.apps.some(folderApp => folderApp.id === app.id))\n      );\n\n      if (categoryApps.length > 0) {\n        onCreateFolder({\n          name: category.name,\n          apps: categoryApps,\n          color: FOLDER_COLORS[Math.floor(Math.random() * FOLDER_COLORS.length)]\n        });\n      }\n    });\n  };\n\n  const unorganizedApps = availableApps.filter(app => \n    !folders.some(folder => folder.apps.some(folderApp => folderApp.id === app.id))\n  );\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-2xl max-h-[80vh] overflow-y-auto\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <FolderPlus className=\"w-5 h-5\" />\n            Organize Applications\n          </DialogTitle>\n        </DialogHeader>\n\n        <div className=\"space-y-6\">\n          {/* Quick Auto-Organize */}\n          <Card className=\"p-4\">\n            <h3 className=\"font-semibold mb-2\">Quick Organization</h3>\n            <p className=\"text-sm text-muted-foreground mb-3\">\n              Automatically create folders based on app categories\n            </p>\n            <Button onClick={handleCreateCategoryFolders} className=\"w-full\">\n              <FolderPlus className=\"w-4 h-4 mr-2\" />\n              Auto-organize by Category\n            </Button>\n          </Card>\n\n          {/* Create Custom Folder */}\n          <Card className=\"p-4\">\n            <h3 className=\"font-semibold mb-3\">Create Custom Folder</h3>\n            \n            {/* Folder Name */}\n            <div className=\"space-y-2 mb-4\">\n              <label className=\"text-sm font-medium\">Folder Name</label>\n              <Input\n                placeholder=\"Enter folder name...\"\n                value={newFolderName}\n                onChange={(e) => setNewFolderName(e.target.value)}\n              />\n            </div>\n\n            {/* Color Selection */}\n            <div className=\"space-y-2 mb-4\">\n              <label className=\"text-sm font-medium\">Folder Color</label>\n              <div className=\"flex gap-2 flex-wrap\">\n                {FOLDER_COLORS.map(color => (\n                  <button\n                    key={color}\n                    className={`w-8 h-8 rounded-md border-2 transition-all ${\n                      selectedColor === color ? 'border-foreground scale-110' : 'border-transparent'\n                    }`}\n                    style={{ backgroundColor: color }}\n                    onClick={() => setSelectedColor(color)}\n                  />\n                ))}\n              </div>\n            </div>\n\n            {/* Organization Mode */}\n            <div className=\"space-y-2 mb-4\">\n              <label className=\"text-sm font-medium\">Organization Method</label>\n              <div className=\"flex gap-2\">\n                <Button\n                  variant={mode === 'category' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setMode('category')}\n                >\n                  By Category\n                </Button>\n                <Button\n                  variant={mode === 'manual' ? 'default' : 'outline'}\n                  size=\"sm\"\n                  onClick={() => setMode('manual')}\n                >\n                  Manual Selection\n                </Button>\n              </div>\n            </div>\n\n            {/* Category Selection */}\n            {mode === 'category' && (\n              <div className=\"space-y-2 mb-4\">\n                <label className=\"text-sm font-medium\">Select Category</label>\n                <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n                  <SelectTrigger>\n                    <SelectValue placeholder=\"Choose a category...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {FOLDER_CATEGORIES.map(category => {\n                      const availableCount = availableApps.filter(app => \n                        category.apps.includes(app.id) && \n                        !folders.some(folder => folder.apps.some(folderApp => folderApp.id === app.id))\n                      ).length;\n                      \n                      return (\n                        <SelectItem key={category.id} value={category.id} disabled={availableCount === 0}>\n                          {category.name} ({availableCount} apps)\n                        </SelectItem>\n                      );\n                    })}\n                  </SelectContent>\n                </Select>\n              </div>\n            )}\n\n            {/* Manual App Selection */}\n            {mode === 'manual' && (\n              <div className=\"space-y-2 mb-4\">\n                <label className=\"text-sm font-medium\">Select Applications</label>\n                <div className=\"grid grid-cols-3 gap-2 max-h-32 overflow-y-auto p-2 border rounded\">\n                  {unorganizedApps.map(app => (\n                    <label key={app.id} className=\"flex items-center space-x-2 text-sm cursor-pointer\">\n                      <input\n                        type=\"checkbox\"\n                        checked={selectedApps.includes(app.id)}\n                        onChange={(e) => {\n                          if (e.target.checked) {\n                            setSelectedApps([...selectedApps, app.id]);\n                          } else {\n                            setSelectedApps(selectedApps.filter(id => id !== app.id));\n                          }\n                        }}\n                        className=\"rounded\"\n                      />\n                      <i className={`${app.icon} text-xs`} />\n                      <span className=\"truncate\">{app.name}</span>\n                    </label>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <Button \n              onClick={handleCreateFolder}\n              disabled={!newFolderName.trim() || (mode === 'category' && !selectedCategory) || (mode === 'manual' && selectedApps.length === 0)}\n              className=\"w-full\"\n            >\n              <Save className=\"w-4 h-4 mr-2\" />\n              Create Folder\n            </Button>\n          </Card>\n\n          {/* Existing Folders */}\n          {folders.length > 0 && (\n            <Card className=\"p-4\">\n              <h3 className=\"font-semibold mb-3\">Existing Folders</h3>\n              <div className=\"space-y-2\">\n                {folders.map(folder => (\n                  <div key={folder.id} className=\"flex items-center justify-between p-2 border rounded\">\n                    <div className=\"flex items-center gap-2\">\n                      <div \n                        className=\"w-4 h-4 rounded\"\n                        style={{ backgroundColor: folder.color }}\n                      />\n                      <span className=\"font-medium\">{folder.name}</span>\n                      <span className=\"text-sm text-muted-foreground\">({folder.apps.length} apps)</span>\n                    </div>\n                    <Button\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => onDeleteFolder(folder.id)}\n                      className=\"h-6 w-6 p-0 text-destructive hover:text-destructive\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          )}\n\n          {/* Unorganized Apps */}\n          {unorganizedApps.length > 0 && (\n            <Card className=\"p-4\">\n              <h3 className=\"font-semibold mb-3\">Unorganized Applications ({unorganizedApps.length})</h3>\n              <div className=\"grid grid-cols-4 gap-2\">\n                {unorganizedApps.map(app => (\n                  <div key={app.id} className=\"flex flex-col items-center p-2 border rounded text-center\">\n                    <i className={`${app.icon} text-sm mb-1`} />\n                    <span className=\"text-xs truncate w-full\">{app.name}</span>\n                  </div>\n                ))}\n              </div>\n            </Card>\n          )}\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};","size_bytes":11549},"client/src/components/desktop/StartMenu.tsx":{"content":"import { FC, useState } from 'react';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Power } from 'lucide-react';\n\ninterface StartMenuProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onOpenApp: (app: string) => void;\n}\n\nconst apps = [\n  { id: 'terminal', name: 'Terminal', icon: 'fas fa-terminal', color: 'bg-green-600' },\n  { id: 'browser', name: 'Browser', icon: 'fas fa-globe', color: 'bg-blue-600' },\n  { id: 'package-manager', name: 'Pacman', icon: 'fas fa-box', color: 'bg-purple-600' },\n  { id: 'file-manager', name: 'Files', icon: 'fas fa-folder', color: 'bg-yellow-500' },\n  { id: 'text-editor', name: 'Editor', icon: 'fas fa-file-alt', color: 'bg-blue-500' },\n  { id: 'calculator', name: 'Calc', icon: 'fas fa-calculator', color: 'bg-gray-700' },\n  { id: 'settings', name: 'Settings', icon: 'fas fa-cog', color: 'bg-gray-600' }\n];\n\nexport const StartMenu: FC<StartMenuProps> = ({ isOpen, onClose, onOpenApp }) => {\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const filteredApps = apps.filter(app => \n    app.name.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"absolute bottom-12 left-2 w-72 h-80 bg-card border border-border rounded-md shadow-xl animate-in slide-in-from-bottom-2 duration-200 overflow-hidden\">\n      <div className=\"p-3 h-full flex flex-col font-mono\">\n        <div className=\"mb-3\">\n          <Input\n            type=\"text\"\n            placeholder=\"Type to search...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"w-full text-sm bg-background border-border focus:border-primary\"\n          />\n        </div>\n        \n        <div className=\"mb-3 flex-1\">\n          <h3 className=\"text-sm font-medium text-foreground mb-2\">Applications</h3>\n          <div className=\"grid grid-cols-4 gap-2\">\n            {filteredApps.map((app) => (\n              <div \n                key={app.id}\n                className=\"app-item p-2 rounded hover:bg-muted cursor-pointer transition-colors group\"\n                onClick={() => {\n                  onOpenApp(app.id);\n                  onClose();\n                }}\n              >\n                <div className=\"text-center\">\n                  <div className=\"w-6 h-6 bg-card border border-border rounded flex items-center justify-center mb-1 mx-auto group-hover:border-primary/50 transition-colors\">\n                    <i className={`${app.icon} text-primary text-xs`}></i>\n                  </div>\n                  <span className=\"text-xs text-foreground truncate block\">{app.name}</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n        \n        <div className=\"border-t border-border pt-2 mt-auto\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center space-x-2\">\n              <div className=\"w-6 h-6 bg-primary/20 rounded flex items-center justify-center\">\n                <i className=\"fas fa-user text-primary text-xs\"></i>\n              </div>\n              <span className=\"text-sm text-foreground\">\n                {localStorage.getItem('webos-username') || 'html@javascriptiso'}\n              </span>\n            </div>\n            <Button \n              variant=\"ghost\" \n              size=\"sm\"\n              className=\"p-1 hover:bg-muted text-muted-foreground\"\n              onClick={() => {\n                localStorage.removeItem('archInstalled');\n                window.location.reload();\n              }}\n              title=\"Shutdown\"\n            >\n              <Power className=\"w-3 h-3\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","size_bytes":3780},"client/src/components/desktop/Taskbar.tsx":{"content":"import { FC, useEffect, useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { WindowState } from '@/types/os';\nimport { Volume2, VolumeX, Wifi, Battery, Settings, Search, Monitor, Power } from 'lucide-react';\nimport { soundManager } from '@/lib/soundManager';\n\ninterface TaskbarProps {\n  windows: WindowState[];\n  activeWindowId: string | null;\n  onStartMenuToggle: () => void;\n  onWindowRestore: (windowId: string) => void;\n  onWindowFocus: (windowId: string) => void;\n  onQuickLaunch?: () => void;\n  onLogout?: () => void;\n  onOpenSettings?: () => void;\n  onOpenPowerMenu?: () => void;\n  onToggleVolume?: () => void;\n}\n\nexport const Taskbar: FC<TaskbarProps> = ({ \n  windows, \n  activeWindowId, \n  onStartMenuToggle, \n  onWindowRestore,\n  onWindowFocus,\n  onQuickLaunch,\n  onOpenSettings,\n  onOpenPowerMenu,\n  onToggleVolume\n}) => {\n  const [currentTime, setCurrentTime] = useState(new Date());\n  const [isSoundEnabled, setIsSoundEnabled] = useState(soundManager.isEnabled());\n  const [batteryLevel, setBatteryLevel] = useState(75);\n  const [isSystemTrayOpen, setIsSystemTrayOpen] = useState(false);\n\n  useEffect(() => {\n    const timer = setInterval(() => {\n      setCurrentTime(new Date());\n      // Simulate battery drain\n      setBatteryLevel(prev => Math.max(20, prev - 0.01));\n    }, 1000);\n\n    return () => clearInterval(timer);\n  }, []);\n\n  const handleVolumeToggle = () => {\n    const newState = !isSoundEnabled;\n    setIsSoundEnabled(newState);\n    soundManager.setEnabled(newState);\n    soundManager.play('click');\n    if (onToggleVolume) onToggleVolume();\n  };\n\n  const formatTime = (date: Date) => {\n    return date.toLocaleTimeString([], { \n      hour: '2-digit', \n      minute: '2-digit',\n      hour12: true \n    });\n  };\n\n  const formatDate = (date: Date) => {\n    return date.toLocaleDateString([], { \n      month: 'short', \n      day: 'numeric' \n    });\n  };\n\n  const getAppIcon = (app: string) => {\n    const icons = {\n      'terminal': '💻',\n      'browser': '🌐',\n      'file-manager': '📁',\n      'text-editor': '📝',\n      'notepad': '📝',\n      'calculator': '🧮',\n      'calculator-pro': '🧮',\n      'settings': '⚙️',\n      'image-viewer': '🖼️',\n      'email': '📧',\n      'calendar': '📅',\n      'achievements': '🏆',\n      'ide': '💻',\n      'package-manager': '📦',\n      'download-manager': '⬇️',\n      'account-manager': '👤'\n    };\n    return icons[app as keyof typeof icons] || '🪟';\n  };\n\n  const getAppName = (app: string) => {\n    const names = {\n      'terminal': 'Terminal',\n      'browser': 'Browser',\n      'file-manager': 'Files',\n      'text-editor': 'Editor',\n      'notepad': 'Notepad',\n      'calculator': 'Calculator',\n      'calculator-pro': 'Calculator Pro',\n      'settings': 'Settings',\n      'image-viewer': 'Image Viewer',\n      'email': 'Email',\n      'calendar': 'Calendar',\n      'achievements': 'Achievements',\n      'ide': 'IDE',\n      'package-manager': 'Package Manager',\n      'download-manager': 'Downloads',\n      'account-manager': 'Accounts'\n    };\n    return names[app as keyof typeof names] || app;\n  };\n\n  const getBatteryIcon = () => {\n    if (batteryLevel > 80) return '🔋';\n    if (batteryLevel > 60) return '🔋';\n    if (batteryLevel > 40) return '🔋';\n    if (batteryLevel > 20) return '🪫';\n    return '🪫';\n  };\n\n  const getBatteryColor = () => {\n    if (batteryLevel > 50) return 'text-green-500';\n    if (batteryLevel > 20) return 'text-yellow-500';\n    return 'text-red-500';\n  };\n\n  return (\n    <div className=\"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-r from-blue-950/95 via-blue-900/95 to-blue-950/95 backdrop-blur-sm border-t border-blue-400/30 shadow-2xl taskbar\">\n      <div className=\"flex items-center justify-between h-full px-4\">\n        <div className=\"flex items-center space-x-2\">\n          {/* Start Button - Enhanced WebOS Logo */}\n          <Button \n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"flex items-center justify-center w-10 h-10 rounded hover:bg-cyan-500/20 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n            onClick={() => {\n              onStartMenuToggle();\n              soundManager.play('open');\n            }}\n            title=\"Arch Linux Menu\"\n          >\n            <div className=\"relative\">\n              <svg width=\"22\" height=\"22\" viewBox=\"0 0 64 64\" className=\"text-cyan-400 drop-shadow-lg\">\n                <path fill=\"currentColor\" d=\"M32 2L4 62h56L32 2zm0 8.5L54.2 58H9.8L32 10.5z\"/>\n              </svg>\n              <div className=\"absolute -top-1 -right-1 w-2 h-2 bg-cyan-400 rounded-full animate-pulse\"></div>\n            </div>\n          </Button>\n          \n          {/* Quick Launch Icons */}\n          <div className=\"flex items-center space-x-1 pl-2 border-l border-blue-400/30\">\n            {/* Terminal Quick Launch */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n              onClick={() => {\n                const event = new CustomEvent('openApp', { detail: 'terminal' });\n                window.dispatchEvent(event);\n                soundManager.play('open');\n              }}\n              title=\"pacman -S terminal\"\n            >\n              <span className=\"text-sm\">💻</span>\n            </Button>\n\n            {/* Browser Quick Launch */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n              onClick={() => {\n                const event = new CustomEvent('openApp', { detail: 'browser' });\n                window.dispatchEvent(event);\n                soundManager.play('open');\n              }}\n              title=\"firefox | chromium\"\n            >\n              <span className=\"text-sm\">🌐</span>\n            </Button>\n\n            {/* File Manager Quick Launch */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n              onClick={() => {\n                const event = new CustomEvent('openApp', { detail: 'file-manager' });\n                window.dispatchEvent(event);\n                soundManager.play('open');\n              }}\n              title=\"thunar | nautilus\"\n            >\n              <span className=\"text-sm\">📁</span>\n            </Button>\n\n            {/* Calculator Quick Launch */}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n              onClick={() => {\n                const event = new CustomEvent('openApp', { detail: 'calculator' });\n                window.dispatchEvent(event);\n                soundManager.play('open');\n              }}\n              title=\"galculator | bc\"\n            >\n              <span className=\"text-sm\">🧮</span>\n            </Button>\n\n            {/* Search/Quick Launch */}\n            {onQuickLaunch && (\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"p-2 rounded text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50 transition-all duration-200 transform hover:scale-105 border border-blue-400/20\"\n                onClick={() => {\n                  onQuickLaunch();\n                  soundManager.play('click');\n                }}\n                title=\"dmenu | rofi (Ctrl+Space)\"\n              >\n                <Search className=\"h-4 w-4\" />\n              </Button>\n            )}\n          </div>\n          \n          {/* Running Apps */}\n          <div className=\"flex items-center space-x-1 pl-2 border-l border-blue-400/30\">\n            {windows.map((window) => (\n              <Button\n                key={window.id}\n                variant=\"ghost\"\n                size=\"sm\"\n                className={`flex items-center space-x-2 px-3 py-2 rounded text-xs transition-all duration-200 transform hover:scale-105 border border-blue-400/20 ${\n                  activeWindowId === window.id && !window.minimized\n                    ? 'bg-cyan-500/30 text-cyan-100 shadow-lg border-cyan-400/60 shadow-cyan-500/20'\n                    : 'text-blue-200 hover:text-cyan-100 hover:bg-blue-700/50'\n                } ${window.minimized ? 'opacity-60' : ''}`}\n                onClick={() => {\n                  if (window.minimized) {\n                    onWindowRestore(window.id);\n                  } else {\n                    onWindowFocus(window.id);\n                  }\n                  soundManager.play('click');\n                }}\n                title={`${getAppName(window.app)}${window.minimized ? ' (minimized)' : ''}`}\n              >\n                <span className=\"text-sm\">{getAppIcon(window.app)}</span>\n                <span className=\"hidden sm:inline max-w-20 truncate font-mono text-xs\">\n                  {getAppName(window.app)}\n                </span>\n                {window.minimized && <div className=\"w-1 h-1 bg-cyan-400 rounded-full animate-pulse\"></div>}\n              </Button>\n            ))}\n          </div>\n        </div>\n\n        {/* System Tray */}\n        <div className=\"flex items-center space-x-2\">\n          {/* Network Status */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"p-2 rounded text-cyan-400 hover:bg-blue-700/50 transition-colors border border-blue-400/20\"\n            title=\"networkmanager: connected\"\n          >\n            <Wifi className=\"h-4 w-4\" />\n          </Button>\n\n          {/* Volume Control */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"p-2 rounded hover:bg-blue-700/50 transition-colors border border-blue-400/20\"\n            onClick={handleVolumeToggle}\n            title={`pulseaudio: ${isSoundEnabled ? 'unmuted' : 'muted'}`}\n          >\n            {isSoundEnabled ? (\n              <Volume2 className=\"h-4 w-4 text-cyan-400\" />\n            ) : (\n              <VolumeX className=\"h-4 w-4 text-red-400\" />\n            )}\n          </Button>\n\n          {/* Battery */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className={`p-2 rounded hover:bg-blue-700/50 transition-colors border border-blue-400/20 ${getBatteryColor()}`}\n            title={`acpi: ${Math.round(batteryLevel)}%`}\n          >\n            <div className=\"flex items-center space-x-1\">\n              <Battery className=\"h-4 w-4\" />\n              <span className=\"text-xs font-mono\">{Math.round(batteryLevel)}%</span>\n            </div>\n          </Button>\n\n          {/* Settings */}\n          {onOpenSettings && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-blue-300 hover:text-cyan-100 hover:bg-blue-700/50 transition-colors border border-blue-400/20\"\n              onClick={() => {\n                onOpenSettings();\n                soundManager.play('click');\n              }}\n              title=\"arch-config\"\n            >\n              <Settings className=\"h-4 w-4\" />\n            </Button>\n          )}\n\n          {/* Separator */}\n          <div className=\"w-px h-6 bg-blue-400/30\"></div>\n\n          {/* Clock */}\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"px-3 py-2 rounded text-blue-100 hover:bg-blue-700/50 transition-colors border border-blue-400/20\"\n            onClick={() => setIsSystemTrayOpen(!isSystemTrayOpen)}\n            title=\"systemctl status\"\n          >\n            <div className=\"text-right\">\n              <div className=\"text-sm font-mono leading-tight\">{formatTime(currentTime)}</div>\n              <div className=\"text-xs text-blue-300 leading-tight\">{formatDate(currentTime)}</div>\n            </div>\n          </Button>\n\n          {/* Power Menu */}\n          {onOpenPowerMenu && (\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"p-2 rounded text-red-400 hover:text-red-300 hover:bg-blue-700/50 transition-colors border border-blue-400/20\"\n              onClick={() => {\n                onOpenPowerMenu();\n                soundManager.play('click');\n              }}\n              title=\"systemctl poweroff\"\n            >\n              <Power className=\"h-4 w-4\" />\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* System Tray Popup */}\n      {isSystemTrayOpen && (\n        <div className=\"absolute bottom-12 right-4 w-80 bg-blue-950/95 backdrop-blur-sm border border-blue-400/30 rounded shadow-2xl p-4\">\n          <div className=\"space-y-3\">\n            <div className=\"flex items-center justify-between\">\n              <h3 className=\"text-sm font-semibold text-cyan-100 font-mono\"># systemctl status</h3>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => setIsSystemTrayOpen(false)}\n                className=\"p-1 h-6 w-6 text-blue-300 hover:text-cyan-100\"\n              >\n                ×\n              </Button>\n            </div>\n            \n            <div className=\"grid grid-cols-2 gap-3 text-xs\">\n              <div className=\"bg-blue-900/50 rounded border border-blue-400/20 p-2 hover:bg-blue-800/50 transition-colors cursor-pointer\">\n                <div className=\"text-blue-300 font-mono\">CPU Usage</div>\n                <div className=\"text-cyan-400 font-mono\">\n                  {Math.floor(Math.random() * 30 + 5)}%\n                </div>\n              </div>\n              <div className=\"bg-blue-900/50 rounded border border-blue-400/20 p-2 hover:bg-blue-800/50 transition-colors cursor-pointer\">\n                <div className=\"text-blue-300 font-mono\">Memory</div>\n                <div className=\"text-cyan-400 font-mono\">\n                  {(Math.random() * 2 + 1.5).toFixed(1)}GB\n                </div>\n              </div>\n              <div className=\"bg-blue-900/50 rounded border border-blue-400/20 p-2 hover:bg-blue-800/50 transition-colors cursor-pointer\">\n                <div className=\"text-blue-300 font-mono\">NetworkManager</div>\n                <div className=\"text-cyan-400 font-mono flex items-center\">\n                  <div className=\"w-2 h-2 bg-cyan-400 rounded-full animate-pulse mr-1\"></div>\n                  Active\n                </div>\n              </div>\n              <div className=\"bg-blue-900/50 rounded border border-blue-400/20 p-2 hover:bg-blue-800/50 transition-colors cursor-pointer\">\n                <div className=\"text-blue-300 font-mono\">Uptime</div>\n                <div className=\"text-cyan-400 font-mono\">\n                  {Math.floor(Date.now() / 1000 / 3600)}h {Math.floor((Date.now() / 1000 % 3600) / 60)}m\n                </div>\n              </div>\n            </div>\n\n            <div className=\"pt-2 border-t border-blue-400/30\">\n              <div className=\"text-xs text-blue-300 font-mono\">\n                $ uname -a<br/>\n                Linux archwebos 6.6.8-arch1-1 x86_64 GNU/Linux\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","size_bytes":15581},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1419},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }","size_bytes":1127},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":1901},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n","size_bytes":1858},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/connection-status.tsx":{"content":"import { FC, useState, useEffect } from 'react';\nimport { Wifi, WifiOff, RotateCcw, AlertTriangle, CheckCircle } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { wsManager } from '@/lib/websocketManager';\nimport { cn } from '@/lib/utils';\n\ninterface ConnectionStatusProps {\n  className?: string;\n  showDetails?: boolean;\n  compact?: boolean;\n}\n\nexport const ConnectionStatus: FC<ConnectionStatusProps> = ({ \n  className, \n  showDetails = false,\n  compact = false \n}) => {\n  const [status, setStatus] = useState(wsManager.getStatus());\n  const [showReconnectButton, setShowReconnectButton] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = wsManager.onStatusChange((newStatus) => {\n      setStatus(newStatus);\n      \n      // Show reconnect button if connection failed and not auto-reconnecting\n      setShowReconnectButton(\n        !newStatus.isConnected && \n        !newStatus.isReconnecting && \n        newStatus.reconnectAttempts > 0\n      );\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const getStatusIcon = () => {\n    if (status.isConnected) {\n      return <CheckCircle className=\"w-4 h-4 text-green-500\" />;\n    } else if (status.isReconnecting) {\n      return <RotateCcw className=\"w-4 h-4 text-yellow-500 animate-spin\" />;\n    } else if (status.lastError) {\n      return <AlertTriangle className=\"w-4 h-4 text-red-500\" />;\n    } else {\n      return <WifiOff className=\"w-4 h-4 text-gray-500\" />;\n    }\n  };\n\n  const getStatusText = () => {\n    if (status.isConnected) {\n      return 'Connected';\n    } else if (status.isReconnecting) {\n      return `Reconnecting... (${status.reconnectAttempts}/10)`;\n    } else if (status.lastError) {\n      return 'Connection Failed';\n    } else {\n      return 'Disconnected';\n    }\n  };\n\n  const getStatusColor = () => {\n    if (status.isConnected) {\n      return 'bg-green-500';\n    } else if (status.isReconnecting) {\n      return 'bg-yellow-500';\n    } else {\n      return 'bg-red-500';\n    }\n  };\n\n  const handleReconnect = () => {\n    wsManager.forceReconnect();\n  };\n\n  if (compact) {\n    return (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger asChild>\n            <div className={cn(\"flex items-center gap-2\", className)}>\n              <div className={cn(\"w-2 h-2 rounded-full\", getStatusColor())} />\n              {getStatusIcon()}\n            </div>\n          </TooltipTrigger>\n          <TooltipContent>\n            <div className=\"text-sm\">\n              <div className=\"font-medium\">{getStatusText()}</div>\n              {status.latency && (\n                <div className=\"text-xs text-gray-500\">\n                  Latency: {status.latency}ms\n                </div>\n              )}\n              {status.lastError && (\n                <div className=\"text-xs text-red-400 mt-1\">\n                  {status.lastError}\n                </div>\n              )}\n            </div>\n          </TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    );\n  }\n\n  return (\n    <div className={cn(\"flex items-center gap-3 p-3 rounded-lg border\", className)}>\n      <div className=\"flex items-center gap-2\">\n        <div className={cn(\"w-3 h-3 rounded-full\", getStatusColor())} />\n        {getStatusIcon()}\n      </div>\n      \n      <div className=\"flex-1 min-w-0\">\n        <div className=\"flex items-center gap-2\">\n          <span className=\"text-sm font-medium\">{getStatusText()}</span>\n          {status.isConnected && status.latency && (\n            <Badge variant=\"secondary\" className=\"text-xs\">\n              {status.latency}ms\n            </Badge>\n          )}\n        </div>\n        \n        {showDetails && (\n          <div className=\"mt-1 space-y-1\">\n            {status.lastError && (\n              <div className=\"text-xs text-red-500\">{status.lastError}</div>\n            )}\n            {status.isReconnecting && (\n              <div className=\"text-xs text-yellow-600\">\n                Attempting to reconnect... (Attempt {status.reconnectAttempts} of 10)\n              </div>\n            )}\n            {status.isConnected && (\n              <div className=\"text-xs text-green-600\">\n                Real-time connection established\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n\n      {showReconnectButton && (\n        <Button\n          size=\"sm\"\n          variant=\"outline\"\n          onClick={handleReconnect}\n          className=\"text-xs\"\n        >\n          <RotateCcw className=\"w-3 h-3 mr-1\" />\n          Retry\n        </Button>\n      )}\n    </div>\n  );\n};\n\n// Floating connection status indicator for global use\ninterface FloatingConnectionStatusProps {\n  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right';\n  className?: string;\n}\n\nexport const FloatingConnectionStatus: FC<FloatingConnectionStatusProps> = ({\n  position = 'top-right',\n  className\n}) => {\n  const [status, setStatus] = useState(wsManager.getStatus());\n  const [isVisible, setIsVisible] = useState(false);\n\n  useEffect(() => {\n    const unsubscribe = wsManager.onStatusChange((newStatus) => {\n      setStatus(newStatus);\n      \n      // Show indicator when there are connection issues\n      setIsVisible(!newStatus.isConnected || newStatus.isReconnecting);\n    });\n\n    return unsubscribe;\n  }, []);\n\n  const positionClasses = {\n    'top-left': 'top-4 left-4',\n    'top-right': 'top-4 right-4',\n    'bottom-left': 'bottom-4 left-4',\n    'bottom-right': 'bottom-4 right-4'\n  };\n\n  if (!isVisible) return null;\n\n  return (\n    <div className={cn(\n      \"fixed z-50 animate-in slide-in-from-top-2 duration-300\",\n      positionClasses[position],\n      className\n    )}>\n      <ConnectionStatus \n        compact\n        className=\"bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 px-3 py-2\"\n      />\n    </div>\n  );\n};","size_bytes":5952},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }","size_bytes":823},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/progress.tsx":{"content":"import * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }","size_bytes":776},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5742},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }","size_bytes":755},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/sidebar.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { VariantProps, cva } from \"class-variance-authority\"\nimport { PanelLeft } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nconst SidebarProvider = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    defaultOpen?: boolean\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n  }\n>(\n  (\n    {\n      defaultOpen = true,\n      open: openProp,\n      onOpenChange: setOpenProp,\n      className,\n      style,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const isMobile = useIsMobile()\n    const [openMobile, setOpenMobile] = React.useState(false)\n\n    // This is the internal state of the sidebar.\n    // We use openProp and setOpenProp for control from outside the component.\n    const [_open, _setOpen] = React.useState(defaultOpen)\n    const open = openProp ?? _open\n    const setOpen = React.useCallback(\n      (value: boolean | ((value: boolean) => boolean)) => {\n        const openState = typeof value === \"function\" ? value(open) : value\n        if (setOpenProp) {\n          setOpenProp(openState)\n        } else {\n          _setOpen(openState)\n        }\n\n        // This sets the cookie to keep the sidebar state.\n        document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n      },\n      [setOpenProp, open]\n    )\n\n    // Helper to toggle the sidebar.\n    const toggleSidebar = React.useCallback(() => {\n      return isMobile\n        ? setOpenMobile((open) => !open)\n        : setOpen((open) => !open)\n    }, [isMobile, setOpen, setOpenMobile])\n\n    // Adds a keyboard shortcut to toggle the sidebar.\n    React.useEffect(() => {\n      const handleKeyDown = (event: KeyboardEvent) => {\n        if (\n          event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n          (event.metaKey || event.ctrlKey)\n        ) {\n          event.preventDefault()\n          toggleSidebar()\n        }\n      }\n\n      window.addEventListener(\"keydown\", handleKeyDown)\n      return () => window.removeEventListener(\"keydown\", handleKeyDown)\n    }, [toggleSidebar])\n\n    // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n    // This makes it easier to style the sidebar with Tailwind classes.\n    const state = open ? \"expanded\" : \"collapsed\"\n\n    const contextValue = React.useMemo<SidebarContextProps>(\n      () => ({\n        state,\n        open,\n        setOpen,\n        isMobile,\n        openMobile,\n        setOpenMobile,\n        toggleSidebar,\n      }),\n      [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n    )\n\n    return (\n      <SidebarContext.Provider value={contextValue}>\n        <TooltipProvider delayDuration={0}>\n          <div\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH,\n                \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n                ...style,\n              } as React.CSSProperties\n            }\n            className={cn(\n              \"group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar\",\n              className\n            )}\n            ref={ref}\n            {...props}\n          >\n            {children}\n          </div>\n        </TooltipProvider>\n      </SidebarContext.Provider>\n    )\n  }\n)\nSidebarProvider.displayName = \"SidebarProvider\"\n\nconst Sidebar = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    side?: \"left\" | \"right\"\n    variant?: \"sidebar\" | \"floating\" | \"inset\"\n    collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n  }\n>(\n  (\n    {\n      side = \"left\",\n      variant = \"sidebar\",\n      collapsible = \"offcanvas\",\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n    if (collapsible === \"none\") {\n      return (\n        <div\n          className={cn(\n            \"flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground\",\n            className\n          )}\n          ref={ref}\n          {...props}\n        >\n          {children}\n        </div>\n      )\n    }\n\n    if (isMobile) {\n      return (\n        <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n          <SheetContent\n            data-sidebar=\"sidebar\"\n            data-mobile=\"true\"\n            className=\"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden\"\n            style={\n              {\n                \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n              } as React.CSSProperties\n            }\n            side={side}\n          >\n            <SheetHeader className=\"sr-only\">\n              <SheetTitle>Sidebar</SheetTitle>\n              <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n            </SheetHeader>\n            <div className=\"flex h-full w-full flex-col\">{children}</div>\n          </SheetContent>\n        </Sheet>\n      )\n    }\n\n    return (\n      <div\n        ref={ref}\n        className=\"group peer hidden text-sidebar-foreground md:block\"\n        data-state={state}\n        data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n        data-variant={variant}\n        data-side={side}\n      >\n        {/* This is what handles the sidebar gap on desktop */}\n        <div\n          className={cn(\n            \"relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear\",\n            \"group-data-[collapsible=offcanvas]:w-0\",\n            \"group-data-[side=right]:rotate-180\",\n            variant === \"floating\" || variant === \"inset\"\n              ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon]\"\n          )}\n        />\n        <div\n          className={cn(\n            \"fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex\",\n            side === \"left\"\n              ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n              : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n            // Adjust the padding for floating and inset variants.\n            variant === \"floating\" || variant === \"inset\"\n              ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]\"\n              : \"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n            className\n          )}\n          {...props}\n        >\n          <div\n            data-sidebar=\"sidebar\"\n            className=\"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow\"\n          >\n            {children}\n          </div>\n        </div>\n      </div>\n    )\n  }\n)\nSidebar.displayName = \"Sidebar\"\n\nconst SidebarTrigger = React.forwardRef<\n  React.ElementRef<typeof Button>,\n  React.ComponentProps<typeof Button>\n>(({ className, onClick, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      ref={ref}\n      data-sidebar=\"trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeft />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n})\nSidebarTrigger.displayName = \"SidebarTrigger\"\n\nconst SidebarRail = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\">\n>(({ className, ...props }, ref) => {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <button\n      ref={ref}\n      data-sidebar=\"rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex\",\n        \"[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarRail.displayName = \"SidebarRail\"\n\nconst SidebarInset = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"main\">\n>(({ className, ...props }, ref) => {\n  return (\n    <main\n      ref={ref}\n      className={cn(\n        \"relative flex w-full flex-1 flex-col bg-background\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInset.displayName = \"SidebarInset\"\n\nconst SidebarInput = React.forwardRef<\n  React.ElementRef<typeof Input>,\n  React.ComponentProps<typeof Input>\n>(({ className, ...props }, ref) => {\n  return (\n    <Input\n      ref={ref}\n      data-sidebar=\"input\"\n      className={cn(\n        \"h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarInput.displayName = \"SidebarInput\"\n\nconst SidebarHeader = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarHeader.displayName = \"SidebarHeader\"\n\nconst SidebarFooter = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarFooter.displayName = \"SidebarFooter\"\n\nconst SidebarSeparator = React.forwardRef<\n  React.ElementRef<typeof Separator>,\n  React.ComponentProps<typeof Separator>\n>(({ className, ...props }, ref) => {\n  return (\n    <Separator\n      ref={ref}\n      data-sidebar=\"separator\"\n      className={cn(\"mx-2 w-auto bg-sidebar-border\", className)}\n      {...props}\n    />\n  )\n})\nSidebarSeparator.displayName = \"SidebarSeparator\"\n\nconst SidebarContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarContent.displayName = \"SidebarContent\"\n\nconst SidebarGroup = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => {\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n})\nSidebarGroup.displayName = \"SidebarGroup\"\n\nconst SidebarGroupLabel = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupLabel.displayName = \"SidebarGroupLabel\"\n\nconst SidebarGroupAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & { asChild?: boolean }\n>(({ className, asChild = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarGroupAction.displayName = \"SidebarGroupAction\"\n\nconst SidebarGroupContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"group-content\"\n    className={cn(\"w-full text-sm\", className)}\n    {...props}\n  />\n))\nSidebarGroupContent.displayName = \"SidebarGroupContent\"\n\nconst SidebarMenu = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu\"\n    className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n    {...props}\n  />\n))\nSidebarMenu.displayName = \"SidebarMenu\"\n\nconst SidebarMenuItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    data-sidebar=\"menu-item\"\n    className={cn(\"group/menu-item relative\", className)}\n    {...props}\n  />\n))\nSidebarMenuItem.displayName = \"SidebarMenuItem\"\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:!p-0\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst SidebarMenuButton = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    isActive?: boolean\n    tooltip?: string | React.ComponentProps<typeof TooltipContent>\n  } & VariantProps<typeof sidebarMenuButtonVariants>\n>(\n  (\n    {\n      asChild = false,\n      isActive = false,\n      variant = \"default\",\n      size = \"default\",\n      tooltip,\n      className,\n      ...props\n    },\n    ref\n  ) => {\n    const Comp = asChild ? Slot : \"button\"\n    const { isMobile, state } = useSidebar()\n\n    const button = (\n      <Comp\n        ref={ref}\n        data-sidebar=\"menu-button\"\n        data-size={size}\n        data-active={isActive}\n        className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n        {...props}\n      />\n    )\n\n    if (!tooltip) {\n      return button\n    }\n\n    if (typeof tooltip === \"string\") {\n      tooltip = {\n        children: tooltip,\n      }\n    }\n\n    return (\n      <Tooltip>\n        <TooltipTrigger asChild>{button}</TooltipTrigger>\n        <TooltipContent\n          side=\"right\"\n          align=\"center\"\n          hidden={state !== \"collapsed\" || isMobile}\n          {...tooltip}\n        />\n      </Tooltip>\n    )\n  }\n)\nSidebarMenuButton.displayName = \"SidebarMenuButton\"\n\nconst SidebarMenuAction = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<\"button\"> & {\n    asChild?: boolean\n    showOnHover?: boolean\n  }\n>(({ className, asChild = false, showOnHover = false, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 after:md:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuAction.displayName = \"SidebarMenuAction\"\n\nconst SidebarMenuBadge = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\">\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    data-sidebar=\"menu-badge\"\n    className={cn(\n      \"pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground\",\n      \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n      \"peer-data-[size=sm]/menu-button:top-1\",\n      \"peer-data-[size=default]/menu-button:top-1.5\",\n      \"peer-data-[size=lg]/menu-button:top-2.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuBadge.displayName = \"SidebarMenuBadge\"\n\nconst SidebarMenuSkeleton = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    showIcon?: boolean\n  }\n>(({ className, showIcon = false, ...props }, ref) => {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      ref={ref}\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[--skeleton-width] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n})\nSidebarMenuSkeleton.displayName = \"SidebarMenuSkeleton\"\n\nconst SidebarMenuSub = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    data-sidebar=\"menu-sub\"\n    className={cn(\n      \"mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5\",\n      \"group-data-[collapsible=icon]:hidden\",\n      className\n    )}\n    {...props}\n  />\n))\nSidebarMenuSub.displayName = \"SidebarMenuSub\"\n\nconst SidebarMenuSubItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ ...props }, ref) => <li ref={ref} {...props} />)\nSidebarMenuSubItem.displayName = \"SidebarMenuSubItem\"\n\nconst SidebarMenuSubButton = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentProps<\"a\"> & {\n    asChild?: boolean\n    size?: \"sm\" | \"md\"\n    isActive?: boolean\n  }\n>(({ asChild = false, size = \"md\", isActive, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nSidebarMenuSubButton.displayName = \"SidebarMenuSubButton\"\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":23567},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }","size_bytes":771},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/window/Window.tsx":{"content":"import { FC, useRef, useEffect } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Minus, Square, X } from 'lucide-react';\nimport { WindowState } from '@/types/os';\n\ninterface WindowProps {\n  window: WindowState;\n  isActive: boolean;\n  children: React.ReactNode;\n  onClose: () => void;\n  onMinimize: () => void;\n  onMaximize: () => void;\n  onFocus: () => void;\n  onDragStart: (offsetX: number, offsetY: number) => void;\n  onDrag: (x: number, y: number) => void;\n  onDragEnd: () => void;\n}\n\nexport const Window: FC<WindowProps> = ({\n  window,\n  isActive,\n  children,\n  onClose,\n  onMinimize,\n  onMaximize,\n  onFocus,\n  onDragStart,\n  onDrag,\n  onDragEnd\n}) => {\n  const windowRef = useRef<HTMLDivElement>(null);\n  const headerRef = useRef<HTMLDivElement>(null);\n  const isDraggingRef = useRef(false);\n\n  useEffect(() => {\n    const handleMouseMove = (e: MouseEvent) => {\n      if (isDraggingRef.current) {\n        onDrag(e.clientX, e.clientY);\n      }\n    };\n\n    const handleMouseUp = () => {\n      if (isDraggingRef.current) {\n        isDraggingRef.current = false;\n        onDragEnd();\n        document.body.classList.remove('select-none');\n      }\n    };\n\n    document.addEventListener('mousemove', handleMouseMove);\n    document.addEventListener('mouseup', handleMouseUp);\n\n    return () => {\n      document.removeEventListener('mousemove', handleMouseMove);\n      document.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [onDrag, onDragEnd]);\n\n  const handleMouseDown = (e: React.MouseEvent) => {\n    if (headerRef.current && e.target instanceof Node && headerRef.current.contains(e.target)) {\n      e.preventDefault();\n      isDraggingRef.current = true;\n      document.body.classList.add('select-none');\n      \n      const rect = windowRef.current?.getBoundingClientRect();\n      if (rect) {\n        onDragStart(e.clientX - rect.left, e.clientY - rect.top);\n      }\n    }\n    onFocus();\n  };\n\n  if (window.minimized) {\n    return null;\n  }\n\n  return (\n    <div\n      ref={windowRef}\n      className=\"absolute bg-card border border-border rounded-md shadow-lg animate-in fade-in-0 scale-in-95 duration-200\"\n      style={{\n        left: window.maximized ? '1rem' : window.x,\n        top: window.maximized ? '1rem' : window.y,\n        width: window.maximized ? 'calc(100vw - 2rem)' : window.width,\n        height: window.maximized ? 'calc(100vh - 4rem)' : window.height,\n        zIndex: window.zIndex,\n        minWidth: 320,\n        minHeight: 200,\n        maxWidth: window.maximized ? 'none' : 'calc(100vw - 2rem)',\n        maxHeight: window.maximized ? 'none' : 'calc(100vh - 4rem)'\n      }}\n      onMouseDown={handleMouseDown}\n    >\n      <div \n        ref={headerRef}\n        className=\"flex items-center justify-between px-3 py-2 bg-muted border-b border-border cursor-move select-none font-mono\"\n      >\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"w-4 h-4 flex items-center justify-center\">\n            <i className={`${window.icon} text-primary text-xs`}></i>\n          </div>\n          <span className=\"text-sm text-foreground\">{window.title}</span>\n        </div>\n        <div className=\"flex items-center space-x-1\">\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            className=\"w-5 h-5 p-0 rounded hover:bg-background transition-colors\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onMinimize();\n            }}\n          >\n            <Minus className=\"w-3 h-3 text-muted-foreground\" />\n          </Button>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            className=\"w-5 h-5 p-0 rounded hover:bg-background transition-colors\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onMaximize();\n            }}\n          >\n            <Square className=\"w-3 h-3 text-muted-foreground\" />\n          </Button>\n          <Button \n            variant=\"ghost\" \n            size=\"sm\"\n            className=\"w-5 h-5 p-0 rounded hover:bg-destructive hover:text-destructive-foreground transition-colors\"\n            onClick={(e) => {\n              e.stopPropagation();\n              onClose();\n            }}\n          >\n            <X className=\"w-3 h-3\" />\n          </Button>\n        </div>\n      </div>\n      <div className=\"p-3 overflow-auto bg-background\" style={{ height: 'calc(100% - 45px)' }}>\n        {children}\n      </div>\n    </div>\n  );\n};\n","size_bytes":4450},"client/src/components/window/WindowManager.tsx":{"content":"import { FC, useEffect } from 'react';\nimport { Window } from './Window';\nimport { playSounds } from '@/lib/soundManager';\nimport { Terminal } from '@/components/apps/Terminal';\nimport { Browser } from '@/components/apps/Browser';\nimport { WebBrowser } from '@/components/apps/WebBrowser';\nimport { AppStore } from '@/components/apps/AppStore';\nimport { FileManager } from '@/components/apps/FileManager';\nimport { TextEditor } from '@/components/apps/TextEditor';\nimport { Calculator } from '@/components/apps/Calculator';\nimport { Settings } from '@/components/apps/Settings';\nimport { NotePad } from '@/components/apps/NotePad';\nimport { CalculatorPro } from '@/components/apps/CalculatorPro';\nimport { ImageViewer } from '@/components/apps/ImageViewer';\nimport { Achievements } from '@/components/apps/Achievements';\nimport { AccountManager } from '@/components/apps/AccountManager';\nimport { WeatherApp } from '@/components/apps/WeatherApp';\nimport { Calendar } from '@/components/apps/Calendar';\nimport { EmailClient } from '@/components/apps/EmailClient';\nimport { TaskManager } from '@/components/apps/TaskManager';\nimport { SystemRecovery } from '@/components/apps/SystemRecovery';\nimport { Spreadsheet } from '@/components/apps/Spreadsheet';\nimport { PresentationApp } from '@/components/apps/Presentation';\nimport { OfficeSuite } from '@/components/apps/OfficeSuite';\nimport { StorageManager } from '@/components/apps/StorageManager';\nimport { Tetris } from '@/components/apps/Tetris';\nimport { VideoEditor } from '@/components/apps/VideoEditor';\nimport { Roblox } from '@/components/apps/Roblox';\nimport { RobloxStudio } from '@/components/apps/RobloxStudio';\nimport { PacMan } from '@/components/apps/PacMan';\nimport { RetroEmulator } from '@/components/apps/RetroEmulator';\nimport { IDE } from '@/components/apps/IDE';\nimport { VirtualMachine } from '@/components/apps/VirtualMachine';\nimport { DownloadManager } from '@/components/apps/DownloadManager';\nimport { PerformanceMonitor } from '@/components/apps/PerformanceMonitor';\nimport { CallOfDuty } from '@/components/apps/CallOfDuty';\nimport { MultiplayerShooter } from '@/components/apps/MultiplayerShooter';\nimport { VideoTube } from '@/components/apps/VideoTube';\nimport { WeatherStation } from '@/components/apps/WeatherStation';\nimport { NewsCenter } from '@/components/apps/NewsCenter';\nimport { CryptoTracker } from '@/components/apps/CryptoTracker';\nimport { StockMarket } from '@/components/apps/StockMarket';\nimport { GameCenter } from '@/components/apps/GameCenter';\nimport { ProductivitySuite } from '@/components/apps/ProductivitySuite';\nimport { SystemMonitor } from '@/components/apps/SystemMonitor';\nimport { AdvancedDashboard } from '@/components/apps/AdvancedDashboard';\nimport { ArchPackageManager } from '@/components/apps/ArchPackageManager';\nimport { HyprlandConfig } from '@/components/apps/HyprlandConfig';\nimport { SystemWOS } from '@/components/apps/SystemWOS';\nimport { ProxyTestCenter } from '@/components/apps/ProxyTestCenter';\nimport { NetworkStatusMonitor } from '@/components/apps/NetworkStatusMonitor';\nimport { ColorPaletteSelector } from '@/components/apps/ColorPaletteSelector';\nimport { CloudStorage } from '@/components/apps/CloudStorage';\nimport { NetworkManager } from '@/components/apps/NetworkManager';\nimport { DevTools } from '@/components/apps/DevTools';\nimport { PackageManagerPro } from '@/components/apps/PackageManagerPro';\nimport { VMManager } from '@/components/apps/VMManager';\nimport { SystemBackup } from '@/components/apps/SystemBackup';\nimport { useWindowManager } from '@/hooks/useWindowManager';\nimport { AppConfig } from '@/types/os';\n\nconst getAppComponent = (appId: string) => {\n  const componentMap: Record<string, any> = {\n    'terminal': Terminal,\n    'browser': WebBrowser,\n    'package-manager': AppStore,\n    'app-store': AppStore,\n    'file-manager': FileManager,\n    'text-editor': TextEditor,\n    'calculator': Calculator,\n    'settings': Settings,\n    'achievements': Achievements,\n    'account-manager': AccountManager,\n    // Installable apps\n    'notepad': NotePad,\n    'calculator-pro': CalculatorPro,\n    'image-viewer': ImageViewer,\n    // New functional apps from package manager\n    'WeatherApp': WeatherApp,\n    'Calendar': Calendar,\n    'EmailClient': EmailClient,\n    'TaskManager': TaskManager,\n    'SystemRecovery': SystemRecovery,\n    'weather-app': WeatherApp,\n    'calendar': Calendar,\n    'email-client': EmailClient,\n    'task-manager': TaskManager,\n    'system-recovery': SystemRecovery,\n    'spreadsheet': Spreadsheet,\n    'presentation': PresentationApp,\n    'office-suite': OfficeSuite,\n    'storage-manager': StorageManager,\n    'tetris': Tetris,\n    'video-editor': VideoEditor,\n    'roblox': Roblox,\n    'roblox-studio': RobloxStudio,\n    'pacman': PacMan,\n    'retro-emulator': RetroEmulator,\n    'ide': IDE,\n    'virtual-machine': VirtualMachine,\n    'download-manager': DownloadManager,\n    'performance-monitor': PerformanceMonitor,\n    'call-of-duty': CallOfDuty,\n    'multiplayer-shooter': MultiplayerShooter,\n    'video-tube': VideoTube,\n    // Advanced applications with live data\n    'weather-station': WeatherStation,\n    'news-center': NewsCenter,\n    'crypto-tracker': CryptoTracker,\n    'stock-market': StockMarket,\n    'game-center': GameCenter,\n    'productivity-suite': ProductivitySuite,\n    'system-monitor': SystemMonitor,\n    'advanced-dashboard': AdvancedDashboard,\n    'arch-package-manager': ArchPackageManager,\n    'hyprland-config': HyprlandConfig,\n    'system-wos': SystemWOS,\n    'proxy-test-center': ProxyTestCenter,\n    'cloud-storage': CloudStorage,\n    'network-manager': NetworkManager,\n    'network-status-monitor': NetworkStatusMonitor,\n    'color-palette-selector': ColorPaletteSelector,\n    'dev-tools': DevTools,\n    'package-manager-pro': PackageManagerPro,\n    'vm-manager': VMManager,\n    'system-backup': SystemBackup,\n    // Future apps\n    'music-player': () => <div className=\"h-full flex items-center justify-center text-muted-foreground\"><div className=\"text-center\"><i className=\"fas fa-music text-4xl mb-4 opacity-50\"></i><h3 className=\"text-lg font-medium mb-2\">Music Player</h3><p className=\"text-sm\">Coming Soon</p></div></div>,\n    'video-player': () => <div className=\"h-full flex items-center justify-center text-muted-foreground\"><div className=\"text-center\"><i className=\"fas fa-play-circle text-4xl mb-4 opacity-50\"></i><h3 className=\"text-lg font-medium mb-2\">Video Player</h3><p className=\"text-sm\">Coming Soon</p></div></div>,\n    'code-editor': () => <div className=\"h-full flex items-center justify-center text-muted-foreground\"><div className=\"text-center\"><i className=\"fas fa-code text-4xl mb-4 opacity-50\"></i><h3 className=\"text-lg font-medium mb-2\">Code Editor</h3><p className=\"text-sm\">Coming Soon</p></div></div>\n  };\n  \n  return componentMap[appId] || (() => <div className=\"h-full flex items-center justify-center text-muted-foreground\"><div className=\"text-center\"><i className=\"fas fa-question-circle text-4xl mb-4 opacity-50\"></i><h3 className=\"text-lg font-medium mb-2\">Application Not Found</h3><p className=\"text-sm\">App ID: {appId}</p></div></div>);\n};\n\nconst appConfigs: AppConfig[] = [\n  {\n    id: 'terminal',\n    name: 'Terminal',\n    icon: 'fas fa-terminal text-green-500',\n    component: Terminal\n  },\n  {\n    id: 'browser',\n    name: 'Web Browser',\n    icon: 'fas fa-globe text-blue-500',\n    component: Browser\n  },\n  {\n    id: 'package-manager',\n    name: 'App Store',\n    icon: 'fas fa-shopping-bag text-blue-500',\n    component: AppStore\n  },\n  {\n    id: 'file-manager',\n    name: 'File Manager',\n    icon: 'fas fa-folder text-yellow-500',\n    component: FileManager\n  },\n  {\n    id: 'text-editor',\n    name: 'Text Editor',\n    icon: 'fas fa-file-alt text-blue-500',\n    component: TextEditor\n  },\n  {\n    id: 'calculator',\n    name: 'Calculator',\n    icon: 'fas fa-calculator text-gray-700',\n    component: Calculator\n  },\n  {\n    id: 'settings',\n    name: 'Settings',\n    icon: 'fas fa-cog text-gray-600',\n    component: Settings\n  }\n];\n\ninterface WindowManagerProps {\n  onWindowsChange: (windows: any[]) => void;\n  onActiveWindowChange: (windowId: string | null) => void;\n  openApp: string | null;\n  onAppOpened: () => void;\n  onShutdown?: () => void;\n  onRestart?: () => void;\n  onLogout?: () => void;\n}\n\nexport const WindowManager: FC<WindowManagerProps> = ({\n  onWindowsChange,\n  onActiveWindowChange,\n  openApp,\n  onAppOpened,\n  onShutdown,\n  onRestart,\n  onLogout\n}) => {\n  const {\n    windows,\n    activeWindowId,\n    dragState,\n    closeWindow,\n    minimizeWindow,\n    maximizeWindow,\n    focusWindow,\n    moveWindow,\n    startDrag,\n    endDrag,\n    createWindow\n  } = useWindowManager();\n\n  // Remove problematic effects causing infinite loops\n  // useEffect(() => {\n  //   onWindowsChange(windows);\n  // }, [windows]);\n\n  // useEffect(() => {\n  //   onActiveWindowChange(activeWindowId);\n  // }, [activeWindowId]);\n\n  useEffect(() => {\n    if (openApp) {\n      console.log('WindowManager received openApp:', openApp);\n      console.log('Available appConfigs:', appConfigs.map(app => app.id));\n      \n      const appConfig = appConfigs.find(app => app.id === openApp);\n      if (appConfig) {\n        console.log('Found appConfig for:', openApp);\n        playSounds.windowOpen();\n        createWindow(appConfig.id, appConfig.name, appConfig.icon);\n      } else {\n        console.log('No appConfig found, checking component map for:', openApp);\n        // Check if we have a component for this app\n        const AppComponent = getAppComponent(openApp);\n        if (AppComponent && typeof AppComponent === 'function') {\n          console.log('Found component for:', openApp);\n          playSounds.windowOpen();\n          createWindow(openApp, openApp.charAt(0).toUpperCase() + openApp.slice(1), 'fas fa-app');\n        } else {\n          console.log('No component found for:', openApp);\n          // Handle dynamically installed apps\n          const stored = localStorage.getItem('installedApps');\n          if (stored) {\n            const installedApps = JSON.parse(stored);\n            const installedApp = installedApps.find((app: any) => app.id === openApp);\n            if (installedApp) {\n              console.log('Found installed app:', openApp);\n              playSounds.windowOpen();\n              createWindow(installedApp.id, installedApp.name, installedApp.icon);\n            } else {\n              console.log('App not found anywhere:', openApp);\n            }\n          }\n        }\n      }\n      onAppOpened();\n    }\n  }, [openApp, onAppOpened, createWindow]);\n\n  const handleDrag = (x: number, y: number) => {\n    if (dragState.isDragging && dragState.windowId) {\n      moveWindow(dragState.windowId, x, y);\n    }\n  };\n\n  return (\n    <div className=\"absolute inset-0 pointer-events-none\">\n      {windows.map((window) => {\n        const appConfig = appConfigs.find(app => app.id === window.app);\n        let AppComponent;\n        \n        if (appConfig) {\n          AppComponent = appConfig.component;\n        } else {\n          // Use dynamic component for installed apps\n          AppComponent = getAppComponent(window.app);\n        }\n\n        return (\n          <div key={window.id} className=\"pointer-events-auto\">\n            <Window\n              window={window}\n              isActive={activeWindowId === window.id}\n              onClose={() => {\n                playSounds.windowClose();\n                closeWindow(window.id);\n              }}\n              onMinimize={() => {\n                playSounds.windowMinimize();\n                minimizeWindow(window.id);\n              }}\n              onMaximize={() => {\n                playSounds.windowMaximize();\n                maximizeWindow(window.id);\n              }}\n              onFocus={() => {\n                playSounds.buttonClick();\n                focusWindow(window.id);\n              }}\n              onDragStart={(offsetX, offsetY) => startDrag(window.id, offsetX, offsetY)}\n              onDrag={handleDrag}\n              onDragEnd={endDrag}\n            >\n              {window.app === 'settings' ? (\n                <AppComponent \n                  onShutdown={onShutdown}\n                  onRestart={onRestart}\n                  onLogout={onLogout}\n                />\n              ) : (\n                <AppComponent />\n              )}\n            </Window>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n","size_bytes":12473},"README.md":{"content":"# WebOS - Modern Desktop Operating System\n\nA comprehensive web-based desktop operating system that emulates a Linux desktop environment entirely in the browser. WebOS features a complete window manager, file system, application ecosystem, user management, and desktop environment that mimics modern Linux distributions like Arch Linux.\n\n![WebOS Desktop](https://img.shields.io/badge/Platform-Web-brightgreen) ![React](https://img.shields.io/badge/React-18-blue) ![TypeScript](https://img.shields.io/badge/TypeScript-5.6-blue) ![License](https://img.shields.io/badge/License-MIT-green)\n\n## ✨ Features\n\n### 🖥️ Complete Desktop Environment\n- **Advanced Window Manager**: Hyprland-style automatic tiling with dragging, resizing, minimizing, and maximizing\n- **Multi-Workspace Support**: Virtual desktops with seamless window organization\n- **Interactive Desktop**: Right-click context menus, desktop icons, and file operations\n- **Modern Taskbar**: Running applications display with workspace controls\n\n### 🚀 Installation & User Management\n- **Arch Linux Installation Simulation**: Complete installation wizard with animated terminal output\n- **Multi-User System**: Secure user accounts with authentication and session management\n- **User Switching**: Fast user switching with login animations\n- **Factory Reset**: Complete system reset functionality\n\n### 📁 Advanced File System\n- **Hierarchical Structure**: Complete folder organization with unlimited nesting\n- **Database Persistence**: All files stored securely in PostgreSQL\n- **File Operations**: Create, edit, delete, move, and organize files and folders\n- **Cloud Integration**: Built-in cloud storage interface\n\n## 🎮 Application Ecosystem\n\n### Core Applications\n- **Terminal Emulator** - Full Linux command support with bash/zsh/fish simulation\n- **File Manager** - Complete file system navigation (thunar/nautilus style)\n- **Web Browser** - Tabbed browsing with bookmarks (Firefox/Chromium)\n- **Text Editor** - Code editing with syntax highlighting (vim/nano/gedit)\n\n### Productivity Suite\n- **Email Client** - Message management and composition\n- **Calendar** - Event scheduling with date picker\n- **Download Manager** - File download tracking\n- **Settings** - System configuration and customization\n\n### Development Tools\n- **Package Manager** - Arch Linux style package management (pacman/yay)\n- **Developer Tools** - Advanced development utilities\n- **Color Palette Editor** - Design tools for developers\n- **System Monitor** - Real-time performance metrics\n\n### Entertainment & Media\n- **Call of Duty Simulator** - Gaming experience with achievements\n- **Media Players** - Audio and video playback support\n- **Achievement System** - Progress tracking and unlockable rewards\n\n## 🚀 Quick Start\n\n### Prerequisites\n- Node.js 18 or higher\n- PostgreSQL database (or use included Neon serverless setup)\n\n### Installation\n\n1. **Clone and Install**\n   ```bash\n   git clone <repository-url>\n   cd webos\n   npm install\n   ```\n\n2. **Database Setup**\n   ```bash\n   npm run db:push\n   ```\n\n3. **Start Development Server**\n   ```bash\n   npm run dev\n   ```\n\n4. **Access WebOS**\n   Open `http://localhost:5000` in your browser\n\n### Production Deployment\n\n```bash\nnpm run build\nnpm start\n```\n\n## 🎯 Usage Guide\n\n### First Boot Experience\n1. **Installation Wizard** - Follow the Arch Linux-style setup process\n2. **User Account Creation** - Set up your primary user account\n3. **Desktop Exploration** - Try clicking desktop icons and applications\n4. **Window Management** - Open multiple apps and arrange windows\n\n### Essential Features to Explore\n\n#### Terminal Commands\n```bash\nls              # List directory contents\npwd             # Show current directory\ncat filename    # Display file contents\nps aux          # Show running processes\npacman -S app   # Install packages (Arch mode)\n```\n\n#### File Management\n- **Create Folders**: Right-click desktop or use file manager\n- **Upload Files**: Drag and drop or use file dialogs\n- **Edit Text Files**: Use built-in text editor\n- **Organize Content**: Move files between folders\n\n#### Window Operations\n- **Drag Windows**: Click and drag title bars\n- **Resize**: Drag from window corners and edges\n- **Minimize/Maximize**: Use window control buttons\n- **Auto-Tiling**: Windows automatically arrange in Hyprland style\n\n#### Workspace Management\n- **Switch Workspaces**: Use workspace controls in taskbar\n- **Move Windows**: Drag windows between workspaces\n- **Organize Tasks**: Separate work into different virtual desktops\n\n## 🏗️ Architecture Overview\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\nThe frontend uses a modern React-based Single Page Application (SPA) architecture with TypeScript:\n\n- **Component Architecture**: Modular component design with clear separation between desktop, window management, and individual applications\n- **State Management**: React hooks-based state management with local storage persistence for user settings and application data\n- **Routing**: Wouter library for client-side routing with dynamic route handling\n- **UI Framework**: Shadcn/ui components built on Radix UI primitives with Tailwind CSS for styling\n- **Window Management**: Custom window manager with drag-and-drop, resizing, minimizing, and workspace management\n- **Theme System**: Dynamic theming with CSS variables supporting dark/light modes and custom color palettes\n\n### Backend Architecture\nExpress.js server providing API endpoints and serving the React application:\n\n- **API Layer**: RESTful API with Express middleware for request handling and error management\n- **File Storage**: Mock file system implementation with localStorage persistence for demo purposes\n- **Proxy Services**: Advanced proxy utilities for external API integration with rate limiting and request queuing\n- **WebSocket Support**: Real-time communication capabilities for system monitoring and notifications\n\n### Database Layer\nPostgreSQL database with Drizzle ORM for type-safe database operations:\n\n- **Schema Design**: User accounts, file system hierarchy, and OS settings with proper relationships\n- **ORM Integration**: Drizzle ORM provides type-safe queries and migrations\n- **Connection Management**: Neon serverless PostgreSQL with connection pooling\n\n### Application Ecosystem\nComprehensive application suite mimicking a real desktop environment:\n\n- **Core Apps**: Terminal emulator, file manager, web browser, text editor, calculator\n- **Productivity**: Email client, calendar, download manager, cloud storage\n- **Development**: Developer tools, package manager, color palette editor\n- **Entertainment**: Games, media players, achievement system\n- **System**: Settings, account management, system monitoring\n\n### User Experience Features\n- **Installation Simulation**: Arch Linux-style installation process with animated terminal output\n- **Authentication**: Multi-user support with login screens and user switching\n- **Desktop Environment**: Draggable icons, right-click context menus, workspace management\n- **Sound System**: Comprehensive audio feedback for user interactions\n- **Accessibility**: Keyboard shortcuts, screen reader support, and responsive design\n\n## External Dependencies\n\n### Database Services\n- **Neon Database**: Serverless PostgreSQL hosting for user data and file system storage\n- **Drizzle Kit**: Database migrations and schema management\n\n### UI and Styling\n- **Radix UI**: Accessible component primitives for dialogs, dropdowns, and form elements\n- **Tailwind CSS**: Utility-first CSS framework for responsive design\n- **Lucide React**: Icon library for consistent iconography\n- **Framer Motion**: Animation library for smooth transitions and interactions\n\n### Development Tools\n- **Vite**: Build tool and development server with hot module replacement\n- **TypeScript**: Type safety and enhanced development experience\n- **ESBuild**: Fast JavaScript bundler for production builds\n\n### External APIs (Optional)\n- **YouTube API**: Video content integration for media applications\n- **Weather APIs**: Real-time weather data for dashboard widgets\n- **Cryptocurrency APIs**: Market data for crypto tracking applications\n- **News APIs**: Content aggregation for news and information feeds\n\n### Browser APIs\n- **Web Audio API**: Sound generation and audio feedback system\n- **Local Storage**: Client-side data persistence for user preferences and application data\n- **File System Access API**: Enhanced file operations where supported\n- **WebSocket API**: Real-time communication for system monitoring\n\nThe architecture emphasizes modularity, type safety, and user experience while maintaining the flexibility to add new applications and features. The system is designed to work entirely in the browser while providing hooks for server-side data persistence and external service integration.\n\n## 🛠️ Development\n\n### Project Structure\n```\nwebos/\n├── client/src/           # Frontend React application\n│   ├── components/       # Reusable UI components\n│   │   ├── desktop/      # Desktop environment\n│   │   ├── window/       # Window management\n│   │   ├── apps/         # Individual applications\n│   │   └── ui/           # Shadcn/ui components\n│   ├── hooks/            # Custom React hooks\n│   ├── lib/              # Utility libraries\n│   └── types/            # TypeScript definitions\n├── server/               # Backend Express.js server\n│   ├── index.ts          # Server entry point\n│   ├── routes.ts         # API routes\n│   ├── storage.ts        # Database operations\n│   └── db.ts             # Database connection\n├── shared/               # Shared TypeScript types\n│   └── schema.ts         # Database schema (Drizzle)\n└── vite.config.ts        # Build configuration\n```\n\n### Adding New Applications\n\n1. **Create Application Component**\n   ```typescript\n   // client/src/components/apps/MyApp.tsx\n   export const MyApp: FC = () => {\n     return (\n       <div className=\"p-4\">\n         <h1>My Custom Application</h1>\n         {/* Your app content */}\n       </div>\n     );\n   };\n   ```\n\n2. **Register in Desktop**\n   ```typescript\n   // Add to getDefaultDesktopApps in Desktop.tsx\n   { \n     id: 'my-app', \n     name: 'My App', \n     icon: 'app-icon', \n     description: 'My custom application' \n   }\n   ```\n\n3. **Add to App Launcher**\n   ```typescript\n   // Update AppLauncher.tsx to handle the new app\n   case 'my-app':\n     return <MyApp />;\n   ```\n\n### Database Schema Changes\n\n1. **Update Schema**\n   ```typescript\n   // shared/schema.ts\n   export const newTable = pgTable(\"new_table\", {\n     id: serial(\"id\").primaryKey(),\n     // Add your columns\n   });\n   ```\n\n2. **Update Storage Interface**\n   ```typescript\n   // server/storage.ts\n   export interface IStorage {\n     // Add new methods\n   }\n   ```\n\n3. **Push Changes**\n   ```bash\n   npm run db:push\n   ```\n\n### Available Scripts\n\n- `npm run dev` - Start development server\n- `npm run build` - Build for production\n- `npm run start` - Start production server\n- `npm run check` - TypeScript type checking\n- `npm run db:push` - Push database schema changes\n\n### Environment Variables\n\nCreate a `.env` file for development:\n```env\nDATABASE_URL=your_postgresql_connection_string\n```\n\n## 🎨 Customization\n\n### Themes\nWebOS supports dynamic theming with CSS variables:\n- **Dark/Light Modes**: Automatic system detection or manual toggle\n- **Color Palettes**: Customizable accent colors and backgrounds\n- **Pride Theme**: Special celebration themes\n\n### Sound System\n- **UI Feedback**: Button clicks, window operations, notifications\n- **System Sounds**: Login, logout, error notifications\n- **Customizable**: Enable/disable in settings\n\n### Desktop Customization\n- **Wallpapers**: Multiple background options\n- **Icon Arrangement**: Drag and drop desktop icons\n- **Workspace Configuration**: Customize virtual desktop behavior\n\n## 📚 API Reference\n\n### Window Management\n```typescript\n// Create new window\nconst windowId = createWindow('app-id', 'Window Title', 'icon-name');\n\n// Window operations\nminimizeWindow(windowId);\nmaximizeWindow(windowId);\ncloseWindow(windowId);\nfocusWindow(windowId);\n```\n\n### File System\n```typescript\n// File operations\nconst files = await storage.getUserFiles(userId, parentId);\nconst newFile = await storage.createFile(fileData);\nawait storage.updateFile(fileId, updates);\nawait storage.deleteFile(fileId);\n```\n\n### User Management\n```typescript\n// User operations\nconst user = await storage.createUser(userData);\nconst settings = await storage.getUserSettings(userId);\nawait storage.updateUserSettings(userId, settingsData);\n```\n\n## 🤝 Contributing\n\n1. **Fork the repository**\n2. **Create feature branch** (`git checkout -b feature/amazing-feature`)\n3. **Commit changes** (`git commit -m 'Add amazing feature'`)\n4. **Push to branch** (`git push origin feature/amazing-feature`)\n5. **Open Pull Request**\n\n### Development Guidelines\n\n- **Code Style**: Use TypeScript for all new code\n- **Components**: Follow React hooks patterns and functional components\n- **Styling**: Use Tailwind CSS utility classes and Shadcn/ui components\n- **Testing**: Ensure responsive design across different screen sizes\n- **Database**: Use Drizzle ORM for all database operations\n\n### Code Standards\n- **TypeScript**: Strict type checking enabled\n- **ESLint**: Follow configured linting rules\n- **Prettier**: Consistent code formatting\n- **Responsive Design**: Mobile-first approach with Tailwind CSS\n\n## 📄 License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## 🙏 Acknowledgments\n\n- **Inspiration**: Modern Linux desktop environments (GNOME, KDE, Hyprland)\n- **Design**: Arch Linux installation process and package management\n- **Technology**: React ecosystem and modern web standards\n- **Community**: Open source contributors and the web development community\n\n## 📞 Support\n\nFor support, feature requests, or bug reports:\n- Open an issue on GitHub\n- Join our community discussions\n- Check the documentation for common questions\n\n---\n\n**WebOS** - Bringing the power of desktop computing to the web 🚀","size_bytes":14302}},"version":1}